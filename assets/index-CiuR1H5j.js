var GI=Object.defineProperty;var qI=(n,t,e)=>t in n?GI(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var O=(n,t,e)=>(qI(n,typeof t!="symbol"?t+"":t,e),e),c0=(n,t,e)=>{if(!t.has(n))throw TypeError("Cannot "+e)};var d=(n,t,e)=>(c0(n,t,"read from private field"),e?e.call(n):t.get(n)),y=(n,t,e)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,e)},S=(n,t,e,i)=>(c0(n,t,"write to private field"),i?i.call(n,e):t.set(n,e),e);var Ge=(n,t,e,i)=>({set _(s){S(n,t,s,e)},get _(){return d(n,t,i)}}),b=(n,t,e)=>(c0(n,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();var NM={exports:{}},RA={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zI=Symbol.for("react.transitional.element"),$I=Symbol.for("react.fragment");function IM(n,t,e){var i=null;if(e!==void 0&&(i=""+e),t.key!==void 0&&(i=""+t.key),"key"in t){e={};for(var s in t)s!=="key"&&(e[s]=t[s])}else e=t;return t=e.ref,{$$typeof:zI,type:n,key:i,ref:t!==void 0?t:null,props:e}}RA.Fragment=$I;RA.jsx=IM;RA.jsxs=IM;NM.exports=RA;var $=NM.exports,LM={exports:{}},j={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE=Symbol.for("react.transitional.element"),YI=Symbol.for("react.portal"),XI=Symbol.for("react.fragment"),JI=Symbol.for("react.strict_mode"),KI=Symbol.for("react.profiler"),WI=Symbol.for("react.consumer"),QI=Symbol.for("react.context"),ZI=Symbol.for("react.forward_ref"),jI=Symbol.for("react.suspense"),tL=Symbol.for("react.memo"),PM=Symbol.for("react.lazy"),o_=Symbol.iterator;function eL(n){return n===null||typeof n!="object"?null:(n=o_&&n[o_]||n["@@iterator"],typeof n=="function"?n:null)}var kM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UM=Object.assign,FM={};function lf(n,t,e){this.props=n,this.context=t,this.refs=FM,this.updater=e||kM}lf.prototype.isReactComponent={};lf.prototype.setState=function(n,t){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,t,"setState")};lf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function OM(){}OM.prototype=lf.prototype;function UE(n,t,e){this.props=n,this.context=t,this.refs=FM,this.updater=e||kM}var FE=UE.prototype=new OM;FE.constructor=UE;UM(FE,lf.prototype);FE.isPureReactComponent=!0;var r_=Array.isArray,Lt={H:null,A:null,T:null,S:null,V:null},BM=Object.prototype.hasOwnProperty;function OE(n,t,e,i,s,o){return e=o.ref,{$$typeof:kE,type:n,key:t,ref:e!==void 0?e:null,props:o}}function nL(n,t){return OE(n.type,t,void 0,void 0,void 0,n.props)}function BE(n){return typeof n=="object"&&n!==null&&n.$$typeof===kE}function iL(n){var t={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(e){return t[e]})}var a_=/\/+/g;function f0(n,t){return typeof n=="object"&&n!==null&&n.key!=null?iL(""+n.key):t.toString(36)}function l_(){}function sL(n){switch(n.status){case"fulfilled":return n.value;case"rejected":throw n.reason;default:switch(typeof n.status=="string"?n.then(l_,l_):(n.status="pending",n.then(function(t){n.status==="pending"&&(n.status="fulfilled",n.value=t)},function(t){n.status==="pending"&&(n.status="rejected",n.reason=t)})),n.status){case"fulfilled":return n.value;case"rejected":throw n.reason}}throw n}function Ll(n,t,e,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var r=!1;if(n===null)r=!0;else switch(o){case"bigint":case"string":case"number":r=!0;break;case"object":switch(n.$$typeof){case kE:case YI:r=!0;break;case PM:return r=n._init,Ll(r(n._payload),t,e,i,s)}}if(r)return s=s(n),r=i===""?"."+f0(n,0):i,r_(s)?(e="",r!=null&&(e=r.replace(a_,"$&/")+"/"),Ll(s,t,e,"",function(u){return u})):s!=null&&(BE(s)&&(s=nL(s,e+(s.key==null||n&&n.key===s.key?"":(""+s.key).replace(a_,"$&/")+"/")+r)),t.push(s)),1;r=0;var a=i===""?".":i+":";if(r_(n))for(var l=0;l<n.length;l++)i=n[l],o=a+f0(i,l),r+=Ll(i,t,e,o,s);else if(l=eL(n),typeof l=="function")for(n=l.call(n),l=0;!(i=n.next()).done;)i=i.value,o=a+f0(i,l++),r+=Ll(i,t,e,o,s);else if(o==="object"){if(typeof n.then=="function")return Ll(sL(n),t,e,i,s);throw t=String(n),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Rg(n,t,e){if(n==null)return n;var i=[],s=0;return Ll(n,i,"","",function(o){return t.call(e,o,s++)}),i}function oL(n){if(n._status===-1){var t=n._result;t=t(),t.then(function(e){(n._status===0||n._status===-1)&&(n._status=1,n._result=e)},function(e){(n._status===0||n._status===-1)&&(n._status=2,n._result=e)}),n._status===-1&&(n._status=0,n._result=t)}if(n._status===1)return n._result.default;throw n._result}var u_=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function rL(){}j.Children={map:Rg,forEach:function(n,t,e){Rg(n,function(){t.apply(this,arguments)},e)},count:function(n){var t=0;return Rg(n,function(){t++}),t},toArray:function(n){return Rg(n,function(t){return t})||[]},only:function(n){if(!BE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};j.Component=lf;j.Fragment=XI;j.Profiler=KI;j.PureComponent=UE;j.StrictMode=JI;j.Suspense=jI;j.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Lt;j.__COMPILER_RUNTIME={__proto__:null,c:function(n){return Lt.H.useMemoCache(n)}};j.cache=function(n){return function(){return n.apply(null,arguments)}};j.cloneElement=function(n,t,e){if(n==null)throw Error("The argument must be a React element, but you passed "+n+".");var i=UM({},n.props),s=n.key,o=void 0;if(t!=null)for(r in t.ref!==void 0&&(o=void 0),t.key!==void 0&&(s=""+t.key),t)!BM.call(t,r)||r==="key"||r==="__self"||r==="__source"||r==="ref"&&t.ref===void 0||(i[r]=t[r]);var r=arguments.length-2;if(r===1)i.children=e;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];i.children=a}return OE(n.type,s,void 0,void 0,o,i)};j.createContext=function(n){return n={$$typeof:QI,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null},n.Provider=n,n.Consumer={$$typeof:WI,_context:n},n};j.createElement=function(n,t,e){var i,s={},o=null;if(t!=null)for(i in t.key!==void 0&&(o=""+t.key),t)BM.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(s[i]=t[i]);var r=arguments.length-2;if(r===1)s.children=e;else if(1<r){for(var a=Array(r),l=0;l<r;l++)a[l]=arguments[l+2];s.children=a}if(n&&n.defaultProps)for(i in r=n.defaultProps,r)s[i]===void 0&&(s[i]=r[i]);return OE(n,o,void 0,void 0,null,s)};j.createRef=function(){return{current:null}};j.forwardRef=function(n){return{$$typeof:ZI,render:n}};j.isValidElement=BE;j.lazy=function(n){return{$$typeof:PM,_payload:{_status:-1,_result:n},_init:oL}};j.memo=function(n,t){return{$$typeof:tL,type:n,compare:t===void 0?null:t}};j.startTransition=function(n){var t=Lt.T,e={};Lt.T=e;try{var i=n(),s=Lt.S;s!==null&&s(e,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(rL,u_)}catch(o){u_(o)}finally{Lt.T=t}};j.unstable_useCacheRefresh=function(){return Lt.H.useCacheRefresh()};j.use=function(n){return Lt.H.use(n)};j.useActionState=function(n,t,e){return Lt.H.useActionState(n,t,e)};j.useCallback=function(n,t){return Lt.H.useCallback(n,t)};j.useContext=function(n){return Lt.H.useContext(n)};j.useDebugValue=function(){};j.useDeferredValue=function(n,t){return Lt.H.useDeferredValue(n,t)};j.useEffect=function(n,t,e){var i=Lt.H;if(typeof e=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(n,t)};j.useId=function(){return Lt.H.useId()};j.useImperativeHandle=function(n,t,e){return Lt.H.useImperativeHandle(n,t,e)};j.useInsertionEffect=function(n,t){return Lt.H.useInsertionEffect(n,t)};j.useLayoutEffect=function(n,t){return Lt.H.useLayoutEffect(n,t)};j.useMemo=function(n,t){return Lt.H.useMemo(n,t)};j.useOptimistic=function(n,t){return Lt.H.useOptimistic(n,t)};j.useReducer=function(n,t,e){return Lt.H.useReducer(n,t,e)};j.useRef=function(n){return Lt.H.useRef(n)};j.useState=function(n){return Lt.H.useState(n)};j.useSyncExternalStore=function(n,t,e){return Lt.H.useSyncExternalStore(n,t,e)};j.useTransition=function(){return Lt.H.useTransition()};j.version="19.1.0";LM.exports=j;var te=LM.exports,HM={exports:{}},DA={},VM={exports:{}},GM={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function t(L,F){var z=L.length;L.push(F);t:for(;0<z;){var ut=z-1>>>1,Ct=L[ut];if(0<s(Ct,F))L[ut]=F,L[z]=Ct,z=ut;else break t}}function e(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var F=L[0],z=L.pop();if(z!==F){L[0]=z;t:for(var ut=0,Ct=L.length,je=Ct>>>1;ut<je;){var kt=2*(ut+1)-1,wt=L[kt],tn=kt+1,gn=L[tn];if(0>s(wt,z))tn<Ct&&0>s(gn,wt)?(L[ut]=gn,L[tn]=z,ut=tn):(L[ut]=wt,L[kt]=z,ut=kt);else if(tn<Ct&&0>s(gn,z))L[ut]=gn,L[tn]=z,ut=tn;else break t}}return F}function s(L,F){var z=L.sortIndex-F.sortIndex;return z!==0?z:L.id-F.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var r=Date,a=r.now();n.unstable_now=function(){return r.now()-a}}var l=[],u=[],h=1,p=null,g=3,m=!1,v=!1,A=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function w(L){for(var F=e(u);F!==null;){if(F.callback===null)i(u);else if(F.startTime<=L)i(u),F.sortIndex=F.expirationTime,t(l,F);else break;F=e(u)}}function M(L){if(A=!1,w(L),!v)if(e(l)!==null)v=!0,R||(R=!0,Y());else{var F=e(u);F!==null&&dt(M,F.startTime-L)}}var R=!1,x=-1,D=5,N=-1;function P(){return _?!0:!(n.unstable_now()-N<D)}function U(){if(_=!1,R){var L=n.unstable_now();N=L;var F=!0;try{t:{v=!1,A&&(A=!1,E(x),x=-1),m=!0;var z=g;try{e:{for(w(L),p=e(l);p!==null&&!(p.expirationTime>L&&P());){var ut=p.callback;if(typeof ut=="function"){p.callback=null,g=p.priorityLevel;var Ct=ut(p.expirationTime<=L);if(L=n.unstable_now(),typeof Ct=="function"){p.callback=Ct,w(L),F=!0;break e}p===e(l)&&i(l),w(L)}else i(l);p=e(l)}if(p!==null)F=!0;else{var je=e(u);je!==null&&dt(M,je.startTime-L),F=!1}}break t}finally{p=null,g=z,m=!1}F=void 0}}finally{F?Y():R=!1}}}var Y;if(typeof C=="function")Y=function(){C(U)};else if(typeof MessageChannel<"u"){var rt=new MessageChannel,W=rt.port2;rt.port1.onmessage=U,Y=function(){W.postMessage(null)}}else Y=function(){T(U,0)};function dt(L,F){x=T(function(){L(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(L){switch(g){case 1:case 2:case 3:var F=3;break;default:F=g}var z=g;g=F;try{return L()}finally{g=z}},n.unstable_requestPaint=function(){_=!0},n.unstable_runWithPriority=function(L,F){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var z=g;g=L;try{return F()}finally{g=z}},n.unstable_scheduleCallback=function(L,F,z){var ut=n.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?ut+z:ut):z=ut,L){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=z+Ct,L={id:h++,callback:F,priorityLevel:L,startTime:z,expirationTime:Ct,sortIndex:-1},z>ut?(L.sortIndex=z,t(u,L),e(l)===null&&L===e(u)&&(A?(E(x),x=-1):A=!0,dt(M,z-ut))):(L.sortIndex=Ct,t(l,L),v||m||(v=!0,R||(R=!0,Y()))),L},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(L){var F=g;return function(){var z=g;g=F;try{return L.apply(this,arguments)}finally{g=z}}}})(GM);VM.exports=GM;var aL=VM.exports,qM={exports:{}},Ze={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lL=te;function zM(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ao(){}var Qe={d:{f:ao,r:function(){throw Error(zM(522))},D:ao,C:ao,L:ao,m:ao,X:ao,S:ao,M:ao},p:0,findDOMNode:null},uL=Symbol.for("react.portal");function cL(n,t,e){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:uL,key:i==null?null:""+i,children:n,containerInfo:t,implementation:e}}var od=lL.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function NA(n,t){if(n==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}Ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Qe;Ze.createPortal=function(n,t){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(zM(299));return cL(n,t,null,e)};Ze.flushSync=function(n){var t=od.T,e=Qe.p;try{if(od.T=null,Qe.p=2,n)return n()}finally{od.T=t,Qe.p=e,Qe.d.f()}};Ze.preconnect=function(n,t){typeof n=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,Qe.d.C(n,t))};Ze.prefetchDNS=function(n){typeof n=="string"&&Qe.d.D(n)};Ze.preinit=function(n,t){if(typeof n=="string"&&t&&typeof t.as=="string"){var e=t.as,i=NA(e,t.crossOrigin),s=typeof t.integrity=="string"?t.integrity:void 0,o=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;e==="style"?Qe.d.S(n,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:s,fetchPriority:o}):e==="script"&&Qe.d.X(n,{crossOrigin:i,integrity:s,fetchPriority:o,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};Ze.preinitModule=function(n,t){if(typeof n=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var e=NA(t.as,t.crossOrigin);Qe.d.M(n,{crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&Qe.d.M(n)};Ze.preload=function(n,t){if(typeof n=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var e=t.as,i=NA(e,t.crossOrigin);Qe.d.L(n,e,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};Ze.preloadModule=function(n,t){if(typeof n=="string")if(t){var e=NA(t.as,t.crossOrigin);Qe.d.m(n,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:e,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else Qe.d.m(n)};Ze.requestFormReset=function(n){Qe.d.r(n)};Ze.unstable_batchedUpdates=function(n,t){return n(t)};Ze.useFormState=function(n,t,e){return od.H.useFormState(n,t,e)};Ze.useFormStatus=function(){return od.H.useHostTransitionStatus()};Ze.version="19.1.0";function $M(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($M)}catch(n){console.error(n)}}$M(),qM.exports=Ze;var fL=qM.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ue=aL,YM=te,dL=fL;function k(n){var t="https://react.dev/errors/"+n;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var e=2;e<arguments.length;e++)t+="&args[]="+encodeURIComponent(arguments[e])}return"Minified React error #"+n+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function XM(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function ng(n){var t=n,e=n;if(n.alternate)for(;t.return;)t=t.return;else{n=t;do t=n,t.flags&4098&&(e=t.return),n=t.return;while(n)}return t.tag===3?e:null}function JM(n){if(n.tag===13){var t=n.memoizedState;if(t===null&&(n=n.alternate,n!==null&&(t=n.memoizedState)),t!==null)return t.dehydrated}return null}function c_(n){if(ng(n)!==n)throw Error(k(188))}function hL(n){var t=n.alternate;if(!t){if(t=ng(n),t===null)throw Error(k(188));return t!==n?null:n}for(var e=n,i=t;;){var s=e.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){e=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===e)return c_(s),n;if(o===i)return c_(s),t;o=o.sibling}throw Error(k(188))}if(e.return!==i.return)e=s,i=o;else{for(var r=!1,a=s.child;a;){if(a===e){r=!0,e=s,i=o;break}if(a===i){r=!0,i=s,e=o;break}a=a.sibling}if(!r){for(a=o.child;a;){if(a===e){r=!0,e=o,i=s;break}if(a===i){r=!0,i=o,e=s;break}a=a.sibling}if(!r)throw Error(k(189))}}if(e.alternate!==i)throw Error(k(190))}if(e.tag!==3)throw Error(k(188));return e.stateNode.current===e?n:t}function KM(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n;for(n=n.child;n!==null;){if(t=KM(n),t!==null)return t;n=n.sibling}return null}var xt=Object.assign,pL=Symbol.for("react.element"),Dg=Symbol.for("react.transitional.element"),Uf=Symbol.for("react.portal"),zl=Symbol.for("react.fragment"),WM=Symbol.for("react.strict_mode"),sT=Symbol.for("react.profiler"),gL=Symbol.for("react.provider"),QM=Symbol.for("react.consumer"),Xs=Symbol.for("react.context"),HE=Symbol.for("react.forward_ref"),oT=Symbol.for("react.suspense"),rT=Symbol.for("react.suspense_list"),VE=Symbol.for("react.memo"),fo=Symbol.for("react.lazy"),aT=Symbol.for("react.activity"),mL=Symbol.for("react.memo_cache_sentinel"),f_=Symbol.iterator;function Ef(n){return n===null||typeof n!="object"?null:(n=f_&&n[f_]||n["@@iterator"],typeof n=="function"?n:null)}var yL=Symbol.for("react.client.reference");function lT(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===yL?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case zl:return"Fragment";case sT:return"Profiler";case WM:return"StrictMode";case oT:return"Suspense";case rT:return"SuspenseList";case aT:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case Uf:return"Portal";case Xs:return(n.displayName||"Context")+".Provider";case QM:return(n._context.displayName||"Context")+".Consumer";case HE:var t=n.render;return n=n.displayName,n||(n=t.displayName||t.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case VE:return t=n.displayName||null,t!==null?t:lT(n.type)||"Memo";case fo:t=n._payload,n=n._init;try{return lT(n(t))}catch{}}return null}var Ff=Array.isArray,X=YM.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ft=dL.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,rl={pending:!1,data:null,method:null,action:null},uT=[],$l=-1;function is(n){return{current:n}}function Se(n){0>$l||(n.current=uT[$l],uT[$l]=null,$l--)}function Pt(n,t){$l++,uT[$l]=n.current,n.current=t}var ji=is(null),Sd=is(null),dr=is(null),Jm=is(null);function Km(n,t){switch(Pt(dr,t),Pt(Sd,n),Pt(ji,null),t.nodeType){case 9:case 11:n=(n=t.documentElement)&&(n=n.namespaceURI)?mb(n):0;break;default:if(n=t.tagName,t=t.namespaceURI)t=mb(t),n=p1(t,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}Se(ji),Pt(ji,n)}function Wc(){Se(ji),Se(Sd),Se(dr)}function cT(n){n.memoizedState!==null&&Pt(Jm,n);var t=ji.current,e=p1(t,n.type);t!==e&&(Pt(Sd,n),Pt(ji,e))}function Wm(n){Sd.current===n&&(Se(ji),Se(Sd)),Jm.current===n&&(Se(Jm),Nd._currentValue=rl)}var fT=Object.prototype.hasOwnProperty,GE=ue.unstable_scheduleCallback,d0=ue.unstable_cancelCallback,vL=ue.unstable_shouldYield,AL=ue.unstable_requestPaint,ts=ue.unstable_now,TL=ue.unstable_getCurrentPriorityLevel,ZM=ue.unstable_ImmediatePriority,jM=ue.unstable_UserBlockingPriority,Qm=ue.unstable_NormalPriority,SL=ue.unstable_LowPriority,tx=ue.unstable_IdlePriority,EL=ue.log,CL=ue.unstable_setDisableYieldValue,ig=null,Fn=null;function ar(n){if(typeof EL=="function"&&CL(n),Fn&&typeof Fn.setStrictMode=="function")try{Fn.setStrictMode(ig,n)}catch{}}var On=Math.clz32?Math.clz32:wL,_L=Math.log,bL=Math.LN2;function wL(n){return n>>>=0,n===0?32:31-(_L(n)/bL|0)|0}var Ng=256,Ig=4194304;function xr(n){var t=n&42;if(t!==0)return t;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function IA(n,t,e){var i=n.pendingLanes;if(i===0)return 0;var s=0,o=n.suspendedLanes,r=n.pingedLanes;n=n.warmLanes;var a=i&134217727;return a!==0?(i=a&~o,i!==0?s=xr(i):(r&=a,r!==0?s=xr(r):e||(e=a&~n,e!==0&&(s=xr(e))))):(a=i&~o,a!==0?s=xr(a):r!==0?s=xr(r):e||(e=i&~n,e!==0&&(s=xr(e)))),s===0?0:t!==0&&t!==s&&!(t&o)&&(o=s&-s,e=t&-t,o>=e||o===32&&(e&4194048)!==0)?t:s}function sg(n,t){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&t)===0}function ML(n,t){switch(n){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ex(){var n=Ng;return Ng<<=1,!(Ng&4194048)&&(Ng=256),n}function nx(){var n=Ig;return Ig<<=1,!(Ig&62914560)&&(Ig=4194304),n}function h0(n){for(var t=[],e=0;31>e;e++)t.push(n);return t}function og(n,t){n.pendingLanes|=t,t!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xL(n,t,e,i,s,o){var r=n.pendingLanes;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=e,n.entangledLanes&=e,n.errorRecoveryDisabledLanes&=e,n.shellSuspendCounter=0;var a=n.entanglements,l=n.expirationTimes,u=n.hiddenUpdates;for(e=r&~e;0<e;){var h=31-On(e),p=1<<h;a[h]=0,l[h]=-1;var g=u[h];if(g!==null)for(u[h]=null,h=0;h<g.length;h++){var m=g[h];m!==null&&(m.lane&=-536870913)}e&=~p}i!==0&&ix(n,i,0),o!==0&&s===0&&n.tag!==0&&(n.suspendedLanes|=o&~(r&~t))}function ix(n,t,e){n.pendingLanes|=t,n.suspendedLanes&=~t;var i=31-On(t);n.entangledLanes|=t,n.entanglements[i]=n.entanglements[i]|1073741824|e&4194090}function sx(n,t){var e=n.entangledLanes|=t;for(n=n.entanglements;e;){var i=31-On(e),s=1<<i;s&t|n[i]&t&&(n[i]|=t),e&=~s}}function qE(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function zE(n){return n&=-n,2<n?8<n?n&134217727?32:268435456:8:2}function ox(){var n=ft.p;return n!==0?n:(n=window.event,n===void 0?32:_1(n.type))}function RL(n,t){var e=ft.p;try{return ft.p=n,t()}finally{ft.p=e}}var br=Math.random().toString(36).slice(2),Be="__reactFiber$"+br,hn="__reactProps$"+br,uf="__reactContainer$"+br,dT="__reactEvents$"+br,DL="__reactListeners$"+br,NL="__reactHandles$"+br,d_="__reactResources$"+br,rg="__reactMarker$"+br;function $E(n){delete n[Be],delete n[hn],delete n[dT],delete n[DL],delete n[NL]}function Yl(n){var t=n[Be];if(t)return t;for(var e=n.parentNode;e;){if(t=e[uf]||e[Be]){if(e=t.alternate,t.child!==null||e!==null&&e.child!==null)for(n=Ab(n);n!==null;){if(e=n[Be])return e;n=Ab(n)}return t}n=e,e=n.parentNode}return null}function cf(n){if(n=n[Be]||n[uf]){var t=n.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return n}return null}function Of(n){var t=n.tag;if(t===5||t===26||t===27||t===6)return n.stateNode;throw Error(k(33))}function ru(n){var t=n[d_];return t||(t=n[d_]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ae(n){n[rg]=!0}var rx=new Set,ax={};function Cl(n,t){Qc(n,t),Qc(n+"Capture",t)}function Qc(n,t){for(ax[n]=t,n=0;n<t.length;n++)rx.add(t[n])}var IL=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),h_={},p_={};function LL(n){return fT.call(p_,n)?!0:fT.call(h_,n)?!1:IL.test(n)?p_[n]=!0:(h_[n]=!0,!1)}function jg(n,t,e){if(LL(t))if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":n.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){n.removeAttribute(t);return}}n.setAttribute(t,""+e)}}function Lg(n,t,e){if(e===null)n.removeAttribute(t);else{switch(typeof e){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(t);return}n.setAttribute(t,""+e)}}function os(n,t,e,i){if(i===null)n.removeAttribute(e);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(e);return}n.setAttributeNS(t,e,""+i)}}var p0,g_;function Pl(n){if(p0===void 0)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);p0=t&&t[1]||"",g_=-1<e.stack.indexOf(`
    at`)?" (<anonymous>)":-1<e.stack.indexOf("@")?"@unknown:0:0":""}return`
`+p0+n+g_}var g0=!1;function m0(n,t){if(!n||g0)return"";g0=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var p=function(){throw Error()};if(Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(m){var g=m}Reflect.construct(n,[],p)}else{try{p.call()}catch(m){g=m}n.call(p.prototype)}}else{try{throw Error()}catch(m){g=m}(p=n())&&typeof p.catch=="function"&&p.catch(function(){})}}catch(m){if(m&&g&&typeof m.stack=="string")return[m.stack,g.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=i.DetermineComponentFrameRoot(),r=o[0],a=o[1];if(r&&a){var l=r.split(`
`),u=a.split(`
`);for(s=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;s<u.length&&!u[s].includes("DetermineComponentFrameRoot");)s++;if(i===l.length||s===u.length)for(i=l.length-1,s=u.length-1;1<=i&&0<=s&&l[i]!==u[s];)s--;for(;1<=i&&0<=s;i--,s--)if(l[i]!==u[s]){if(i!==1||s!==1)do if(i--,s--,0>s||l[i]!==u[s]){var h=`
`+l[i].replace(" at new "," at ");return n.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",n.displayName)),h}while(1<=i&&0<=s);break}}}finally{g0=!1,Error.prepareStackTrace=e}return(e=n?n.displayName||n.name:"")?Pl(e):""}function PL(n){switch(n.tag){case 26:case 27:case 5:return Pl(n.type);case 16:return Pl("Lazy");case 13:return Pl("Suspense");case 19:return Pl("SuspenseList");case 0:case 15:return m0(n.type,!1);case 11:return m0(n.type.render,!1);case 1:return m0(n.type,!0);case 31:return Pl("Activity");default:return""}}function m_(n){try{var t="";do t+=PL(n),n=n.return;while(n);return t}catch(e){return`
Error generating stack: `+e.message+`
`+e.stack}}function Zn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function lx(n){var t=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kL(n){var t=lx(n)?"checked":"value",e=Object.getOwnPropertyDescriptor(n.constructor.prototype,t),i=""+n[t];if(!n.hasOwnProperty(t)&&typeof e<"u"&&typeof e.get=="function"&&typeof e.set=="function"){var s=e.get,o=e.set;return Object.defineProperty(n,t,{configurable:!0,get:function(){return s.call(this)},set:function(r){i=""+r,o.call(this,r)}}),Object.defineProperty(n,t,{enumerable:e.enumerable}),{getValue:function(){return i},setValue:function(r){i=""+r},stopTracking:function(){n._valueTracker=null,delete n[t]}}}}function Zm(n){n._valueTracker||(n._valueTracker=kL(n))}function ux(n){if(!n)return!1;var t=n._valueTracker;if(!t)return!0;var e=t.getValue(),i="";return n&&(i=lx(n)?n.checked?"true":"false":n.value),n=i,n!==e?(t.setValue(n),!0):!1}function jm(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var UL=/[\n"\\]/g;function ei(n){return n.replace(UL,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function hT(n,t,e,i,s,o,r,a){n.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?n.type=r:n.removeAttribute("type"),t!=null?r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+Zn(t)):n.value!==""+Zn(t)&&(n.value=""+Zn(t)):r!=="submit"&&r!=="reset"||n.removeAttribute("value"),t!=null?pT(n,r,Zn(t)):e!=null?pT(n,r,Zn(e)):i!=null&&n.removeAttribute("value"),s==null&&o!=null&&(n.defaultChecked=!!o),s!=null&&(n.checked=s&&typeof s!="function"&&typeof s!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?n.name=""+Zn(a):n.removeAttribute("name")}function cx(n,t,e,i,s,o,r,a){if(o!=null&&typeof o!="function"&&typeof o!="symbol"&&typeof o!="boolean"&&(n.type=o),t!=null||e!=null){if(!(o!=="submit"&&o!=="reset"||t!=null))return;e=e!=null?""+Zn(e):"",t=t!=null?""+Zn(t):e,a||t===n.value||(n.value=t),n.defaultValue=t}i=i??s,i=typeof i!="function"&&typeof i!="symbol"&&!!i,n.checked=a?n.checked:!!i,n.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(n.name=r)}function pT(n,t,e){t==="number"&&jm(n.ownerDocument)===n||n.defaultValue===""+e||(n.defaultValue=""+e)}function au(n,t,e,i){if(n=n.options,t){t={};for(var s=0;s<e.length;s++)t["$"+e[s]]=!0;for(e=0;e<n.length;e++)s=t.hasOwnProperty("$"+n[e].value),n[e].selected!==s&&(n[e].selected=s),s&&i&&(n[e].defaultSelected=!0)}else{for(e=""+Zn(e),t=null,s=0;s<n.length;s++){if(n[s].value===e){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}t!==null||n[s].disabled||(t=n[s])}t!==null&&(t.selected=!0)}}function fx(n,t,e){if(t!=null&&(t=""+Zn(t),t!==n.value&&(n.value=t),e==null)){n.defaultValue!==t&&(n.defaultValue=t);return}n.defaultValue=e!=null?""+Zn(e):""}function dx(n,t,e,i){if(t==null){if(i!=null){if(e!=null)throw Error(k(92));if(Ff(i)){if(1<i.length)throw Error(k(93));i=i[0]}e=i}e==null&&(e=""),t=e}e=Zn(t),n.defaultValue=e,i=n.textContent,i===e&&i!==""&&i!==null&&(n.value=i)}function Zc(n,t){if(t){var e=n.firstChild;if(e&&e===n.lastChild&&e.nodeType===3){e.nodeValue=t;return}}n.textContent=t}var FL=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function y_(n,t,e){var i=t.indexOf("--")===0;e==null||typeof e=="boolean"||e===""?i?n.setProperty(t,""):t==="float"?n.cssFloat="":n[t]="":i?n.setProperty(t,e):typeof e!="number"||e===0||FL.has(t)?t==="float"?n.cssFloat=e:n[t]=(""+e).trim():n[t]=e+"px"}function hx(n,t,e){if(t!=null&&typeof t!="object")throw Error(k(62));if(n=n.style,e!=null){for(var i in e)!e.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?n.setProperty(i,""):i==="float"?n.cssFloat="":n[i]="");for(var s in t)i=t[s],t.hasOwnProperty(s)&&e[s]!==i&&y_(n,s,i)}else for(var o in t)t.hasOwnProperty(o)&&y_(n,o,t[o])}function YE(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var OL=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BL=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function tm(n){return BL.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var gT=null;function XE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xl=null,lu=null;function v_(n){var t=cf(n);if(t&&(n=t.stateNode)){var e=n[hn]||null;t:switch(n=t.stateNode,t.type){case"input":if(hT(n,e.value,e.defaultValue,e.defaultValue,e.checked,e.defaultChecked,e.type,e.name),t=e.name,e.type==="radio"&&t!=null){for(e=n;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll('input[name="'+ei(""+t)+'"][type="radio"]'),t=0;t<e.length;t++){var i=e[t];if(i!==n&&i.form===n.form){var s=i[hn]||null;if(!s)throw Error(k(90));hT(i,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<e.length;t++)i=e[t],i.form===n.form&&ux(i)}break t;case"textarea":fx(n,e.value,e.defaultValue);break t;case"select":t=e.value,t!=null&&au(n,!!e.multiple,t,!1)}}}var y0=!1;function px(n,t,e){if(y0)return n(t,e);y0=!0;try{var i=n(t);return i}finally{if(y0=!1,(Xl!==null||lu!==null)&&(GA(),Xl&&(t=Xl,n=lu,lu=Xl=null,v_(t),n)))for(t=0;t<n.length;t++)v_(n[t])}}function Ed(n,t){var e=n.stateNode;if(e===null)return null;var i=e[hn]||null;if(i===null)return null;e=i[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break t;default:n=!1}if(n)return null;if(e&&typeof e!="function")throw Error(k(231,t,typeof e));return e}var to=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mT=!1;if(to)try{var Cf={};Object.defineProperty(Cf,"passive",{get:function(){mT=!0}}),window.addEventListener("test",Cf,Cf),window.removeEventListener("test",Cf,Cf)}catch{mT=!1}var lr=null,JE=null,em=null;function gx(){if(em)return em;var n,t=JE,e=t.length,i,s="value"in lr?lr.value:lr.textContent,o=s.length;for(n=0;n<e&&t[n]===s[n];n++);var r=e-n;for(i=1;i<=r&&t[e-i]===s[o-i];i++);return em=s.slice(n,1<i?1-i:void 0)}function nm(n){var t=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&t===13&&(n=13)):n=t,n===10&&(n=13),32<=n||n===13?n:0}function Pg(){return!0}function A_(){return!1}function pn(n){function t(e,i,s,o,r){this._reactName=e,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=r,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(e=n[a],this[a]=e?e(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Pg:A_,this.isPropagationStopped=A_,this}return xt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=Pg)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=Pg)},persist:function(){},isPersistent:Pg}),t}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},LA=pn(_l),ag=xt({},_l,{view:0,detail:0}),HL=pn(ag),v0,A0,_f,PA=xt({},ag,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:KE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==_f&&(_f&&n.type==="mousemove"?(v0=n.screenX-_f.screenX,A0=n.screenY-_f.screenY):A0=v0=0,_f=n),v0)},movementY:function(n){return"movementY"in n?n.movementY:A0}}),T_=pn(PA),VL=xt({},PA,{dataTransfer:0}),GL=pn(VL),qL=xt({},ag,{relatedTarget:0}),T0=pn(qL),zL=xt({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),$L=pn(zL),YL=xt({},_l,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),XL=pn(YL),JL=xt({},_l,{data:0}),S_=pn(JL),KL={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WL={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QL={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZL(n){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(n):(n=QL[n])?!!t[n]:!1}function KE(){return ZL}var jL=xt({},ag,{key:function(n){if(n.key){var t=KL[n.key]||n.key;if(t!=="Unidentified")return t}return n.type==="keypress"?(n=nm(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?WL[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:KE,charCode:function(n){return n.type==="keypress"?nm(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nm(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),tP=pn(jL),eP=xt({},PA,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E_=pn(eP),nP=xt({},ag,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:KE}),iP=pn(nP),sP=xt({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),oP=pn(sP),rP=xt({},PA,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),aP=pn(rP),lP=xt({},_l,{newState:0,oldState:0}),uP=pn(lP),cP=[9,13,27,32],WE=to&&"CompositionEvent"in window,rd=null;to&&"documentMode"in document&&(rd=document.documentMode);var fP=to&&"TextEvent"in window&&!rd,mx=to&&(!WE||rd&&8<rd&&11>=rd),C_=" ",__=!1;function yx(n,t){switch(n){case"keyup":return cP.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vx(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jl=!1;function dP(n,t){switch(n){case"compositionend":return vx(t);case"keypress":return t.which!==32?null:(__=!0,C_);case"textInput":return n=t.data,n===C_&&__?null:n;default:return null}}function hP(n,t){if(Jl)return n==="compositionend"||!WE&&yx(n,t)?(n=gx(),em=JE=lr=null,Jl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mx&&t.locale!=="ko"?null:t.data;default:return null}}var pP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b_(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t==="input"?!!pP[n.type]:t==="textarea"}function Ax(n,t,e,i){Xl?lu?lu.push(i):lu=[i]:Xl=i,t=yy(t,"onChange"),0<t.length&&(e=new LA("onChange","change",null,e,i),n.push({event:e,listeners:t}))}var ad=null,Cd=null;function gP(n){f1(n,0)}function kA(n){var t=Of(n);if(ux(t))return n}function w_(n,t){if(n==="change")return t}var Tx=!1;if(to){var S0;if(to){var E0="oninput"in document;if(!E0){var M_=document.createElement("div");M_.setAttribute("oninput","return;"),E0=typeof M_.oninput=="function"}S0=E0}else S0=!1;Tx=S0&&(!document.documentMode||9<document.documentMode)}function x_(){ad&&(ad.detachEvent("onpropertychange",Sx),Cd=ad=null)}function Sx(n){if(n.propertyName==="value"&&kA(Cd)){var t=[];Ax(t,Cd,n,XE(n)),px(gP,t)}}function mP(n,t,e){n==="focusin"?(x_(),ad=t,Cd=e,ad.attachEvent("onpropertychange",Sx)):n==="focusout"&&x_()}function yP(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return kA(Cd)}function vP(n,t){if(n==="click")return kA(t)}function AP(n,t){if(n==="input"||n==="change")return kA(t)}function TP(n,t){return n===t&&(n!==0||1/n===1/t)||n!==n&&t!==t}var Vn=typeof Object.is=="function"?Object.is:TP;function _d(n,t){if(Vn(n,t))return!0;if(typeof n!="object"||n===null||typeof t!="object"||t===null)return!1;var e=Object.keys(n),i=Object.keys(t);if(e.length!==i.length)return!1;for(i=0;i<e.length;i++){var s=e[i];if(!fT.call(t,s)||!Vn(n[s],t[s]))return!1}return!0}function R_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function D_(n,t){var e=R_(n);n=0;for(var i;e;){if(e.nodeType===3){if(i=n+e.textContent.length,n<=t&&i>=t)return{node:e,offset:t-n};n=i}t:{for(;e;){if(e.nextSibling){e=e.nextSibling;break t}e=e.parentNode}e=void 0}e=R_(e)}}function Ex(n,t){return n&&t?n===t?!0:n&&n.nodeType===3?!1:t&&t.nodeType===3?Ex(n,t.parentNode):"contains"in n?n.contains(t):n.compareDocumentPosition?!!(n.compareDocumentPosition(t)&16):!1:!1}function Cx(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var t=jm(n.document);t instanceof n.HTMLIFrameElement;){try{var e=typeof t.contentWindow.location.href=="string"}catch{e=!1}if(e)n=t.contentWindow;else break;t=jm(n.document)}return t}function QE(n){var t=n&&n.nodeName&&n.nodeName.toLowerCase();return t&&(t==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||t==="textarea"||n.contentEditable==="true")}var SP=to&&"documentMode"in document&&11>=document.documentMode,Kl=null,yT=null,ld=null,vT=!1;function N_(n,t,e){var i=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;vT||Kl==null||Kl!==jm(i)||(i=Kl,"selectionStart"in i&&QE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ld&&_d(ld,i)||(ld=i,i=yy(yT,"onSelect"),0<i.length&&(t=new LA("onSelect","select",null,t,e),n.push({event:t,listeners:i}),t.target=Kl)))}function Mr(n,t){var e={};return e[n.toLowerCase()]=t.toLowerCase(),e["Webkit"+n]="webkit"+t,e["Moz"+n]="moz"+t,e}var Wl={animationend:Mr("Animation","AnimationEnd"),animationiteration:Mr("Animation","AnimationIteration"),animationstart:Mr("Animation","AnimationStart"),transitionrun:Mr("Transition","TransitionRun"),transitionstart:Mr("Transition","TransitionStart"),transitioncancel:Mr("Transition","TransitionCancel"),transitionend:Mr("Transition","TransitionEnd")},C0={},_x={};to&&(_x=document.createElement("div").style,"AnimationEvent"in window||(delete Wl.animationend.animation,delete Wl.animationiteration.animation,delete Wl.animationstart.animation),"TransitionEvent"in window||delete Wl.transitionend.transition);function bl(n){if(C0[n])return C0[n];if(!Wl[n])return n;var t=Wl[n],e;for(e in t)if(t.hasOwnProperty(e)&&e in _x)return C0[n]=t[e];return n}var bx=bl("animationend"),wx=bl("animationiteration"),Mx=bl("animationstart"),EP=bl("transitionrun"),CP=bl("transitionstart"),_P=bl("transitioncancel"),xx=bl("transitionend"),Rx=new Map,AT="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");AT.push("scrollEnd");function bi(n,t){Rx.set(n,t),Cl(t,[n])}var I_=new WeakMap;function ni(n,t){if(typeof n=="object"&&n!==null){var e=I_.get(n);return e!==void 0?e:(t={value:n,source:t,stack:m_(t)},I_.set(n,t),t)}return{value:n,source:t,stack:m_(t)}}var Qn=[],Ql=0,ZE=0;function UA(){for(var n=Ql,t=ZE=Ql=0;t<n;){var e=Qn[t];Qn[t++]=null;var i=Qn[t];Qn[t++]=null;var s=Qn[t];Qn[t++]=null;var o=Qn[t];if(Qn[t++]=null,i!==null&&s!==null){var r=i.pending;r===null?s.next=s:(s.next=r.next,r.next=s),i.pending=s}o!==0&&Dx(e,s,o)}}function FA(n,t,e,i){Qn[Ql++]=n,Qn[Ql++]=t,Qn[Ql++]=e,Qn[Ql++]=i,ZE|=i,n.lanes|=i,n=n.alternate,n!==null&&(n.lanes|=i)}function jE(n,t,e,i){return FA(n,t,e,i),ty(n)}function ff(n,t){return FA(n,null,null,t),ty(n)}function Dx(n,t,e){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e);for(var s=!1,o=n.return;o!==null;)o.childLanes|=e,i=o.alternate,i!==null&&(i.childLanes|=e),o.tag===22&&(n=o.stateNode,n===null||n._visibility&1||(s=!0)),n=o,o=o.return;return n.tag===3?(o=n.stateNode,s&&t!==null&&(s=31-On(e),n=o.hiddenUpdates,i=n[s],i===null?n[s]=[t]:i.push(t),t.lane=e|536870912),o):null}function ty(n){if(50<vd)throw vd=0,HT=null,Error(k(185));for(var t=n.return;t!==null;)n=t,t=n.return;return n.tag===3?n.stateNode:null}var Zl={};function bP(n,t,e,i){this.tag=n,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(n,t,e,i){return new bP(n,t,e,i)}function tC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Zs(n,t){var e=n.alternate;return e===null?(e=Un(n.tag,t,n.key,n.mode),e.elementType=n.elementType,e.type=n.type,e.stateNode=n.stateNode,e.alternate=n,n.alternate=e):(e.pendingProps=t,e.type=n.type,e.flags=0,e.subtreeFlags=0,e.deletions=null),e.flags=n.flags&65011712,e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},e.sibling=n.sibling,e.index=n.index,e.ref=n.ref,e.refCleanup=n.refCleanup,e}function Nx(n,t){n.flags&=65011714;var e=n.alternate;return e===null?(n.childLanes=0,n.lanes=t,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,n.type=e.type,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n}function im(n,t,e,i,s,o){var r=0;if(i=n,typeof n=="function")tC(n)&&(r=1);else if(typeof n=="string")r=M2(n,e,ji.current)?26:n==="html"||n==="head"||n==="body"?27:5;else t:switch(n){case aT:return n=Un(31,e,t,s),n.elementType=aT,n.lanes=o,n;case zl:return al(e.children,s,o,t);case WM:r=8,s|=24;break;case sT:return n=Un(12,e,t,s|2),n.elementType=sT,n.lanes=o,n;case oT:return n=Un(13,e,t,s),n.elementType=oT,n.lanes=o,n;case rT:return n=Un(19,e,t,s),n.elementType=rT,n.lanes=o,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gL:case Xs:r=10;break t;case QM:r=9;break t;case HE:r=11;break t;case VE:r=14;break t;case fo:r=16,i=null;break t}r=29,e=Error(k(130,n===null?"null":typeof n,"")),i=null}return t=Un(r,e,t,s),t.elementType=n,t.type=i,t.lanes=o,t}function al(n,t,e,i){return n=Un(7,n,i,t),n.lanes=e,n}function _0(n,t,e){return n=Un(6,n,null,t),n.lanes=e,n}function b0(n,t,e){return t=Un(4,n.children!==null?n.children:[],n.key,t),t.lanes=e,t.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},t}var jl=[],tu=0,ey=null,ny=0,jn=[],ti=0,ll=null,Js=1,Ks="";function Rr(n,t){jl[tu++]=ny,jl[tu++]=ey,ey=n,ny=t}function Ix(n,t,e){jn[ti++]=Js,jn[ti++]=Ks,jn[ti++]=ll,ll=n;var i=Js;n=Ks;var s=32-On(i)-1;i&=~(1<<s),e+=1;var o=32-On(t)+s;if(30<o){var r=s-s%5;o=(i&(1<<r)-1).toString(32),i>>=r,s-=r,Js=1<<32-On(t)+s|e<<s|i,Ks=o+n}else Js=1<<o|e<<s|i,Ks=n}function eC(n){n.return!==null&&(Rr(n,1),Ix(n,1,0))}function nC(n){for(;n===ey;)ey=jl[--tu],jl[tu]=null,ny=jl[--tu],jl[tu]=null;for(;n===ll;)ll=jn[--ti],jn[ti]=null,Ks=jn[--ti],jn[ti]=null,Js=jn[--ti],jn[ti]=null}var We=null,Gt=null,ct=!1,ul=null,Wi=!1,TT=Error(k(519));function pl(n){var t=Error(k(418,""));throw bd(ni(t,n)),TT}function L_(n){var t=n.stateNode,e=n.type,i=n.memoizedProps;switch(t[Be]=n,t[hn]=i,e){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(e=0;e<xd.length;e++)nt(xd[e],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),cx(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Zm(t);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),dx(t,i.value,i.defaultValue,i.children),Zm(t)}e=i.children,typeof e!="string"&&typeof e!="number"&&typeof e!="bigint"||t.textContent===""+e||i.suppressHydrationWarning===!0||h1(t.textContent,e)?(i.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),i.onScroll!=null&&nt("scroll",t),i.onScrollEnd!=null&&nt("scrollend",t),i.onClick!=null&&(t.onclick=$A),t=!0):t=!1,t||pl(n)}function P_(n){for(We=n.return;We;)switch(We.tag){case 5:case 13:Wi=!1;return;case 27:case 3:Wi=!0;return;default:We=We.return}}function bf(n){if(n!==We)return!1;if(!ct)return P_(n),ct=!0,!1;var t=n.tag,e;if((e=t!==3&&t!==27)&&((e=t===5)&&(e=n.type,e=!(e!=="form"&&e!=="button")||YT(n.type,n.memoizedProps)),e=!e),e&&Gt&&pl(n),P_(n),t===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(k(317));t:{for(n=n.nextSibling,t=0;n;){if(n.nodeType===8)if(e=n.data,e==="/$"){if(t===0){Gt=Ci(n.nextSibling);break t}t--}else e!=="$"&&e!=="$!"&&e!=="$?"||t++;n=n.nextSibling}Gt=null}}else t===27?(t=Gt,wr(n.type)?(n=KT,KT=null,Gt=n):Gt=t):Gt=We?Ci(n.stateNode.nextSibling):null;return!0}function lg(){Gt=We=null,ct=!1}function k_(){var n=ul;return n!==null&&(un===null?un=n:un.push.apply(un,n),ul=null),n}function bd(n){ul===null?ul=[n]:ul.push(n)}var ST=is(null),wl=null,Ws=null;function po(n,t,e){Pt(ST,t._currentValue),t._currentValue=e}function js(n){n._currentValue=ST.current,Se(ST)}function ET(n,t,e){for(;n!==null;){var i=n.alternate;if((n.childLanes&t)!==t?(n.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),n===e)break;n=n.return}}function CT(n,t,e,i){var s=n.child;for(s!==null&&(s.return=n);s!==null;){var o=s.dependencies;if(o!==null){var r=s.child;o=o.firstContext;t:for(;o!==null;){var a=o;o=s;for(var l=0;l<t.length;l++)if(a.context===t[l]){o.lanes|=e,a=o.alternate,a!==null&&(a.lanes|=e),ET(o.return,e,n),i||(r=null);break t}o=a.next}}else if(s.tag===18){if(r=s.return,r===null)throw Error(k(341));r.lanes|=e,o=r.alternate,o!==null&&(o.lanes|=e),ET(r,e,n),r=null}else r=s.child;if(r!==null)r.return=s;else for(r=s;r!==null;){if(r===n){r=null;break}if(s=r.sibling,s!==null){s.return=r.return,r=s;break}r=r.return}s=r}}function ug(n,t,e,i){n=null;for(var s=t,o=!1;s!==null;){if(!o){if(s.flags&524288)o=!0;else if(s.flags&262144)break}if(s.tag===10){var r=s.alternate;if(r===null)throw Error(k(387));if(r=r.memoizedProps,r!==null){var a=s.type;Vn(s.pendingProps.value,r.value)||(n!==null?n.push(a):n=[a])}}else if(s===Jm.current){if(r=s.alternate,r===null)throw Error(k(387));r.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(n!==null?n.push(Nd):n=[Nd])}s=s.return}n!==null&&CT(t,n,e,i),t.flags|=262144}function iy(n){for(n=n.firstContext;n!==null;){if(!Vn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function gl(n){wl=n,Ws=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function He(n){return Lx(wl,n)}function kg(n,t){return wl===null&&gl(n),Lx(n,t)}function Lx(n,t){var e=t._currentValue;if(t={context:t,memoizedValue:e,next:null},Ws===null){if(n===null)throw Error(k(308));Ws=t,n.dependencies={lanes:0,firstContext:t},n.flags|=524288}else Ws=Ws.next=t;return e}var wP=typeof AbortController<"u"?AbortController:function(){var n=[],t=this.signal={aborted:!1,addEventListener:function(e,i){n.push(i)}};this.abort=function(){t.aborted=!0,n.forEach(function(e){return e()})}},MP=ue.unstable_scheduleCallback,xP=ue.unstable_NormalPriority,ae={$$typeof:Xs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function iC(){return{controller:new wP,data:new Map,refCount:0}}function cg(n){n.refCount--,n.refCount===0&&MP(xP,function(){n.controller.abort()})}var ud=null,_T=0,jc=0,uu=null;function RP(n,t){if(ud===null){var e=ud=[];_T=0,jc=wC(),uu={status:"pending",value:void 0,then:function(i){e.push(i)}}}return _T++,t.then(U_,U_),t}function U_(){if(--_T===0&&ud!==null){uu!==null&&(uu.status="fulfilled");var n=ud;ud=null,jc=0,uu=null;for(var t=0;t<n.length;t++)(0,n[t])()}}function DP(n,t){var e=[],i={status:"pending",value:null,reason:null,then:function(s){e.push(s)}};return n.then(function(){i.status="fulfilled",i.value=t;for(var s=0;s<e.length;s++)(0,e[s])(t)},function(s){for(i.status="rejected",i.reason=s,s=0;s<e.length;s++)(0,e[s])(void 0)}),i}var F_=X.S;X.S=function(n,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&RP(n,t),F_!==null&&F_(n,t)};var cl=is(null);function sC(){var n=cl.current;return n!==null?n:bt.pooledCache}function sm(n,t){t===null?Pt(cl,cl.current):Pt(cl,t.pool)}function Px(){var n=sC();return n===null?null:{parent:ae._currentValue,pool:n}}var fg=Error(k(460)),kx=Error(k(474)),OA=Error(k(542)),bT={then:function(){}};function O_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Ug(){}function Ux(n,t,e){switch(e=n[e],e===void 0?n.push(t):e!==t&&(t.then(Ug,Ug),t=e),t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,H_(n),n;default:if(typeof t.status=="string")t.then(Ug,Ug);else{if(n=bt,n!==null&&100<n.shellSuspendCounter)throw Error(k(482));n=t,n.status="pending",n.then(function(i){if(t.status==="pending"){var s=t;s.status="fulfilled",s.value=i}},function(i){if(t.status==="pending"){var s=t;s.status="rejected",s.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw n=t.reason,H_(n),n}throw cd=t,fg}}var cd=null;function B_(){if(cd===null)throw Error(k(459));var n=cd;return cd=null,n}function H_(n){if(n===fg||n===OA)throw Error(k(483))}var ho=!1;function oC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function wT(n,t){n=n.updateQueue,t.updateQueue===n&&(t.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function hr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function pr(n,t,e){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,gt&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,t=ty(n),Dx(n,null,e),t}return FA(n,i,t,e),ty(n)}function fd(n,t,e){if(t=t.updateQueue,t!==null&&(t=t.shared,(e&4194048)!==0)){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,sx(n,e)}}function w0(n,t){var e=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,e===i)){var s=null,o=null;if(e=e.firstBaseUpdate,e!==null){do{var r={lane:e.lane,tag:e.tag,payload:e.payload,callback:null,next:null};o===null?s=o=r:o=o.next=r,e=e.next}while(e!==null);o===null?s=o=t:o=o.next=t}else s=o=t;e={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,callbacks:i.callbacks},n.updateQueue=e;return}n=e.lastBaseUpdate,n===null?e.firstBaseUpdate=t:n.next=t,e.lastBaseUpdate=t}var MT=!1;function dd(){if(MT){var n=uu;if(n!==null)throw n}}function hd(n,t,e,i){MT=!1;var s=n.updateQueue;ho=!1;var o=s.firstBaseUpdate,r=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,r===null?o=u:r.next=u,r=l;var h=n.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==r&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(o!==null){var p=s.baseState;r=0,h=u=l=null,a=o;do{var g=a.lane&-536870913,m=g!==a.lane;if(m?(at&g)===g:(i&g)===g){g!==0&&g===jc&&(MT=!0),h!==null&&(h=h.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});t:{var v=n,A=a;g=t;var _=e;switch(A.tag){case 1:if(v=A.payload,typeof v=="function"){p=v.call(_,p,g);break t}p=v;break t;case 3:v.flags=v.flags&-65537|128;case 0:if(v=A.payload,g=typeof v=="function"?v.call(_,p,g):v,g==null)break t;p=xt({},p,g);break t;case 2:ho=!0}}g=a.callback,g!==null&&(n.flags|=64,m&&(n.flags|=8192),m=s.callbacks,m===null?s.callbacks=[g]:m.push(g))}else m={lane:g,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=p):h=h.next=m,r|=g;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);h===null&&(l=p),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=h,o===null&&(s.shared.lanes=0),Er|=r,n.lanes=r,n.memoizedState=p}}function Fx(n,t){if(typeof n!="function")throw Error(k(191,n));n.call(t)}function Ox(n,t){var e=n.callbacks;if(e!==null)for(n.callbacks=null,n=0;n<e.length;n++)Fx(e[n],t)}var tf=is(null),sy=is(0);function V_(n,t){n=io,Pt(sy,n),Pt(tf,t),io=n|t.baseLanes}function xT(){Pt(sy,io),Pt(tf,tf.current)}function rC(){io=sy.current,Se(tf),Se(sy)}var Tr=0,tt=null,At=null,Zt=null,oy=!1,cu=!1,ml=!1,ry=0,wd=0,fu=null,NP=0;function zt(){throw Error(k(321))}function aC(n,t){if(t===null)return!1;for(var e=0;e<t.length&&e<n.length;e++)if(!Vn(n[e],t[e]))return!1;return!0}function lC(n,t,e,i,s,o){return Tr=o,tt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,X.H=n===null||n.memoizedState===null?gR:mR,ml=!1,o=e(i,s),ml=!1,cu&&(o=Hx(t,e,i,s)),Bx(n),o}function Bx(n){X.H=ay;var t=At!==null&&At.next!==null;if(Tr=0,Zt=At=tt=null,oy=!1,wd=0,fu=null,t)throw Error(k(300));n===null||Te||(n=n.dependencies,n!==null&&iy(n)&&(Te=!0))}function Hx(n,t,e,i){tt=n;var s=0;do{if(cu&&(fu=null),wd=0,cu=!1,25<=s)throw Error(k(301));if(s+=1,Zt=At=null,n.updateQueue!=null){var o=n.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,o.memoCache!=null&&(o.memoCache.index=0)}X.H=OP,o=t(e,i)}while(cu);return o}function IP(){var n=X.H,t=n.useState()[0];return t=typeof t.then=="function"?dg(t):t,n=n.useState()[0],(At!==null?At.memoizedState:null)!==n&&(tt.flags|=1024),t}function uC(){var n=ry!==0;return ry=0,n}function cC(n,t,e){t.updateQueue=n.updateQueue,t.flags&=-2053,n.lanes&=~e}function fC(n){if(oy){for(n=n.memoizedState;n!==null;){var t=n.queue;t!==null&&(t.pending=null),n=n.next}oy=!1}Tr=0,Zt=At=tt=null,cu=!1,wd=ry=0,fu=null}function an(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?tt.memoizedState=Zt=n:Zt=Zt.next=n,Zt}function ne(){if(At===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=At.next;var t=Zt===null?tt.memoizedState:Zt.next;if(t!==null)Zt=t,At=n;else{if(n===null)throw tt.alternate===null?Error(k(467)):Error(k(310));At=n,n={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Zt===null?tt.memoizedState=Zt=n:Zt=Zt.next=n}return Zt}function dC(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dg(n){var t=wd;return wd+=1,fu===null&&(fu=[]),n=Ux(fu,n,t),t=tt,(Zt===null?t.memoizedState:Zt.next)===null&&(t=t.alternate,X.H=t===null||t.memoizedState===null?gR:mR),n}function BA(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return dg(n);if(n.$$typeof===Xs)return He(n)}throw Error(k(438,String(n)))}function hC(n){var t=null,e=tt.updateQueue;if(e!==null&&(t=e.memoCache),t==null){var i=tt.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(s){return s.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),e===null&&(e=dC(),tt.updateQueue=e),e.memoCache=t,e=t.data[t.index],e===void 0)for(e=t.data[t.index]=Array(n),i=0;i<n;i++)e[i]=mL;return t.index++,e}function eo(n,t){return typeof t=="function"?t(n):t}function om(n){var t=ne();return pC(t,At,n)}function pC(n,t,e){var i=n.queue;if(i===null)throw Error(k(311));i.lastRenderedReducer=e;var s=n.baseQueue,o=i.pending;if(o!==null){if(s!==null){var r=s.next;s.next=o.next,o.next=r}t.baseQueue=s=o,i.pending=null}if(o=n.baseState,s===null)n.memoizedState=o;else{t=s.next;var a=r=null,l=null,u=t,h=!1;do{var p=u.lane&-536870913;if(p!==u.lane?(at&p)===p:(Tr&p)===p){var g=u.revertLane;if(g===0)l!==null&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),p===jc&&(h=!0);else if((Tr&g)===g){u=u.next,g===jc&&(h=!0);continue}else p={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(a=l=p,r=o):l=l.next=p,tt.lanes|=g,Er|=g;p=u.action,ml&&e(o,p),o=u.hasEagerState?u.eagerState:e(o,p)}else g={lane:p,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},l===null?(a=l=g,r=o):l=l.next=g,tt.lanes|=p,Er|=p;u=u.next}while(u!==null&&u!==t);if(l===null?r=o:l.next=a,!Vn(o,n.memoizedState)&&(Te=!0,h&&(e=uu,e!==null)))throw e;n.memoizedState=o,n.baseState=r,n.baseQueue=l,i.lastRenderedState=o}return s===null&&(i.lanes=0),[n.memoizedState,i.dispatch]}function M0(n){var t=ne(),e=t.queue;if(e===null)throw Error(k(311));e.lastRenderedReducer=n;var i=e.dispatch,s=e.pending,o=t.memoizedState;if(s!==null){e.pending=null;var r=s=s.next;do o=n(o,r.action),r=r.next;while(r!==s);Vn(o,t.memoizedState)||(Te=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),e.lastRenderedState=o}return[o,i]}function Vx(n,t,e){var i=tt,s=ne(),o=ct;if(o){if(e===void 0)throw Error(k(407));e=e()}else e=t();var r=!Vn((At||s).memoizedState,e);r&&(s.memoizedState=e,Te=!0),s=s.queue;var a=zx.bind(null,i,s,n);if(hg(2048,8,a,[n]),s.getSnapshot!==t||r||Zt!==null&&Zt.memoizedState.tag&1){if(i.flags|=2048,ef(9,HA(),qx.bind(null,i,s,e,t),null),bt===null)throw Error(k(349));o||Tr&124||Gx(i,t,e)}return e}function Gx(n,t,e){n.flags|=16384,n={getSnapshot:t,value:e},t=tt.updateQueue,t===null?(t=dC(),tt.updateQueue=t,t.stores=[n]):(e=t.stores,e===null?t.stores=[n]:e.push(n))}function qx(n,t,e,i){t.value=e,t.getSnapshot=i,$x(t)&&Yx(n)}function zx(n,t,e){return e(function(){$x(t)&&Yx(n)})}function $x(n){var t=n.getSnapshot;n=n.value;try{var e=t();return!Vn(n,e)}catch{return!0}}function Yx(n){var t=ff(n,2);t!==null&&Hn(t,n,2)}function RT(n){var t=an();if(typeof n=="function"){var e=n;if(n=e(),ml){ar(!0);try{e()}finally{ar(!1)}}}return t.memoizedState=t.baseState=n,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:n},t}function Xx(n,t,e,i){return n.baseState=e,pC(n,At,typeof i=="function"?i:eo)}function LP(n,t,e,i,s){if(VA(n))throw Error(k(485));if(n=t.action,n!==null){var o={payload:s,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){o.listeners.push(r)}};X.T!==null?e(!0):o.isTransition=!1,i(o),e=t.pending,e===null?(o.next=t.pending=o,Jx(t,o)):(o.next=e.next,t.pending=e.next=o)}}function Jx(n,t){var e=t.action,i=t.payload,s=n.state;if(t.isTransition){var o=X.T,r={};X.T=r;try{var a=e(s,i),l=X.S;l!==null&&l(r,a),G_(n,t,a)}catch(u){DT(n,t,u)}finally{X.T=o}}else try{o=e(s,i),G_(n,t,o)}catch(u){DT(n,t,u)}}function G_(n,t,e){e!==null&&typeof e=="object"&&typeof e.then=="function"?e.then(function(i){q_(n,t,i)},function(i){return DT(n,t,i)}):q_(n,t,e)}function q_(n,t,e){t.status="fulfilled",t.value=e,Kx(t),n.state=e,t=n.pending,t!==null&&(e=t.next,e===t?n.pending=null:(e=e.next,t.next=e,Jx(n,e)))}function DT(n,t,e){var i=n.pending;if(n.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=e,Kx(t),t=t.next;while(t!==i)}n.action=null}function Kx(n){n=n.listeners;for(var t=0;t<n.length;t++)(0,n[t])()}function Wx(n,t){return t}function z_(n,t){if(ct){var e=bt.formState;if(e!==null){t:{var i=tt;if(ct){if(Gt){e:{for(var s=Gt,o=Wi;s.nodeType!==8;){if(!o){s=null;break e}if(s=Ci(s.nextSibling),s===null){s=null;break e}}o=s.data,s=o==="F!"||o==="F"?s:null}if(s){Gt=Ci(s.nextSibling),i=s.data==="F!";break t}}pl(i)}i=!1}i&&(t=e[0])}}return e=an(),e.memoizedState=e.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wx,lastRenderedState:t},e.queue=i,e=dR.bind(null,tt,i),i.dispatch=e,i=RT(!1),o=vC.bind(null,tt,!1,i.queue),i=an(),s={state:t,dispatch:null,action:n,pending:null},i.queue=s,e=LP.bind(null,tt,s,o,e),s.dispatch=e,i.memoizedState=n,[t,e,!1]}function $_(n){var t=ne();return Qx(t,At,n)}function Qx(n,t,e){if(t=pC(n,t,Wx)[0],n=om(eo)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=dg(t)}catch(r){throw r===fg?OA:r}else i=t;t=ne();var s=t.queue,o=s.dispatch;return e!==t.memoizedState&&(tt.flags|=2048,ef(9,HA(),PP.bind(null,s,e),null)),[i,o,n]}function PP(n,t){n.action=t}function Y_(n){var t=ne(),e=At;if(e!==null)return Qx(t,e,n);ne(),t=t.memoizedState,e=ne();var i=e.queue.dispatch;return e.memoizedState=n,[t,i,!1]}function ef(n,t,e,i){return n={tag:n,create:e,deps:i,inst:t,next:null},t=tt.updateQueue,t===null&&(t=dC(),tt.updateQueue=t),e=t.lastEffect,e===null?t.lastEffect=n.next=n:(i=e.next,e.next=n,n.next=i,t.lastEffect=n),n}function HA(){return{destroy:void 0,resource:void 0}}function Zx(){return ne().memoizedState}function rm(n,t,e,i){var s=an();i=i===void 0?null:i,tt.flags|=n,s.memoizedState=ef(1|t,HA(),e,i)}function hg(n,t,e,i){var s=ne();i=i===void 0?null:i;var o=s.memoizedState.inst;At!==null&&i!==null&&aC(i,At.memoizedState.deps)?s.memoizedState=ef(t,o,e,i):(tt.flags|=n,s.memoizedState=ef(1|t,o,e,i))}function X_(n,t){rm(8390656,8,n,t)}function jx(n,t){hg(2048,8,n,t)}function tR(n,t){return hg(4,2,n,t)}function eR(n,t){return hg(4,4,n,t)}function nR(n,t){if(typeof t=="function"){n=n();var e=t(n);return function(){typeof e=="function"?e():t(null)}}if(t!=null)return n=n(),t.current=n,function(){t.current=null}}function iR(n,t,e){e=e!=null?e.concat([n]):null,hg(4,4,nR.bind(null,t,n),e)}function gC(){}function sR(n,t){var e=ne();t=t===void 0?null:t;var i=e.memoizedState;return t!==null&&aC(t,i[1])?i[0]:(e.memoizedState=[n,t],n)}function oR(n,t){var e=ne();t=t===void 0?null:t;var i=e.memoizedState;if(t!==null&&aC(t,i[1]))return i[0];if(i=n(),ml){ar(!0);try{n()}finally{ar(!1)}}return e.memoizedState=[i,t],i}function mC(n,t,e){return e===void 0||Tr&1073741824?n.memoizedState=t:(n.memoizedState=e,n=KR(),tt.lanes|=n,Er|=n,e)}function rR(n,t,e,i){return Vn(e,t)?e:tf.current!==null?(n=mC(n,e,i),Vn(n,t)||(Te=!0),n):Tr&42?(n=KR(),tt.lanes|=n,Er|=n,t):(Te=!0,n.memoizedState=e)}function aR(n,t,e,i,s){var o=ft.p;ft.p=o!==0&&8>o?o:8;var r=X.T,a={};X.T=a,vC(n,!1,t,e);try{var l=s(),u=X.S;if(u!==null&&u(a,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=DP(l,i);pd(n,t,h,Bn(n))}else pd(n,t,i,Bn(n))}catch(p){pd(n,t,{then:function(){},status:"rejected",reason:p},Bn())}finally{ft.p=o,X.T=r}}function kP(){}function NT(n,t,e,i){if(n.tag!==5)throw Error(k(476));var s=lR(n).queue;aR(n,s,t,rl,e===null?kP:function(){return uR(n),e(i)})}function lR(n){var t=n.memoizedState;if(t!==null)return t;t={memoizedState:rl,baseState:rl,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:rl},next:null};var e={};return t.next={memoizedState:e,baseState:e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:e},next:null},n.memoizedState=t,n=n.alternate,n!==null&&(n.memoizedState=t),t}function uR(n){var t=lR(n).next.queue;pd(n,t,{},Bn())}function yC(){return He(Nd)}function cR(){return ne().memoizedState}function fR(){return ne().memoizedState}function UP(n){for(var t=n.return;t!==null;){switch(t.tag){case 24:case 3:var e=Bn();n=hr(e);var i=pr(t,n,e);i!==null&&(Hn(i,t,e),fd(i,t,e)),t={cache:iC()},n.payload=t;return}t=t.return}}function FP(n,t,e){var i=Bn();e={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null},VA(n)?hR(t,e):(e=jE(n,t,e,i),e!==null&&(Hn(e,n,i),pR(e,t,i)))}function dR(n,t,e){var i=Bn();pd(n,t,e,i)}function pd(n,t,e,i){var s={lane:i,revertLane:0,action:e,hasEagerState:!1,eagerState:null,next:null};if(VA(n))hR(t,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var r=t.lastRenderedState,a=o(r,e);if(s.hasEagerState=!0,s.eagerState=a,Vn(a,r))return FA(n,t,s,0),bt===null&&UA(),!1}catch{}finally{}if(e=jE(n,t,s,i),e!==null)return Hn(e,n,i),pR(e,t,i),!0}return!1}function vC(n,t,e,i){if(i={lane:2,revertLane:wC(),action:i,hasEagerState:!1,eagerState:null,next:null},VA(n)){if(t)throw Error(k(479))}else t=jE(n,e,i,2),t!==null&&Hn(t,n,2)}function VA(n){var t=n.alternate;return n===tt||t!==null&&t===tt}function hR(n,t){cu=oy=!0;var e=n.pending;e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t}function pR(n,t,e){if(e&4194048){var i=t.lanes;i&=n.pendingLanes,e|=i,t.lanes=e,sx(n,e)}}var ay={readContext:He,use:BA,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt},gR={readContext:He,use:BA,useCallback:function(n,t){return an().memoizedState=[n,t===void 0?null:t],n},useContext:He,useEffect:X_,useImperativeHandle:function(n,t,e){e=e!=null?e.concat([n]):null,rm(4194308,4,nR.bind(null,t,n),e)},useLayoutEffect:function(n,t){return rm(4194308,4,n,t)},useInsertionEffect:function(n,t){rm(4,2,n,t)},useMemo:function(n,t){var e=an();t=t===void 0?null:t;var i=n();if(ml){ar(!0);try{n()}finally{ar(!1)}}return e.memoizedState=[i,t],i},useReducer:function(n,t,e){var i=an();if(e!==void 0){var s=e(t);if(ml){ar(!0);try{e(t)}finally{ar(!1)}}}else s=t;return i.memoizedState=i.baseState=s,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:s},i.queue=n,n=n.dispatch=FP.bind(null,tt,n),[i.memoizedState,n]},useRef:function(n){var t=an();return n={current:n},t.memoizedState=n},useState:function(n){n=RT(n);var t=n.queue,e=dR.bind(null,tt,t);return t.dispatch=e,[n.memoizedState,e]},useDebugValue:gC,useDeferredValue:function(n,t){var e=an();return mC(e,n,t)},useTransition:function(){var n=RT(!1);return n=aR.bind(null,tt,n.queue,!0,!1),an().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,t,e){var i=tt,s=an();if(ct){if(e===void 0)throw Error(k(407));e=e()}else{if(e=t(),bt===null)throw Error(k(349));at&124||Gx(i,t,e)}s.memoizedState=e;var o={value:e,getSnapshot:t};return s.queue=o,X_(zx.bind(null,i,o,n),[n]),i.flags|=2048,ef(9,HA(),qx.bind(null,i,o,e,t),null),e},useId:function(){var n=an(),t=bt.identifierPrefix;if(ct){var e=Ks,i=Js;e=(i&~(1<<32-On(i)-1)).toString(32)+e,t=""+t+"R"+e,e=ry++,0<e&&(t+="H"+e.toString(32)),t+=""}else e=NP++,t=""+t+"r"+e.toString(32)+"";return n.memoizedState=t},useHostTransitionStatus:yC,useFormState:z_,useActionState:z_,useOptimistic:function(n){var t=an();t.memoizedState=t.baseState=n;var e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=e,t=vC.bind(null,tt,!0,e),e.dispatch=t,[n,t]},useMemoCache:hC,useCacheRefresh:function(){return an().memoizedState=UP.bind(null,tt)}},mR={readContext:He,use:BA,useCallback:sR,useContext:He,useEffect:jx,useImperativeHandle:iR,useInsertionEffect:tR,useLayoutEffect:eR,useMemo:oR,useReducer:om,useRef:Zx,useState:function(){return om(eo)},useDebugValue:gC,useDeferredValue:function(n,t){var e=ne();return rR(e,At.memoizedState,n,t)},useTransition:function(){var n=om(eo)[0],t=ne().memoizedState;return[typeof n=="boolean"?n:dg(n),t]},useSyncExternalStore:Vx,useId:cR,useHostTransitionStatus:yC,useFormState:$_,useActionState:$_,useOptimistic:function(n,t){var e=ne();return Xx(e,At,n,t)},useMemoCache:hC,useCacheRefresh:fR},OP={readContext:He,use:BA,useCallback:sR,useContext:He,useEffect:jx,useImperativeHandle:iR,useInsertionEffect:tR,useLayoutEffect:eR,useMemo:oR,useReducer:M0,useRef:Zx,useState:function(){return M0(eo)},useDebugValue:gC,useDeferredValue:function(n,t){var e=ne();return At===null?mC(e,n,t):rR(e,At.memoizedState,n,t)},useTransition:function(){var n=M0(eo)[0],t=ne().memoizedState;return[typeof n=="boolean"?n:dg(n),t]},useSyncExternalStore:Vx,useId:cR,useHostTransitionStatus:yC,useFormState:Y_,useActionState:Y_,useOptimistic:function(n,t){var e=ne();return At!==null?Xx(e,At,n,t):(e.baseState=n,[n,e.queue.dispatch])},useMemoCache:hC,useCacheRefresh:fR},du=null,Md=0;function Fg(n){var t=Md;return Md+=1,du===null&&(du=[]),Ux(du,n,t)}function wf(n,t){t=t.props.ref,n.ref=t!==void 0?t:null}function Og(n,t){throw t.$$typeof===pL?Error(k(525)):(n=Object.prototype.toString.call(t),Error(k(31,n==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":n)))}function J_(n){var t=n._init;return t(n._payload)}function yR(n){function t(T,E){if(n){var C=T.deletions;C===null?(T.deletions=[E],T.flags|=16):C.push(E)}}function e(T,E){if(!n)return null;for(;E!==null;)t(T,E),E=E.sibling;return null}function i(T){for(var E=new Map;T!==null;)T.key!==null?E.set(T.key,T):E.set(T.index,T),T=T.sibling;return E}function s(T,E){return T=Zs(T,E),T.index=0,T.sibling=null,T}function o(T,E,C){return T.index=C,n?(C=T.alternate,C!==null?(C=C.index,C<E?(T.flags|=67108866,E):C):(T.flags|=67108866,E)):(T.flags|=1048576,E)}function r(T){return n&&T.alternate===null&&(T.flags|=67108866),T}function a(T,E,C,w){return E===null||E.tag!==6?(E=_0(C,T.mode,w),E.return=T,E):(E=s(E,C),E.return=T,E)}function l(T,E,C,w){var M=C.type;return M===zl?h(T,E,C.props.children,w,C.key):E!==null&&(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fo&&J_(M)===E.type)?(E=s(E,C.props),wf(E,C),E.return=T,E):(E=im(C.type,C.key,C.props,null,T.mode,w),wf(E,C),E.return=T,E)}function u(T,E,C,w){return E===null||E.tag!==4||E.stateNode.containerInfo!==C.containerInfo||E.stateNode.implementation!==C.implementation?(E=b0(C,T.mode,w),E.return=T,E):(E=s(E,C.children||[]),E.return=T,E)}function h(T,E,C,w,M){return E===null||E.tag!==7?(E=al(C,T.mode,w,M),E.return=T,E):(E=s(E,C),E.return=T,E)}function p(T,E,C){if(typeof E=="string"&&E!==""||typeof E=="number"||typeof E=="bigint")return E=_0(""+E,T.mode,C),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Dg:return C=im(E.type,E.key,E.props,null,T.mode,C),wf(C,E),C.return=T,C;case Uf:return E=b0(E,T.mode,C),E.return=T,E;case fo:var w=E._init;return E=w(E._payload),p(T,E,C)}if(Ff(E)||Ef(E))return E=al(E,T.mode,C,null),E.return=T,E;if(typeof E.then=="function")return p(T,Fg(E),C);if(E.$$typeof===Xs)return p(T,kg(T,E),C);Og(T,E)}return null}function g(T,E,C,w){var M=E!==null?E.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return M!==null?null:a(T,E,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Dg:return C.key===M?l(T,E,C,w):null;case Uf:return C.key===M?u(T,E,C,w):null;case fo:return M=C._init,C=M(C._payload),g(T,E,C,w)}if(Ff(C)||Ef(C))return M!==null?null:h(T,E,C,w,null);if(typeof C.then=="function")return g(T,E,Fg(C),w);if(C.$$typeof===Xs)return g(T,E,kg(T,C),w);Og(T,C)}return null}function m(T,E,C,w,M){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return T=T.get(C)||null,a(E,T,""+w,M);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Dg:return T=T.get(w.key===null?C:w.key)||null,l(E,T,w,M);case Uf:return T=T.get(w.key===null?C:w.key)||null,u(E,T,w,M);case fo:var R=w._init;return w=R(w._payload),m(T,E,C,w,M)}if(Ff(w)||Ef(w))return T=T.get(C)||null,h(E,T,w,M,null);if(typeof w.then=="function")return m(T,E,C,Fg(w),M);if(w.$$typeof===Xs)return m(T,E,C,kg(E,w),M);Og(E,w)}return null}function v(T,E,C,w){for(var M=null,R=null,x=E,D=E=0,N=null;x!==null&&D<C.length;D++){x.index>D?(N=x,x=null):N=x.sibling;var P=g(T,x,C[D],w);if(P===null){x===null&&(x=N);break}n&&x&&P.alternate===null&&t(T,x),E=o(P,E,D),R===null?M=P:R.sibling=P,R=P,x=N}if(D===C.length)return e(T,x),ct&&Rr(T,D),M;if(x===null){for(;D<C.length;D++)x=p(T,C[D],w),x!==null&&(E=o(x,E,D),R===null?M=x:R.sibling=x,R=x);return ct&&Rr(T,D),M}for(x=i(x);D<C.length;D++)N=m(x,T,D,C[D],w),N!==null&&(n&&N.alternate!==null&&x.delete(N.key===null?D:N.key),E=o(N,E,D),R===null?M=N:R.sibling=N,R=N);return n&&x.forEach(function(U){return t(T,U)}),ct&&Rr(T,D),M}function A(T,E,C,w){if(C==null)throw Error(k(151));for(var M=null,R=null,x=E,D=E=0,N=null,P=C.next();x!==null&&!P.done;D++,P=C.next()){x.index>D?(N=x,x=null):N=x.sibling;var U=g(T,x,P.value,w);if(U===null){x===null&&(x=N);break}n&&x&&U.alternate===null&&t(T,x),E=o(U,E,D),R===null?M=U:R.sibling=U,R=U,x=N}if(P.done)return e(T,x),ct&&Rr(T,D),M;if(x===null){for(;!P.done;D++,P=C.next())P=p(T,P.value,w),P!==null&&(E=o(P,E,D),R===null?M=P:R.sibling=P,R=P);return ct&&Rr(T,D),M}for(x=i(x);!P.done;D++,P=C.next())P=m(x,T,D,P.value,w),P!==null&&(n&&P.alternate!==null&&x.delete(P.key===null?D:P.key),E=o(P,E,D),R===null?M=P:R.sibling=P,R=P);return n&&x.forEach(function(Y){return t(T,Y)}),ct&&Rr(T,D),M}function _(T,E,C,w){if(typeof C=="object"&&C!==null&&C.type===zl&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Dg:t:{for(var M=C.key;E!==null;){if(E.key===M){if(M=C.type,M===zl){if(E.tag===7){e(T,E.sibling),w=s(E,C.props.children),w.return=T,T=w;break t}}else if(E.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===fo&&J_(M)===E.type){e(T,E.sibling),w=s(E,C.props),wf(w,C),w.return=T,T=w;break t}e(T,E);break}else t(T,E);E=E.sibling}C.type===zl?(w=al(C.props.children,T.mode,w,C.key),w.return=T,T=w):(w=im(C.type,C.key,C.props,null,T.mode,w),wf(w,C),w.return=T,T=w)}return r(T);case Uf:t:{for(M=C.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===C.containerInfo&&E.stateNode.implementation===C.implementation){e(T,E.sibling),w=s(E,C.children||[]),w.return=T,T=w;break t}else{e(T,E);break}else t(T,E);E=E.sibling}w=b0(C,T.mode,w),w.return=T,T=w}return r(T);case fo:return M=C._init,C=M(C._payload),_(T,E,C,w)}if(Ff(C))return v(T,E,C,w);if(Ef(C)){if(M=Ef(C),typeof M!="function")throw Error(k(150));return C=M.call(C),A(T,E,C,w)}if(typeof C.then=="function")return _(T,E,Fg(C),w);if(C.$$typeof===Xs)return _(T,E,kg(T,C),w);Og(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,E!==null&&E.tag===6?(e(T,E.sibling),w=s(E,C),w.return=T,T=w):(e(T,E),w=_0(C,T.mode,w),w.return=T,T=w),r(T)):e(T,E)}return function(T,E,C,w){try{Md=0;var M=_(T,E,C,w);return du=null,M}catch(x){if(x===fg||x===OA)throw x;var R=Un(29,x,null,T.mode);return R.lanes=w,R.return=T,R}finally{}}}var nf=yR(!0),vR=yR(!1),oi=is(null),es=null;function go(n){var t=n.alternate;Pt(le,le.current&1),Pt(oi,n),es===null&&(t===null||tf.current!==null||t.memoizedState!==null)&&(es=n)}function AR(n){if(n.tag===22){if(Pt(le,le.current),Pt(oi,n),es===null){var t=n.alternate;t!==null&&t.memoizedState!==null&&(es=n)}}else mo()}function mo(){Pt(le,le.current),Pt(oi,oi.current)}function Qs(n){Se(oi),es===n&&(es=null),Se(le)}var le=is(0);function ly(n){for(var t=n;t!==null;){if(t.tag===13){var e=t.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||JT(e)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function x0(n,t,e,i){t=n.memoizedState,e=e(i,t),e=e==null?t:xt({},t,e),n.memoizedState=e,n.lanes===0&&(n.updateQueue.baseState=e)}var IT={enqueueSetState:function(n,t,e){n=n._reactInternals;var i=Bn(),s=hr(i);s.payload=t,e!=null&&(s.callback=e),t=pr(n,s,i),t!==null&&(Hn(t,n,i),fd(t,n,i))},enqueueReplaceState:function(n,t,e){n=n._reactInternals;var i=Bn(),s=hr(i);s.tag=1,s.payload=t,e!=null&&(s.callback=e),t=pr(n,s,i),t!==null&&(Hn(t,n,i),fd(t,n,i))},enqueueForceUpdate:function(n,t){n=n._reactInternals;var e=Bn(),i=hr(e);i.tag=2,t!=null&&(i.callback=t),t=pr(n,i,e),t!==null&&(Hn(t,n,e),fd(t,n,e))}};function K_(n,t,e,i,s,o,r){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,r):t.prototype&&t.prototype.isPureReactComponent?!_d(e,i)||!_d(s,o):!0}function W_(n,t,e,i){n=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(e,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(e,i),t.state!==n&&IT.enqueueReplaceState(t,t.state,null)}function yl(n,t){var e=t;if("ref"in t){e={};for(var i in t)i!=="ref"&&(e[i]=t[i])}if(n=n.defaultProps){e===t&&(e=xt({},e));for(var s in n)e[s]===void 0&&(e[s]=n[s])}return e}var uy=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function TR(n){uy(n)}function SR(n){console.error(n)}function ER(n){uy(n)}function cy(n,t){try{var e=n.onUncaughtError;e(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Q_(n,t,e){try{var i=n.onCaughtError;i(e.value,{componentStack:e.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(s){setTimeout(function(){throw s})}}function LT(n,t,e){return e=hr(e),e.tag=3,e.payload={element:null},e.callback=function(){cy(n,t)},e}function CR(n){return n=hr(n),n.tag=3,n}function _R(n,t,e,i){var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var o=i.value;n.payload=function(){return s(o)},n.callback=function(){Q_(t,e,i)}}var r=e.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(n.callback=function(){Q_(t,e,i),typeof s!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var a=i.stack;this.componentDidCatch(i.value,{componentStack:a!==null?a:""})})}function BP(n,t,e,i,s){if(e.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=e.alternate,t!==null&&ug(t,e,s,!0),e=oi.current,e!==null){switch(e.tag){case 13:return es===null?VT():e.alternate===null&&qt===0&&(qt=3),e.flags&=-257,e.flags|=65536,e.lanes=s,i===bT?e.flags|=16384:(t=e.updateQueue,t===null?e.updateQueue=new Set([i]):t.add(i),B0(n,i,s)),!1;case 22:return e.flags|=65536,i===bT?e.flags|=16384:(t=e.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},e.updateQueue=t):(e=t.retryQueue,e===null?t.retryQueue=new Set([i]):e.add(i)),B0(n,i,s)),!1}throw Error(k(435,e.tag))}return B0(n,i,s),VT(),!1}if(ct)return t=oi.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=s,i!==TT&&(n=Error(k(422),{cause:i}),bd(ni(n,e)))):(i!==TT&&(t=Error(k(423),{cause:i}),bd(ni(t,e))),n=n.current.alternate,n.flags|=65536,s&=-s,n.lanes|=s,i=ni(i,e),s=LT(n.stateNode,i,s),w0(n,s),qt!==4&&(qt=2)),!1;var o=Error(k(520),{cause:i});if(o=ni(o,e),yd===null?yd=[o]:yd.push(o),qt!==4&&(qt=2),t===null)return!0;i=ni(i,e),e=t;do{switch(e.tag){case 3:return e.flags|=65536,n=s&-s,e.lanes|=n,n=LT(e.stateNode,i,n),w0(e,n),!1;case 1:if(t=e.type,o=e.stateNode,(e.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(gr===null||!gr.has(o))))return e.flags|=65536,s&=-s,e.lanes|=s,s=CR(s),_R(s,n,e,i),w0(e,s),!1}e=e.return}while(e!==null);return!1}var bR=Error(k(461)),Te=!1;function xe(n,t,e,i){t.child=n===null?vR(t,null,e,i):nf(t,n.child,e,i)}function Z_(n,t,e,i,s){e=e.render;var o=t.ref;if("ref"in i){var r={};for(var a in i)a!=="ref"&&(r[a]=i[a])}else r=i;return gl(t),i=lC(n,t,e,r,o,s),a=uC(),n!==null&&!Te?(cC(n,t,s),no(n,t,s)):(ct&&a&&eC(t),t.flags|=1,xe(n,t,i,s),t.child)}function j_(n,t,e,i,s){if(n===null){var o=e.type;return typeof o=="function"&&!tC(o)&&o.defaultProps===void 0&&e.compare===null?(t.tag=15,t.type=o,wR(n,t,o,i,s)):(n=im(e.type,null,i,t,t.mode,s),n.ref=t.ref,n.return=t,t.child=n)}if(o=n.child,!AC(n,s)){var r=o.memoizedProps;if(e=e.compare,e=e!==null?e:_d,e(r,i)&&n.ref===t.ref)return no(n,t,s)}return t.flags|=1,n=Zs(o,i),n.ref=t.ref,n.return=t,t.child=n}function wR(n,t,e,i,s){if(n!==null){var o=n.memoizedProps;if(_d(o,i)&&n.ref===t.ref)if(Te=!1,t.pendingProps=i=o,AC(n,s))n.flags&131072&&(Te=!0);else return t.lanes=n.lanes,no(n,t,s)}return PT(n,t,e,i,s)}function MR(n,t,e){var i=t.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=o!==null?o.baseLanes|e:e,n!==null){for(s=t.child=n.child,o=0;s!==null;)o=o|s.lanes|s.childLanes,s=s.sibling;t.childLanes=o&~i}else t.childLanes=0,t.child=null;return tb(n,t,i,e)}if(e&536870912)t.memoizedState={baseLanes:0,cachePool:null},n!==null&&sm(t,o!==null?o.cachePool:null),o!==null?V_(t,o):xT(),AR(t);else return t.lanes=t.childLanes=536870912,tb(n,t,o!==null?o.baseLanes|e:e,e)}else o!==null?(sm(t,o.cachePool),V_(t,o),mo(),t.memoizedState=null):(n!==null&&sm(t,null),xT(),mo());return xe(n,t,s,e),t.child}function tb(n,t,e,i){var s=sC();return s=s===null?null:{parent:ae._currentValue,pool:s},t.memoizedState={baseLanes:e,cachePool:s},n!==null&&sm(t,null),xT(),AR(t),n!==null&&ug(n,t,i,!0),null}function am(n,t){var e=t.ref;if(e===null)n!==null&&n.ref!==null&&(t.flags|=4194816);else{if(typeof e!="function"&&typeof e!="object")throw Error(k(284));(n===null||n.ref!==e)&&(t.flags|=4194816)}}function PT(n,t,e,i,s){return gl(t),e=lC(n,t,e,i,void 0,s),i=uC(),n!==null&&!Te?(cC(n,t,s),no(n,t,s)):(ct&&i&&eC(t),t.flags|=1,xe(n,t,e,s),t.child)}function eb(n,t,e,i,s,o){return gl(t),t.updateQueue=null,e=Hx(t,i,e,s),Bx(n),i=uC(),n!==null&&!Te?(cC(n,t,o),no(n,t,o)):(ct&&i&&eC(t),t.flags|=1,xe(n,t,e,o),t.child)}function nb(n,t,e,i,s){if(gl(t),t.stateNode===null){var o=Zl,r=e.contextType;typeof r=="object"&&r!==null&&(o=He(r)),o=new e(i,o),t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=IT,t.stateNode=o,o._reactInternals=t,o=t.stateNode,o.props=i,o.state=t.memoizedState,o.refs={},oC(t),r=e.contextType,o.context=typeof r=="object"&&r!==null?He(r):Zl,o.state=t.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(x0(t,e,r,i),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(r=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),r!==o.state&&IT.enqueueReplaceState(o,o.state,null),hd(t,i,o,s),dd(),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(n===null){o=t.stateNode;var a=t.memoizedProps,l=yl(e,a);o.props=l;var u=o.context,h=e.contextType;r=Zl,typeof h=="object"&&h!==null&&(r=He(h));var p=e.getDerivedStateFromProps;h=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function",a=t.pendingProps!==a,h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a||u!==r)&&W_(t,o,i,r),ho=!1;var g=t.memoizedState;o.state=g,hd(t,i,o,s),dd(),u=t.memoizedState,a||g!==u||ho?(typeof p=="function"&&(x0(t,e,p,i),u=t.memoizedState),(l=ho||K_(t,e,l,i,g,u,r))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=u),o.props=i,o.state=u,o.context=r,i=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,wT(n,t),r=t.memoizedProps,h=yl(e,r),o.props=h,p=t.pendingProps,g=o.context,u=e.contextType,l=Zl,typeof u=="object"&&u!==null&&(l=He(u)),a=e.getDerivedStateFromProps,(u=typeof a=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(r!==p||g!==l)&&W_(t,o,i,l),ho=!1,g=t.memoizedState,o.state=g,hd(t,i,o,s),dd();var m=t.memoizedState;r!==p||g!==m||ho||n!==null&&n.dependencies!==null&&iy(n.dependencies)?(typeof a=="function"&&(x0(t,e,a,i),m=t.memoizedState),(h=ho||K_(t,e,h,i,g,m,l)||n!==null&&n.dependencies!==null&&iy(n.dependencies))?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,m,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||r===n.memoizedProps&&g===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||r===n.memoizedProps&&g===n.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=m),o.props=i,o.state=m,o.context=l,i=h):(typeof o.componentDidUpdate!="function"||r===n.memoizedProps&&g===n.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||r===n.memoizedProps&&g===n.memoizedState||(t.flags|=1024),i=!1)}return o=i,am(n,t),i=(t.flags&128)!==0,o||i?(o=t.stateNode,e=i&&typeof e.getDerivedStateFromError!="function"?null:o.render(),t.flags|=1,n!==null&&i?(t.child=nf(t,n.child,null,s),t.child=nf(t,null,e,s)):xe(n,t,e,s),t.memoizedState=o.state,n=t.child):n=no(n,t,s),n}function ib(n,t,e,i){return lg(),t.flags|=256,xe(n,t,e,i),t.child}var R0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function D0(n){return{baseLanes:n,cachePool:Px()}}function N0(n,t,e){return n=n!==null?n.childLanes&~e:0,t&&(n|=ii),n}function xR(n,t,e){var i=t.pendingProps,s=!1,o=(t.flags&128)!==0,r;if((r=o)||(r=n!==null&&n.memoizedState===null?!1:(le.current&2)!==0),r&&(s=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,n===null){if(ct){if(s?go(t):mo(),ct){var a=Gt,l;if(l=a){t:{for(l=a,a=Wi;l.nodeType!==8;){if(!a){a=null;break t}if(l=Ci(l.nextSibling),l===null){a=null;break t}}a=l}a!==null?(t.memoizedState={dehydrated:a,treeContext:ll!==null?{id:Js,overflow:Ks}:null,retryLane:536870912,hydrationErrors:null},l=Un(18,null,null,0),l.stateNode=a,l.return=t,t.child=l,We=t,Gt=null,l=!0):l=!1}l||pl(t)}if(a=t.memoizedState,a!==null&&(a=a.dehydrated,a!==null))return JT(a)?t.lanes=32:t.lanes=536870912,null;Qs(t)}return a=i.children,i=i.fallback,s?(mo(),s=t.mode,a=fy({mode:"hidden",children:a},s),i=al(i,s,e,null),a.return=t,i.return=t,a.sibling=i,t.child=a,s=t.child,s.memoizedState=D0(e),s.childLanes=N0(n,r,e),t.memoizedState=R0,i):(go(t),kT(t,a))}if(l=n.memoizedState,l!==null&&(a=l.dehydrated,a!==null)){if(o)t.flags&256?(go(t),t.flags&=-257,t=I0(n,t,e)):t.memoizedState!==null?(mo(),t.child=n.child,t.flags|=128,t=null):(mo(),s=i.fallback,a=t.mode,i=fy({mode:"visible",children:i.children},a),s=al(s,a,e,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,nf(t,n.child,null,e),i=t.child,i.memoizedState=D0(e),i.childLanes=N0(n,r,e),t.memoizedState=R0,t=s);else if(go(t),JT(a)){if(r=a.nextSibling&&a.nextSibling.dataset,r)var u=r.dgst;r=u,i=Error(k(419)),i.stack="",i.digest=r,bd({value:i,source:null,stack:null}),t=I0(n,t,e)}else if(Te||ug(n,t,e,!1),r=(e&n.childLanes)!==0,Te||r){if(r=bt,r!==null&&(i=e&-e,i=i&42?1:qE(i),i=i&(r.suspendedLanes|e)?0:i,i!==0&&i!==l.retryLane))throw l.retryLane=i,ff(n,i),Hn(r,n,i),bR;a.data==="$?"||VT(),t=I0(n,t,e)}else a.data==="$?"?(t.flags|=192,t.child=n.child,t=null):(n=l.treeContext,Gt=Ci(a.nextSibling),We=t,ct=!0,ul=null,Wi=!1,n!==null&&(jn[ti++]=Js,jn[ti++]=Ks,jn[ti++]=ll,Js=n.id,Ks=n.overflow,ll=t),t=kT(t,i.children),t.flags|=4096);return t}return s?(mo(),s=i.fallback,a=t.mode,l=n.child,u=l.sibling,i=Zs(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,u!==null?s=Zs(u,s):(s=al(s,a,e,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,a=n.child.memoizedState,a===null?a=D0(e):(l=a.cachePool,l!==null?(u=ae._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Px(),a={baseLanes:a.baseLanes|e,cachePool:l}),s.memoizedState=a,s.childLanes=N0(n,r,e),t.memoizedState=R0,i):(go(t),e=n.child,n=e.sibling,e=Zs(e,{mode:"visible",children:i.children}),e.return=t,e.sibling=null,n!==null&&(r=t.deletions,r===null?(t.deletions=[n],t.flags|=16):r.push(n)),t.child=e,t.memoizedState=null,e)}function kT(n,t){return t=fy({mode:"visible",children:t},n.mode),t.return=n,n.child=t}function fy(n,t){return n=Un(22,n,null,t),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function I0(n,t,e){return nf(t,n.child,null,e),n=kT(t,t.pendingProps.children),n.flags|=2,t.memoizedState=null,n}function sb(n,t,e){n.lanes|=t;var i=n.alternate;i!==null&&(i.lanes|=t),ET(n.return,t,e)}function L0(n,t,e,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:e,tailMode:s}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=e,o.tailMode=s)}function RR(n,t,e){var i=t.pendingProps,s=i.revealOrder,o=i.tail;if(xe(n,t,i.children,e),i=le.current,i&2)i=i&1|2,t.flags|=128;else{if(n!==null&&n.flags&128)t:for(n=t.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&sb(n,e,t);else if(n.tag===19)sb(n,e,t);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break t;for(;n.sibling===null;){if(n.return===null||n.return===t)break t;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}switch(Pt(le,i),s){case"forwards":for(e=t.child,s=null;e!==null;)n=e.alternate,n!==null&&ly(n)===null&&(s=e),e=e.sibling;e=s,e===null?(s=t.child,t.child=null):(s=e.sibling,e.sibling=null),L0(t,!1,s,e,o);break;case"backwards":for(e=null,s=t.child,t.child=null;s!==null;){if(n=s.alternate,n!==null&&ly(n)===null){t.child=s;break}n=s.sibling,s.sibling=e,e=s,s=n}L0(t,!0,e,null,o);break;case"together":L0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function no(n,t,e){if(n!==null&&(t.dependencies=n.dependencies),Er|=t.lanes,!(e&t.childLanes))if(n!==null){if(ug(n,t,e,!1),(e&t.childLanes)===0)return null}else return null;if(n!==null&&t.child!==n.child)throw Error(k(153));if(t.child!==null){for(n=t.child,e=Zs(n,n.pendingProps),t.child=e,e.return=t;n.sibling!==null;)n=n.sibling,e=e.sibling=Zs(n,n.pendingProps),e.return=t;e.sibling=null}return t.child}function AC(n,t){return n.lanes&t?!0:(n=n.dependencies,!!(n!==null&&iy(n)))}function HP(n,t,e){switch(t.tag){case 3:Km(t,t.stateNode.containerInfo),po(t,ae,n.memoizedState.cache),lg();break;case 27:case 5:cT(t);break;case 4:Km(t,t.stateNode.containerInfo);break;case 10:po(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(go(t),t.flags|=128,null):e&t.child.childLanes?xR(n,t,e):(go(t),n=no(n,t,e),n!==null?n.sibling:null);go(t);break;case 19:var s=(n.flags&128)!==0;if(i=(e&t.childLanes)!==0,i||(ug(n,t,e,!1),i=(e&t.childLanes)!==0),s){if(i)return RR(n,t,e);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pt(le,le.current),i)break;return null;case 22:case 23:return t.lanes=0,MR(n,t,e);case 24:po(t,ae,n.memoizedState.cache)}return no(n,t,e)}function DR(n,t,e){if(n!==null)if(n.memoizedProps!==t.pendingProps)Te=!0;else{if(!AC(n,e)&&!(t.flags&128))return Te=!1,HP(n,t,e);Te=!!(n.flags&131072)}else Te=!1,ct&&t.flags&1048576&&Ix(t,ny,t.index);switch(t.lanes=0,t.tag){case 16:t:{n=t.pendingProps;var i=t.elementType,s=i._init;if(i=s(i._payload),t.type=i,typeof i=="function")tC(i)?(n=yl(i,n),t.tag=1,t=nb(null,t,i,n,e)):(t.tag=0,t=PT(null,t,i,n,e));else{if(i!=null){if(s=i.$$typeof,s===HE){t.tag=11,t=Z_(null,t,i,n,e);break t}else if(s===VE){t.tag=14,t=j_(null,t,i,n,e);break t}}throw t=lT(i)||i,Error(k(306,t,""))}}return t;case 0:return PT(n,t,t.type,t.pendingProps,e);case 1:return i=t.type,s=yl(i,t.pendingProps),nb(n,t,i,s,e);case 3:t:{if(Km(t,t.stateNode.containerInfo),n===null)throw Error(k(387));i=t.pendingProps;var o=t.memoizedState;s=o.element,wT(n,t),hd(t,i,null,e);var r=t.memoizedState;if(i=r.cache,po(t,ae,i),i!==o.cache&&CT(t,[ae],e,!0),dd(),i=r.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){t=ib(n,t,i,e);break t}else if(i!==s){s=ni(Error(k(424)),t),bd(s),t=ib(n,t,i,e);break t}else{switch(n=t.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Gt=Ci(n.firstChild),We=t,ct=!0,ul=null,Wi=!0,e=vR(t,null,i,e),t.child=e;e;)e.flags=e.flags&-3|4096,e=e.sibling}else{if(lg(),i===s){t=no(n,t,e);break t}xe(n,t,i,e)}t=t.child}return t;case 26:return am(n,t),n===null?(e=Sb(t.type,null,t.pendingProps,null))?t.memoizedState=e:ct||(e=t.type,n=t.pendingProps,i=vy(dr.current).createElement(e),i[Be]=t,i[hn]=n,Ne(i,e,n),Ae(i),t.stateNode=i):t.memoizedState=Sb(t.type,n.memoizedProps,t.pendingProps,n.memoizedState),null;case 27:return cT(t),n===null&&ct&&(i=t.stateNode=m1(t.type,t.pendingProps,dr.current),We=t,Wi=!0,s=Gt,wr(t.type)?(KT=s,Gt=Ci(i.firstChild)):Gt=s),xe(n,t,t.pendingProps.children,e),am(n,t),n===null&&(t.flags|=4194304),t.child;case 5:return n===null&&ct&&((s=i=Gt)&&(i=p2(i,t.type,t.pendingProps,Wi),i!==null?(t.stateNode=i,We=t,Gt=Ci(i.firstChild),Wi=!1,s=!0):s=!1),s||pl(t)),cT(t),s=t.type,o=t.pendingProps,r=n!==null?n.memoizedProps:null,i=o.children,YT(s,o)?i=null:r!==null&&YT(s,r)&&(t.flags|=32),t.memoizedState!==null&&(s=lC(n,t,IP,null,null,e),Nd._currentValue=s),am(n,t),xe(n,t,i,e),t.child;case 6:return n===null&&ct&&((n=e=Gt)&&(e=g2(e,t.pendingProps,Wi),e!==null?(t.stateNode=e,We=t,Gt=null,n=!0):n=!1),n||pl(t)),null;case 13:return xR(n,t,e);case 4:return Km(t,t.stateNode.containerInfo),i=t.pendingProps,n===null?t.child=nf(t,null,i,e):xe(n,t,i,e),t.child;case 11:return Z_(n,t,t.type,t.pendingProps,e);case 7:return xe(n,t,t.pendingProps,e),t.child;case 8:return xe(n,t,t.pendingProps.children,e),t.child;case 12:return xe(n,t,t.pendingProps.children,e),t.child;case 10:return i=t.pendingProps,po(t,t.type,i.value),xe(n,t,i.children,e),t.child;case 9:return s=t.type._context,i=t.pendingProps.children,gl(t),s=He(s),i=i(s),t.flags|=1,xe(n,t,i,e),t.child;case 14:return j_(n,t,t.type,t.pendingProps,e);case 15:return wR(n,t,t.type,t.pendingProps,e);case 19:return RR(n,t,e);case 31:return i=t.pendingProps,e=t.mode,i={mode:i.mode,children:i.children},n===null?(e=fy(i,e),e.ref=t.ref,t.child=e,e.return=t,t=e):(e=Zs(n.child,i),e.ref=t.ref,t.child=e,e.return=t,t=e),t;case 22:return MR(n,t,e);case 24:return gl(t),i=He(ae),n===null?(s=sC(),s===null&&(s=bt,o=iC(),s.pooledCache=o,o.refCount++,o!==null&&(s.pooledCacheLanes|=e),s=o),t.memoizedState={parent:i,cache:s},oC(t),po(t,ae,s)):(n.lanes&e&&(wT(n,t),hd(t,null,null,e),dd()),s=n.memoizedState,o=t.memoizedState,s.parent!==i?(s={parent:i,cache:i},t.memoizedState=s,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=s),po(t,ae,i)):(i=o.cache,po(t,ae,i),i!==s.cache&&CT(t,[ae],e,!0))),xe(n,t,t.pendingProps.children,e),t.child;case 29:throw t.pendingProps}throw Error(k(156,t.tag))}function rs(n){n.flags|=4}function ob(n,t){if(t.type!=="stylesheet"||t.state.loading&4)n.flags&=-16777217;else if(n.flags|=16777216,!A1(t)){if(t=oi.current,t!==null&&((at&4194048)===at?es!==null:(at&62914560)!==at&&!(at&536870912)||t!==es))throw cd=bT,kx;n.flags|=8192}}function Bg(n,t){t!==null&&(n.flags|=4),n.flags&16384&&(t=n.tag!==22?nx():536870912,n.lanes|=t,sf|=t)}function Mf(n,t){if(!ct)switch(n.tailMode){case"hidden":t=n.tail;for(var e=null;t!==null;)t.alternate!==null&&(e=t),t=t.sibling;e===null?n.tail=null:e.sibling=null;break;case"collapsed":e=n.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Ut(n){var t=n.alternate!==null&&n.alternate.child===n.child,e=0,i=0;if(t)for(var s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags&65011712,i|=s.flags&65011712,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)e|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=e,t}function VP(n,t,e){var i=t.pendingProps;switch(nC(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(t),null;case 1:return Ut(t),null;case 3:return e=t.stateNode,i=null,n!==null&&(i=n.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),js(ae),Wc(),e.pendingContext&&(e.context=e.pendingContext,e.pendingContext=null),(n===null||n.child===null)&&(bf(t)?rs(t):n===null||n.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,k_())),Ut(t),null;case 26:return e=t.memoizedState,n===null?(rs(t),e!==null?(Ut(t),ob(t,e)):(Ut(t),t.flags&=-16777217)):e?e!==n.memoizedState?(rs(t),Ut(t),ob(t,e)):(Ut(t),t.flags&=-16777217):(n.memoizedProps!==i&&rs(t),Ut(t),t.flags&=-16777217),null;case 27:Wm(t),e=dr.current;var s=t.type;if(n!==null&&t.stateNode!=null)n.memoizedProps!==i&&rs(t);else{if(!i){if(t.stateNode===null)throw Error(k(166));return Ut(t),null}n=ji.current,bf(t)?L_(t):(n=m1(s,i,e),t.stateNode=n,rs(t))}return Ut(t),null;case 5:if(Wm(t),e=t.type,n!==null&&t.stateNode!=null)n.memoizedProps!==i&&rs(t);else{if(!i){if(t.stateNode===null)throw Error(k(166));return Ut(t),null}if(n=ji.current,bf(t))L_(t);else{switch(s=vy(dr.current),n){case 1:n=s.createElementNS("http://www.w3.org/2000/svg",e);break;case 2:n=s.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;default:switch(e){case"svg":n=s.createElementNS("http://www.w3.org/2000/svg",e);break;case"math":n=s.createElementNS("http://www.w3.org/1998/Math/MathML",e);break;case"script":n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof i.is=="string"?s.createElement("select",{is:i.is}):s.createElement("select"),i.multiple?n.multiple=!0:i.size&&(n.size=i.size);break;default:n=typeof i.is=="string"?s.createElement(e,{is:i.is}):s.createElement(e)}}n[Be]=t,n[hn]=i;t:for(s=t.child;s!==null;){if(s.tag===5||s.tag===6)n.appendChild(s.stateNode);else if(s.tag!==4&&s.tag!==27&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break t;for(;s.sibling===null;){if(s.return===null||s.return===t)break t;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=n;t:switch(Ne(n,e,i),e){case"button":case"input":case"select":case"textarea":n=!!i.autoFocus;break t;case"img":n=!0;break t;default:n=!1}n&&rs(t)}}return Ut(t),t.flags&=-16777217,null;case 6:if(n&&t.stateNode!=null)n.memoizedProps!==i&&rs(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(k(166));if(n=dr.current,bf(t)){if(n=t.stateNode,e=t.memoizedProps,i=null,s=We,s!==null)switch(s.tag){case 27:case 5:i=s.memoizedProps}n[Be]=t,n=!!(n.nodeValue===e||i!==null&&i.suppressHydrationWarning===!0||h1(n.nodeValue,e)),n||pl(t)}else n=vy(n).createTextNode(i),n[Be]=t,t.stateNode=n}return Ut(t),null;case 13:if(i=t.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(s=bf(t),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(k(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(k(317));s[Be]=t}else lg(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ut(t),s=!1}else s=k_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=s),s=!0;if(!s)return t.flags&256?(Qs(t),t):(Qs(t),null)}if(Qs(t),t.flags&128)return t.lanes=e,t;if(e=i!==null,n=n!==null&&n.memoizedState!==null,e){i=t.child,s=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(s=i.alternate.memoizedState.cachePool.pool);var o=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),o!==s&&(i.flags|=2048)}return e!==n&&e&&(t.child.flags|=8192),Bg(t,t.updateQueue),Ut(t),null;case 4:return Wc(),n===null&&MC(t.stateNode.containerInfo),Ut(t),null;case 10:return js(t.type),Ut(t),null;case 19:if(Se(le),s=t.memoizedState,s===null)return Ut(t),null;if(i=(t.flags&128)!==0,o=s.rendering,o===null)if(i)Mf(s,!1);else{if(qt!==0||n!==null&&n.flags&128)for(n=t.child;n!==null;){if(o=ly(n),o!==null){for(t.flags|=128,Mf(s,!1),n=o.updateQueue,t.updateQueue=n,Bg(t,n),t.subtreeFlags=0,n=e,e=t.child;e!==null;)Nx(e,n),e=e.sibling;return Pt(le,le.current&1|2),t.child}n=n.sibling}s.tail!==null&&ts()>hy&&(t.flags|=128,i=!0,Mf(s,!1),t.lanes=4194304)}else{if(!i)if(n=ly(o),n!==null){if(t.flags|=128,i=!0,n=n.updateQueue,t.updateQueue=n,Bg(t,n),Mf(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ct)return Ut(t),null}else 2*ts()-s.renderingStartTime>hy&&e!==536870912&&(t.flags|=128,i=!0,Mf(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ts(),t.sibling=null,n=le.current,Pt(le,i?n&1|2:n&1),t):(Ut(t),null);case 22:case 23:return Qs(t),rC(),i=t.memoizedState!==null,n!==null?n.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?e&536870912&&!(t.flags&128)&&(Ut(t),t.subtreeFlags&6&&(t.flags|=8192)):Ut(t),e=t.updateQueue,e!==null&&Bg(t,e.retryQueue),e=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==e&&(t.flags|=2048),n!==null&&Se(cl),null;case 24:return e=null,n!==null&&(e=n.memoizedState.cache),t.memoizedState.cache!==e&&(t.flags|=2048),js(ae),Ut(t),null;case 25:return null;case 30:return null}throw Error(k(156,t.tag))}function GP(n,t){switch(nC(t),t.tag){case 1:return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 3:return js(ae),Wc(),n=t.flags,n&65536&&!(n&128)?(t.flags=n&-65537|128,t):null;case 26:case 27:case 5:return Wm(t),null;case 13:if(Qs(t),n=t.memoizedState,n!==null&&n.dehydrated!==null){if(t.alternate===null)throw Error(k(340));lg()}return n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 19:return Se(le),null;case 4:return Wc(),null;case 10:return js(t.type),null;case 22:case 23:return Qs(t),rC(),n!==null&&Se(cl),n=t.flags,n&65536?(t.flags=n&-65537|128,t):null;case 24:return js(ae),null;case 25:return null;default:return null}}function NR(n,t){switch(nC(t),t.tag){case 3:js(ae),Wc();break;case 26:case 27:case 5:Wm(t);break;case 4:Wc();break;case 13:Qs(t);break;case 19:Se(le);break;case 10:js(t.type);break;case 22:case 23:Qs(t),rC(),n!==null&&Se(cl);break;case 24:js(ae)}}function pg(n,t){try{var e=t.updateQueue,i=e!==null?e.lastEffect:null;if(i!==null){var s=i.next;e=s;do{if((e.tag&n)===n){i=void 0;var o=e.create,r=e.inst;i=o(),r.destroy=i}e=e.next}while(e!==s)}}catch(a){Et(t,t.return,a)}}function Sr(n,t,e){try{var i=t.updateQueue,s=i!==null?i.lastEffect:null;if(s!==null){var o=s.next;i=o;do{if((i.tag&n)===n){var r=i.inst,a=r.destroy;if(a!==void 0){r.destroy=void 0,s=t;var l=e,u=a;try{u()}catch(h){Et(s,l,h)}}}i=i.next}while(i!==o)}}catch(h){Et(t,t.return,h)}}function IR(n){var t=n.updateQueue;if(t!==null){var e=n.stateNode;try{Ox(t,e)}catch(i){Et(n,n.return,i)}}}function LR(n,t,e){e.props=yl(n.type,n.memoizedProps),e.state=n.memoizedState;try{e.componentWillUnmount()}catch(i){Et(n,t,i)}}function gd(n,t){try{var e=n.ref;if(e!==null){switch(n.tag){case 26:case 27:case 5:var i=n.stateNode;break;case 30:i=n.stateNode;break;default:i=n.stateNode}typeof e=="function"?n.refCleanup=e(i):e.current=i}}catch(s){Et(n,t,s)}}function Zi(n,t){var e=n.ref,i=n.refCleanup;if(e!==null)if(typeof i=="function")try{i()}catch(s){Et(n,t,s)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof e=="function")try{e(null)}catch(s){Et(n,t,s)}else e.current=null}function PR(n){var t=n.type,e=n.memoizedProps,i=n.stateNode;try{t:switch(t){case"button":case"input":case"select":case"textarea":e.autoFocus&&i.focus();break t;case"img":e.src?i.src=e.src:e.srcSet&&(i.srcset=e.srcSet)}}catch(s){Et(n,n.return,s)}}function P0(n,t,e){try{var i=n.stateNode;u2(i,n.type,e,t),i[hn]=t}catch(s){Et(n,n.return,s)}}function kR(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&wr(n.type)||n.tag===4}function k0(n){t:for(;;){for(;n.sibling===null;){if(n.return===null||kR(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&wr(n.type)||n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function UT(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e).insertBefore(n,t):(t=e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,t.appendChild(n),e=e._reactRootContainer,e!=null||t.onclick!==null||(t.onclick=$A));else if(i!==4&&(i===27&&wr(n.type)&&(e=n.stateNode,t=null),n=n.child,n!==null))for(UT(n,t,e),n=n.sibling;n!==null;)UT(n,t,e),n=n.sibling}function dy(n,t,e){var i=n.tag;if(i===5||i===6)n=n.stateNode,t?e.insertBefore(n,t):e.appendChild(n);else if(i!==4&&(i===27&&wr(n.type)&&(e=n.stateNode),n=n.child,n!==null))for(dy(n,t,e),n=n.sibling;n!==null;)dy(n,t,e),n=n.sibling}function UR(n){var t=n.stateNode,e=n.memoizedProps;try{for(var i=n.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);Ne(t,i,e),t[Be]=n,t[hn]=e}catch(o){Et(n,n.return,o)}}var Ys=!1,Xt=!1,U0=!1,rb=typeof WeakSet=="function"?WeakSet:Set,ve=null;function qP(n,t){if(n=n.containerInfo,zT=Ey,n=Cx(n),QE(n)){if("selectionStart"in n)var e={start:n.selectionStart,end:n.selectionEnd};else t:{e=(e=n.ownerDocument)&&e.defaultView||window;var i=e.getSelection&&e.getSelection();if(i&&i.rangeCount!==0){e=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{e.nodeType,o.nodeType}catch{e=null;break t}var r=0,a=-1,l=-1,u=0,h=0,p=n,g=null;e:for(;;){for(var m;p!==e||s!==0&&p.nodeType!==3||(a=r+s),p!==o||i!==0&&p.nodeType!==3||(l=r+i),p.nodeType===3&&(r+=p.nodeValue.length),(m=p.firstChild)!==null;)g=p,p=m;for(;;){if(p===n)break e;if(g===e&&++u===s&&(a=r),g===o&&++h===i&&(l=r),(m=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=m}e=a===-1||l===-1?null:{start:a,end:l}}else e=null}e=e||{start:0,end:0}}else e=null;for($T={focusedElem:n,selectionRange:e},Ey=!1,ve=t;ve!==null;)if(t=ve,n=t.child,(t.subtreeFlags&1024)!==0&&n!==null)n.return=t,ve=n;else for(;ve!==null;){switch(t=ve,o=t.alternate,n=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(n&1024&&o!==null){n=void 0,e=t,s=o.memoizedProps,o=o.memoizedState,i=e.stateNode;try{var v=yl(e.type,s,e.elementType===e.type);n=i.getSnapshotBeforeUpdate(v,o),i.__reactInternalSnapshotBeforeUpdate=n}catch(A){Et(e,e.return,A)}}break;case 3:if(n&1024){if(n=t.stateNode.containerInfo,e=n.nodeType,e===9)XT(n);else if(e===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":XT(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(n&1024)throw Error(k(163))}if(n=t.sibling,n!==null){n.return=t.return,ve=n;break}ve=t.return}}function FR(n,t,e){var i=e.flags;switch(e.tag){case 0:case 11:case 15:lo(n,e),i&4&&pg(5,e);break;case 1:if(lo(n,e),i&4)if(n=e.stateNode,t===null)try{n.componentDidMount()}catch(r){Et(e,e.return,r)}else{var s=yl(e.type,t.memoizedProps);t=t.memoizedState;try{n.componentDidUpdate(s,t,n.__reactInternalSnapshotBeforeUpdate)}catch(r){Et(e,e.return,r)}}i&64&&IR(e),i&512&&gd(e,e.return);break;case 3:if(lo(n,e),i&64&&(n=e.updateQueue,n!==null)){if(t=null,e.child!==null)switch(e.child.tag){case 27:case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}try{Ox(n,t)}catch(r){Et(e,e.return,r)}}break;case 27:t===null&&i&4&&UR(e);case 26:case 5:lo(n,e),t===null&&i&4&&PR(e),i&512&&gd(e,e.return);break;case 12:lo(n,e);break;case 13:lo(n,e),i&4&&HR(n,e),i&64&&(n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(e=ZP.bind(null,e),m2(n,e))));break;case 22:if(i=e.memoizedState!==null||Ys,!i){t=t!==null&&t.memoizedState!==null||Xt,s=Ys;var o=Xt;Ys=i,(Xt=t)&&!o?uo(n,e,(e.subtreeFlags&8772)!==0):lo(n,e),Ys=s,Xt=o}break;case 30:break;default:lo(n,e)}}function OR(n){var t=n.alternate;t!==null&&(n.alternate=null,OR(t)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(t=n.stateNode,t!==null&&$E(t)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var It=null,ln=!1;function as(n,t,e){for(e=e.child;e!==null;)BR(n,t,e),e=e.sibling}function BR(n,t,e){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(ig,e)}catch{}switch(e.tag){case 26:Xt||Zi(e,t),as(n,t,e),e.memoizedState?e.memoizedState.count--:e.stateNode&&(e=e.stateNode,e.parentNode.removeChild(e));break;case 27:Xt||Zi(e,t);var i=It,s=ln;wr(e.type)&&(It=e.stateNode,ln=!1),as(n,t,e),Ad(e.stateNode),It=i,ln=s;break;case 5:Xt||Zi(e,t);case 6:if(i=It,s=ln,It=null,as(n,t,e),It=i,ln=s,It!==null)if(ln)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(e.stateNode)}catch(o){Et(e,t,o)}else try{It.removeChild(e.stateNode)}catch(o){Et(e,t,o)}break;case 18:It!==null&&(ln?(n=It,vb(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.stateNode),Pd(n)):vb(It,e.stateNode));break;case 4:i=It,s=ln,It=e.stateNode.containerInfo,ln=!0,as(n,t,e),It=i,ln=s;break;case 0:case 11:case 14:case 15:Xt||Sr(2,e,t),Xt||Sr(4,e,t),as(n,t,e);break;case 1:Xt||(Zi(e,t),i=e.stateNode,typeof i.componentWillUnmount=="function"&&LR(e,t,i)),as(n,t,e);break;case 21:as(n,t,e);break;case 22:Xt=(i=Xt)||e.memoizedState!==null,as(n,t,e),Xt=i;break;default:as(n,t,e)}}function HR(n,t){if(t.memoizedState===null&&(n=t.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Pd(n)}catch(e){Et(t,t.return,e)}}function zP(n){switch(n.tag){case 13:case 19:var t=n.stateNode;return t===null&&(t=n.stateNode=new rb),t;case 22:return n=n.stateNode,t=n._retryCache,t===null&&(t=n._retryCache=new rb),t;default:throw Error(k(435,n.tag))}}function F0(n,t){var e=zP(n);t.forEach(function(i){var s=jP.bind(null,n,i);e.has(i)||(e.add(i),i.then(s,s))})}function mn(n,t){var e=t.deletions;if(e!==null)for(var i=0;i<e.length;i++){var s=e[i],o=n,r=t,a=r;t:for(;a!==null;){switch(a.tag){case 27:if(wr(a.type)){It=a.stateNode,ln=!1;break t}break;case 5:It=a.stateNode,ln=!1;break t;case 3:case 4:It=a.stateNode.containerInfo,ln=!0;break t}a=a.return}if(It===null)throw Error(k(160));BR(o,r,s),It=null,ln=!1,o=s.alternate,o!==null&&(o.return=null),s.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)VR(t,n),t=t.sibling}var Ei=null;function VR(n,t){var e=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:mn(t,n),yn(n),i&4&&(Sr(3,n,n.return),pg(3,n),Sr(5,n,n.return));break;case 1:mn(t,n),yn(n),i&512&&(Xt||e===null||Zi(e,e.return)),i&64&&Ys&&(n=n.updateQueue,n!==null&&(i=n.callbacks,i!==null&&(e=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=e===null?i:e.concat(i))));break;case 26:var s=Ei;if(mn(t,n),yn(n),i&512&&(Xt||e===null||Zi(e,e.return)),i&4){var o=e!==null?e.memoizedState:null;if(i=n.memoizedState,e===null)if(i===null)if(n.stateNode===null){t:{i=n.type,e=n.memoizedProps,s=s.ownerDocument||s;e:switch(i){case"title":o=s.getElementsByTagName("title")[0],(!o||o[rg]||o[Be]||o.namespaceURI==="http://www.w3.org/2000/svg"||o.hasAttribute("itemprop"))&&(o=s.createElement(i),s.head.insertBefore(o,s.querySelector("head > title"))),Ne(o,i,e),o[Be]=n,Ae(o),i=o;break t;case"link":var r=Cb("link","href",s).get(i+(e.href||""));if(r){for(var a=0;a<r.length;a++)if(o=r[a],o.getAttribute("href")===(e.href==null||e.href===""?null:e.href)&&o.getAttribute("rel")===(e.rel==null?null:e.rel)&&o.getAttribute("title")===(e.title==null?null:e.title)&&o.getAttribute("crossorigin")===(e.crossOrigin==null?null:e.crossOrigin)){r.splice(a,1);break e}}o=s.createElement(i),Ne(o,i,e),s.head.appendChild(o);break;case"meta":if(r=Cb("meta","content",s).get(i+(e.content||""))){for(a=0;a<r.length;a++)if(o=r[a],o.getAttribute("content")===(e.content==null?null:""+e.content)&&o.getAttribute("name")===(e.name==null?null:e.name)&&o.getAttribute("property")===(e.property==null?null:e.property)&&o.getAttribute("http-equiv")===(e.httpEquiv==null?null:e.httpEquiv)&&o.getAttribute("charset")===(e.charSet==null?null:e.charSet)){r.splice(a,1);break e}}o=s.createElement(i),Ne(o,i,e),s.head.appendChild(o);break;default:throw Error(k(468,i))}o[Be]=n,Ae(o),i=o}n.stateNode=i}else _b(s,n.type,n.stateNode);else n.stateNode=Eb(s,i,n.memoizedProps);else o!==i?(o===null?e.stateNode!==null&&(e=e.stateNode,e.parentNode.removeChild(e)):o.count--,i===null?_b(s,n.type,n.stateNode):Eb(s,i,n.memoizedProps)):i===null&&n.stateNode!==null&&P0(n,n.memoizedProps,e.memoizedProps)}break;case 27:mn(t,n),yn(n),i&512&&(Xt||e===null||Zi(e,e.return)),e!==null&&i&4&&P0(n,n.memoizedProps,e.memoizedProps);break;case 5:if(mn(t,n),yn(n),i&512&&(Xt||e===null||Zi(e,e.return)),n.flags&32){s=n.stateNode;try{Zc(s,"")}catch(m){Et(n,n.return,m)}}i&4&&n.stateNode!=null&&(s=n.memoizedProps,P0(n,s,e!==null?e.memoizedProps:s)),i&1024&&(U0=!0);break;case 6:if(mn(t,n),yn(n),i&4){if(n.stateNode===null)throw Error(k(162));i=n.memoizedProps,e=n.stateNode;try{e.nodeValue=i}catch(m){Et(n,n.return,m)}}break;case 3:if(cm=null,s=Ei,Ei=Ay(t.containerInfo),mn(t,n),Ei=s,yn(n),i&4&&e!==null&&e.memoizedState.isDehydrated)try{Pd(t.containerInfo)}catch(m){Et(n,n.return,m)}U0&&(U0=!1,GR(n));break;case 4:i=Ei,Ei=Ay(n.stateNode.containerInfo),mn(t,n),yn(n),Ei=i;break;case 12:mn(t,n),yn(n);break;case 13:mn(t,n),yn(n),n.child.flags&8192&&n.memoizedState!==null!=(e!==null&&e.memoizedState!==null)&&(_C=ts()),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,F0(n,i)));break;case 22:s=n.memoizedState!==null;var l=e!==null&&e.memoizedState!==null,u=Ys,h=Xt;if(Ys=u||s,Xt=h||l,mn(t,n),Xt=h,Ys=u,yn(n),i&8192)t:for(t=n.stateNode,t._visibility=s?t._visibility&-2:t._visibility|1,s&&(e===null||l||Ys||Xt||Dr(n)),e=null,t=n;;){if(t.tag===5||t.tag===26){if(e===null){l=e=t;try{if(o=l.stateNode,s)r=o.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{a=l.stateNode;var p=l.memoizedProps.style,g=p!=null&&p.hasOwnProperty("display")?p.display:null;a.style.display=g==null||typeof g=="boolean"?"":(""+g).trim()}}catch(m){Et(l,l.return,m)}}}else if(t.tag===6){if(e===null){l=t;try{l.stateNode.nodeValue=s?"":l.memoizedProps}catch(m){Et(l,l.return,m)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===n)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break t;for(;t.sibling===null;){if(t.return===null||t.return===n)break t;e===t&&(e=null),t=t.return}e===t&&(e=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=n.updateQueue,i!==null&&(e=i.retryQueue,e!==null&&(i.retryQueue=null,F0(n,e))));break;case 19:mn(t,n),yn(n),i&4&&(i=n.updateQueue,i!==null&&(n.updateQueue=null,F0(n,i)));break;case 30:break;case 21:break;default:mn(t,n),yn(n)}}function yn(n){var t=n.flags;if(t&2){try{for(var e,i=n.return;i!==null;){if(kR(i)){e=i;break}i=i.return}if(e==null)throw Error(k(160));switch(e.tag){case 27:var s=e.stateNode,o=k0(n);dy(n,o,s);break;case 5:var r=e.stateNode;e.flags&32&&(Zc(r,""),e.flags&=-33);var a=k0(n);dy(n,a,r);break;case 3:case 4:var l=e.stateNode.containerInfo,u=k0(n);UT(n,u,l);break;default:throw Error(k(161))}}catch(h){Et(n,n.return,h)}n.flags&=-3}t&4096&&(n.flags&=-4097)}function GR(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var t=n;GR(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),n=n.sibling}}function lo(n,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)FR(n,t.alternate,t),t=t.sibling}function Dr(n){for(n=n.child;n!==null;){var t=n;switch(t.tag){case 0:case 11:case 14:case 15:Sr(4,t,t.return),Dr(t);break;case 1:Zi(t,t.return);var e=t.stateNode;typeof e.componentWillUnmount=="function"&&LR(t,t.return,e),Dr(t);break;case 27:Ad(t.stateNode);case 26:case 5:Zi(t,t.return),Dr(t);break;case 22:t.memoizedState===null&&Dr(t);break;case 30:Dr(t);break;default:Dr(t)}n=n.sibling}}function uo(n,t,e){for(e=e&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,s=n,o=t,r=o.flags;switch(o.tag){case 0:case 11:case 15:uo(s,o,e),pg(4,o);break;case 1:if(uo(s,o,e),i=o,s=i.stateNode,typeof s.componentDidMount=="function")try{s.componentDidMount()}catch(u){Et(i,i.return,u)}if(i=o,s=i.updateQueue,s!==null){var a=i.stateNode;try{var l=s.shared.hiddenCallbacks;if(l!==null)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Fx(l[s],a)}catch(u){Et(i,i.return,u)}}e&&r&64&&IR(o),gd(o,o.return);break;case 27:UR(o);case 26:case 5:uo(s,o,e),e&&i===null&&r&4&&PR(o),gd(o,o.return);break;case 12:uo(s,o,e);break;case 13:uo(s,o,e),e&&r&4&&HR(s,o);break;case 22:o.memoizedState===null&&uo(s,o,e),gd(o,o.return);break;case 30:break;default:uo(s,o,e)}t=t.sibling}}function TC(n,t){var e=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),n=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),n!==e&&(n!=null&&n.refCount++,e!=null&&cg(e))}function SC(n,t){n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&cg(n))}function Mi(n,t,e,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)qR(n,t,e,i),t=t.sibling}function qR(n,t,e,i){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Mi(n,t,e,i),s&2048&&pg(9,t);break;case 1:Mi(n,t,e,i);break;case 3:Mi(n,t,e,i),s&2048&&(n=null,t.alternate!==null&&(n=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==n&&(t.refCount++,n!=null&&cg(n)));break;case 12:if(s&2048){Mi(n,t,e,i),n=t.stateNode;try{var o=t.memoizedProps,r=o.id,a=o.onPostCommit;typeof a=="function"&&a(r,t.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(l){Et(t,t.return,l)}}else Mi(n,t,e,i);break;case 13:Mi(n,t,e,i);break;case 23:break;case 22:o=t.stateNode,r=t.alternate,t.memoizedState!==null?o._visibility&2?Mi(n,t,e,i):md(n,t):o._visibility&2?Mi(n,t,e,i):(o._visibility|=2,kl(n,t,e,i,(t.subtreeFlags&10256)!==0)),s&2048&&TC(r,t);break;case 24:Mi(n,t,e,i),s&2048&&SC(t.alternate,t);break;default:Mi(n,t,e,i)}}function kl(n,t,e,i,s){for(s=s&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var o=n,r=t,a=e,l=i,u=r.flags;switch(r.tag){case 0:case 11:case 15:kl(o,r,a,l,s),pg(8,r);break;case 23:break;case 22:var h=r.stateNode;r.memoizedState!==null?h._visibility&2?kl(o,r,a,l,s):md(o,r):(h._visibility|=2,kl(o,r,a,l,s)),s&&u&2048&&TC(r.alternate,r);break;case 24:kl(o,r,a,l,s),s&&u&2048&&SC(r.alternate,r);break;default:kl(o,r,a,l,s)}t=t.sibling}}function md(n,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var e=n,i=t,s=i.flags;switch(i.tag){case 22:md(e,i),s&2048&&TC(i.alternate,i);break;case 24:md(e,i),s&2048&&SC(i.alternate,i);break;default:md(e,i)}t=t.sibling}}var Bf=8192;function Nl(n){if(n.subtreeFlags&Bf)for(n=n.child;n!==null;)zR(n),n=n.sibling}function zR(n){switch(n.tag){case 26:Nl(n),n.flags&Bf&&n.memoizedState!==null&&R2(Ei,n.memoizedState,n.memoizedProps);break;case 5:Nl(n);break;case 3:case 4:var t=Ei;Ei=Ay(n.stateNode.containerInfo),Nl(n),Ei=t;break;case 22:n.memoizedState===null&&(t=n.alternate,t!==null&&t.memoizedState!==null?(t=Bf,Bf=16777216,Nl(n),Bf=t):Nl(n));break;default:Nl(n)}}function $R(n){var t=n.alternate;if(t!==null&&(n=t.child,n!==null)){t.child=null;do t=n.sibling,n.sibling=null,n=t;while(n!==null)}}function xf(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];ve=i,XR(i,n)}$R(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)YR(n),n=n.sibling}function YR(n){switch(n.tag){case 0:case 11:case 15:xf(n),n.flags&2048&&Sr(9,n,n.return);break;case 3:xf(n);break;case 12:xf(n);break;case 22:var t=n.stateNode;n.memoizedState!==null&&t._visibility&2&&(n.return===null||n.return.tag!==13)?(t._visibility&=-3,lm(n)):xf(n);break;default:xf(n)}}function lm(n){var t=n.deletions;if(n.flags&16){if(t!==null)for(var e=0;e<t.length;e++){var i=t[e];ve=i,XR(i,n)}$R(n)}for(n=n.child;n!==null;){switch(t=n,t.tag){case 0:case 11:case 15:Sr(8,t,t.return),lm(t);break;case 22:e=t.stateNode,e._visibility&2&&(e._visibility&=-3,lm(t));break;default:lm(t)}n=n.sibling}}function XR(n,t){for(;ve!==null;){var e=ve;switch(e.tag){case 0:case 11:case 15:Sr(8,e,t);break;case 23:case 22:if(e.memoizedState!==null&&e.memoizedState.cachePool!==null){var i=e.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:cg(e.memoizedState.cache)}if(i=e.child,i!==null)i.return=e,ve=i;else t:for(e=n;ve!==null;){i=ve;var s=i.sibling,o=i.return;if(OR(i),i===e){ve=null;break t}if(s!==null){s.return=o,ve=s;break t}ve=o}}}var $P={getCacheForType:function(n){var t=He(ae),e=t.data.get(n);return e===void 0&&(e=n(),t.data.set(n,e)),e}},YP=typeof WeakMap=="function"?WeakMap:Map,gt=0,bt=null,it=null,at=0,pt=0,Pn=null,ur=!1,df=!1,EC=!1,io=0,qt=0,Er=0,fl=0,CC=0,ii=0,sf=0,yd=null,un=null,FT=!1,_C=0,hy=1/0,py=null,gr=null,De=0,mr=null,of=null,hu=0,OT=0,BT=null,JR=null,vd=0,HT=null;function Bn(){if(gt&2&&at!==0)return at&-at;if(X.T!==null){var n=jc;return n!==0?n:wC()}return ox()}function KR(){ii===0&&(ii=!(at&536870912)||ct?ex():536870912);var n=oi.current;return n!==null&&(n.flags|=32),ii}function Hn(n,t,e){(n===bt&&(pt===2||pt===9)||n.cancelPendingCommit!==null)&&(rf(n,0),cr(n,at,ii,!1)),og(n,e),(!(gt&2)||n!==bt)&&(n===bt&&(!(gt&2)&&(fl|=e),qt===4&&cr(n,at,ii,!1)),ss(n))}function WR(n,t,e){if(gt&6)throw Error(k(327));var i=!e&&(t&124)===0&&(t&n.expiredLanes)===0||sg(n,t),s=i?KP(n,t):O0(n,t,!0),o=i;do{if(s===0){df&&!i&&cr(n,t,0,!1);break}else{if(e=n.current.alternate,o&&!XP(e)){s=O0(n,t,!1),o=!1;continue}if(s===2){if(o=t,n.errorRecoveryDisabledLanes&o)var r=0;else r=n.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;t:{var a=n;s=yd;var l=a.current.memoizedState.isDehydrated;if(l&&(rf(a,r).flags|=256),r=O0(a,r,!1),r!==2){if(EC&&!l){a.errorRecoveryDisabledLanes|=o,fl|=o,s=4;break t}o=un,un=s,o!==null&&(un===null?un=o:un.push.apply(un,o))}s=r}if(o=!1,s!==2)continue}}if(s===1){rf(n,0),cr(n,t,0,!0);break}t:{switch(i=n,o=s,o){case 0:case 1:throw Error(k(345));case 4:if((t&4194048)!==t)break;case 6:cr(i,t,ii,!ur);break t;case 2:un=null;break;case 3:case 5:break;default:throw Error(k(329))}if((t&62914560)===t&&(s=_C+300-ts(),10<s)){if(cr(i,t,ii,!ur),IA(i,0,!0)!==0)break t;i.timeoutHandle=g1(ab.bind(null,i,e,un,py,FT,t,ii,fl,sf,ur,o,2,-0,0),s);break t}ab(i,e,un,py,FT,t,ii,fl,sf,ur,o,0,-0,0)}}break}while(!0);ss(n)}function ab(n,t,e,i,s,o,r,a,l,u,h,p,g,m){if(n.timeoutHandle=-1,p=t.subtreeFlags,(p&8192||(p&16785408)===16785408)&&(Dd={stylesheets:null,count:0,unsuspend:x2},zR(t),p=D2(),p!==null)){n.cancelPendingCommit=p(ub.bind(null,n,t,o,e,i,s,r,a,l,h,1,g,m)),cr(n,o,r,!u);return}ub(n,t,o,e,i,s,r,a,l)}function XP(n){for(var t=n;;){var e=t.tag;if((e===0||e===11||e===15)&&t.flags&16384&&(e=t.updateQueue,e!==null&&(e=e.stores,e!==null)))for(var i=0;i<e.length;i++){var s=e[i],o=s.getSnapshot;s=s.value;try{if(!Vn(o(),s))return!1}catch{return!1}}if(e=t.child,t.subtreeFlags&16384&&e!==null)e.return=t,t=e;else{if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function cr(n,t,e,i){t&=~CC,t&=~fl,n.suspendedLanes|=t,n.pingedLanes&=~t,i&&(n.warmLanes|=t),i=n.expirationTimes;for(var s=t;0<s;){var o=31-On(s),r=1<<o;i[o]=-1,s&=~r}e!==0&&ix(n,e,t)}function GA(){return gt&6?!0:(gg(0),!1)}function bC(){if(it!==null){if(pt===0)var n=it.return;else n=it,Ws=wl=null,fC(n),du=null,Md=0,n=it;for(;n!==null;)NR(n.alternate,n),n=n.return;it=null}}function rf(n,t){var e=n.timeoutHandle;e!==-1&&(n.timeoutHandle=-1,f2(e)),e=n.cancelPendingCommit,e!==null&&(n.cancelPendingCommit=null,e()),bC(),bt=n,it=e=Zs(n.current,null),at=t,pt=0,Pn=null,ur=!1,df=sg(n,t),EC=!1,sf=ii=CC=fl=Er=qt=0,un=yd=null,FT=!1,t&8&&(t|=t&32);var i=n.entangledLanes;if(i!==0)for(n=n.entanglements,i&=t;0<i;){var s=31-On(i),o=1<<s;t|=n[s],i&=~o}return io=t,UA(),e}function QR(n,t){tt=null,X.H=ay,t===fg||t===OA?(t=B_(),pt=3):t===kx?(t=B_(),pt=4):pt=t===bR?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Pn=t,it===null&&(qt=1,cy(n,ni(t,n.current)))}function ZR(){var n=X.H;return X.H=ay,n===null?ay:n}function jR(){var n=X.A;return X.A=$P,n}function VT(){qt=4,ur||(at&4194048)!==at&&oi.current!==null||(df=!0),!(Er&134217727)&&!(fl&134217727)||bt===null||cr(bt,at,ii,!1)}function O0(n,t,e){var i=gt;gt|=2;var s=ZR(),o=jR();(bt!==n||at!==t)&&(py=null,rf(n,t)),t=!1;var r=qt;t:do try{if(pt!==0&&it!==null){var a=it,l=Pn;switch(pt){case 8:bC(),r=6;break t;case 3:case 2:case 9:case 6:oi.current===null&&(t=!0);var u=pt;if(pt=0,Pn=null,eu(n,a,l,u),e&&df){r=0;break t}break;default:u=pt,pt=0,Pn=null,eu(n,a,l,u)}}JP(),r=qt;break}catch(h){QR(n,h)}while(!0);return t&&n.shellSuspendCounter++,Ws=wl=null,gt=i,X.H=s,X.A=o,it===null&&(bt=null,at=0,UA()),r}function JP(){for(;it!==null;)t1(it)}function KP(n,t){var e=gt;gt|=2;var i=ZR(),s=jR();bt!==n||at!==t?(py=null,hy=ts()+500,rf(n,t)):df=sg(n,t);t:do try{if(pt!==0&&it!==null){t=it;var o=Pn;e:switch(pt){case 1:pt=0,Pn=null,eu(n,t,o,1);break;case 2:case 9:if(O_(o)){pt=0,Pn=null,lb(t);break}t=function(){pt!==2&&pt!==9||bt!==n||(pt=7),ss(n)},o.then(t,t);break t;case 3:pt=7;break t;case 4:pt=5;break t;case 7:O_(o)?(pt=0,Pn=null,lb(t)):(pt=0,Pn=null,eu(n,t,o,7));break;case 5:var r=null;switch(it.tag){case 26:r=it.memoizedState;case 5:case 27:var a=it;if(!r||A1(r)){pt=0,Pn=null;var l=a.sibling;if(l!==null)it=l;else{var u=a.return;u!==null?(it=u,qA(u)):it=null}break e}}pt=0,Pn=null,eu(n,t,o,5);break;case 6:pt=0,Pn=null,eu(n,t,o,6);break;case 8:bC(),qt=6;break t;default:throw Error(k(462))}}WP();break}catch(h){QR(n,h)}while(!0);return Ws=wl=null,X.H=i,X.A=s,gt=e,it!==null?0:(bt=null,at=0,UA(),qt)}function WP(){for(;it!==null&&!vL();)t1(it)}function t1(n){var t=DR(n.alternate,n,io);n.memoizedProps=n.pendingProps,t===null?qA(n):it=t}function lb(n){var t=n,e=t.alternate;switch(t.tag){case 15:case 0:t=eb(e,t,t.pendingProps,t.type,void 0,at);break;case 11:t=eb(e,t,t.pendingProps,t.type.render,t.ref,at);break;case 5:fC(t);default:NR(e,t),t=it=Nx(t,io),t=DR(e,t,io)}n.memoizedProps=n.pendingProps,t===null?qA(n):it=t}function eu(n,t,e,i){Ws=wl=null,fC(t),du=null,Md=0;var s=t.return;try{if(BP(n,s,t,e,at)){qt=1,cy(n,ni(e,n.current)),it=null;return}}catch(o){if(s!==null)throw it=s,o;qt=1,cy(n,ni(e,n.current)),it=null;return}t.flags&32768?(ct||i===1?n=!0:df||at&536870912?n=!1:(ur=n=!0,(i===2||i===9||i===3||i===6)&&(i=oi.current,i!==null&&i.tag===13&&(i.flags|=16384))),e1(t,n)):qA(t)}function qA(n){var t=n;do{if(t.flags&32768){e1(t,ur);return}n=t.return;var e=VP(t.alternate,t,io);if(e!==null){it=e;return}if(t=t.sibling,t!==null){it=t;return}it=t=n}while(t!==null);qt===0&&(qt=5)}function e1(n,t){do{var e=GP(n.alternate,n);if(e!==null){e.flags&=32767,it=e;return}if(e=n.return,e!==null&&(e.flags|=32768,e.subtreeFlags=0,e.deletions=null),!t&&(n=n.sibling,n!==null)){it=n;return}it=n=e}while(n!==null);qt=6,it=null}function ub(n,t,e,i,s,o,r,a,l){n.cancelPendingCommit=null;do zA();while(De!==0);if(gt&6)throw Error(k(327));if(t!==null){if(t===n.current)throw Error(k(177));if(o=t.lanes|t.childLanes,o|=ZE,xL(n,e,o,r,a,l),n===bt&&(it=bt=null,at=0),of=t,mr=n,hu=e,OT=o,BT=s,JR=i,t.subtreeFlags&10256||t.flags&10256?(n.callbackNode=null,n.callbackPriority=0,t2(Qm,function(){return r1(),null})):(n.callbackNode=null,n.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=X.T,X.T=null,s=ft.p,ft.p=2,r=gt,gt|=4;try{qP(n,t,e)}finally{gt=r,ft.p=s,X.T=i}}De=1,n1(),i1(),s1()}}function n1(){if(De===1){De=0;var n=mr,t=of,e=(t.flags&13878)!==0;if(t.subtreeFlags&13878||e){e=X.T,X.T=null;var i=ft.p;ft.p=2;var s=gt;gt|=4;try{VR(t,n);var o=$T,r=Cx(n.containerInfo),a=o.focusedElem,l=o.selectionRange;if(r!==a&&a&&a.ownerDocument&&Ex(a.ownerDocument.documentElement,a)){if(l!==null&&QE(a)){var u=l.start,h=l.end;if(h===void 0&&(h=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(h,a.value.length);else{var p=a.ownerDocument||document,g=p&&p.defaultView||window;if(g.getSelection){var m=g.getSelection(),v=a.textContent.length,A=Math.min(l.start,v),_=l.end===void 0?A:Math.min(l.end,v);!m.extend&&A>_&&(r=_,_=A,A=r);var T=D_(a,A),E=D_(a,_);if(T&&E&&(m.rangeCount!==1||m.anchorNode!==T.node||m.anchorOffset!==T.offset||m.focusNode!==E.node||m.focusOffset!==E.offset)){var C=p.createRange();C.setStart(T.node,T.offset),m.removeAllRanges(),A>_?(m.addRange(C),m.extend(E.node,E.offset)):(C.setEnd(E.node,E.offset),m.addRange(C))}}}}for(p=[],m=a;m=m.parentNode;)m.nodeType===1&&p.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<p.length;a++){var w=p[a];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}Ey=!!zT,$T=zT=null}finally{gt=s,ft.p=i,X.T=e}}n.current=t,De=2}}function i1(){if(De===2){De=0;var n=mr,t=of,e=(t.flags&8772)!==0;if(t.subtreeFlags&8772||e){e=X.T,X.T=null;var i=ft.p;ft.p=2;var s=gt;gt|=4;try{FR(n,t.alternate,t)}finally{gt=s,ft.p=i,X.T=e}}De=3}}function s1(){if(De===4||De===3){De=0,AL();var n=mr,t=of,e=hu,i=JR;t.subtreeFlags&10256||t.flags&10256?De=5:(De=0,of=mr=null,o1(n,n.pendingLanes));var s=n.pendingLanes;if(s===0&&(gr=null),zE(e),t=t.stateNode,Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(ig,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=X.T,s=ft.p,ft.p=2,X.T=null;try{for(var o=n.onRecoverableError,r=0;r<i.length;r++){var a=i[r];o(a.value,{componentStack:a.stack})}}finally{X.T=t,ft.p=s}}hu&3&&zA(),ss(n),s=n.pendingLanes,e&4194090&&s&42?n===HT?vd++:(vd=0,HT=n):vd=0,gg(0)}}function o1(n,t){(n.pooledCacheLanes&=t)===0&&(t=n.pooledCache,t!=null&&(n.pooledCache=null,cg(t)))}function zA(n){return n1(),i1(),s1(),r1()}function r1(){if(De!==5)return!1;var n=mr,t=OT;OT=0;var e=zE(hu),i=X.T,s=ft.p;try{ft.p=32>e?32:e,X.T=null,e=BT,BT=null;var o=mr,r=hu;if(De=0,of=mr=null,hu=0,gt&6)throw Error(k(331));var a=gt;if(gt|=4,YR(o.current),qR(o,o.current,r,e),gt=a,gg(0,!1),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(ig,o)}catch{}return!0}finally{ft.p=s,X.T=i,o1(n,t)}}function cb(n,t,e){t=ni(e,t),t=LT(n.stateNode,t,2),n=pr(n,t,2),n!==null&&(og(n,2),ss(n))}function Et(n,t,e){if(n.tag===3)cb(n,n,e);else for(;t!==null;){if(t.tag===3){cb(t,n,e);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(gr===null||!gr.has(i))){n=ni(e,n),e=CR(2),i=pr(t,e,2),i!==null&&(_R(e,i,t,n),og(i,2),ss(i));break}}t=t.return}}function B0(n,t,e){var i=n.pingCache;if(i===null){i=n.pingCache=new YP;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(e)||(EC=!0,s.add(e),n=QP.bind(null,n,t,e),t.then(n,n))}function QP(n,t,e){var i=n.pingCache;i!==null&&i.delete(t),n.pingedLanes|=n.suspendedLanes&e,n.warmLanes&=~e,bt===n&&(at&e)===e&&(qt===4||qt===3&&(at&62914560)===at&&300>ts()-_C?!(gt&2)&&rf(n,0):CC|=e,sf===at&&(sf=0)),ss(n)}function a1(n,t){t===0&&(t=nx()),n=ff(n,t),n!==null&&(og(n,t),ss(n))}function ZP(n){var t=n.memoizedState,e=0;t!==null&&(e=t.retryLane),a1(n,e)}function jP(n,t){var e=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(e=s.retryLane);break;case 19:i=n.stateNode;break;case 22:i=n.stateNode._retryCache;break;default:throw Error(k(314))}i!==null&&i.delete(t),a1(n,e)}function t2(n,t){return GE(n,t)}var gy=null,Ul=null,GT=!1,my=!1,H0=!1,dl=0;function ss(n){n!==Ul&&n.next===null&&(Ul===null?gy=Ul=n:Ul=Ul.next=n),my=!0,GT||(GT=!0,n2())}function gg(n,t){if(!H0&&my){H0=!0;do for(var e=!1,i=gy;i!==null;){if(n!==0){var s=i.pendingLanes;if(s===0)var o=0;else{var r=i.suspendedLanes,a=i.pingedLanes;o=(1<<31-On(42|n)+1)-1,o&=s&~(r&~a),o=o&201326741?o&201326741|1:o?o|2:0}o!==0&&(e=!0,fb(i,o))}else o=at,o=IA(i,i===bt?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(o&3)||sg(i,o)||(e=!0,fb(i,o));i=i.next}while(e);H0=!1}}function e2(){l1()}function l1(){my=GT=!1;var n=0;dl!==0&&(c2()&&(n=dl),dl=0);for(var t=ts(),e=null,i=gy;i!==null;){var s=i.next,o=u1(i,t);o===0?(i.next=null,e===null?gy=s:e.next=s,s===null&&(Ul=e)):(e=i,(n!==0||o&3)&&(my=!0)),i=s}gg(n)}function u1(n,t){for(var e=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes&-62914561;0<o;){var r=31-On(o),a=1<<r,l=s[r];l===-1?(!(a&e)||a&i)&&(s[r]=ML(a,t)):l<=t&&(n.expiredLanes|=a),o&=~a}if(t=bt,e=at,e=IA(n,n===t?e:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i=n.callbackNode,e===0||n===t&&(pt===2||pt===9)||n.cancelPendingCommit!==null)return i!==null&&i!==null&&d0(i),n.callbackNode=null,n.callbackPriority=0;if(!(e&3)||sg(n,e)){if(t=e&-e,t===n.callbackPriority)return t;switch(i!==null&&d0(i),zE(e)){case 2:case 8:e=jM;break;case 32:e=Qm;break;case 268435456:e=tx;break;default:e=Qm}return i=c1.bind(null,n),e=GE(e,i),n.callbackPriority=t,n.callbackNode=e,t}return i!==null&&i!==null&&d0(i),n.callbackPriority=2,n.callbackNode=null,2}function c1(n,t){if(De!==0&&De!==5)return n.callbackNode=null,n.callbackPriority=0,null;var e=n.callbackNode;if(zA()&&n.callbackNode!==e)return null;var i=at;return i=IA(n,n===bt?i:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),i===0?null:(WR(n,i,t),u1(n,ts()),n.callbackNode!=null&&n.callbackNode===e?c1.bind(null,n):null)}function fb(n,t){if(zA())return null;WR(n,t,!0)}function n2(){d2(function(){gt&6?GE(ZM,e2):l1()})}function wC(){return dl===0&&(dl=ex()),dl}function db(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:tm(""+n)}function hb(n,t){var e=t.ownerDocument.createElement("input");return e.name=t.name,e.value=t.value,n.id&&e.setAttribute("form",n.id),t.parentNode.insertBefore(e,t),n=new FormData(n),e.parentNode.removeChild(e),n}function i2(n,t,e,i,s){if(t==="submit"&&e&&e.stateNode===s){var o=db((s[hn]||null).action),r=i.submitter;r&&(t=(t=r[hn]||null)?db(t.formAction):r.getAttribute("formAction"),t!==null&&(o=t,r=null));var a=new LA("action","action",null,i,s);n.push({event:a,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(dl!==0){var l=r?hb(s,r):new FormData(s);NT(e,{pending:!0,data:l,method:s.method,action:o},null,l)}}else typeof o=="function"&&(a.preventDefault(),l=r?hb(s,r):new FormData(s),NT(e,{pending:!0,data:l,method:s.method,action:o},o,l))},currentTarget:s}]})}}for(var V0=0;V0<AT.length;V0++){var G0=AT[V0],s2=G0.toLowerCase(),o2=G0[0].toUpperCase()+G0.slice(1);bi(s2,"on"+o2)}bi(bx,"onAnimationEnd");bi(wx,"onAnimationIteration");bi(Mx,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(EP,"onTransitionRun");bi(CP,"onTransitionStart");bi(_P,"onTransitionCancel");bi(xx,"onTransitionEnd");Qc("onMouseEnter",["mouseout","mouseover"]);Qc("onMouseLeave",["mouseout","mouseover"]);Qc("onPointerEnter",["pointerout","pointerover"]);Qc("onPointerLeave",["pointerout","pointerover"]);Cl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xd));function f1(n,t){t=(t&4)!==0;for(var e=0;e<n.length;e++){var i=n[e],s=i.event;i=i.listeners;t:{var o=void 0;if(t)for(var r=i.length-1;0<=r;r--){var a=i[r],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&s.isPropagationStopped())break t;o=a,s.currentTarget=u;try{o(s)}catch(h){uy(h)}s.currentTarget=null,o=l}else for(r=0;r<i.length;r++){if(a=i[r],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&s.isPropagationStopped())break t;o=a,s.currentTarget=u;try{o(s)}catch(h){uy(h)}s.currentTarget=null,o=l}}}}function nt(n,t){var e=t[dT];e===void 0&&(e=t[dT]=new Set);var i=n+"__bubble";e.has(i)||(d1(t,n,2,!1),e.add(i))}function q0(n,t,e){var i=0;t&&(i|=4),d1(e,n,i,t)}var Hg="_reactListening"+Math.random().toString(36).slice(2);function MC(n){if(!n[Hg]){n[Hg]=!0,rx.forEach(function(e){e!=="selectionchange"&&(r2.has(e)||q0(e,!1,n),q0(e,!0,n))});var t=n.nodeType===9?n:n.ownerDocument;t===null||t[Hg]||(t[Hg]=!0,q0("selectionchange",!1,t))}}function d1(n,t,e,i){switch(_1(t)){case 2:var s=L2;break;case 8:s=P2;break;default:s=NC}e=s.bind(null,t,e,n),s=void 0,!mT||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(t,e,{capture:!0,passive:s}):n.addEventListener(t,e,!0):s!==void 0?n.addEventListener(t,e,{passive:s}):n.addEventListener(t,e,!1)}function z0(n,t,e,i,s){var o=i;if(!(t&1)&&!(t&2)&&i!==null)t:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var a=i.stateNode.containerInfo;if(a===s)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&r.stateNode.containerInfo===s)return;r=r.return}for(;a!==null;){if(r=Yl(a),r===null)return;if(l=r.tag,l===5||l===6||l===26||l===27){i=o=r;continue t}a=a.parentNode}}i=i.return}px(function(){var u=o,h=XE(e),p=[];t:{var g=Rx.get(n);if(g!==void 0){var m=LA,v=n;switch(n){case"keypress":if(nm(e)===0)break t;case"keydown":case"keyup":m=tP;break;case"focusin":v="focus",m=T0;break;case"focusout":v="blur",m=T0;break;case"beforeblur":case"afterblur":m=T0;break;case"click":if(e.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=T_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=GL;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=iP;break;case bx:case wx:case Mx:m=$L;break;case xx:m=oP;break;case"scroll":case"scrollend":m=HL;break;case"wheel":m=aP;break;case"copy":case"cut":case"paste":m=XL;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=E_;break;case"toggle":case"beforetoggle":m=uP}var A=(t&4)!==0,_=!A&&(n==="scroll"||n==="scrollend"),T=A?g!==null?g+"Capture":null:g;A=[];for(var E=u,C;E!==null;){var w=E;if(C=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||C===null||T===null||(w=Ed(E,T),w!=null&&A.push(Rd(E,w,C))),_)break;E=E.return}0<A.length&&(g=new m(g,v,null,e,h),p.push({event:g,listeners:A}))}}if(!(t&7)){t:{if(g=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",g&&e!==gT&&(v=e.relatedTarget||e.fromElement)&&(Yl(v)||v[uf]))break t;if((m||g)&&(g=h.window===h?h:(g=h.ownerDocument)?g.defaultView||g.parentWindow:window,m?(v=e.relatedTarget||e.toElement,m=u,v=v?Yl(v):null,v!==null&&(_=ng(v),A=v.tag,v!==_||A!==5&&A!==27&&A!==6)&&(v=null)):(m=null,v=u),m!==v)){if(A=T_,w="onMouseLeave",T="onMouseEnter",E="mouse",(n==="pointerout"||n==="pointerover")&&(A=E_,w="onPointerLeave",T="onPointerEnter",E="pointer"),_=m==null?g:Of(m),C=v==null?g:Of(v),g=new A(w,E+"leave",m,e,h),g.target=_,g.relatedTarget=C,w=null,Yl(h)===u&&(A=new A(T,E+"enter",v,e,h),A.target=C,A.relatedTarget=_,w=A),_=w,m&&v)e:{for(A=m,T=v,E=0,C=A;C;C=Il(C))E++;for(C=0,w=T;w;w=Il(w))C++;for(;0<E-C;)A=Il(A),E--;for(;0<C-E;)T=Il(T),C--;for(;E--;){if(A===T||T!==null&&A===T.alternate)break e;A=Il(A),T=Il(T)}A=null}else A=null;m!==null&&pb(p,g,m,A,!1),v!==null&&_!==null&&pb(p,_,v,A,!0)}}t:{if(g=u?Of(u):window,m=g.nodeName&&g.nodeName.toLowerCase(),m==="select"||m==="input"&&g.type==="file")var M=w_;else if(b_(g))if(Tx)M=AP;else{M=yP;var R=mP}else m=g.nodeName,!m||m.toLowerCase()!=="input"||g.type!=="checkbox"&&g.type!=="radio"?u&&YE(u.elementType)&&(M=w_):M=vP;if(M&&(M=M(n,u))){Ax(p,M,e,h);break t}R&&R(n,g,u),n==="focusout"&&u&&g.type==="number"&&u.memoizedProps.value!=null&&pT(g,"number",g.value)}switch(R=u?Of(u):window,n){case"focusin":(b_(R)||R.contentEditable==="true")&&(Kl=R,yT=u,ld=null);break;case"focusout":ld=yT=Kl=null;break;case"mousedown":vT=!0;break;case"contextmenu":case"mouseup":case"dragend":vT=!1,N_(p,e,h);break;case"selectionchange":if(SP)break;case"keydown":case"keyup":N_(p,e,h)}var x;if(WE)t:{switch(n){case"compositionstart":var D="onCompositionStart";break t;case"compositionend":D="onCompositionEnd";break t;case"compositionupdate":D="onCompositionUpdate";break t}D=void 0}else Jl?yx(n,e)&&(D="onCompositionEnd"):n==="keydown"&&e.keyCode===229&&(D="onCompositionStart");D&&(mx&&e.locale!=="ko"&&(Jl||D!=="onCompositionStart"?D==="onCompositionEnd"&&Jl&&(x=gx()):(lr=h,JE="value"in lr?lr.value:lr.textContent,Jl=!0)),R=yy(u,D),0<R.length&&(D=new S_(D,n,null,e,h),p.push({event:D,listeners:R}),x?D.data=x:(x=vx(e),x!==null&&(D.data=x)))),(x=fP?dP(n,e):hP(n,e))&&(D=yy(u,"onBeforeInput"),0<D.length&&(R=new S_("onBeforeInput","beforeinput",null,e,h),p.push({event:R,listeners:D}),R.data=x)),i2(p,n,u,e,h)}f1(p,t)})}function Rd(n,t,e){return{instance:n,listener:t,currentTarget:e}}function yy(n,t){for(var e=t+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;if(s=s.tag,s!==5&&s!==26&&s!==27||o===null||(s=Ed(n,e),s!=null&&i.unshift(Rd(n,s,o)),s=Ed(n,t),s!=null&&i.push(Rd(n,s,o))),n.tag===3)return i;n=n.return}return[]}function Il(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function pb(n,t,e,i,s){for(var o=t._reactName,r=[];e!==null&&e!==i;){var a=e,l=a.alternate,u=a.stateNode;if(a=a.tag,l!==null&&l===i)break;a!==5&&a!==26&&a!==27||u===null||(l=u,s?(u=Ed(e,o),u!=null&&r.unshift(Rd(e,u,l))):s||(u=Ed(e,o),u!=null&&r.push(Rd(e,u,l)))),e=e.return}r.length!==0&&n.push({event:t,listeners:r})}var a2=/\r\n?/g,l2=/\u0000|\uFFFD/g;function gb(n){return(typeof n=="string"?n:""+n).replace(a2,`
`).replace(l2,"")}function h1(n,t){return t=gb(t),gb(n)===t}function $A(){}function vt(n,t,e,i,s,o){switch(e){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Zc(n,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Zc(n,""+i);break;case"className":Lg(n,"class",i);break;case"tabIndex":Lg(n,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":Lg(n,e,i);break;case"style":hx(n,i,o);break;case"data":if(t!=="object"){Lg(n,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||e!=="href")){n.removeAttribute(e);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=tm(""+i),n.setAttribute(e,i);break;case"action":case"formAction":if(typeof i=="function"){n.setAttribute(e,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof o=="function"&&(e==="formAction"?(t!=="input"&&vt(n,t,"name",s.name,s,null),vt(n,t,"formEncType",s.formEncType,s,null),vt(n,t,"formMethod",s.formMethod,s,null),vt(n,t,"formTarget",s.formTarget,s,null)):(vt(n,t,"encType",s.encType,s,null),vt(n,t,"method",s.method,s,null),vt(n,t,"target",s.target,s,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){n.removeAttribute(e);break}i=tm(""+i),n.setAttribute(e,i);break;case"onClick":i!=null&&(n.onclick=$A);break;case"onScroll":i!=null&&nt("scroll",n);break;case"onScrollEnd":i!=null&&nt("scrollend",n);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(k(61));if(e=i.__html,e!=null){if(s.children!=null)throw Error(k(60));n.innerHTML=e}}break;case"multiple":n.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":n.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){n.removeAttribute("xlink:href");break}e=tm(""+i),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""+i):n.removeAttribute(e);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,""):n.removeAttribute(e);break;case"capture":case"download":i===!0?n.setAttribute(e,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?n.setAttribute(e,i):n.removeAttribute(e);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?n.setAttribute(e,i):n.removeAttribute(e);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?n.removeAttribute(e):n.setAttribute(e,i);break;case"popover":nt("beforetoggle",n),nt("toggle",n),jg(n,"popover",i);break;case"xlinkActuate":os(n,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":os(n,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":os(n,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":os(n,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":os(n,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":os(n,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":os(n,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":os(n,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":os(n,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":jg(n,"is",i);break;case"innerText":case"textContent":break;default:(!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e=OL.get(e)||e,jg(n,e,i))}}function qT(n,t,e,i,s,o){switch(e){case"style":hx(n,i,o);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(k(61));if(e=i.__html,e!=null){if(s.children!=null)throw Error(k(60));n.innerHTML=e}}break;case"children":typeof i=="string"?Zc(n,i):(typeof i=="number"||typeof i=="bigint")&&Zc(n,""+i);break;case"onScroll":i!=null&&nt("scroll",n);break;case"onScrollEnd":i!=null&&nt("scrollend",n);break;case"onClick":i!=null&&(n.onclick=$A);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ax.hasOwnProperty(e))t:{if(e[0]==="o"&&e[1]==="n"&&(s=e.endsWith("Capture"),t=e.slice(2,s?e.length-7:void 0),o=n[hn]||null,o=o!=null?o[e]:null,typeof o=="function"&&n.removeEventListener(t,o,s),typeof i=="function")){typeof o!="function"&&o!==null&&(e in n?n[e]=null:n.hasAttribute(e)&&n.removeAttribute(e)),n.addEventListener(t,i,s);break t}e in n?n[e]=i:i===!0?n.setAttribute(e,""):jg(n,e,i)}}}function Ne(n,t,e){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",n),nt("load",n);var i=!1,s=!1,o;for(o in e)if(e.hasOwnProperty(o)){var r=e[o];if(r!=null)switch(o){case"src":i=!0;break;case"srcSet":s=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:vt(n,t,o,r,e,null)}}s&&vt(n,t,"srcSet",e.srcSet,e,null),i&&vt(n,t,"src",e.src,e,null);return;case"input":nt("invalid",n);var a=o=r=s=null,l=null,u=null;for(i in e)if(e.hasOwnProperty(i)){var h=e[i];if(h!=null)switch(i){case"name":s=h;break;case"type":r=h;break;case"checked":l=h;break;case"defaultChecked":u=h;break;case"value":o=h;break;case"defaultValue":a=h;break;case"children":case"dangerouslySetInnerHTML":if(h!=null)throw Error(k(137,t));break;default:vt(n,t,i,h,e,null)}}cx(n,o,a,l,u,r,s,!1),Zm(n);return;case"select":nt("invalid",n),i=r=o=null;for(s in e)if(e.hasOwnProperty(s)&&(a=e[s],a!=null))switch(s){case"value":o=a;break;case"defaultValue":r=a;break;case"multiple":i=a;default:vt(n,t,s,a,e,null)}t=o,e=r,n.multiple=!!i,t!=null?au(n,!!i,t,!1):e!=null&&au(n,!!i,e,!0);return;case"textarea":nt("invalid",n),o=s=i=null;for(r in e)if(e.hasOwnProperty(r)&&(a=e[r],a!=null))switch(r){case"value":i=a;break;case"defaultValue":s=a;break;case"children":o=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(k(91));break;default:vt(n,t,r,a,e,null)}dx(n,i,s,o),Zm(n);return;case"option":for(l in e)if(e.hasOwnProperty(l)&&(i=e[l],i!=null))switch(l){case"selected":n.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:vt(n,t,l,i,e,null)}return;case"dialog":nt("beforetoggle",n),nt("toggle",n),nt("cancel",n),nt("close",n);break;case"iframe":case"object":nt("load",n);break;case"video":case"audio":for(i=0;i<xd.length;i++)nt(xd[i],n);break;case"image":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"embed":case"source":case"link":nt("error",n),nt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in e)if(e.hasOwnProperty(u)&&(i=e[u],i!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(k(137,t));default:vt(n,t,u,i,e,null)}return;default:if(YE(t)){for(h in e)e.hasOwnProperty(h)&&(i=e[h],i!==void 0&&qT(n,t,h,i,e,void 0));return}}for(a in e)e.hasOwnProperty(a)&&(i=e[a],i!=null&&vt(n,t,a,i,e,null))}function u2(n,t,e,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,o=null,r=null,a=null,l=null,u=null,h=null;for(m in e){var p=e[m];if(e.hasOwnProperty(m)&&p!=null)switch(m){case"checked":break;case"value":break;case"defaultValue":l=p;default:i.hasOwnProperty(m)||vt(n,t,m,null,i,p)}}for(var g in i){var m=i[g];if(p=e[g],i.hasOwnProperty(g)&&(m!=null||p!=null))switch(g){case"type":o=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":h=m;break;case"value":r=m;break;case"defaultValue":a=m;break;case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(k(137,t));break;default:m!==p&&vt(n,t,g,m,i,p)}}hT(n,r,a,l,u,h,o,s);return;case"select":m=r=a=g=null;for(o in e)if(l=e[o],e.hasOwnProperty(o)&&l!=null)switch(o){case"value":break;case"multiple":m=l;default:i.hasOwnProperty(o)||vt(n,t,o,null,i,l)}for(s in i)if(o=i[s],l=e[s],i.hasOwnProperty(s)&&(o!=null||l!=null))switch(s){case"value":g=o;break;case"defaultValue":a=o;break;case"multiple":r=o;default:o!==l&&vt(n,t,s,o,i,l)}t=a,e=r,i=m,g!=null?au(n,!!e,g,!1):!!i!=!!e&&(t!=null?au(n,!!e,t,!0):au(n,!!e,e?[]:"",!1));return;case"textarea":m=g=null;for(a in e)if(s=e[a],e.hasOwnProperty(a)&&s!=null&&!i.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:vt(n,t,a,null,i,s)}for(r in i)if(s=i[r],o=e[r],i.hasOwnProperty(r)&&(s!=null||o!=null))switch(r){case"value":g=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(k(91));break;default:s!==o&&vt(n,t,r,s,i,o)}fx(n,g,m);return;case"option":for(var v in e)if(g=e[v],e.hasOwnProperty(v)&&g!=null&&!i.hasOwnProperty(v))switch(v){case"selected":n.selected=!1;break;default:vt(n,t,v,null,i,g)}for(l in i)if(g=i[l],m=e[l],i.hasOwnProperty(l)&&g!==m&&(g!=null||m!=null))switch(l){case"selected":n.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:vt(n,t,l,g,i,m)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var A in e)g=e[A],e.hasOwnProperty(A)&&g!=null&&!i.hasOwnProperty(A)&&vt(n,t,A,null,i,g);for(u in i)if(g=i[u],m=e[u],i.hasOwnProperty(u)&&g!==m&&(g!=null||m!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(g!=null)throw Error(k(137,t));break;default:vt(n,t,u,g,i,m)}return;default:if(YE(t)){for(var _ in e)g=e[_],e.hasOwnProperty(_)&&g!==void 0&&!i.hasOwnProperty(_)&&qT(n,t,_,void 0,i,g);for(h in i)g=i[h],m=e[h],!i.hasOwnProperty(h)||g===m||g===void 0&&m===void 0||qT(n,t,h,g,i,m);return}}for(var T in e)g=e[T],e.hasOwnProperty(T)&&g!=null&&!i.hasOwnProperty(T)&&vt(n,t,T,null,i,g);for(p in i)g=i[p],m=e[p],!i.hasOwnProperty(p)||g===m||g==null&&m==null||vt(n,t,p,g,i,m)}var zT=null,$T=null;function vy(n){return n.nodeType===9?n:n.ownerDocument}function mb(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function p1(n,t){if(n===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&t==="foreignObject"?0:n}function YT(n,t){return n==="textarea"||n==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var $0=null;function c2(){var n=window.event;return n&&n.type==="popstate"?n===$0?!1:($0=n,!0):($0=null,!1)}var g1=typeof setTimeout=="function"?setTimeout:void 0,f2=typeof clearTimeout=="function"?clearTimeout:void 0,yb=typeof Promise=="function"?Promise:void 0,d2=typeof queueMicrotask=="function"?queueMicrotask:typeof yb<"u"?function(n){return yb.resolve(null).then(n).catch(h2)}:g1;function h2(n){setTimeout(function(){throw n})}function wr(n){return n==="head"}function vb(n,t){var e=t,i=0,s=0;do{var o=e.nextSibling;if(n.removeChild(e),o&&o.nodeType===8)if(e=o.data,e==="/$"){if(0<i&&8>i){e=i;var r=n.ownerDocument;if(e&1&&Ad(r.documentElement),e&2&&Ad(r.body),e&4)for(e=r.head,Ad(e),r=e.firstChild;r;){var a=r.nextSibling,l=r.nodeName;r[rg]||l==="SCRIPT"||l==="STYLE"||l==="LINK"&&r.rel.toLowerCase()==="stylesheet"||e.removeChild(r),r=a}}if(s===0){n.removeChild(o),Pd(t);return}s--}else e==="$"||e==="$?"||e==="$!"?s++:i=e.charCodeAt(0)-48;else i=0;e=o}while(e);Pd(t)}function XT(n){var t=n.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var e=t;switch(t=t.nextSibling,e.nodeName){case"HTML":case"HEAD":case"BODY":XT(e),$E(e);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(e.rel.toLowerCase()==="stylesheet")continue}n.removeChild(e)}}function p2(n,t,e,i){for(;n.nodeType===1;){var s=e;if(n.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(i){if(!n[rg])switch(t){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(o=n.getAttribute("rel"),o==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(o!==s.rel||n.getAttribute("href")!==(s.href==null||s.href===""?null:s.href)||n.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin)||n.getAttribute("title")!==(s.title==null?null:s.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(o=n.getAttribute("src"),(o!==(s.src==null?null:s.src)||n.getAttribute("type")!==(s.type==null?null:s.type)||n.getAttribute("crossorigin")!==(s.crossOrigin==null?null:s.crossOrigin))&&o&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(t==="input"&&n.type==="hidden"){var o=s.name==null?null:""+s.name;if(s.type==="hidden"&&n.getAttribute("name")===o)return n}else return n;if(n=Ci(n.nextSibling),n===null)break}return null}function g2(n,t,e){if(t==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!e||(n=Ci(n.nextSibling),n===null))return null;return n}function JT(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function m2(n,t){var e=n.ownerDocument;if(n.data!=="$?"||e.readyState==="complete")t();else{var i=function(){t(),e.removeEventListener("DOMContentLoaded",i)};e.addEventListener("DOMContentLoaded",i),n._reactRetry=i}}function Ci(n){for(;n!=null;n=n.nextSibling){var t=n.nodeType;if(t===1||t===3)break;if(t===8){if(t=n.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return n}var KT=null;function Ab(n){n=n.previousSibling;for(var t=0;n;){if(n.nodeType===8){var e=n.data;if(e==="$"||e==="$!"||e==="$?"){if(t===0)return n;t--}else e==="/$"&&t++}n=n.previousSibling}return null}function m1(n,t,e){switch(t=vy(e),n){case"html":if(n=t.documentElement,!n)throw Error(k(452));return n;case"head":if(n=t.head,!n)throw Error(k(453));return n;case"body":if(n=t.body,!n)throw Error(k(454));return n;default:throw Error(k(451))}}function Ad(n){for(var t=n.attributes;t.length;)n.removeAttributeNode(t[0]);$E(n)}var ri=new Map,Tb=new Set;function Ay(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var so=ft.d;ft.d={f:y2,r:v2,D:A2,C:T2,L:S2,m:E2,X:_2,S:C2,M:b2};function y2(){var n=so.f(),t=GA();return n||t}function v2(n){var t=cf(n);t!==null&&t.tag===5&&t.type==="form"?uR(t):so.r(n)}var hf=typeof document>"u"?null:document;function y1(n,t,e){var i=hf;if(i&&typeof t=="string"&&t){var s=ei(t);s='link[rel="'+n+'"][href="'+s+'"]',typeof e=="string"&&(s+='[crossorigin="'+e+'"]'),Tb.has(s)||(Tb.add(s),n={rel:n,crossOrigin:e,href:t},i.querySelector(s)===null&&(t=i.createElement("link"),Ne(t,"link",n),Ae(t),i.head.appendChild(t)))}}function A2(n){so.D(n),y1("dns-prefetch",n,null)}function T2(n,t){so.C(n,t),y1("preconnect",n,t)}function S2(n,t,e){so.L(n,t,e);var i=hf;if(i&&n&&t){var s='link[rel="preload"][as="'+ei(t)+'"]';t==="image"&&e&&e.imageSrcSet?(s+='[imagesrcset="'+ei(e.imageSrcSet)+'"]',typeof e.imageSizes=="string"&&(s+='[imagesizes="'+ei(e.imageSizes)+'"]')):s+='[href="'+ei(n)+'"]';var o=s;switch(t){case"style":o=af(n);break;case"script":o=pf(n)}ri.has(o)||(n=xt({rel:"preload",href:t==="image"&&e&&e.imageSrcSet?void 0:n,as:t},e),ri.set(o,n),i.querySelector(s)!==null||t==="style"&&i.querySelector(mg(o))||t==="script"&&i.querySelector(yg(o))||(t=i.createElement("link"),Ne(t,"link",n),Ae(t),i.head.appendChild(t)))}}function E2(n,t){so.m(n,t);var e=hf;if(e&&n){var i=t&&typeof t.as=="string"?t.as:"script",s='link[rel="modulepreload"][as="'+ei(i)+'"][href="'+ei(n)+'"]',o=s;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=pf(n)}if(!ri.has(o)&&(n=xt({rel:"modulepreload",href:n},t),ri.set(o,n),e.querySelector(s)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(e.querySelector(yg(o)))return}i=e.createElement("link"),Ne(i,"link",n),Ae(i),e.head.appendChild(i)}}}function C2(n,t,e){so.S(n,t,e);var i=hf;if(i&&n){var s=ru(i).hoistableStyles,o=af(n);t=t||"default";var r=s.get(o);if(!r){var a={loading:0,preload:null};if(r=i.querySelector(mg(o)))a.loading=5;else{n=xt({rel:"stylesheet",href:n,"data-precedence":t},e),(e=ri.get(o))&&xC(n,e);var l=r=i.createElement("link");Ae(l),Ne(l,"link",n),l._p=new Promise(function(u,h){l.onload=u,l.onerror=h}),l.addEventListener("load",function(){a.loading|=1}),l.addEventListener("error",function(){a.loading|=2}),a.loading|=4,um(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:a},s.set(o,r)}}}function _2(n,t){so.X(n,t);var e=hf;if(e&&n){var i=ru(e).hoistableScripts,s=pf(n),o=i.get(s);o||(o=e.querySelector(yg(s)),o||(n=xt({src:n,async:!0},t),(t=ri.get(s))&&RC(n,t),o=e.createElement("script"),Ae(o),Ne(o,"link",n),e.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(s,o))}}function b2(n,t){so.M(n,t);var e=hf;if(e&&n){var i=ru(e).hoistableScripts,s=pf(n),o=i.get(s);o||(o=e.querySelector(yg(s)),o||(n=xt({src:n,async:!0,type:"module"},t),(t=ri.get(s))&&RC(n,t),o=e.createElement("script"),Ae(o),Ne(o,"link",n),e.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},i.set(s,o))}}function Sb(n,t,e,i){var s=(s=dr.current)?Ay(s):null;if(!s)throw Error(k(446));switch(n){case"meta":case"title":return null;case"style":return typeof e.precedence=="string"&&typeof e.href=="string"?(t=af(e.href),e=ru(s).hoistableStyles,i=e.get(t),i||(i={type:"style",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(e.rel==="stylesheet"&&typeof e.href=="string"&&typeof e.precedence=="string"){n=af(e.href);var o=ru(s).hoistableStyles,r=o.get(n);if(r||(s=s.ownerDocument||s,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},o.set(n,r),(o=s.querySelector(mg(n)))&&!o._p&&(r.instance=o,r.state.loading=5),ri.has(n)||(e={rel:"preload",as:"style",href:e.href,crossOrigin:e.crossOrigin,integrity:e.integrity,media:e.media,hrefLang:e.hrefLang,referrerPolicy:e.referrerPolicy},ri.set(n,e),o||w2(s,n,e,r.state))),t&&i===null)throw Error(k(528,""));return r}if(t&&i!==null)throw Error(k(529,""));return null;case"script":return t=e.async,e=e.src,typeof e=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=pf(e),e=ru(s).hoistableScripts,i=e.get(t),i||(i={type:"script",instance:null,count:0,state:null},e.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(k(444,n))}}function af(n){return'href="'+ei(n)+'"'}function mg(n){return'link[rel="stylesheet"]['+n+"]"}function v1(n){return xt({},n,{"data-precedence":n.precedence,precedence:null})}function w2(n,t,e,i){n.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=n.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),Ne(t,"link",e),Ae(t),n.head.appendChild(t))}function pf(n){return'[src="'+ei(n)+'"]'}function yg(n){return"script[async]"+n}function Eb(n,t,e){if(t.count++,t.instance===null)switch(t.type){case"style":var i=n.querySelector('style[data-href~="'+ei(e.href)+'"]');if(i)return t.instance=i,Ae(i),i;var s=xt({},e,{"data-href":e.href,"data-precedence":e.precedence,href:null,precedence:null});return i=(n.ownerDocument||n).createElement("style"),Ae(i),Ne(i,"style",s),um(i,e.precedence,n),t.instance=i;case"stylesheet":s=af(e.href);var o=n.querySelector(mg(s));if(o)return t.state.loading|=4,t.instance=o,Ae(o),o;i=v1(e),(s=ri.get(s))&&xC(i,s),o=(n.ownerDocument||n).createElement("link"),Ae(o);var r=o;return r._p=new Promise(function(a,l){r.onload=a,r.onerror=l}),Ne(o,"link",i),t.state.loading|=4,um(o,e.precedence,n),t.instance=o;case"script":return o=pf(e.src),(s=n.querySelector(yg(o)))?(t.instance=s,Ae(s),s):(i=e,(s=ri.get(o))&&(i=xt({},e),RC(i,s)),n=n.ownerDocument||n,s=n.createElement("script"),Ae(s),Ne(s,"link",i),n.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(k(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,um(i,e.precedence,n));return t.instance}function um(n,t,e){for(var i=e.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=i.length?i[i.length-1]:null,o=s,r=0;r<i.length;r++){var a=i[r];if(a.dataset.precedence===t)o=a;else if(o!==s)break}o?o.parentNode.insertBefore(n,o.nextSibling):(t=e.nodeType===9?e.head:e,t.insertBefore(n,t.firstChild))}function xC(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.title==null&&(n.title=t.title)}function RC(n,t){n.crossOrigin==null&&(n.crossOrigin=t.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=t.referrerPolicy),n.integrity==null&&(n.integrity=t.integrity)}var cm=null;function Cb(n,t,e){if(cm===null){var i=new Map,s=cm=new Map;s.set(e,i)}else s=cm,i=s.get(e),i||(i=new Map,s.set(e,i));if(i.has(n))return i;for(i.set(n,null),e=e.getElementsByTagName(n),s=0;s<e.length;s++){var o=e[s];if(!(o[rg]||o[Be]||n==="link"&&o.getAttribute("rel")==="stylesheet")&&o.namespaceURI!=="http://www.w3.org/2000/svg"){var r=o.getAttribute(t)||"";r=n+r;var a=i.get(r);a?a.push(o):i.set(r,[o])}}return i}function _b(n,t,e){n=n.ownerDocument||n,n.head.insertBefore(e,t==="title"?n.querySelector("head > title"):null)}function M2(n,t,e){if(e===1||t.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return n=t.disabled,typeof t.precedence=="string"&&n==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function A1(n){return!(n.type==="stylesheet"&&!(n.state.loading&3))}var Dd=null;function x2(){}function R2(n,t,e){if(Dd===null)throw Error(k(475));var i=Dd;if(t.type==="stylesheet"&&(typeof e.media!="string"||matchMedia(e.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var s=af(e.href),o=n.querySelector(mg(s));if(o){n=o._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(i.count++,i=Ty.bind(i),n.then(i,i)),t.state.loading|=4,t.instance=o,Ae(o);return}o=n.ownerDocument||n,e=v1(e),(s=ri.get(s))&&xC(e,s),o=o.createElement("link"),Ae(o);var r=o;r._p=new Promise(function(a,l){r.onload=a,r.onerror=l}),Ne(o,"link",e),t.instance=o}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,n),(n=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=Ty.bind(i),n.addEventListener("load",t),n.addEventListener("error",t))}}function D2(){if(Dd===null)throw Error(k(475));var n=Dd;return n.stylesheets&&n.count===0&&WT(n,n.stylesheets),0<n.count?function(t){var e=setTimeout(function(){if(n.stylesheets&&WT(n,n.stylesheets),n.unsuspend){var i=n.unsuspend;n.unsuspend=null,i()}},6e4);return n.unsuspend=t,function(){n.unsuspend=null,clearTimeout(e)}}:null}function Ty(){if(this.count--,this.count===0){if(this.stylesheets)WT(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Sy=null;function WT(n,t){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Sy=new Map,t.forEach(N2,n),Sy=null,Ty.call(n))}function N2(n,t){if(!(t.state.loading&4)){var e=Sy.get(n);if(e)var i=e.get(null);else{e=new Map,Sy.set(n,e);for(var s=n.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<s.length;o++){var r=s[o];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(e.set(r.dataset.precedence,r),i=r)}i&&e.set(null,i)}s=t.instance,r=s.getAttribute("data-precedence"),o=e.get(r)||i,o===i&&e.set(null,s),e.set(r,s),this.count++,i=Ty.bind(this),s.addEventListener("load",i),s.addEventListener("error",i),o?o.parentNode.insertBefore(s,o.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(s,n.firstChild)),t.state.loading|=4}}var Nd={$$typeof:Xs,Provider:null,Consumer:null,_currentValue:rl,_currentValue2:rl,_threadCount:0};function I2(n,t,e,i,s,o,r,a){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=h0(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=h0(0),this.hiddenUpdates=h0(null),this.identifierPrefix=i,this.onUncaughtError=s,this.onCaughtError=o,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=a,this.incompleteTransitions=new Map}function T1(n,t,e,i,s,o,r,a,l,u,h,p){return n=new I2(n,t,e,r,a,l,u,p),t=1,o===!0&&(t|=24),o=Un(3,null,null,t),n.current=o,o.stateNode=n,t=iC(),t.refCount++,n.pooledCache=t,t.refCount++,o.memoizedState={element:i,isDehydrated:e,cache:t},oC(o),n}function S1(n){return n?(n=Zl,n):Zl}function E1(n,t,e,i,s,o){s=S1(s),i.context===null?i.context=s:i.pendingContext=s,i=hr(t),i.payload={element:e},o=o===void 0?null:o,o!==null&&(i.callback=o),e=pr(n,i,t),e!==null&&(Hn(e,n,t),fd(e,n,t))}function bb(n,t){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var e=n.retryLane;n.retryLane=e!==0&&e<t?e:t}}function DC(n,t){bb(n,t),(n=n.alternate)&&bb(n,t)}function C1(n){if(n.tag===13){var t=ff(n,67108864);t!==null&&Hn(t,n,67108864),DC(n,67108864)}}var Ey=!0;function L2(n,t,e,i){var s=X.T;X.T=null;var o=ft.p;try{ft.p=2,NC(n,t,e,i)}finally{ft.p=o,X.T=s}}function P2(n,t,e,i){var s=X.T;X.T=null;var o=ft.p;try{ft.p=8,NC(n,t,e,i)}finally{ft.p=o,X.T=s}}function NC(n,t,e,i){if(Ey){var s=QT(i);if(s===null)z0(n,t,i,Cy,e),wb(n,i);else if(U2(s,n,t,e,i))i.stopPropagation();else if(wb(n,i),t&4&&-1<k2.indexOf(n)){for(;s!==null;){var o=cf(s);if(o!==null)switch(o.tag){case 3:if(o=o.stateNode,o.current.memoizedState.isDehydrated){var r=xr(o.pendingLanes);if(r!==0){var a=o;for(a.pendingLanes|=2,a.entangledLanes|=2;r;){var l=1<<31-On(r);a.entanglements[1]|=l,r&=~l}ss(o),!(gt&6)&&(hy=ts()+500,gg(0))}}break;case 13:a=ff(o,2),a!==null&&Hn(a,o,2),GA(),DC(o,2)}if(o=QT(i),o===null&&z0(n,t,i,Cy,e),o===s)break;s=o}s!==null&&i.stopPropagation()}else z0(n,t,i,null,e)}}function QT(n){return n=XE(n),IC(n)}var Cy=null;function IC(n){if(Cy=null,n=Yl(n),n!==null){var t=ng(n);if(t===null)n=null;else{var e=t.tag;if(e===13){if(n=JM(t),n!==null)return n;n=null}else if(e===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return Cy=n,null}function _1(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(TL()){case ZM:return 2;case jM:return 8;case Qm:case SL:return 32;case tx:return 268435456;default:return 32}default:return 32}}var ZT=!1,yr=null,vr=null,Ar=null,Id=new Map,Ld=new Map,yo=[],k2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function wb(n,t){switch(n){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":Id.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ld.delete(t.pointerId)}}function Rf(n,t,e,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:t,domEventName:e,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},t!==null&&(t=cf(t),t!==null&&C1(t)),n):(n.eventSystemFlags|=i,t=n.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),n)}function U2(n,t,e,i,s){switch(t){case"focusin":return yr=Rf(yr,n,t,e,i,s),!0;case"dragenter":return vr=Rf(vr,n,t,e,i,s),!0;case"mouseover":return Ar=Rf(Ar,n,t,e,i,s),!0;case"pointerover":var o=s.pointerId;return Id.set(o,Rf(Id.get(o)||null,n,t,e,i,s)),!0;case"gotpointercapture":return o=s.pointerId,Ld.set(o,Rf(Ld.get(o)||null,n,t,e,i,s)),!0}return!1}function b1(n){var t=Yl(n.target);if(t!==null){var e=ng(t);if(e!==null){if(t=e.tag,t===13){if(t=JM(e),t!==null){n.blockedOn=t,RL(n.priority,function(){if(e.tag===13){var i=Bn();i=qE(i);var s=ff(e,i);s!==null&&Hn(s,e,i),DC(e,i)}});return}}else if(t===3&&e.stateNode.current.memoizedState.isDehydrated){n.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}n.blockedOn=null}function fm(n){if(n.blockedOn!==null)return!1;for(var t=n.targetContainers;0<t.length;){var e=QT(n.nativeEvent);if(e===null){e=n.nativeEvent;var i=new e.constructor(e.type,e);gT=i,e.target.dispatchEvent(i),gT=null}else return t=cf(e),t!==null&&C1(t),n.blockedOn=e,!1;t.shift()}return!0}function Mb(n,t,e){fm(n)&&e.delete(t)}function F2(){ZT=!1,yr!==null&&fm(yr)&&(yr=null),vr!==null&&fm(vr)&&(vr=null),Ar!==null&&fm(Ar)&&(Ar=null),Id.forEach(Mb),Ld.forEach(Mb)}function Vg(n,t){n.blockedOn===t&&(n.blockedOn=null,ZT||(ZT=!0,ue.unstable_scheduleCallback(ue.unstable_NormalPriority,F2)))}var Gg=null;function xb(n){Gg!==n&&(Gg=n,ue.unstable_scheduleCallback(ue.unstable_NormalPriority,function(){Gg===n&&(Gg=null);for(var t=0;t<n.length;t+=3){var e=n[t],i=n[t+1],s=n[t+2];if(typeof i!="function"){if(IC(i||e)===null)continue;break}var o=cf(e);o!==null&&(n.splice(t,3),t-=3,NT(o,{pending:!0,data:s,method:e.method,action:i},i,s))}}))}function Pd(n){function t(l){return Vg(l,n)}yr!==null&&Vg(yr,n),vr!==null&&Vg(vr,n),Ar!==null&&Vg(Ar,n),Id.forEach(t),Ld.forEach(t);for(var e=0;e<yo.length;e++){var i=yo[e];i.blockedOn===n&&(i.blockedOn=null)}for(;0<yo.length&&(e=yo[0],e.blockedOn===null);)b1(e),e.blockedOn===null&&yo.shift();if(e=(n.ownerDocument||n).$$reactFormReplay,e!=null)for(i=0;i<e.length;i+=3){var s=e[i],o=e[i+1],r=s[hn]||null;if(typeof o=="function")r||xb(e);else if(r){var a=null;if(o&&o.hasAttribute("formAction")){if(s=o,r=o[hn]||null)a=r.formAction;else if(IC(s)!==null)continue}else a=r.action;typeof a=="function"?e[i+1]=a:(e.splice(i,3),i-=3),xb(e)}}}function LC(n){this._internalRoot=n}YA.prototype.render=LC.prototype.render=function(n){var t=this._internalRoot;if(t===null)throw Error(k(409));var e=t.current,i=Bn();E1(e,i,n,t,null,null)};YA.prototype.unmount=LC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var t=n.containerInfo;E1(n.current,2,null,n,null,null),GA(),t[uf]=null}};function YA(n){this._internalRoot=n}YA.prototype.unstable_scheduleHydration=function(n){if(n){var t=ox();n={blockedOn:null,target:n,priority:t};for(var e=0;e<yo.length&&t!==0&&t<yo[e].priority;e++);yo.splice(e,0,n),e===0&&b1(n)}};var Rb=YM.version;if(Rb!=="19.1.0")throw Error(k(527,Rb,"19.1.0"));ft.findDOMNode=function(n){var t=n._reactInternals;if(t===void 0)throw typeof n.render=="function"?Error(k(188)):(n=Object.keys(n).join(","),Error(k(268,n)));return n=hL(t),n=n!==null?KM(n):null,n=n===null?null:n.stateNode,n};var O2={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qg.isDisabled&&qg.supportsFiber)try{ig=qg.inject(O2),Fn=qg}catch{}}DA.createRoot=function(n,t){if(!XM(n))throw Error(k(299));var e=!1,i="",s=TR,o=SR,r=ER,a=null;return t!=null&&(t.unstable_strictMode===!0&&(e=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(s=t.onUncaughtError),t.onCaughtError!==void 0&&(o=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(a=t.unstable_transitionCallbacks)),t=T1(n,1,!1,null,null,e,i,s,o,r,a,null),n[uf]=t.current,MC(n),new LC(t)};DA.hydrateRoot=function(n,t,e){if(!XM(n))throw Error(k(299));var i=!1,s="",o=TR,r=SR,a=ER,l=null,u=null;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(r=e.onCaughtError),e.onRecoverableError!==void 0&&(a=e.onRecoverableError),e.unstable_transitionCallbacks!==void 0&&(l=e.unstable_transitionCallbacks),e.formState!==void 0&&(u=e.formState)),t=T1(n,1,!0,t,e??null,i,s,o,r,a,l,u),t.context=S1(null),e=t.current,i=Bn(),i=qE(i),s=hr(i),s.callback=null,pr(e,s,i),e=i,t.current.lanes=e,og(t,e),ss(t),n[uf]=t.current,MC(n),new YA(t)};DA.version="19.1.0";function w1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w1)}catch(n){console.error(n)}}w1(),HM.exports=DA;var B2=HM.exports;/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H2={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const V2=(n,t,e,i)=>{const s=te.forwardRef(({color:o="currentColor",size:r=24,stroke:a=2,title:l,className:u,children:h,...p},g)=>te.createElement("svg",{ref:g,...H2[n],width:r,height:r,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),strokeWidth:a,stroke:o,...p},[l&&te.createElement("title",{key:"svg-title"},l),...i.map(([m,v])=>te.createElement(m,v)),...Array.isArray(h)?h:[h]]));return s.displayName=`${e}`,s};/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const G2=[["path",{d:"M19 6.844a2.007 2.007 0 0 1 1 1.752v6.555c0 .728 -.394 1.399 -1.03 1.753l-6 3.844a2 2 0 0 1 -1.942 0l-6 -3.844a2.007 2.007 0 0 1 -1.029 -1.752v-6.556c0 -.729 .394 -1.4 1.029 -1.753l6 -3.583a2.05 2.05 0 0 1 2 0l6 3.584h-.03z",key:"svg-0"}],["path",{d:"M12 16.5v4.5",key:"svg-1"}],["path",{d:"M4.5 7.5l3.5 2.5",key:"svg-2"}],["path",{d:"M16 10l4 -2.5",key:"svg-3"}],["path",{d:"M12 7.5v4.5l-4 2",key:"svg-4"}],["path",{d:"M12 12l4 2",key:"svg-5"}],["path",{d:"M12 16.5l4 -2.5v-4l-4 -2.5l-4 2.5v4z",key:"svg-6"}]],q2=V2("outline","hexagon-3d","Hexagon3d",G2),z2=()=>$.jsxs("div",{className:"fixed w-screen px-10 py-5 flex bg-gradient-to-br from-slate-200 via-purple-300 to-slate-400 z-10 items-center justify-between",children:[$.jsx(q2,{color:"#8261ae",size:"32"}),$.jsx("h1",{className:"text-3xl font-bold text-[#8261ae]",children:"AlgoRank"})]}),$2="modulepreload",Y2=function(n){return"/Algorank/"+n},Db={},X2=function(t,e,i){let s=Promise.resolve();if(e&&e.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),r=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.all(e.map(a=>{if(a=Y2(a),a in Db)return;Db[a]=!0;const l=a.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":$2,l||(h.as="script",h.crossOrigin=""),h.href=a,r&&h.setAttribute("nonce",r),document.head.appendChild(h),l)return new Promise((p,g)=>{h.addEventListener("load",p),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${a}`)))})}))}return s.then(()=>t()).catch(o=>{const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=o,window.dispatchEvent(r),!r.defaultPrevented)throw o})},Je=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),jT=[.001,0,0,.001,0,0],Y0=1.35,Ln={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},vo={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},M1="pdfjs_internal_editor_",J={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},ot={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},J2={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Le={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},dm={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Qt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Fl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},XA={ERRORS:0,WARNINGS:1,INFOS:5},_y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zg={moveTo:0,lineTo:1,curveTo:2,closePath:3},K2={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let JA=XA.WARNINGS;function W2(n){Number.isInteger(n)&&(JA=n)}function Q2(){return JA}function KA(n){JA>=XA.INFOS&&console.log(`Info: ${n}`)}function K(n){JA>=XA.WARNINGS&&console.log(`Warning: ${n}`)}function Tt(n){throw new Error(n)}function ee(n,t){n||Tt(t)}function Z2(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function x1(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=ik(n)}catch{}}const i=t?URL.parse(n,t):URL.parse(n);return Z2(i)?i:null}function R1(n,t,e=!1){const i=URL.parse(n);return i?(i.hash=t,i.href):e&&x1(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function st(n,t,e,i=!1){return Object.defineProperty(n,t,{value:e,enumerable:!i,configurable:!0,writable:!1}),e}const Ml=function(){function t(e,i){this.message=e,this.name=i}return t.prototype=new Error,t.constructor=t,t}();class Nb extends Ml{constructor(t,e){super(t,"PasswordException"),this.code=e}}class X0 extends Ml{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class tS extends Ml{constructor(t){super(t,"InvalidPDFException")}}class by extends Ml{constructor(t,e,i){super(t,"ResponseException"),this.status=e,this.missing=i}}class j2 extends Ml{constructor(t){super(t,"FormatError")}}class Cr extends Ml{constructor(t){super(t,"AbortException")}}function D1(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Tt("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<t;s+=e){const o=Math.min(s+e,t),r=n.subarray(s,o);i.push(String.fromCharCode.apply(null,r))}return i.join("")}function vg(n){typeof n!="string"&&Tt("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let i=0;i<t;++i)e[i]=n.charCodeAt(i)&255;return e}function tk(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function ek(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function nk(){try{return new Function(""),!0}catch{return!1}}class Ie{static get isLittleEndian(){return st(this,"isLittleEndian",ek())}static get isEvalSupported(){return st(this,"isEvalSupported",nk())}static get isOffscreenCanvasSupported(){return st(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return st(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return st(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return st(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const J0=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var vu,hm,Bd,eS;class q{static makeHexColor(t,e,i){return`#${J0[t]}${J0[e]}${J0[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[1],e[1]=i,i=e[2],e[2]=e[3],e[3]=i,t[1]<0&&(i=e[1],e[1]=e[3],e[3]=i),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[2],e[2]=i),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,i=0){const s=t[i],o=t[i+1];t[i]=s*e[0]+o*e[2]+e[4],t[i+1]=s*e[1]+o*e[3]+e[5]}static applyTransformToBezier(t,e,i=0){const s=e[0],o=e[1],r=e[2],a=e[3],l=e[4],u=e[5];for(let h=0;h<6;h+=2){const p=t[i+h],g=t[i+h+1];t[i+h]=p*s+g*r+l,t[i+h+1]=p*o+g*a+u}}static applyInverseTransform(t,e){const i=t[0],s=t[1],o=e[0]*e[3]-e[1]*e[2];t[0]=(i*e[3]-s*e[2]+e[2]*e[5]-e[4]*e[3])/o,t[1]=(-i*e[1]+s*e[0]+e[4]*e[1]-e[5]*e[0])/o}static axialAlignedBoundingBox(t,e,i){const s=e[0],o=e[1],r=e[2],a=e[3],l=e[4],u=e[5],h=t[0],p=t[1],g=t[2],m=t[3];let v=s*h+l,A=v,_=s*g+l,T=_,E=a*p+u,C=E,w=a*m+u,M=w;if(o!==0||r!==0){const R=o*h,x=o*g,D=r*p,N=r*m;v+=D,T+=D,_+=N,A+=N,E+=R,M+=R,w+=x,C+=x}i[0]=Math.min(i[0],v,_,A,T),i[1]=Math.min(i[1],E,w,C,M),i[2]=Math.max(i[2],v,_,A,T),i[3]=Math.max(i[3],E,w,C,M)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const i=t[0],s=t[1],o=t[2],r=t[3],a=i**2+s**2,l=i*o+s*r,u=o**2+r**2,h=(a+u)/2,p=Math.sqrt(h**2-(a*u-l**2));e[0]=Math.sqrt(h+p||1),e[1]=Math.sqrt(h-p||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),s=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>s)return null;const o=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),r=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return o>r?null:[i,o,s,r]}static pointBoundingBox(t,e,i){i[0]=Math.min(i[0],t),i[1]=Math.min(i[1],e),i[2]=Math.max(i[2],t),i[3]=Math.max(i[3],e)}static rectBoundingBox(t,e,i,s,o){o[0]=Math.min(o[0],t,i),o[1]=Math.min(o[1],e,s),o[2]=Math.max(o[2],t,i),o[3]=Math.max(o[3],e,s)}static bezierBoundingBox(t,e,i,s,o,r,a,l,u){u[0]=Math.min(u[0],t,a),u[1]=Math.min(u[1],e,l),u[2]=Math.max(u[2],t,a),u[3]=Math.max(u[3],e,l),b(this,Bd,eS).call(this,t,i,o,a,e,s,r,l,3*(-t+3*(i-o)+a),6*(t-2*i+o),3*(i-t),u),b(this,Bd,eS).call(this,t,i,o,a,e,s,r,l,3*(-e+3*(s-r)+l),6*(e-2*s+r),3*(s-e),u)}}vu=new WeakSet,hm=function(t,e,i,s,o,r,a,l,u,h){if(u<=0||u>=1)return;const p=1-u,g=u*u,m=g*u,v=p*(p*(p*t+3*u*e)+3*g*i)+m*s,A=p*(p*(p*o+3*u*r)+3*g*a)+m*l;h[0]=Math.min(h[0],v),h[1]=Math.min(h[1],A),h[2]=Math.max(h[2],v),h[3]=Math.max(h[3],A)},Bd=new WeakSet,eS=function(t,e,i,s,o,r,a,l,u,h,p,g){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&b(this,vu,hm).call(this,t,e,i,s,o,r,a,l,-p/h,g);return}const m=h**2-4*p*u;if(m<0)return;const v=Math.sqrt(m),A=2*u;b(this,vu,hm).call(this,t,e,i,s,o,r,a,l,(-h+v)/A,g),b(this,vu,hm).call(this,t,e,i,s,o,r,a,l,(-h-v)/A,g)},y(q,vu),y(q,Bd);function ik(n){return decodeURIComponent(escape(n))}let K0=null,Ib=null;function sk(n){return K0||(K0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ib=new Map([["","t"]])),n.replaceAll(K0,(t,e,i)=>e?e.normalize("NFKC"):Ib.get(i))}function N1(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),D1(n)}const PC="pdfjs_internal_id_";function ok(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[i,s,...o]=e;if(!n(i)&&!Number.isInteger(i)||!t(s))return!1;const r=o.length;let a=!0;switch(s.name){case"XYZ":if(r<2||r>3)return!1;break;case"Fit":case"FitB":return r===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(r>1)return!1;break;case"FitR":if(r!==4)return!1;a=!1;break;default:return!1}for(const l of o)if(!(typeof l=="number"||a&&l===null))return!1;return!0}function Ke(n,t,e){return Math.min(Math.max(n,t),e)}function I1(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(D1(n))}function rk(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):vg(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const ls="http://www.w3.org/2000/svg",Pr=class Pr{};O(Pr,"CSS",96),O(Pr,"PDF",72),O(Pr,"PDF_TO_CSS_UNITS",Pr.CSS/Pr.PDF);let _r=Pr;async function Ag(n,t="text"){if(Hf(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=t,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(s.response);return}e(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class Tg{constructor({viewBox:t,userUnit:e,scale:i,rotation:s,offsetX:o=0,offsetY:r=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=i,this.rotation=s,this.offsetX=o,this.offsetY=r,i*=e;const l=(t[2]+t[0])/2,u=(t[3]+t[1])/2;let h,p,g,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,p=0,g=0,m=1;break;case 90:h=0,p=1,g=1,m=0;break;case 270:h=0,p=-1,g=-1,m=0;break;case 0:h=1,p=0,g=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(g=-g,m=-m);let v,A,_,T;h===0?(v=Math.abs(u-t[1])*i+o,A=Math.abs(l-t[0])*i+r,_=(t[3]-t[1])*i,T=(t[2]-t[0])*i):(v=Math.abs(l-t[0])*i+o,A=Math.abs(u-t[1])*i+r,_=(t[2]-t[0])*i,T=(t[3]-t[1])*i),this.transform=[h*i,p*i,g*i,m*i,v-h*i*l-g*i*u,A-p*i*l-m*i*u],this.width=_,this.height=T}get rawDims(){const t=this.viewBox;return st(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:o=!1}={}){return new Tg({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:o})}convertToViewportPoint(t,e){const i=[t,e];return q.applyTransform(i,this.transform),i}convertToViewportRectangle(t){const e=[t[0],t[1]];q.applyTransform(e,this.transform);const i=[t[2],t[3]];return q.applyTransform(i,this.transform),[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){const i=[t,e];return q.applyInverseTransform(i,this.transform),i}}class kC extends Ml{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function WA(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function UC(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function ak(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function lk(n,t="document.pdf"){if(typeof n!="string")return t;if(WA(n))return K('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const i=(a=>{try{return new URL(a)}catch{try{return new URL(decodeURIComponent(a))}catch{try{return new URL(a,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(a),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return t;const s=a=>{try{let l=decodeURIComponent(a);return l.includes("/")?(l=l.split("/").at(-1),l.test(/^\.pdf$/i)?l:a):l}catch{return a}},o=/\.pdf$/i,r=i.pathname.split("/").at(-1);if(o.test(r))return s(r);if(i.searchParams.size>0){const a=Array.from(i.searchParams.values()).reverse();for(const u of a)if(o.test(u))return s(u);const l=Array.from(i.searchParams.keys()).reverse();for(const u of l)if(o.test(u))return s(u)}if(i.hash){const l=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(l)return s(l[0])}return t}class Lb{constructor(){O(this,"started",Object.create(null));O(this,"times",[])}time(t){t in this.started&&K(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||K(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:i}of this.times)e=Math.max(i.length,e);for(const{name:i,start:s,end:o}of this.times)t.push(`${i.padEnd(e)} ${o-s}ms
`);return t.join("")}}function Hf(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function _i(n){n.preventDefault()}function jt(n){n.preventDefault(),n.stopPropagation()}function uk(n){console.log("Deprecated API usage: "+n)}var Hd;class FC{static toDateObject(t){if(!t||typeof t!="string")return null;d(this,Hd)||S(this,Hd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=d(this,Hd).exec(t);if(!e)return null;const i=parseInt(e[1],10);let s=parseInt(e[2],10);s=s>=1&&s<=12?s-1:0;let o=parseInt(e[3],10);o=o>=1&&o<=31?o:1;let r=parseInt(e[4],10);r=r>=0&&r<=23?r:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let l=parseInt(e[6],10);l=l>=0&&l<=59?l:0;const u=e[7]||"Z";let h=parseInt(e[8],10);h=h>=0&&h<=23?h:0;let p=parseInt(e[9],10)||0;return p=p>=0&&p<=59?p:0,u==="-"?(r+=h,a+=p):u==="+"&&(r-=h,a-=p),new Date(Date.UTC(i,s,o,r,a,l))}}Hd=new WeakMap,y(FC,Hd,void 0);function ck(n,{scale:t=1,rotation:e=0}){const{width:i,height:s}=n.attributes.style,o=[0,0,parseInt(i),parseInt(s)];return new Tg({viewBox:o,userUnit:1,scale:t,rotation:e})}function OC(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(K(`Not a valid color format: "${n}"`),[0,0,0])}function fk(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const i=window.getComputedStyle(t).color;n.set(e,OC(i))}t.remove()}function Ot(n){const{a:t,b:e,c:i,d:s,e:o,f:r}=n.getTransform();return[t,e,i,s,o,r]}function xi(n){const{a:t,b:e,c:i,d:s,e:o,f:r}=n.getTransform().invertSelf();return[t,e,i,s,o,r]}function vl(n,t,e=!1,i=!0){if(t instanceof Tg){const{pageWidth:s,pageHeight:o}=t.rawDims,{style:r}=n,a=Ie.isCSSRoundSupported,l=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${o}px`,h=a?`round(down, ${l}, var(--scale-round-x))`:`calc(${l})`,p=a?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!e||t.rotation%180===0?(r.width=h,r.height=p):(r.width=p,r.height=h)}i&&n.setAttribute("data-main-rotation",t.rotation)}class ns{constructor(){const{pixelRatio:t}=ns;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,i,s,o=-1){let r=1/0,a=1/0,l=1/0;i=ns.capPixels(i,o),i>0&&(r=Math.sqrt(i/(t*e))),s!==-1&&(a=s/t,l=s/e);const u=Math.min(r,a,l);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,i):i}return t}}const nS=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var Ao,Fr,qn,To,Vd,Au,Gd,Oy,L1,By,P1,Hy,k1,Or,Vf,Tu,pm;const fs=class fs{constructor(t){y(this,By);y(this,Hy);y(this,Or);y(this,Tu);y(this,Ao,null);y(this,Fr,null);y(this,qn,void 0);y(this,To,null);y(this,Vd,null);y(this,Au,null);S(this,qn,t),d(fs,Gd)||S(fs,Gd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=S(this,Ao,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=d(this,qn)._uiManager._signal;t.addEventListener("contextmenu",_i,{signal:e}),t.addEventListener("pointerdown",b(fs,Oy,L1),{signal:e});const i=S(this,To,document.createElement("div"));i.className="buttons",t.append(i);const s=d(this,qn).toolbarPosition;if(s){const{style:o}=t,r=d(this,qn)._uiManager.direction==="ltr"?1-s[0]:s[0];o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return d(this,Ao)}hide(){var t;d(this,Ao).classList.add("hidden"),(t=d(this,Fr))==null||t.hideDropdown()}show(){var t;d(this,Ao).classList.remove("hidden"),(t=d(this,Vd))==null||t.shown()}addDeleteButton(){const{editorType:t,_uiManager:e}=d(this,qn),i=document.createElement("button");i.className="delete",i.tabIndex=0,i.setAttribute("data-l10n-id",d(fs,Gd)[t]),b(this,Or,Vf).call(this,i),i.addEventListener("click",s=>{e.delete()},{signal:e._signal}),d(this,To).append(i)}async addAltText(t){const e=await t.render();b(this,Or,Vf).call(this,e),d(this,To).append(e,d(this,Tu,pm)),S(this,Vd,t)}addColorPicker(t){S(this,Fr,t);const e=t.renderButton();b(this,Or,Vf).call(this,e),d(this,To).append(e,d(this,Tu,pm))}async addEditSignatureButton(t){const e=S(this,Au,await t.renderEditButton(d(this,qn)));b(this,Or,Vf).call(this,e),d(this,To).append(e,d(this,Tu,pm))}async addButton(t,e){switch(t){case"colorPicker":this.addColorPicker(e);break;case"altText":await this.addAltText(e);break;case"editSignature":await this.addEditSignatureButton(e);break;case"delete":this.addDeleteButton();break}}updateEditSignatureButton(t){d(this,Au)&&(d(this,Au).title=t)}remove(){var t;d(this,Ao).remove(),(t=d(this,Fr))==null||t.destroy(),S(this,Fr,null)}};Ao=new WeakMap,Fr=new WeakMap,qn=new WeakMap,To=new WeakMap,Vd=new WeakMap,Au=new WeakMap,Gd=new WeakMap,Oy=new WeakSet,L1=function(t){t.stopPropagation()},By=new WeakSet,P1=function(t){d(this,qn)._focusEventsAllowed=!1,jt(t)},Hy=new WeakSet,k1=function(t){d(this,qn)._focusEventsAllowed=!0,jt(t)},Or=new WeakSet,Vf=function(t){const e=d(this,qn)._uiManager._signal;t.addEventListener("focusin",b(this,By,P1).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",b(this,Hy,k1).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",_i,{signal:e})},Tu=new WeakSet,pm=function(){const t=document.createElement("div");return t.className="divider",t},y(fs,Oy),y(fs,Gd,null);let iS=fs;var qd,Br,Hr,Vy,U1,Gy,F1,qy,O1;class dk{constructor(t){y(this,Vy);y(this,Gy);y(this,qy);y(this,qd,null);y(this,Br,null);y(this,Hr,void 0);S(this,Hr,t)}show(t,e,i){const[s,o]=b(this,Gy,F1).call(this,e,i),{style:r}=d(this,Br)||S(this,Br,b(this,Vy,U1).call(this));t.append(d(this,Br)),r.insetInlineEnd=`${100*s}%`,r.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){d(this,Br).remove()}}qd=new WeakMap,Br=new WeakMap,Hr=new WeakMap,Vy=new WeakSet,U1=function(){const t=S(this,Br,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",_i,{signal:d(this,Hr)._signal});const e=S(this,qd,document.createElement("div"));return e.className="buttons",t.append(e),b(this,qy,O1).call(this),t},Gy=new WeakSet,F1=function(t,e){let i=0,s=0;for(const o of t){const r=o.y+o.height;if(r<i)continue;const a=o.x+(e?o.width:0);if(r>i){s=a,i=r;continue}e?a>s&&(s=a):a<s&&(s=a)}return[e?1-s:s,i]},qy=new WeakSet,O1=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const i=d(this,Hr)._signal;t.addEventListener("contextmenu",_i,{signal:i}),t.addEventListener("click",()=>{d(this,Hr).highlightSelection("floating_button")},{signal:i}),d(this,qd).append(t)};function B1(n,t,e){for(const i of e)t.addEventListener(i,n[i].bind(n))}var zy;class hk{constructor(){y(this,zy,0)}get id(){return`${M1}${Ge(this,zy)._++}`}}zy=new WeakMap;var Su,zd,ke,Eu,gm;const jC=class jC{constructor(){y(this,Eu);y(this,Su,N1());y(this,zd,0);y(this,ke,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=t;const o=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return st(this,"_isSVGFittingCanvas",o)}async getFromFile(t){const{lastModified:e,name:i,size:s,type:o}=t;return b(this,Eu,gm).call(this,`${e}_${i}_${s}_${o}`,t)}async getFromUrl(t){return b(this,Eu,gm).call(this,t,t)}async getFromBlob(t,e){const i=await e;return b(this,Eu,gm).call(this,t,i)}async getFromId(t){d(this,ke)||S(this,ke,new Map);const e=d(this,ke).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:i}=e;return delete e.blobPromise,this.getFromBlob(e.id,i)}return this.getFromUrl(e.url)}getFromCanvas(t,e){d(this,ke)||S(this,ke,new Map);let i=d(this,ke).get(t);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(e.width,e.height);return s.getContext("2d").drawImage(e,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${d(this,Su)}_${Ge(this,zd)._++}`,refCounter:1,isSvg:!1},d(this,ke).set(t,i),d(this,ke).set(i.id,i),i}getSvgUrl(t){const e=d(this,ke).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var s;d(this,ke)||S(this,ke,new Map);const e=d(this,ke).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:i}=e;if(!e.url&&!e.file){const o=new OffscreenCanvas(i.width,i.height);o.getContext("bitmaprenderer").transferFromImageBitmap(i),e.blobPromise=o.convertToBlob()}(s=i.close)==null||s.call(i),e.bitmap=null}isValidId(t){return t.startsWith(`image_${d(this,Su)}_`)}};Su=new WeakMap,zd=new WeakMap,ke=new WeakMap,Eu=new WeakSet,gm=async function(t,e){d(this,ke)||S(this,ke,new Map);let i=d(this,ke).get(t);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${d(this,Su)}_${Ge(this,zd)._++}`,refCounter:0,isSvg:!1});let s;if(typeof e=="string"?(i.url=e,s=await Ag(e,"blob")):e instanceof File?s=i.file=e:e instanceof Blob&&(s=e),s.type==="image/svg+xml"){const o=jC._isSVGFittingCanvas,r=new FileReader,a=new Image,l=new Promise((u,h)=>{a.onload=()=>{i.bitmap=a,i.isSvg=!0,u()},r.onload=async()=>{const p=i.svgUrl=r.result;a.src=await o?`${p}#svgView(preserveAspectRatio(none))`:p},a.onerror=r.onerror=h});r.readAsDataURL(s),await l}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){K(s),i=null}return d(this,ke).set(t,i),i&&d(this,ke).set(i.id,i),i};let sS=jC;var $t,So,$d,Ft;class pk{constructor(t=128){y(this,$t,[]);y(this,So,!1);y(this,$d,void 0);y(this,Ft,-1);S(this,$d,t)}add({cmd:t,undo:e,post:i,mustExec:s,type:o=NaN,overwriteIfSameType:r=!1,keepUndo:a=!1}){if(s&&t(),d(this,So))return;const l={cmd:t,undo:e,post:i,type:o};if(d(this,Ft)===-1){d(this,$t).length>0&&(d(this,$t).length=0),S(this,Ft,0),d(this,$t).push(l);return}if(r&&d(this,$t)[d(this,Ft)].type===o){a&&(l.undo=d(this,$t)[d(this,Ft)].undo),d(this,$t)[d(this,Ft)]=l;return}const u=d(this,Ft)+1;u===d(this,$d)?d(this,$t).splice(0,1):(S(this,Ft,u),u<d(this,$t).length&&d(this,$t).splice(u)),d(this,$t).push(l)}undo(){if(d(this,Ft)===-1)return;S(this,So,!0);const{undo:t,post:e}=d(this,$t)[d(this,Ft)];t(),e==null||e(),S(this,So,!1),S(this,Ft,d(this,Ft)-1)}redo(){if(d(this,Ft)<d(this,$t).length-1){S(this,Ft,d(this,Ft)+1),S(this,So,!0);const{cmd:t,post:e}=d(this,$t)[d(this,Ft)];t(),e==null||e(),S(this,So,!1)}}hasSomethingToUndo(){return d(this,Ft)!==-1}hasSomethingToRedo(){return d(this,Ft)<d(this,$t).length-1}cleanType(t){if(d(this,Ft)!==-1){for(let e=d(this,Ft);e>=0;e--)if(d(this,$t)[e].type!==t){d(this,$t).splice(e+1,d(this,Ft)-e),S(this,Ft,e);return}d(this,$t).length=0,S(this,Ft,-1)}}destroy(){S(this,$t,null)}}$t=new WeakMap,So=new WeakMap,$d=new WeakMap,Ft=new WeakMap;var $y,H1;class Sg{constructor(t){y(this,$y);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Ie.platform;for(const[i,s,o={}]of t)for(const r of i){const a=r.startsWith("mac+");e&&a?(this.callbacks.set(r.slice(4),{callback:s,options:o}),this.allKeys.add(r.split("+").at(-1))):!e&&!a&&(this.callbacks.set(r,{callback:s,options:o}),this.allKeys.add(r.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const i=this.callbacks.get(b(this,$y,H1).call(this,e));if(!i)return;const{callback:s,options:{bubbles:o=!1,args:r=[],checker:a=null}}=i;a&&!a(t,e)||(s.bind(t,...r,e)(),o||jt(e))}}$y=new WeakSet,H1=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Yy=class Yy{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return fk(t),st(this,"_colors",t)}convert(t){const e=OC(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[i,s]of this._colors)if(s.every((o,r)=>o===e[r]))return Yy._colorsMapping.get(i);return e}getHexCode(t){const e=this._colors.get(t);return e?q.makeHexColor(...e):t}};O(Yy,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let oS=Yy;var Cu,An,se,Ee,_u,hs,bu,zn,Eo,Co,wu,Vr,Ii,li,Gr,Yd,Xd,Mu,Jd,Li,_o,xu,bo,Pi,Xy,wo,Kd,Mo,qr,zr,xo,Wd,ce,ht,ps,Ro,$r,Qd,Zd,Do,ki,gs,jd,th,$n,Ru,mm,eh,rS,Jy,V1,Ky,G1,Du,ym,Wy,q1,Qy,z1,Zy,$1,nh,aS,jy,Y1,ih,lS,sh,uS,tv,X1,Ce,qe,ui,us,ev,J1,nv,K1,oh,cS,iv,W1,Yr,Gf,rh,fS;const su=class su{constructor(t,e,i,s,o,r,a,l,u,h,p,g,m,v,A){y(this,Ru);y(this,eh);y(this,Jy);y(this,Ky);y(this,Du);y(this,Wy);y(this,Qy);y(this,Zy);y(this,nh);y(this,jy);y(this,ih);y(this,sh);y(this,tv);y(this,Ce);y(this,ui);y(this,ev);y(this,nv);y(this,oh);y(this,iv);y(this,Yr);y(this,rh);y(this,Cu,new AbortController);y(this,An,null);y(this,se,new Map);y(this,Ee,new Map);y(this,_u,null);y(this,hs,null);y(this,bu,null);y(this,zn,new pk);y(this,Eo,null);y(this,Co,null);y(this,wu,0);y(this,Vr,new Set);y(this,Ii,null);y(this,li,null);y(this,Gr,new Set);O(this,"_editorUndoBar",null);y(this,Yd,!1);y(this,Xd,!1);y(this,Mu,!1);y(this,Jd,null);y(this,Li,null);y(this,_o,null);y(this,xu,null);y(this,bo,!1);y(this,Pi,null);y(this,Xy,new hk);y(this,wo,!1);y(this,Kd,!1);y(this,Mo,null);y(this,qr,null);y(this,zr,null);y(this,xo,null);y(this,Wd,null);y(this,ce,J.NONE);y(this,ht,new Set);y(this,ps,null);y(this,Ro,null);y(this,$r,null);y(this,Qd,null);y(this,Zd,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});y(this,Do,[0,0]);y(this,ki,null);y(this,gs,null);y(this,jd,null);y(this,th,null);y(this,$n,null);const _=this._signal=d(this,Cu).signal;S(this,gs,t),S(this,jd,e),S(this,th,i),S(this,_u,s),S(this,Ro,o),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:_}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),r._on("setpreference",this.onSetPreference.bind(this),{signal:_}),r._on("switchannotationeditorparams",T=>this.updateParams(T.type,T.value),{signal:_}),b(this,Wy,q1).call(this),b(this,tv,X1).call(this),b(this,nh,aS).call(this),S(this,hs,a.annotationStorage),S(this,Jd,a.filterFactory),S(this,$r,l),S(this,xu,u||null),S(this,Yd,h),S(this,Xd,p),S(this,Mu,g),S(this,Wd,m||null),this.viewParameters={realScale:_r.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=v||null,this._supportsPinchToZoom=A!==!1}static get _keyboardManager(){const t=su.prototype,e=r=>d(r,gs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&r.hasSomethingToControl(),i=(r,{target:a})=>{if(a instanceof HTMLInputElement){const{type:l}=a;return l!=="text"&&l!=="number"}return!0},s=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return st(this,"_keyboardManager",new Sg([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],t.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:i}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&d(r,gs).contains(a)&&!r.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(r,{target:a})=>!(a instanceof HTMLButtonElement)&&d(r,gs).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-s,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[s,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-s],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,s],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,o],checker:e}]]))}destroy(){var t,e,i,s,o,r,a,l;(t=d(this,$n))==null||t.resolve(),S(this,$n,null),(e=d(this,Cu))==null||e.abort(),S(this,Cu,null),this._signal=null;for(const u of d(this,Ee).values())u.destroy();d(this,Ee).clear(),d(this,se).clear(),d(this,Gr).clear(),(i=d(this,xo))==null||i.clear(),S(this,An,null),d(this,ht).clear(),d(this,zn).destroy(),(s=d(this,_u))==null||s.destroy(),(o=d(this,Ro))==null||o.destroy(),(r=d(this,Pi))==null||r.hide(),S(this,Pi,null),(a=d(this,zr))==null||a.destroy(),S(this,zr,null),d(this,Li)&&(clearTimeout(d(this,Li)),S(this,Li,null)),d(this,ki)&&(clearTimeout(d(this,ki)),S(this,ki,null)),(l=this._editorUndoBar)==null||l.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return d(this,Wd)}get useNewAltTextFlow(){return d(this,Xd)}get useNewAltTextWhenAddingImage(){return d(this,Mu)}get hcmFilter(){return st(this,"hcmFilter",d(this,$r)?d(this,Jd).addHCMFilter(d(this,$r).foreground,d(this,$r).background):"none")}get direction(){return st(this,"direction",getComputedStyle(d(this,gs)).direction)}get highlightColors(){return st(this,"highlightColors",d(this,xu)?new Map(d(this,xu).split(",").map(t=>(t=t.split("=").map(e=>e.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColorNames(){return st(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),S(this,Co,t)}setMainHighlightColorPicker(t){S(this,zr,t)}editAltText(t,e=!1){var i;(i=d(this,_u))==null||i.editAltText(this,t,e)}getSignature(t){var e;(e=d(this,Ro))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return d(this,Ro)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":S(this,Mu,e);break}}onPageChanging({pageNumber:t}){S(this,wu,t-1)}focusMainContainer(){d(this,gs).focus()}findParent(t,e){for(const i of d(this,Ee).values()){const{x:s,y:o,width:r,height:a}=i.div.getBoundingClientRect();if(t>=s&&t<=s+r&&e>=o&&e<=o+a)return i}return null}disableUserSelect(t=!1){d(this,jd).classList.toggle("noUserSelect",t)}addShouldRescale(t){d(this,Gr).add(t)}removeShouldRescale(t){d(this,Gr).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*_r.PDF_TO_CSS_UNITS;for(const i of d(this,Gr))i.onScaleChanging();(e=d(this,Co))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:r}=e,a=e.toString(),u=b(this,Ru,mm).call(this,e).closest(".textLayer"),h=this.getSelectionBoxes(u);if(!h)return;e.empty();const p=b(this,eh,rS).call(this,u),g=d(this,ce)===J.NONE,m=()=>{p==null||p.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:h,anchorNode:i,anchorOffset:s,focusNode:o,focusOffset:r,text:a}),g&&this.showAllEditors("highlight",!0,!0)};if(g){this.switchToMode(J.HIGHLIGHT,m);return}m()}addToAnnotationStorage(t){!t.isEmpty()&&d(this,hs)&&!d(this,hs).has(t.id)&&d(this,hs).setValue(t.id,t)}a11yAlert(t,e=null){const i=d(this,th);i&&(i.setAttribute("data-l10n-id",t),e?i.setAttribute("data-l10n-args",JSON.stringify(e)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,d(this,bo)&&(S(this,bo,!1),b(this,Du,ym).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of d(this,ht))if(e.div.contains(t)){S(this,qr,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!d(this,qr))return;const[t,e]=d(this,qr);S(this,qr,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){b(this,nh,aS).call(this),b(this,ih,lS).call(this)}removeEditListeners(){b(this,jy,Y1).call(this),b(this,sh,uS).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const i of d(this,li))if(i.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const i of d(this,li))if(i.isHandlingMimeForPasting(e.type)){i.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var i;if(t.preventDefault(),(i=d(this,An))==null||i.commitOrRemove(),!this.hasSelection)return;const e=[];for(const s of d(this,ht)){const o=s.serialize(!0);o&&e.push(o)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const o of e.items)for(const r of d(this,li))if(r.isHandlingMimeForPasting(o.type)){r.paste(o,this.currentLayer);return}let i=e.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(o){K(`paste: "${o.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const o=[];for(const l of i){const u=await s.deserialize(l);if(!u)return;o.push(u)}const r=()=>{for(const l of o)b(this,oh,cS).call(this,l);b(this,rh,fS).call(this,o)},a=()=>{for(const l of o)l.remove()};this.addCommands({cmd:r,undo:a,mustExec:!0})}catch(o){K(`paste: "${o.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),d(this,ce)!==J.NONE&&!this.isEditorHandlingKeyboard&&su._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,d(this,bo)&&(S(this,bo,!1),b(this,Du,ym).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(b(this,Qy,z1).call(this),b(this,ih,lS).call(this),b(this,Ce,qe).call(this,{isEditing:d(this,ce)!==J.NONE,isEmpty:b(this,Yr,Gf).call(this),hasSomethingToUndo:d(this,zn).hasSomethingToUndo(),hasSomethingToRedo:d(this,zn).hasSomethingToRedo(),hasSelectedEditor:!1})):(b(this,Zy,$1).call(this),b(this,sh,uS).call(this),b(this,Ce,qe).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!d(this,li)){S(this,li,t);for(const e of d(this,li))b(this,ui,us).call(this,e.defaultPropertiesToUpdate)}}getId(){return d(this,Xy).id}get currentLayer(){return d(this,Ee).get(d(this,wu))}getLayer(t){return d(this,Ee).get(t)}get currentPageIndex(){return d(this,wu)}addLayer(t){d(this,Ee).set(t.pageIndex,t),d(this,wo)?t.enable():t.disable()}removeLayer(t){d(this,Ee).delete(t.pageIndex)}async updateMode(t,e=null,i=!1,s=!1){var o,r,a;if(d(this,ce)!==t&&!(d(this,$n)&&(await d(this,$n).promise,!d(this,$n)))){if(S(this,$n,Promise.withResolvers()),(o=d(this,Co))==null||o.commitOrRemove(),S(this,ce,t),t===J.NONE){this.setEditingState(!1),b(this,nv,K1).call(this),(r=this._editorUndoBar)==null||r.hide(),d(this,$n).resolve();return}t===J.SIGNATURE&&await((a=d(this,Ro))==null?void 0:a.loadSignatures()),this.setEditingState(!0),await b(this,ev,J1).call(this),this.unselectAll();for(const l of d(this,Ee).values())l.updateMode(t);if(!e){i&&this.addNewEditorFromKeyboard(),d(this,$n).resolve();return}for(const l of d(this,se).values())l.annotationElementId===e||l.id===e?(this.setSelected(l),s&&l.enterInEditMode()):l.unselect();d(this,$n).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==d(this,ce)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){var i;if(d(this,li)){switch(t){case ot.CREATE:this.currentLayer.addNewEditor(e);return;case ot.HIGHLIGHT_DEFAULT_COLOR:(i=d(this,zr))==null||i.updateColor(e);break;case ot.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(d(this,Qd)||S(this,Qd,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const s of d(this,ht))s.updateParams(t,e);for(const s of d(this,li))s.updateDefaultParams(t,e)}}showAllEditors(t,e,i=!1){var o;for(const r of d(this,se).values())r.editorType===t&&r.show(e);(((o=d(this,Qd))==null?void 0:o.get(ot.HIGHLIGHT_SHOW_ALL))??!0)!==e&&b(this,ui,us).call(this,[[ot.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(d(this,Kd)!==t){S(this,Kd,t);for(const e of d(this,Ee).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const i of d(this,se).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return d(this,se).get(t)}addEditor(t){d(this,se).set(t.id,t)}removeEditor(t){var e,i;t.div.contains(document.activeElement)&&(d(this,Li)&&clearTimeout(d(this,Li)),S(this,Li,setTimeout(()=>{this.focusMainContainer(),S(this,Li,null)},0))),d(this,se).delete(t.id),t.annotationElementId&&((e=d(this,xo))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!d(this,Vr).has(t.annotationElementId))&&((i=d(this,hs))==null||i.remove(t.id))}addDeletedAnnotationElement(t){d(this,Vr).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return d(this,Vr).has(t)}removeDeletedAnnotationElement(t){d(this,Vr).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){d(this,An)!==t&&(S(this,An,t),t&&b(this,ui,us).call(this,t.propertiesToUpdate))}updateUI(t){d(this,iv,W1)===t&&b(this,ui,us).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){b(this,ui,us).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(d(this,ht).has(t)){d(this,ht).delete(t),t.unselect(),b(this,Ce,qe).call(this,{hasSelectedEditor:this.hasSelection});return}d(this,ht).add(t),t.select(),b(this,ui,us).call(this,t.propertiesToUpdate),b(this,Ce,qe).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;this.updateToolbar({mode:t.mode,editId:t.id}),(e=d(this,Co))==null||e.commitOrRemove();for(const i of d(this,ht))i!==t&&i.unselect();d(this,ht).clear(),d(this,ht).add(t),t.select(),b(this,ui,us).call(this,t.propertiesToUpdate),b(this,Ce,qe).call(this,{hasSelectedEditor:!0})}isSelected(t){return d(this,ht).has(t)}get firstSelectedEditor(){return d(this,ht).values().next().value}unselect(t){t.unselect(),d(this,ht).delete(t),b(this,Ce,qe).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return d(this,ht).size!==0}get isEnterHandled(){return d(this,ht).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;d(this,zn).undo(),b(this,Ce,qe).call(this,{hasSomethingToUndo:d(this,zn).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:b(this,Yr,Gf).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){d(this,zn).redo(),b(this,Ce,qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:d(this,zn).hasSomethingToRedo(),isEmpty:b(this,Yr,Gf).call(this)})}addCommands(t){d(this,zn).add(t),b(this,Ce,qe).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:b(this,Yr,Gf).call(this)})}cleanUndoStack(t){d(this,zn).cleanType(t)}delete(){var o;this.commitOrRemove();const t=(o=this.currentLayer)==null?void 0:o.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...d(this,ht)],i=()=>{var r;(r=this._editorUndoBar)==null||r.show(s,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},s=()=>{for(const r of e)b(this,oh,cS).call(this,r)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var t;(t=d(this,An))==null||t.commitOrRemove()}hasSomethingToControl(){return d(this,An)||this.hasSelection}selectAll(){for(const t of d(this,ht))t.commit();b(this,rh,fS).call(this,d(this,se).values())}unselectAll(){var t;if(!(d(this,An)&&(d(this,An).commitOrRemove(),d(this,ce)!==J.NONE))&&!((t=d(this,Co))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of d(this,ht))e.unselect();d(this,ht).clear(),b(this,Ce,qe).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;d(this,Do)[0]+=t,d(this,Do)[1]+=e;const[s,o]=d(this,Do),r=[...d(this,ht)],a=1e3;d(this,ki)&&clearTimeout(d(this,ki)),S(this,ki,setTimeout(()=>{S(this,ki,null),d(this,Do)[0]=d(this,Do)[1]=0,this.addCommands({cmd:()=>{for(const l of r)d(this,se).has(l.id)&&(l.translateInPage(s,o),l.translationDone())},undo:()=>{for(const l of r)d(this,se).has(l.id)&&(l.translateInPage(-s,-o),l.translationDone())},mustExec:!1})},a));for(const l of r)l.translateInPage(t,e),l.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),S(this,Ii,new Map);for(const t of d(this,ht))d(this,Ii).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!d(this,Ii))return!1;this.disableUserSelect(!1);const t=d(this,Ii);S(this,Ii,null);let e=!1;for(const[{x:s,y:o,pageIndex:r},a]of t)a.newX=s,a.newY=o,a.newPageIndex=r,e||(e=s!==a.savedX||o!==a.savedY||r!==a.savedPageIndex);if(!e)return!1;const i=(s,o,r,a)=>{if(d(this,se).has(s.id)){const l=d(this,Ee).get(a);l?s._setParentAndPosition(l,o,r):(s.pageIndex=a,s.x=o,s.y=r)}};return this.addCommands({cmd:()=>{for(const[s,{newX:o,newY:r,newPageIndex:a}]of t)i(s,o,r,a)},undo:()=>{for(const[s,{savedX:o,savedY:r,savedPageIndex:a}]of t)i(s,o,r,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(d(this,Ii))for(const i of d(this,Ii).keys())i.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||d(this,ht).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return d(this,An)===t}getActive(){return d(this,An)}getMode(){return d(this,ce)}get imageManager(){return st(this,"imageManager",new sS)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let u=0,h=e.rangeCount;u<h;u++)if(!t.contains(e.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:o,height:r}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(u,h,p,g)=>({x:(h-s)/r,y:1-(u+p-i)/o,width:g/r,height:p/o});break;case"180":a=(u,h,p,g)=>({x:1-(u+p-i)/o,y:1-(h+g-s)/r,width:p/o,height:g/r});break;case"270":a=(u,h,p,g)=>({x:1-(h+g-s)/r,y:(u-i)/o,width:g/r,height:p/o});break;default:a=(u,h,p,g)=>({x:(u-i)/o,y:(h-s)/r,width:p/o,height:g/r});break}const l=[];for(let u=0,h=e.rangeCount;u<h;u++){const p=e.getRangeAt(u);if(!p.collapsed)for(const{x:g,y:m,width:v,height:A}of p.getClientRects())v===0||A===0||l.push(a(g,m,v,A))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:t,id:e}){(d(this,bu)||S(this,bu,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=d(this,bu))==null||e.delete(t)}renderAnnotationElement(t){var s;const e=(s=d(this,bu))==null?void 0:s.get(t.data.id);if(!e)return;const i=d(this,hs).getRawValue(e);i&&(d(this,ce)===J.NONE&&!i.hasBeenModified||i.renderAnnotationElement(t))}setMissingCanvas(t,e,i){var o;const s=(o=d(this,xo))==null?void 0:o.get(t);s&&(s.setCanvas(e,i),d(this,xo).delete(t))}addMissingCanvas(t,e){(d(this,xo)||S(this,xo,new Map)).set(t,e)}};Cu=new WeakMap,An=new WeakMap,se=new WeakMap,Ee=new WeakMap,_u=new WeakMap,hs=new WeakMap,bu=new WeakMap,zn=new WeakMap,Eo=new WeakMap,Co=new WeakMap,wu=new WeakMap,Vr=new WeakMap,Ii=new WeakMap,li=new WeakMap,Gr=new WeakMap,Yd=new WeakMap,Xd=new WeakMap,Mu=new WeakMap,Jd=new WeakMap,Li=new WeakMap,_o=new WeakMap,xu=new WeakMap,bo=new WeakMap,Pi=new WeakMap,Xy=new WeakMap,wo=new WeakMap,Kd=new WeakMap,Mo=new WeakMap,qr=new WeakMap,zr=new WeakMap,xo=new WeakMap,Wd=new WeakMap,ce=new WeakMap,ht=new WeakMap,ps=new WeakMap,Ro=new WeakMap,$r=new WeakMap,Qd=new WeakMap,Zd=new WeakMap,Do=new WeakMap,ki=new WeakMap,gs=new WeakMap,jd=new WeakMap,th=new WeakMap,$n=new WeakMap,Ru=new WeakSet,mm=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},eh=new WeakSet,rS=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const i of d(this,Ee).values())if(i.hasTextLayer(t))return i;return null},Jy=new WeakSet,V1=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const i=b(this,Ru,mm).call(this,t).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(d(this,Pi)||S(this,Pi,new dk(this)),d(this,Pi).show(i,s,this.direction==="ltr"))},Ky=new WeakSet,G1=function(){var o,r,a;const t=document.getSelection();if(!t||t.isCollapsed){d(this,ps)&&((o=d(this,Pi))==null||o.hide(),S(this,ps,null),b(this,Ce,qe).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===d(this,ps))return;const s=b(this,Ru,mm).call(this,t).closest(".textLayer");if(!s){d(this,ps)&&((r=d(this,Pi))==null||r.hide(),S(this,ps,null),b(this,Ce,qe).call(this,{hasSelectedText:!1}));return}if((a=d(this,Pi))==null||a.hide(),S(this,ps,e),b(this,Ce,qe).call(this,{hasSelectedText:!0}),!(d(this,ce)!==J.HIGHLIGHT&&d(this,ce)!==J.NONE)&&(d(this,ce)===J.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),S(this,bo,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=d(this,ce)===J.HIGHLIGHT?b(this,eh,rS).call(this,s):null;l==null||l.toggleDrawing();const u=new AbortController,h=this.combinedSignal(u),p=g=>{g.type==="pointerup"&&g.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),g.type==="pointerup"&&b(this,Du,ym).call(this,"main_toolbar"))};window.addEventListener("pointerup",p,{signal:h}),window.addEventListener("blur",p,{signal:h})}},Du=new WeakSet,ym=function(t=""){d(this,ce)===J.HIGHLIGHT?this.highlightSelection(t):d(this,Yd)&&b(this,Jy,V1).call(this)},Wy=new WeakSet,q1=function(){document.addEventListener("selectionchange",b(this,Ky,G1).bind(this),{signal:this._signal})},Qy=new WeakSet,z1=function(){if(d(this,_o))return;S(this,_o,new AbortController);const t=this.combinedSignal(d(this,_o));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},Zy=new WeakSet,$1=function(){var t;(t=d(this,_o))==null||t.abort(),S(this,_o,null)},nh=new WeakSet,aS=function(){if(d(this,Mo))return;S(this,Mo,new AbortController);const t=this.combinedSignal(d(this,Mo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},jy=new WeakSet,Y1=function(){var t;(t=d(this,Mo))==null||t.abort(),S(this,Mo,null)},ih=new WeakSet,lS=function(){if(d(this,Eo))return;S(this,Eo,new AbortController);const t=this.combinedSignal(d(this,Eo));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},sh=new WeakSet,uS=function(){var t;(t=d(this,Eo))==null||t.abort(),S(this,Eo,null)},tv=new WeakSet,X1=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},Ce=new WeakSet,qe=function(t){Object.entries(t).some(([i,s])=>d(this,Zd)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(d(this,Zd),t)}),d(this,ce)===J.HIGHLIGHT&&t.hasSelectedEditor===!1&&b(this,ui,us).call(this,[[ot.HIGHLIGHT_FREE,!0]]))},ui=new WeakSet,us=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},ev=new WeakSet,J1=async function(){if(!d(this,wo)){S(this,wo,!0);const t=[];for(const e of d(this,Ee).values())t.push(e.enable());await Promise.all(t);for(const e of d(this,se).values())e.enable()}},nv=new WeakSet,K1=function(){if(this.unselectAll(),d(this,wo)){S(this,wo,!1);for(const t of d(this,Ee).values())t.disable();for(const t of d(this,se).values())t.disable()}},oh=new WeakSet,cS=function(t){const e=d(this,Ee).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},iv=new WeakSet,W1=function(){let t=null;for(t of d(this,ht));return t},Yr=new WeakSet,Gf=function(){if(d(this,se).size===0)return!0;if(d(this,se).size===1)for(const t of d(this,se).values())return t.isEmpty();return!1},rh=new WeakSet,fS=function(t){for(const e of d(this,ht))e.unselect();d(this,ht).clear();for(const e of t)e.isEmpty()||(d(this,ht).add(e),e.select());b(this,Ce,qe).call(this,{hasSelectedEditor:this.hasSelection})},O(su,"TRANSLATE_SMALL",1),O(su,"TRANSLATE_BIG",10);let Al=su;var fe,Ui,ci,Nu,Fi,Tn,Iu,Oi,sn,ms,Xr,Bi,No,Jr,qf,Lu,vm;const ze=class ze{constructor(t){y(this,Jr);y(this,Lu);y(this,fe,null);y(this,Ui,!1);y(this,ci,null);y(this,Nu,null);y(this,Fi,null);y(this,Tn,null);y(this,Iu,!1);y(this,Oi,null);y(this,sn,null);y(this,ms,null);y(this,Xr,null);y(this,Bi,!1);S(this,sn,t),S(this,Bi,t._uiManager.useNewAltTextFlow),d(ze,No)||S(ze,No,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){ze._l10n??(ze._l10n=t)}async render(){const t=S(this,ci,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=S(this,Nu,document.createElement("span"));t.append(e),d(this,Bi)?(t.classList.add("new"),t.setAttribute("data-l10n-id",d(ze,No).missing),e.setAttribute("data-l10n-id",d(ze,No)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=d(this,sn)._uiManager._signal;t.addEventListener("contextmenu",_i,{signal:i}),t.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:i});const s=o=>{o.preventDefault(),d(this,sn)._uiManager.editAltText(d(this,sn)),d(this,Bi)&&d(this,sn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:d(this,Jr,qf)}})};return t.addEventListener("click",s,{capture:!0,signal:i}),t.addEventListener("keydown",o=>{o.target===t&&o.key==="Enter"&&(S(this,Iu,!0),s(o))},{signal:i}),await b(this,Lu,vm).call(this),t}finish(){d(this,ci)&&(d(this,ci).focus({focusVisible:d(this,Iu)}),S(this,Iu,!1))}isEmpty(){return d(this,Bi)?d(this,fe)===null:!d(this,fe)&&!d(this,Ui)}hasData(){return d(this,Bi)?d(this,fe)!==null||!!d(this,ms):this.isEmpty()}get guessedText(){return d(this,ms)}async setGuessedText(t){d(this,fe)===null&&(S(this,ms,t),S(this,Xr,await ze._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),b(this,Lu,vm).call(this))}toggleAltTextBadge(t=!1){var e;if(!d(this,Bi)||d(this,fe)){(e=d(this,Oi))==null||e.remove(),S(this,Oi,null);return}if(!d(this,Oi)){const i=S(this,Oi,document.createElement("div"));i.className="noAltTextBadge",d(this,sn).div.append(i)}d(this,Oi).classList.toggle("hidden",!t)}serialize(t){let e=d(this,fe);return!t&&d(this,ms)===e&&(e=d(this,Xr)),{altText:e,decorative:d(this,Ui),guessedText:d(this,ms),textWithDisclaimer:d(this,Xr)}}get data(){return{altText:d(this,fe),decorative:d(this,Ui)}}set data({altText:t,decorative:e,guessedText:i,textWithDisclaimer:s,cancel:o=!1}){i&&(S(this,ms,i),S(this,Xr,s)),!(d(this,fe)===t&&d(this,Ui)===e)&&(o||(S(this,fe,t),S(this,Ui,e)),b(this,Lu,vm).call(this))}toggle(t=!1){d(this,ci)&&(!t&&d(this,Tn)&&(clearTimeout(d(this,Tn)),S(this,Tn,null)),d(this,ci).disabled=!t)}shown(){d(this,sn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:d(this,Jr,qf)}})}destroy(){var t,e;(t=d(this,ci))==null||t.remove(),S(this,ci,null),S(this,Nu,null),S(this,Fi,null),(e=d(this,Oi))==null||e.remove(),S(this,Oi,null)}};fe=new WeakMap,Ui=new WeakMap,ci=new WeakMap,Nu=new WeakMap,Fi=new WeakMap,Tn=new WeakMap,Iu=new WeakMap,Oi=new WeakMap,sn=new WeakMap,ms=new WeakMap,Xr=new WeakMap,Bi=new WeakMap,No=new WeakMap,Jr=new WeakSet,qf=function(){return d(this,fe)&&"added"||d(this,fe)===null&&this.guessedText&&"review"||"missing"},Lu=new WeakSet,vm=async function(){var s,o,r;const t=d(this,ci);if(!t)return;if(d(this,Bi)){if(t.classList.toggle("done",!!d(this,fe)),t.setAttribute("data-l10n-id",d(ze,No)[d(this,Jr,qf)]),(s=d(this,Nu))==null||s.setAttribute("data-l10n-id",d(ze,No)[`${d(this,Jr,qf)}-label`]),!d(this,fe)){(o=d(this,Fi))==null||o.remove();return}}else{if(!d(this,fe)&&!d(this,Ui)){t.classList.remove("done"),(r=d(this,Fi))==null||r.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=d(this,Fi);if(!e){S(this,Fi,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${d(this,sn).id}`;const a=100,l=d(this,sn)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(d(this,Tn)),S(this,Tn,null)},{once:!0}),t.addEventListener("mouseenter",()=>{S(this,Tn,setTimeout(()=>{S(this,Tn,null),d(this,Fi).classList.add("show"),d(this,sn)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:l}),t.addEventListener("mouseleave",()=>{var u;d(this,Tn)&&(clearTimeout(d(this,Tn)),S(this,Tn,null)),(u=d(this,Fi))==null||u.classList.remove("show")},{signal:l})}d(this,Ui)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=d(this,fe)),e.parentNode||t.append(e);const i=d(this,sn).getElementForAltText();i==null||i.setAttribute("aria-describedby",e.id)},y(ze,No,null),O(ze,"_l10n",null);let wy=ze;var Pu,Kr,ah,lh,uh,ch,fh,ys,Wr,vs,Qr,As,sv,Q1,ov,Z1,rv,j1;const t_=class t_{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:o=null,onPinchEnd:r=null,signal:a}){y(this,sv);y(this,ov);y(this,rv);y(this,Pu,void 0);y(this,Kr,!1);y(this,ah,null);y(this,lh,void 0);y(this,uh,void 0);y(this,ch,void 0);y(this,fh,void 0);y(this,ys,null);y(this,Wr,void 0);y(this,vs,null);y(this,Qr,void 0);y(this,As,null);S(this,Pu,t),S(this,ah,i),S(this,lh,e),S(this,uh,s),S(this,ch,o),S(this,fh,r),S(this,Qr,new AbortController),S(this,Wr,AbortSignal.any([a,d(this,Qr).signal])),t.addEventListener("touchstart",b(this,sv,Q1).bind(this),{passive:!1,signal:d(this,Wr)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/ns.pixelRatio}destroy(){var t,e;(t=d(this,Qr))==null||t.abort(),S(this,Qr,null),(e=d(this,ys))==null||e.abort(),S(this,ys,null)}};Pu=new WeakMap,Kr=new WeakMap,ah=new WeakMap,lh=new WeakMap,uh=new WeakMap,ch=new WeakMap,fh=new WeakMap,ys=new WeakMap,Wr=new WeakMap,vs=new WeakMap,Qr=new WeakMap,As=new WeakMap,sv=new WeakSet,Q1=function(t){var s,o,r;if((s=d(this,lh))!=null&&s.call(this))return;if(t.touches.length===1){if(d(this,ys))return;const a=S(this,ys,new AbortController),l=AbortSignal.any([d(this,Wr),a.signal]),u=d(this,Pu),h={capture:!0,signal:l,passive:!1},p=g=>{var m;g.pointerType==="touch"&&((m=d(this,ys))==null||m.abort(),S(this,ys,null))};u.addEventListener("pointerdown",g=>{g.pointerType==="touch"&&(jt(g),p(g))},h),u.addEventListener("pointerup",p,h),u.addEventListener("pointercancel",p,h);return}if(!d(this,As)){S(this,As,new AbortController);const a=AbortSignal.any([d(this,Wr),d(this,As).signal]),l=d(this,Pu),u={signal:a,capture:!1,passive:!1};l.addEventListener("touchmove",b(this,ov,Z1).bind(this),u);const h=b(this,rv,j1).bind(this);l.addEventListener("touchend",h,u),l.addEventListener("touchcancel",h,u),u.capture=!0,l.addEventListener("pointerdown",jt,u),l.addEventListener("pointermove",jt,u),l.addEventListener("pointercancel",jt,u),l.addEventListener("pointerup",jt,u),(o=d(this,uh))==null||o.call(this)}if(jt(t),t.touches.length!==2||(r=d(this,ah))!=null&&r.call(this)){S(this,vs,null);return}let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]),S(this,vs,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:i.screenX,touch1Y:i.screenY})},ov=new WeakSet,Z1=function(t){var w;if(!d(this,vs)||t.touches.length!==2)return;jt(t);let[e,i]=t.touches;e.identifier>i.identifier&&([e,i]=[i,e]);const{screenX:s,screenY:o}=e,{screenX:r,screenY:a}=i,l=d(this,vs),{touch0X:u,touch0Y:h,touch1X:p,touch1Y:g}=l,m=p-u,v=g-h,A=r-s,_=a-o,T=Math.hypot(A,_)||1,E=Math.hypot(m,v)||1;if(!d(this,Kr)&&Math.abs(E-T)<=t_.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=s,l.touch0Y=o,l.touch1X=r,l.touch1Y=a,!d(this,Kr)){S(this,Kr,!0);return}const C=[(s+r)/2,(o+a)/2];(w=d(this,ch))==null||w.call(this,C,E,T)},rv=new WeakSet,j1=function(t){var e;t.touches.length>=2||(d(this,As)&&(d(this,As).abort(),S(this,As,null),(e=d(this,fh))==null||e.call(this)),d(this,vs)&&(jt(t),S(this,vs,null),S(this,Kr,!1)))};let My=t_;var Zr,fi,Dt,ku,Io,dh,jr,_e,ta,Ts,Lo,hh,ea,Sn,ph,na,Ss,Hi,Uu,Fu,Yn,ia,gh,av,mh,dS,yh,hS,Ou,Am,lv,tD,uv,eD,vh,pS,Bu,Tm,Ah,gS,cv,nD,fv,iD,dv,sD,Th,mS,hv,oD,Sh,yS,pv,rD,gv,aD,mv,lD,Eh,vS,sa,zf;const Z=class Z{constructor(t){y(this,mh);y(this,Ou);y(this,lv);y(this,uv);y(this,vh);y(this,Bu);y(this,Ah);y(this,cv);y(this,fv);y(this,dv);y(this,Th);y(this,hv);y(this,Sh);y(this,pv);y(this,gv);y(this,mv);y(this,Eh);y(this,sa);y(this,Zr,null);y(this,fi,null);y(this,Dt,null);y(this,ku,!1);y(this,Io,null);y(this,dh,"");y(this,jr,!1);y(this,_e,null);y(this,ta,null);y(this,Ts,null);y(this,Lo,null);y(this,hh,"");y(this,ea,!1);y(this,Sn,null);y(this,ph,!1);y(this,na,!1);y(this,Ss,!1);y(this,Hi,null);y(this,Uu,0);y(this,Fu,0);y(this,Yn,null);y(this,ia,null);O(this,"isSelected",!1);O(this,"_isCopy",!1);O(this,"_editToolbar",null);O(this,"_initialOptions",Object.create(null));O(this,"_initialData",null);O(this,"_isVisible",!0);O(this,"_uiManager",null);O(this,"_focusEventsAllowed",!0);y(this,gh,!1);y(this,av,Z._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null;const{rotation:e,rawDims:{pageWidth:i,pageHeight:s,pageX:o,pageY:r}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[o,r];const[a,l]=this.parentDimensions;this.x=t.x/a,this.y=t.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Z.prototype._resizeWithKeyboard,e=Al.TRANSLATE_SMALL,i=Al.TRANSLATE_BIG;return st(this,"_resizerKeyboardManager",new Sg([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,i]}],[["Escape","mac+Escape"],Z.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return st(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new gk({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Z._l10n??(Z._l10n=t),Z._l10nResizer||(Z._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Z._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);Z._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){Tt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return d(this,gh)}set _isDraggable(t){var e;S(this,gh,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=d(this,av)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):b(this,sa,zf).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(d(this,ea)?S(this,ea,!1):this.parent.setSelected(this))}focusout(t){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,i,s){const[o,r]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(t+i)/o,this.y=(e+s)/r,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[i,s]=this.parentDimensions;this.setAt(t*i,e*s,this.width*i,this.height*s),this._onTranslated()}translate(t,e){b(this,mh,dS).call(this,this.parentDimensions,t,e)}translateInPage(t,e){d(this,Sn)||S(this,Sn,[this.x,this.y,this.width,this.height]),b(this,mh,dS).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){d(this,Sn)||S(this,Sn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,o]}=this;if(this.x+=t/s,this.y+=e/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:p,y:g}=this.div.getBoundingClientRect();this.parent.findNewParent(this,p,g)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:a}=this;const[l,u]=this.getBaseTranslation();r+=l,a+=u;const{style:h}=i;h.left=`${(100*r).toFixed(2)}%`,h.top=`${(100*a).toFixed(2)}%`,this._onTranslating(r,a),i.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!d(this,Sn)&&(d(this,Sn)[0]!==this.x||d(this,Sn)[1]!==this.y)}get _hasBeenResized(){return!!d(this,Sn)&&(d(this,Sn)[2]!==this.width||d(this,Sn)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:i}=Z,s=i/t,o=i/e;switch(this.rotation){case 90:return[-s,o];case 180:return[s,o];case 270:return[s,-o];default:return[-s,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[i,s]}=this;let{x:o,y:r,width:a,height:l}=this;if(a*=i,l*=s,o*=i,r*=s,this._mustFixPosition)switch(t){case 0:o=Ke(o,0,i-a),r=Ke(r,0,s-l);break;case 90:o=Ke(o,0,i-l),r=Ke(r,a,s);break;case 180:o=Ke(o,a,i),r=Ke(r,l,s);break;case 270:o=Ke(o,l,i),r=Ke(r,0,s-a);break}this.x=o/=i,this.y=r/=s;const[u,h]=this.getBaseTranslation();o+=u,r+=h,e.left=`${(100*o).toFixed(2)}%`,e.top=`${(100*r).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var i;return b(i=Z,yh,hS).call(i,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var i;return b(i=Z,yh,hS).call(i,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,i]}=this;return[e*t,i*t]}setDims(t,e){const[i,s]=this.parentDimensions,{style:o}=this.div;o.width=`${(100*t/i).toFixed(2)}%`,d(this,jr)||(o.height=`${(100*e/s).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:i}=t,s=i.endsWith("%"),o=!d(this,jr)&&e.endsWith("%");if(s&&o)return;const[r,a]=this.parentDimensions;s||(t.width=`${(100*parseFloat(i)/r).toFixed(2)}%`),!d(this,jr)&&!o&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=d(this,Dt))==null||t.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||d(this,na))return this._editToolbar;this._editToolbar=new iS(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[e,i]of t)await this._editToolbar.addButton(e,i);return this._editToolbar.addButton("delete"),this._editToolbar}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=d(this,Dt))==null||t.destroy())}addContainer(t){var i;const e=(i=this._editToolbar)==null?void 0:i.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return d(this,Dt)||(wy.initialize(Z._l10n),S(this,Dt,new wy(this)),d(this,Zr)&&(d(this,Dt).data=d(this,Zr),S(this,Zr,null))),d(this,Dt)}get altTextData(){var t;return(t=d(this,Dt))==null?void 0:t.data}set altTextData(t){d(this,Dt)&&(d(this,Dt).data=t)}get guessedAltText(){var t;return(t=d(this,Dt))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=d(this,Dt))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=d(this,Dt))==null?void 0:e.serialize(t)}hasAltText(){return!!d(this,Dt)&&!d(this,Dt).isEmpty()}hasAltTextData(){var t;return((t=d(this,Dt))==null?void 0:t.hasData())??!1}render(){var r;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=d(this,ku)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),b(this,Sh,yS).call(this);const[e,i]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*i/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/i).toFixed(2)}%`);const[s,o]=this.getInitialTranslation();return this.translate(s,o),B1(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(d(this,ia)||S(this,ia,new My({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:b(this,cv,nD).bind(this),onPinching:b(this,fv,iD).bind(this),onPinchEnd:b(this,dv,sD).bind(this),signal:this._uiManager._signal}))),(r=this._uiManager._editorUndoBar)==null||r.hide(),t}pointerdown(t){const{isMac:e}=Ie.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(S(this,ea,!0),this._isDraggable){b(this,hv,oD).call(this,t);return}b(this,Th,mS).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){d(this,Hi)&&clearTimeout(d(this,Hi)),S(this,Hi,setTimeout(()=>{var t;S(this,Hi,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,i){t.changeParent(this),this.x=e,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,i=this.rotation){const s=this.parentScale,[o,r]=this.pageDimensions,[a,l]=this.pageTranslation,u=t/s,h=e/s,p=this.x*o,g=this.y*r,m=this.width*o,v=this.height*r;switch(i){case 0:return[p+u+a,r-g-h-v+l,p+u+m+a,r-g-h+l];case 90:return[p+h+a,r-g+u+l,p+h+v+a,r-g+u+m+l];case 180:return[p-u-m+a,r-g+h+l,p-u+a,r-g+h+v+l];case 270:return[p-h-v+a,r-g-u-m+l,p-h+a,r-g-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[i,s,o,r]=t,a=o-i,l=r-s;switch(this.rotation){case 0:return[i,e-r,a,l];case 90:return[i,e-s,l,a];case 180:return[o,e-s,a,l];case 270:return[o,e-r,l,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),S(this,na,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),S(this,na,!1),!0):!1}isInEditMode(){return d(this,na)}shouldGetKeyboardEvents(){return d(this,Ss)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:o,innerWidth:r}=window;return e<r&&s>0&&t<o&&i>0}rebuild(){b(this,Sh,yS).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){Tt("An editor must be serializable")}static async deserialize(t,e,i){const s=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i,annotationElementId:t.annotationElementId});s.rotation=t.rotation,S(s,Zr,t.accessibilityData),s._isCopy=t.isCopy||!1;const[o,r]=s.pageDimensions,[a,l,u,h]=s.getRectInCurrentCoords(t.rect,r);return s.x=a/o,s.y=l/r,s.width=u/o,s.height=h/r,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=d(this,Lo))==null||t.abort(),S(this,Lo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),d(this,Hi)&&(clearTimeout(d(this,Hi)),S(this,Hi,null)),b(this,sa,zf).call(this),this.removeEditToolbar(),d(this,Yn)){for(const i of d(this,Yn).values())clearTimeout(i);S(this,Yn,null)}this.parent=null,(e=d(this,ia))==null||e.destroy(),S(this,ia,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(b(this,lv,tD).call(this),d(this,_e).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),S(this,Ts,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=d(this,_e).children;if(!d(this,fi)){S(this,fi,Array.from(e));const r=b(this,pv,rD).bind(this),a=b(this,gv,aD).bind(this),l=this._uiManager._signal;for(const u of d(this,fi)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",r,{signal:l}),u.addEventListener("blur",a,{signal:l}),u.addEventListener("focus",b(this,mv,lD).bind(this,h),{signal:l}),u.setAttribute("data-l10n-id",Z._l10nResizer[h])}}const i=d(this,fi)[0];let s=0;for(const r of e){if(r===i)break;s++}const o=(360-this.rotation+this.parentRotation)%360/90*(d(this,fi).length/4);if(o!==s){if(o<s)for(let a=0;a<s-o;a++)d(this,_e).append(d(this,_e).firstChild);else if(o>s)for(let a=0;a<o-s;a++)d(this,_e).firstChild.before(d(this,_e).lastChild);let r=0;for(const a of e){const u=d(this,fi)[r++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Z._l10nResizer[u])}}b(this,Eh,vS).call(this,0),S(this,Ss,!0),d(this,_e).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){d(this,Ss)&&b(this,Ah,gS).call(this,d(this,hh),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){b(this,sa,zf).call(this),this.div.focus()}select(){var t,e,i;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,o;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((o=this._editToolbar)==null||o.show())});return}(e=this._editToolbar)==null||e.show(),(i=d(this,Dt))==null||i.toggleAltTextBadge(!1)}}unselect(){var t,e,i,s,o;this.isSelected&&(this.isSelected=!1,(t=d(this,_e))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(o=d(this,Dt))==null||o.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return d(this,ph)}set isEditing(t){S(this,ph,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){S(this,jr,!0);const i=t/e,{style:s}=this.div;s.aspectRatio=i,s.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){d(this,Yn)||S(this,Yn,new Map);const{action:i}=t;let s=d(this,Yn).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(t),d(this,Yn).delete(i),d(this,Yn).size===0&&S(this,Yn,null)},Z._telemetryTimeout),d(this,Yn).set(i,s);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),S(this,ku,!1)}disable(){this.div&&(this.div.tabIndex=-1),S(this,ku,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const i=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),i.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Zr=new WeakMap,fi=new WeakMap,Dt=new WeakMap,ku=new WeakMap,Io=new WeakMap,dh=new WeakMap,jr=new WeakMap,_e=new WeakMap,ta=new WeakMap,Ts=new WeakMap,Lo=new WeakMap,hh=new WeakMap,ea=new WeakMap,Sn=new WeakMap,ph=new WeakMap,na=new WeakMap,Ss=new WeakMap,Hi=new WeakMap,Uu=new WeakMap,Fu=new WeakMap,Yn=new WeakMap,ia=new WeakMap,gh=new WeakMap,av=new WeakMap,mh=new WeakSet,dS=function([t,e],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/t,this.y+=s/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},yh=new WeakSet,hS=function(t,e,i){switch(i){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Ou=new WeakSet,Am=function(t){switch(t){case 90:{const[e,i]=this.pageDimensions;return[0,-e/i,i/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,i]=this.pageDimensions;return[0,e/i,-i/e,0]}default:return[1,0,0,1]}},lv=new WeakSet,tD=function(){if(d(this,_e))return;S(this,_e,document.createElement("div")),d(this,_e).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const i of t){const s=document.createElement("div");d(this,_e).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",b(this,uv,eD).bind(this,i),{signal:e}),s.addEventListener("contextmenu",_i,{signal:e}),s.tabIndex=-1}this.div.prepend(d(this,_e))},uv=new WeakSet,eD=function(t,e){var h;e.preventDefault();const{isMac:i}=Ie.platform;if(e.button!==0||e.ctrlKey&&i)return;(h=d(this,Dt))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,S(this,ta,[e.screenX,e.screenY]);const o=new AbortController,r=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",b(this,Ah,gS).bind(this,t),{passive:!0,capture:!0,signal:r}),window.addEventListener("touchmove",jt,{passive:!1,signal:r}),window.addEventListener("contextmenu",_i,{signal:r}),S(this,Ts,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const u=()=>{var p;o.abort(),this.parent.togglePointerEvents(!0),(p=d(this,Dt))==null||p.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=a,this.div.style.cursor=l,b(this,Bu,Tm).call(this)};window.addEventListener("pointerup",u,{signal:r}),window.addEventListener("blur",u,{signal:r})},vh=new WeakSet,pS=function(t,e,i,s){this.width=i,this.height=s,this.x=t,this.y=e;const[o,r]=this.parentDimensions;this.setDims(o*i,r*s),this.fixAndSetPosition(),this._onResized()},Bu=new WeakSet,Tm=function(){if(!d(this,Ts))return;const{savedX:t,savedY:e,savedWidth:i,savedHeight:s}=d(this,Ts);S(this,Ts,null);const o=this.x,r=this.y,a=this.width,l=this.height;o===t&&r===e&&a===i&&l===s||this.addCommands({cmd:b(this,vh,pS).bind(this,o,r,a,l),undo:b(this,vh,pS).bind(this,t,e,i,s),mustExec:!0})},Ah=new WeakSet,gS=function(t,e){const[i,s]=this.parentDimensions,o=this.x,r=this.y,a=this.width,l=this.height,u=Z.MIN_SIZE/i,h=Z.MIN_SIZE/s,p=b(this,Ou,Am).call(this,this.rotation),g=(L,F)=>[p[0]*L+p[2]*F,p[1]*L+p[3]*F],m=b(this,Ou,Am).call(this,360-this.rotation),v=(L,F)=>[m[0]*L+m[2]*F,m[1]*L+m[3]*F];let A,_,T=!1,E=!1;switch(t){case"topLeft":T=!0,A=(L,F)=>[0,0],_=(L,F)=>[L,F];break;case"topMiddle":A=(L,F)=>[L/2,0],_=(L,F)=>[L/2,F];break;case"topRight":T=!0,A=(L,F)=>[L,0],_=(L,F)=>[0,F];break;case"middleRight":E=!0,A=(L,F)=>[L,F/2],_=(L,F)=>[0,F/2];break;case"bottomRight":T=!0,A=(L,F)=>[L,F],_=(L,F)=>[0,0];break;case"bottomMiddle":A=(L,F)=>[L/2,F],_=(L,F)=>[L/2,0];break;case"bottomLeft":T=!0,A=(L,F)=>[0,F],_=(L,F)=>[L,0];break;case"middleLeft":E=!0,A=(L,F)=>[0,F/2],_=(L,F)=>[L,F/2];break}const C=A(a,l),w=_(a,l);let M=g(...w);const R=Z._round(o+M[0]),x=Z._round(r+M[1]);let D=1,N=1,P,U;if(e.fromKeyboard)({deltaX:P,deltaY:U}=e);else{const{screenX:L,screenY:F}=e,[z,ut]=d(this,ta);[P,U]=this.screenToPageTranslation(L-z,F-ut),d(this,ta)[0]=L,d(this,ta)[1]=F}if([P,U]=v(P/i,U/s),T){const L=Math.hypot(a,l);D=N=Math.max(Math.min(Math.hypot(w[0]-C[0]-P,w[1]-C[1]-U)/L,1/a,1/l),u/a,h/l)}else E?D=Ke(Math.abs(w[0]-C[0]-P),u,1)/a:N=Ke(Math.abs(w[1]-C[1]-U),h,1)/l;const Y=Z._round(a*D),rt=Z._round(l*N);M=g(..._(Y,rt));const W=R-M[0],dt=x-M[1];d(this,Sn)||S(this,Sn,[this.x,this.y,this.width,this.height]),this.width=Y,this.height=rt,this.x=W,this.y=dt,this.setDims(i*Y,s*rt),this.fixAndSetPosition(),this._onResizing()},cv=new WeakSet,nD=function(){var t;S(this,Ts,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=d(this,Dt))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},fv=new WeakSet,iD=function(t,e,i){let o=.7*(i/e)+1-.7;if(o===1)return;const r=b(this,Ou,Am).call(this,this.rotation),a=(R,x)=>[r[0]*R+r[2]*x,r[1]*R+r[3]*x],[l,u]=this.parentDimensions,h=this.x,p=this.y,g=this.width,m=this.height,v=Z.MIN_SIZE/l,A=Z.MIN_SIZE/u;o=Math.max(Math.min(o,1/g,1/m),v/g,A/m);const _=Z._round(g*o),T=Z._round(m*o);if(_===g&&T===m)return;d(this,Sn)||S(this,Sn,[h,p,g,m]);const E=a(g/2,m/2),C=Z._round(h+E[0]),w=Z._round(p+E[1]),M=a(_/2,T/2);this.x=C-M[0],this.y=w-M[1],this.width=_,this.height=T,this.setDims(l*_,u*T),this.fixAndSetPosition(),this._onResizing()},dv=new WeakSet,sD=function(){var t;(t=d(this,Dt))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),b(this,Bu,Tm).call(this)},Th=new WeakSet,mS=function(t){const{isMac:e}=Ie.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},hv=new WeakSet,oD=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,o=this._uiManager.combinedSignal(s),r={capture:!0,passive:!1,signal:o},a=u=>{s.abort(),S(this,Io,null),S(this,ea,!1),this._uiManager.endDragSession()||b(this,Th,mS).call(this,u),i&&this._onStopDragging()};e&&(S(this,Uu,t.clientX),S(this,Fu,t.clientY),S(this,Io,t.pointerId),S(this,dh,t.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._onStartDragging());const{clientX:h,clientY:p,pointerId:g}=u;if(g!==d(this,Io)){jt(u);return}const[m,v]=this.screenToPageTranslation(h-d(this,Uu),p-d(this,Fu));S(this,Uu,h),S(this,Fu,p),this._uiManager.dragSelectedEditors(m,v)},r),window.addEventListener("touchmove",jt,r),window.addEventListener("pointerdown",u=>{u.pointerType===d(this,dh)&&(d(this,ia)||u.isPrimary)&&a(u),jt(u)},r));const l=u=>{if(!d(this,Io)||d(this,Io)===u.pointerId){a(u);return}jt(u)};window.addEventListener("pointerup",l,{signal:o}),window.addEventListener("blur",l,{signal:o})},Sh=new WeakSet,yS=function(){if(d(this,Lo)||!this.div)return;S(this,Lo,new AbortController);const t=this._uiManager.combinedSignal(d(this,Lo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},pv=new WeakSet,rD=function(t){Z._resizerKeyboardManager.exec(this,t)},gv=new WeakSet,aD=function(t){var e;d(this,Ss)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==d(this,_e)&&b(this,sa,zf).call(this)},mv=new WeakSet,lD=function(t){S(this,hh,d(this,Ss)?t:"")},Eh=new WeakSet,vS=function(t){if(d(this,fi))for(const e of d(this,fi))e.tabIndex=t},sa=new WeakSet,zf=function(){S(this,Ss,!1),b(this,Eh,vS).call(this,-1),b(this,Bu,Tm).call(this)},y(Z,yh),O(Z,"_l10n",null),O(Z,"_l10nResizer",null),O(Z,"_borderLineWidth",-1),O(Z,"_colorManager",new oS),O(Z,"_zIndex",1),O(Z,"_telemetryTimeout",1e3);let _t=Z;class gk extends _t{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Pb=3285377520,Gn=4294901760,Ri=65535;class uD{constructor(t){this.h1=t?t&4294967295:Pb,this.h2=t?t&4294967295:Pb}update(t){let e,i;if(typeof t=="string"){e=new Uint8Array(t.length*2),i=0;for(let A=0,_=t.length;A<_;A++){const T=t.charCodeAt(A);T<=255?e[i++]=T:(e[i++]=T>>>8,e[i++]=T&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),i=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,o=i-s*4,r=new Uint32Array(e.buffer,0,s);let a=0,l=0,u=this.h1,h=this.h2;const p=3432918353,g=461845907,m=p&Ri,v=g&Ri;for(let A=0;A<s;A++)A&1?(a=r[A],a=a*p&Gn|a*m&Ri,a=a<<15|a>>>17,a=a*g&Gn|a*v&Ri,u^=a,u=u<<13|u>>>19,u=u*5+3864292196):(l=r[A],l=l*p&Gn|l*m&Ri,l=l<<15|l>>>17,l=l*g&Gn|l*v&Ri,h^=l,h=h<<13|h>>>19,h=h*5+3864292196);switch(a=0,o){case 3:a^=e[s*4+2]<<16;case 2:a^=e[s*4+1]<<8;case 1:a^=e[s*4],a=a*p&Gn|a*m&Ri,a=a<<15|a>>>17,a=a*g&Gn|a*v&Ri,s&1?u^=a:h^=a}this.h1=u,this.h2=h}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Gn|t*36045&Ri,e=e*4283543511&Gn|((e<<16|t>>>16)*2950163797&Gn)>>>16,t^=e>>>1,t=t*444984403&Gn|t*60499&Ri,e=e*3301882366&Gn|((e<<16|t>>>16)*3120437893&Gn)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const AS=Object.freeze({map:null,hash:"",transfer:void 0});var oa,ra,be,yv,cD;class BC{constructor(){y(this,yv);y(this,oa,!1);y(this,ra,null);y(this,be,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const i=d(this,be).get(t);return i===void 0?e:Object.assign(e,i)}getRawValue(t){return d(this,be).get(t)}remove(t){if(d(this,be).delete(t),d(this,be).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of d(this,be).values())if(e instanceof _t)return;this.onAnnotationEditor(null)}}setValue(t,e){const i=d(this,be).get(t);let s=!1;if(i!==void 0)for(const[o,r]of Object.entries(e))i[o]!==r&&(s=!0,i[o]=r);else s=!0,d(this,be).set(t,e);s&&b(this,yv,cD).call(this),e instanceof _t&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return d(this,be).has(t)}get size(){return d(this,be).size}resetModified(){d(this,oa)&&(S(this,oa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new fD(this)}get serializable(){if(d(this,be).size===0)return AS;const t=new Map,e=new uD,i=[],s=Object.create(null);let o=!1;for(const[r,a]of d(this,be)){const l=a instanceof _t?a.serialize(!1,s):a;l&&(t.set(r,l),e.update(`${r}:${JSON.stringify(l)}`),o||(o=!!l.bitmap))}if(o)for(const r of t.values())r.bitmap&&i.push(r.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:i}:AS}get editorStats(){let t=null;const e=new Map;for(const i of d(this,be).values()){if(!(i instanceof _t))continue;const s=i.telemetryFinalData;if(!s)continue;const{type:o}=s;e.has(o)||e.set(o,Object.getPrototypeOf(i).constructor),t||(t=Object.create(null));const r=t[o]||(t[o]=new Map);for(const[a,l]of Object.entries(s)){if(a==="type")continue;let u=r.get(a);u||(u=new Map,r.set(a,u));const h=u.get(l)??0;u.set(l,h+1)}}for(const[i,s]of e)t[i]=s.computeTelemetryFinalData(t[i]);return t}resetModifiedIds(){S(this,ra,null)}get modifiedIds(){if(d(this,ra))return d(this,ra);const t=[];for(const e of d(this,be).values())!(e instanceof _t)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return S(this,ra,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return d(this,be).entries()}}oa=new WeakMap,ra=new WeakMap,be=new WeakMap,yv=new WeakSet,cD=function(){d(this,oa)||(S(this,oa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Ch;class fD extends BC{constructor(e){super();y(this,Ch,void 0);const{map:i,hash:s,transfer:o}=e.serializable,r=structuredClone(i,o?{transfer:o}:null);S(this,Ch,{map:r,hash:s,transfer:o})}get print(){Tt("Should not call PrintAnnotationStorage.print")}get serializable(){return d(this,Ch)}get modifiedIds(){return st(this,"modifiedIds",{ids:new Set,hash:""})}}Ch=new WeakMap;var Hu;class mk{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){y(this,Hu,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),d(this,Hu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:i}){if(!(!t||d(this,Hu).has(t.loadedName))){if(ee(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:o,style:r}=t,a=new FontFace(s,o,r);this.addNativeFontFace(a);try{await a.load(),d(this,Hu).add(s),i==null||i(t)}catch{K(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Tt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const i=t.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw K(`Failed to load font '${i.family}': '${s}'.`),t.disableFontFace=!0,s}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(t,s)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return st(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return st(this,"isSyncFontLoadingSupported",Je||Ie.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ee(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const o=i.shift();setTimeout(o.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:e,callback:t};return i.push(s),s}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return st(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function i(w,M){return w.charCodeAt(M)<<24|w.charCodeAt(M+1)<<16|w.charCodeAt(M+2)<<8|w.charCodeAt(M+3)&255}function s(w,M,R,x){const D=w.substring(0,M),N=w.substring(M+R);return D+x+N}let o,r;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let u=0;function h(w,M){if(++u>30){K("Load test font never loaded."),M();return}if(l.font="30px "+w,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(h.bind(null,w,M))}const p=`lt${Date.now()}${this.loadTestFontId++}`;let g=this._loadTestFont;g=s(g,976,p.length,p);const v=16,A=1482184792;let _=i(g,v);for(o=0,r=p.length-3;o<r;o+=4)_=_-A+i(p,o)|0;o<p.length&&(_=_-A+i(p+"XXX",o)|0),g=s(g,v,4,tk(_));const T=`url(data:font/opentype;base64,${btoa(g)});`,E=`@font-face {font-family:"${p}";src:${T}}`;this.insertRule(E);const C=this._document.createElement("div");C.style.visibility="hidden",C.style.width=C.style.height="10px",C.style.position="absolute",C.style.top=C.style.left="0px";for(const w of[t.loadedName,p]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=w,C.append(M)}this._document.body.append(C),h(p,()=>{C.remove(),e.complete()})}}Hu=new WeakMap;class yk{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const i in t)this[i]=t[i];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${I1(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return(i=this._inspectFont)==null||i.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const i=this.loadedName+"_path_"+e;let s;try{s=t.get(i)}catch(r){K(`getPathGenerator - ignoring character: "${r}".`)}const o=new Path2D(s||"");return this.fontExtraProperties||t.delete(i),this.compiledGlyphs[e]=o}}function vk(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Je)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Ak(n){if(Je&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return vg(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function $g(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const TS=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,Tk=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",Sk=ok.bind(null,TS,Tk);var Es,vv;class Ek{constructor(){y(this,Es,new Map);y(this,vv,Promise.resolve())}postMessage(t,e){const i={data:structuredClone(t,e?{transfer:e}:null)};d(this,vv).then(()=>{for(const[s]of d(this,Es))s.call(this,i)})}addEventListener(t,e,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:o}=i;if(o.aborted){K("LoopbackPort - cannot use an `aborted` signal.");return}const r=()=>this.removeEventListener(t,e);s=()=>o.removeEventListener("abort",r),o.addEventListener("abort",r)}d(this,Es).set(e,s)}removeEventListener(t,e){const i=d(this,Es).get(e);i==null||i(),d(this,Es).delete(e)}terminate(){for(const[,t]of d(this,Es))t==null||t();d(this,Es).clear()}}Es=new WeakMap,vv=new WeakMap;const Yg={DATA:1,ERROR:2},Wt={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function kb(){}function en(n){if(n instanceof Cr||n instanceof tS||n instanceof Nb||n instanceof by||n instanceof X0)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Tt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Cr(n.message);case"InvalidPDFException":return new tS(n.message);case"PasswordException":return new Nb(n.message,n.code);case"ResponseException":return new by(n.message,n.status,n.missing);case"UnknownErrorException":return new X0(n.message,n.details)}return new X0(n.message,n.toString())}var Vu,Av,dD,Tv,hD,Sv,pD,Gu,Sm;class $f{constructor(t,e,i){y(this,Av);y(this,Tv);y(this,Sv);y(this,Gu);y(this,Vu,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",b(this,Av,dD).bind(this),{signal:d(this,Vu).signal})}on(t,e){const i=this.actionHandler;if(i[t])throw new Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){const s=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[s]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:s,data:e},i)}catch(r){o.reject(r)}return o.promise}sendWithStream(t,e,i,s){const o=this.streamId++,r=this.sourceName,a=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[o]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:r,targetName:a,action:t,streamId:o,data:e,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[o].pullCall=h,l.postMessage({sourceName:r,targetName:a,stream:Wt.PULL,streamId:o,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ee(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[o].cancelCall=h,this.streamControllers[o].isClosed=!0,l.postMessage({sourceName:r,targetName:a,stream:Wt.CANCEL,streamId:o,reason:en(u)}),h.promise}},i)}destroy(){var t;(t=d(this,Vu))==null||t.abort(),S(this,Vu,null)}}Vu=new WeakMap,Av=new WeakSet,dD=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){b(this,Sv,pD).call(this,t);return}if(t.callback){const i=t.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],t.callback===Yg.DATA)s.resolve(t.data);else if(t.callback===Yg.ERROR)s.reject(en(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const i=this.sourceName,s=t.sourceName,o=this.comObj;Promise.try(e,t.data).then(function(r){o.postMessage({sourceName:i,targetName:s,callback:Yg.DATA,callbackId:t.callbackId,data:r})},function(r){o.postMessage({sourceName:i,targetName:s,callback:Yg.ERROR,callbackId:t.callbackId,reason:en(r)})});return}if(t.streamId){b(this,Tv,hD).call(this,t);return}e(t.data)},Tv=new WeakSet,hD=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,o=this.comObj,r=this,a=this.actionHandler[t.action],l={enqueue(u,h=1,p){if(this.isCancelled)return;const g=this.desiredSize;this.desiredSize-=h,g>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:i,targetName:s,stream:Wt.ENQUEUE,streamId:e,chunk:u},p)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:s,stream:Wt.CLOSE,streamId:e}),delete r.streamSinks[e])},error(u){ee(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:i,targetName:s,stream:Wt.ERROR,streamId:e,reason:en(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,Promise.try(a,t.data,l).then(function(){o.postMessage({sourceName:i,targetName:s,stream:Wt.START_COMPLETE,streamId:e,success:!0})},function(u){o.postMessage({sourceName:i,targetName:s,stream:Wt.START_COMPLETE,streamId:e,reason:en(u)})})},Sv=new WeakSet,pD=function(t){const e=t.streamId,i=this.sourceName,s=t.sourceName,o=this.comObj,r=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Wt.START_COMPLETE:t.success?r.startCall.resolve():r.startCall.reject(en(t.reason));break;case Wt.PULL_COMPLETE:t.success?r.pullCall.resolve():r.pullCall.reject(en(t.reason));break;case Wt.PULL:if(!a){o.postMessage({sourceName:i,targetName:s,stream:Wt.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||kb).then(function(){o.postMessage({sourceName:i,targetName:s,stream:Wt.PULL_COMPLETE,streamId:e,success:!0})},function(u){o.postMessage({sourceName:i,targetName:s,stream:Wt.PULL_COMPLETE,streamId:e,reason:en(u)})});break;case Wt.ENQUEUE:if(ee(r,"enqueue should have stream controller"),r.isClosed)break;r.controller.enqueue(t.chunk);break;case Wt.CLOSE:if(ee(r,"close should have stream controller"),r.isClosed)break;r.isClosed=!0,r.controller.close(),b(this,Gu,Sm).call(this,r,e);break;case Wt.ERROR:ee(r,"error should have stream controller"),r.controller.error(en(t.reason)),b(this,Gu,Sm).call(this,r,e);break;case Wt.CANCEL_COMPLETE:t.success?r.cancelCall.resolve():r.cancelCall.reject(en(t.reason)),b(this,Gu,Sm).call(this,r,e);break;case Wt.CANCEL:if(!a)break;const l=en(t.reason);Promise.try(a.onCancel||kb,l).then(function(){o.postMessage({sourceName:i,targetName:s,stream:Wt.CANCEL_COMPLETE,streamId:e,success:!0})},function(u){o.postMessage({sourceName:i,targetName:s,stream:Wt.CANCEL_COMPLETE,streamId:e,reason:en(u)})}),a.sinkCapability.reject(l),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Gu=new WeakSet,Sm=async function(t,e){var i,s,o;await Promise.allSettled([(i=t.startCall)==null?void 0:i.promise,(s=t.pullCall)==null?void 0:s.promise,(o=t.cancelCall)==null?void 0:o.promise]),delete this.streamControllers[e]};var _h;class gD{constructor({enableHWA:t=!1}){y(this,_h,!1);S(this,_h,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!d(this,_h)})}}reset(t,e,i){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||i<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){Tt("Abstract method `_createCanvas` called.")}}_h=new WeakMap;class Ck extends gD{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}class mD{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){Tt("Abstract method `_fetch` called.")}}class Ub extends mD{async _fetch(t){const e=await Ag(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):vg(e)}}class yD{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,i,s,o){return"none"}destroy(t=!1){}}var aa,qu,Cs,_s,Ue,la,ua,de,Pe,ca,Yf,Po,Ol,zu,Em,ko,Bl,Ev,vD,bh,SS,Uo,Hl,fa,Xf,da,Jf,wh,ES,ha,Kf;class _k extends yD{constructor({docId:e,ownerDocument:i=globalThis.document}){super();y(this,de);y(this,ca);y(this,Po);y(this,zu);y(this,ko);y(this,Ev);y(this,bh);y(this,Uo);y(this,fa);y(this,da);y(this,wh);y(this,ha);y(this,aa,void 0);y(this,qu,void 0);y(this,Cs,void 0);y(this,_s,void 0);y(this,Ue,void 0);y(this,la,void 0);y(this,ua,0);S(this,_s,e),S(this,Ue,i)}addFilter(e){if(!e)return"none";let i=d(this,de,Pe).get(e);if(i)return i;const[s,o,r]=b(this,zu,Em).call(this,e),a=e.length===1?s:`${s}${o}${r}`;if(i=d(this,de,Pe).get(a),i)return d(this,de,Pe).set(e,i),i;const l=`g_${d(this,_s)}_transfer_map_${Ge(this,ua)._++}`,u=b(this,ko,Bl).call(this,l);d(this,de,Pe).set(e,u),d(this,de,Pe).set(a,u);const h=b(this,Uo,Hl).call(this,l);return b(this,da,Jf).call(this,s,o,r,h),u}addHCMFilter(e,i){var v;const s=`${e}-${i}`,o="base";let r=d(this,ca,Yf).get(o);if((r==null?void 0:r.key)===s||(r?((v=r.filter)==null||v.remove(),r.key=s,r.url="none",r.filter=null):(r={key:s,url:"none",filter:null},d(this,ca,Yf).set(o,r)),!e||!i))return r.url;const a=b(this,ha,Kf).call(this,e);e=q.makeHexColor(...a);const l=b(this,ha,Kf).call(this,i);if(i=q.makeHexColor(...l),d(this,Po,Ol).style.color="",e==="#000000"&&i==="#ffffff"||e===i)return r.url;const u=new Array(256);for(let A=0;A<=255;A++){const _=A/255;u[A]=_<=.03928?_/12.92:((_+.055)/1.055)**2.4}const h=u.join(","),p=`g_${d(this,_s)}_hcm_filter`,g=r.filter=b(this,Uo,Hl).call(this,p);b(this,da,Jf).call(this,h,h,h,g),b(this,bh,SS).call(this,g);const m=(A,_)=>{const T=a[A]/255,E=l[A]/255,C=new Array(_+1);for(let w=0;w<=_;w++)C[w]=T+w/_*(E-T);return C.join(",")};return b(this,da,Jf).call(this,m(0,5),m(1,5),m(2,5),g),r.url=b(this,ko,Bl).call(this,p),r.url}addAlphaFilter(e){let i=d(this,de,Pe).get(e);if(i)return i;const[s]=b(this,zu,Em).call(this,[e]),o=`alpha_${s}`;if(i=d(this,de,Pe).get(o),i)return d(this,de,Pe).set(e,i),i;const r=`g_${d(this,_s)}_alpha_map_${Ge(this,ua)._++}`,a=b(this,ko,Bl).call(this,r);d(this,de,Pe).set(e,a),d(this,de,Pe).set(o,a);const l=b(this,Uo,Hl).call(this,r);return b(this,wh,ES).call(this,s,l),a}addLuminosityFilter(e){let i=d(this,de,Pe).get(e||"luminosity");if(i)return i;let s,o;if(e?([s]=b(this,zu,Em).call(this,[e]),o=`luminosity_${s}`):o="luminosity",i=d(this,de,Pe).get(o),i)return d(this,de,Pe).set(e,i),i;const r=`g_${d(this,_s)}_luminosity_map_${Ge(this,ua)._++}`,a=b(this,ko,Bl).call(this,r);d(this,de,Pe).set(e,a),d(this,de,Pe).set(o,a);const l=b(this,Uo,Hl).call(this,r);return b(this,Ev,vD).call(this,l),e&&b(this,wh,ES).call(this,s,l),a}addHighlightHCMFilter(e,i,s,o,r){var E;const a=`${i}-${s}-${o}-${r}`;let l=d(this,ca,Yf).get(e);if((l==null?void 0:l.key)===a||(l?((E=l.filter)==null||E.remove(),l.key=a,l.url="none",l.filter=null):(l={key:a,url:"none",filter:null},d(this,ca,Yf).set(e,l)),!i||!s))return l.url;const[u,h]=[i,s].map(b(this,ha,Kf).bind(this));let p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),g=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,v]=[o,r].map(b(this,ha,Kf).bind(this));g<p&&([p,g,m,v]=[g,p,v,m]),d(this,Po,Ol).style.color="";const A=(C,w,M)=>{const R=new Array(256),x=(g-p)/M,D=C/255,N=(w-C)/(255*M);let P=0;for(let U=0;U<=M;U++){const Y=Math.round(p+U*x),rt=D+U*N;for(let W=P;W<=Y;W++)R[W]=rt;P=Y+1}for(let U=P;U<256;U++)R[U]=R[P-1];return R.join(",")},_=`g_${d(this,_s)}_hcm_${e}_filter`,T=l.filter=b(this,Uo,Hl).call(this,_);return b(this,bh,SS).call(this,T),b(this,da,Jf).call(this,A(m[0],v[0],5),A(m[1],v[1],5),A(m[2],v[2],5),T),l.url=b(this,ko,Bl).call(this,_),l.url}destroy(e=!1){var i,s,o,r;e&&((i=d(this,la))!=null&&i.size)||((s=d(this,Cs))==null||s.parentNode.parentNode.remove(),S(this,Cs,null),(o=d(this,qu))==null||o.clear(),S(this,qu,null),(r=d(this,la))==null||r.clear(),S(this,la,null),S(this,ua,0))}}aa=new WeakMap,qu=new WeakMap,Cs=new WeakMap,_s=new WeakMap,Ue=new WeakMap,la=new WeakMap,ua=new WeakMap,de=new WeakSet,Pe=function(){return d(this,qu)||S(this,qu,new Map)},ca=new WeakSet,Yf=function(){return d(this,la)||S(this,la,new Map)},Po=new WeakSet,Ol=function(){if(!d(this,Cs)){const e=d(this,Ue).createElement("div"),{style:i}=e;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=d(this,Ue).createElementNS(ls,"svg");s.setAttribute("width",0),s.setAttribute("height",0),S(this,Cs,d(this,Ue).createElementNS(ls,"defs")),e.append(s),s.append(d(this,Cs)),d(this,Ue).body.append(e)}return d(this,Cs)},zu=new WeakSet,Em=function(e){if(e.length===1){const u=e[0],h=new Array(256);for(let g=0;g<256;g++)h[g]=u[g]/255;const p=h.join(",");return[p,p,p]}const[i,s,o]=e,r=new Array(256),a=new Array(256),l=new Array(256);for(let u=0;u<256;u++)r[u]=i[u]/255,a[u]=s[u]/255,l[u]=o[u]/255;return[r.join(","),a.join(","),l.join(",")]},ko=new WeakSet,Bl=function(e){if(d(this,aa)===void 0){S(this,aa,"");const i=d(this,Ue).URL;i!==d(this,Ue).baseURI&&(WA(i)?K('#createUrl: ignore "data:"-URL for performance reasons.'):S(this,aa,R1(i,"")))}return`url(${d(this,aa)}#${e})`},Ev=new WeakSet,vD=function(e){const i=d(this,Ue).createElementNS(ls,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(i)},bh=new WeakSet,SS=function(e){const i=d(this,Ue).createElementNS(ls,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(i)},Uo=new WeakSet,Hl=function(e){const i=d(this,Ue).createElementNS(ls,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",e),d(this,Po,Ol).append(i),i},fa=new WeakSet,Xf=function(e,i,s){const o=d(this,Ue).createElementNS(ls,i);o.setAttribute("type","discrete"),o.setAttribute("tableValues",s),e.append(o)},da=new WeakSet,Jf=function(e,i,s,o){const r=d(this,Ue).createElementNS(ls,"feComponentTransfer");o.append(r),b(this,fa,Xf).call(this,r,"feFuncR",e),b(this,fa,Xf).call(this,r,"feFuncG",i),b(this,fa,Xf).call(this,r,"feFuncB",s)},wh=new WeakSet,ES=function(e,i){const s=d(this,Ue).createElementNS(ls,"feComponentTransfer");i.append(s),b(this,fa,Xf).call(this,s,"feFuncA",e)},ha=new WeakSet,Kf=function(e){return d(this,Po,Ol).style.color=e,OC(getComputedStyle(d(this,Po,Ol)).getPropertyValue("color"))};class AD{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){Tt("Abstract method `_fetch` called.")}}class Fb extends AD{async _fetch(t){const e=await Ag(t,"arraybuffer");return new Uint8Array(e)}}class TD{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(i=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){Tt("Abstract method `_fetch` called.")}}class Ob extends TD{async _fetch(t){const e=await Ag(t,"arraybuffer");return new Uint8Array(e)}}Je&&K("Please use the `legacy` build in Node.js environments.");async function HC(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class bk extends yD{}class wk extends gD{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class Mk extends mD{async _fetch(t){return HC(t)}}class xk extends AD{async _fetch(t){return HC(t)}}class Rk extends TD{async _fetch(t){return HC(t)}}const Re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function CS(n,t){if(!t)return;const e=t[2]-t[0],i=t[3]-t[1],s=new Path2D;s.rect(t[0],t[1],e,i),n.clip(s)}class VC{isModifyingCurrentTransform(){return!1}getPattern(){Tt("Abstract method `getPattern` called.")}}class Dk extends VC{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,s){let o;if(s===Re.STROKE||s===Re.FILL){const r=e.current.getClippedPathBoundingBox(s,Ot(t))||[0,0,0,0],a=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,u=e.cachedCanvases.getCanvas("pattern",a,l),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-r[0],-r[1]),i=q.transform(i,[1,0,0,1,r[0],r[1]]),h.transform(...e.baseTransform),this.matrix&&h.transform(...this.matrix),CS(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),o=t.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(i);o.setTransform(p)}else CS(t,this._bbox),o=this._createGradient(t);return o}}function W0(n,t,e,i,s,o,r,a){const l=t.coords,u=t.colors,h=n.data,p=n.width*4;let g;l[e+1]>l[i+1]&&(g=e,e=i,i=g,g=o,o=r,r=g),l[i+1]>l[s+1]&&(g=i,i=s,s=g,g=r,r=a,a=g),l[e+1]>l[i+1]&&(g=e,e=i,i=g,g=o,o=r,r=g);const m=(l[e]+t.offsetX)*t.scaleX,v=(l[e+1]+t.offsetY)*t.scaleY,A=(l[i]+t.offsetX)*t.scaleX,_=(l[i+1]+t.offsetY)*t.scaleY,T=(l[s]+t.offsetX)*t.scaleX,E=(l[s+1]+t.offsetY)*t.scaleY;if(v>=E)return;const C=u[o],w=u[o+1],M=u[o+2],R=u[r],x=u[r+1],D=u[r+2],N=u[a],P=u[a+1],U=u[a+2],Y=Math.round(v),rt=Math.round(E);let W,dt,L,F,z,ut,Ct,je;for(let kt=Y;kt<=rt;kt++){if(kt<_){const Bt=kt<v?0:(v-kt)/(v-_);W=m-(m-A)*Bt,dt=C-(C-R)*Bt,L=w-(w-x)*Bt,F=M-(M-D)*Bt}else{let Bt;kt>E?Bt=1:_===E?Bt=0:Bt=(_-kt)/(_-E),W=A-(A-T)*Bt,dt=R-(R-N)*Bt,L=x-(x-P)*Bt,F=D-(D-U)*Bt}let wt;kt<v?wt=0:kt>E?wt=1:wt=(v-kt)/(v-E),z=m-(m-T)*wt,ut=C-(C-N)*wt,Ct=w-(w-P)*wt,je=M-(M-U)*wt;const tn=Math.round(Math.min(W,z)),gn=Math.round(Math.max(W,z));let ro=p*kt+tn*4;for(let Bt=tn;Bt<=gn;Bt++)wt=(W-Bt)/(W-z),wt<0?wt=0:wt>1&&(wt=1),h[ro++]=dt-(dt-ut)*wt|0,h[ro++]=L-(L-Ct)*wt|0,h[ro++]=F-(F-je)*wt|0,h[ro++]=255}}function Nk(n,t,e){const i=t.coords,s=t.colors;let o,r;switch(t.type){case"lattice":const a=t.verticesPerRow,l=Math.floor(i.length/a)-1,u=a-1;for(o=0;o<l;o++){let h=o*a;for(let p=0;p<u;p++,h++)W0(n,e,i[h],i[h+1],i[h+a],s[h],s[h+1],s[h+a]),W0(n,e,i[h+a+1],i[h+1],i[h+a],s[h+a+1],s[h+1],s[h+a])}break;case"triangles":for(o=0,r=i.length;o<r;o+=3)W0(n,e,i[o],i[o+1],i[o+2],s[o],s[o+1],s[o+2]);break;default:throw new Error("illegal figure")}}class Ik extends VC{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,i){const a=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-a,h=Math.ceil(this._bounds[3])-l,p=Math.min(Math.ceil(Math.abs(u*t[0]*1.1)),3e3),g=Math.min(Math.ceil(Math.abs(h*t[1]*1.1)),3e3),m=u/p,v=h/g,A={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-l,scaleX:1/m,scaleY:1/v},_=p+2*2,T=g+2*2,E=i.getCanvas("mesh",_,T),C=E.context,w=C.createImageData(p,g);if(e){const R=w.data;for(let x=0,D=R.length;x<D;x+=4)R[x]=e[0],R[x+1]=e[1],R[x+2]=e[2],R[x+3]=255}for(const R of this._figures)Nk(w,R,A);return C.putImageData(w,2,2),{canvas:E.canvas,offsetX:a-2*m,offsetY:l-2*v,scaleX:m,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(t,e,i,s){CS(t,this._bbox);const o=new Float32Array(2);if(s===Re.SHADING)q.singularValueDecompose2dScale(Ot(t),o);else if(this.matrix){q.singularValueDecompose2dScale(this.matrix,o);const[a,l]=o;q.singularValueDecompose2dScale(e.baseTransform,o),o[0]*=a,o[1]*=l}else q.singularValueDecompose2dScale(e.baseTransform,o);const r=this._createMeshCanvas(o,s===Re.SHADING?null:this._background,e.cachedCanvases);return s!==Re.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(r.offsetX,r.offsetY),t.scale(r.scaleX,r.scaleY),t.createPattern(r.canvas,"no-repeat")}}class Lk extends VC{getPattern(){return"hotpink"}}function Pk(n){switch(n[0]){case"RadialAxial":return new Dk(n);case"Mesh":return new Ik(n);case"Dummy":return new Lk}throw new Error(`Unknown IR type: ${n[0]}`)}const Bb={COLORED:1,UNCOLORED:2},Cv=class Cv{constructor(t,e,i,s){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(t){const{bbox:e,operatorList:i,paintType:s,tilingType:o,color:r,canvasGraphicsFactory:a}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),KA("TilingType: "+o);const h=e[0],p=e[1],g=e[2],m=e[3],v=g-h,A=m-p,_=new Float32Array(2);q.singularValueDecompose2dScale(this.matrix,_);const[T,E]=_;q.singularValueDecompose2dScale(this.baseTransform,_);const C=T*_[0],w=E*_[1];let M=v,R=A,x=!1,D=!1;const N=Math.ceil(l*C),P=Math.ceil(u*w),U=Math.ceil(v*C),Y=Math.ceil(A*w);N>=U?M=l:x=!0,P>=Y?R=u:D=!0;const rt=this.getSizeAndScale(M,this.ctx.canvas.width,C),W=this.getSizeAndScale(R,this.ctx.canvas.height,w),dt=t.cachedCanvases.getCanvas("pattern",rt.size,W.size),L=dt.context,F=a.createCanvasGraphics(L);if(F.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(F,s,r),L.translate(-rt.scale*h,-W.scale*p),F.transform(rt.scale,0,0,W.scale,0,0),L.save(),this.clipBbox(F,h,p,g,m),F.baseTransform=Ot(F.ctx),F.executeOperatorList(i),F.endDrawing(),L.restore(),x||D){const z=dt.canvas;x&&(M=l),D&&(R=u);const ut=this.getSizeAndScale(M,this.ctx.canvas.width,C),Ct=this.getSizeAndScale(R,this.ctx.canvas.height,w),je=ut.size,kt=Ct.size,wt=t.cachedCanvases.getCanvas("pattern-workaround",je,kt),tn=wt.context,gn=x?Math.floor(v/l):0,ro=D?Math.floor(A/u):0;for(let Bt=0;Bt<=gn;Bt++)for(let Sf=0;Sf<=ro;Sf++)tn.drawImage(z,je*Bt,kt*Sf,je,kt,0,0,je,kt);return{canvas:wt.canvas,scaleX:ut.scale,scaleY:Ct.scale,offsetX:h,offsetY:p}}return{canvas:dt.canvas,scaleX:rt.scale,scaleY:W.scale,offsetX:h,offsetY:p}}getSizeAndScale(t,e,i){const s=Math.max(Cv.MAX_PATTERN_SIZE,e);let o=Math.ceil(t*i);return o>=s?o=s:i=o/t,{scale:i,size:o}}clipBbox(t,e,i,s,o){const r=s-e,a=o-i;t.ctx.rect(e,i,r,a),q.axialAlignedBoundingBox([e,i,s,o],Ot(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){const s=t.ctx,o=t.current;switch(e){case Bb.COLORED:const{fillStyle:r,strokeStyle:a}=this.ctx;s.fillStyle=o.fillColor=r,s.strokeStyle=o.strokeColor=a;break;case Bb.UNCOLORED:s.fillStyle=s.strokeStyle=i,o.fillColor=o.strokeColor=i;break;default:throw new j2(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,i,s){let o=i;s!==Re.SHADING&&(o=q.transform(o,e.baseTransform),this.matrix&&(o=q.transform(o,this.matrix)));const r=this.createPatternCanvas(e);let a=new DOMMatrix(o);a=a.translate(r.offsetX,r.offsetY),a=a.scale(1/r.scaleX,1/r.scaleY);const l=t.createPattern(r.canvas,"repeat");return l.setTransform(a),l}};O(Cv,"MAX_PATTERN_SIZE",3e3);let _S=Cv;function kk({src:n,srcPos:t=0,dest:e,width:i,height:s,nonBlackColor:o=4294967295,inverseDecode:r=!1}){const a=Ie.isLittleEndian?4278190080:255,[l,u]=r?[o,a]:[a,o],h=i>>3,p=i&7,g=n.length;e=new Uint32Array(e.buffer);let m=0;for(let v=0;v<s;v++){for(const _=t+h;t<_;t++){const T=t<g?n[t]:255;e[m++]=T&128?u:l,e[m++]=T&64?u:l,e[m++]=T&32?u:l,e[m++]=T&16?u:l,e[m++]=T&8?u:l,e[m++]=T&4?u:l,e[m++]=T&2?u:l,e[m++]=T&1?u:l}if(p===0)continue;const A=t<g?n[t++]:255;for(let _=0;_<p;_++)e[m++]=A&1<<7-_?u:l}return{srcPos:t,destPos:m}}const Hb=16,Vb=100,Uk=15,Gb=10,cn=16,Q0=new DOMMatrix,kn=new Float32Array(2),nu=new Float32Array([1/0,1/0,-1/0,-1/0]);function Fk(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,i){t.translate(e,i),this.__originalTranslate(e,i)},n.scale=function(e,i){t.scale(e,i),this.__originalScale(e,i)},n.transform=function(e,i,s,o,r,a){t.transform(e,i,s,o,r,a),this.__originalTransform(e,i,s,o,r,a)},n.setTransform=function(e,i,s,o,r,a){t.setTransform(e,i,s,o,r,a),this.__originalSetTransform(e,i,s,o,r,a)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,i){t.moveTo(e,i),this.__originalMoveTo(e,i)},n.lineTo=function(e,i){t.lineTo(e,i),this.__originalLineTo(e,i)},n.bezierCurveTo=function(e,i,s,o,r,a){t.bezierCurveTo(e,i,s,o,r,a),this.__originalBezierCurveTo(e,i,s,o,r,a)},n.rect=function(e,i,s,o){t.rect(e,i,s,o),this.__originalRect(e,i,s,o)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Ok{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let s;return this.cache[t]!==void 0?(s=this.cache[t],this.canvasFactory.reset(s,e,i)):(s=this.canvasFactory.create(e,i),this.cache[t]=s),s}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Xg(n,t,e,i,s,o,r,a,l,u){const[h,p,g,m,v,A]=Ot(n);if(p===0&&g===0){const E=r*h+v,C=Math.round(E),w=a*m+A,M=Math.round(w),R=(r+l)*h+v,x=Math.abs(Math.round(R)-C)||1,D=(a+u)*m+A,N=Math.abs(Math.round(D)-M)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),C,M),n.drawImage(t,e,i,s,o,0,0,x,N),n.setTransform(h,p,g,m,v,A),[x,N]}if(h===0&&m===0){const E=a*g+v,C=Math.round(E),w=r*p+A,M=Math.round(w),R=(a+u)*g+v,x=Math.abs(Math.round(R)-C)||1,D=(r+l)*p+A,N=Math.abs(Math.round(D)-M)||1;return n.setTransform(0,Math.sign(p),Math.sign(g),0,C,M),n.drawImage(t,e,i,s,o,0,0,N,x),n.setTransform(h,p,g,m,v,A),[N,x]}n.drawImage(t,e,i,s,o,r,a,l,u);const _=Math.hypot(h,p),T=Math.hypot(g,m);return[_*l,T*u]}class qb{constructor(t,e){O(this,"alphaIsShape",!1);O(this,"fontSize",0);O(this,"fontSizeScale",1);O(this,"textMatrix",null);O(this,"textMatrixScale",1);O(this,"fontMatrix",jT);O(this,"leading",0);O(this,"x",0);O(this,"y",0);O(this,"lineX",0);O(this,"lineY",0);O(this,"charSpacing",0);O(this,"wordSpacing",0);O(this,"textHScale",1);O(this,"textRenderingMode",Le.FILL);O(this,"textRise",0);O(this,"fillColor","#000000");O(this,"strokeColor","#000000");O(this,"patternFill",!1);O(this,"patternStroke",!1);O(this,"fillAlpha",1);O(this,"strokeAlpha",1);O(this,"lineWidth",1);O(this,"activeSMask",null);O(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=nu.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Re.FILL,e=null){const i=this.minMax.slice();if(t===Re.STROKE){e||Tt("Stroke bounding box must include transform."),q.singularValueDecompose2dScale(e,kn);const s=kn[0]*this.lineWidth/2,o=kn[1]*this.lineWidth/2;i[0]-=s,i[1]-=o,i[2]+=s,i[3]+=o}return i}updateClipFromPath(){const t=q.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(nu,0)}getClippedPathBoundingBox(t=Re.FILL,e=null){return q.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function zb(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,i=t.width,s=e%cn,o=(e-s)/cn,r=s===0?o:o+1,a=n.createImageData(i,cn);let l=0,u;const h=t.data,p=a.data;let g,m,v,A;if(t.kind===dm.GRAYSCALE_1BPP){const _=h.byteLength,T=new Uint32Array(p.buffer,0,p.byteLength>>2),E=T.length,C=i+7>>3,w=4294967295,M=Ie.isLittleEndian?4278190080:255;for(g=0;g<r;g++){for(v=g<o?cn:s,u=0,m=0;m<v;m++){const R=_-l;let x=0;const D=R>C?i:R*8-7,N=D&-8;let P=0,U=0;for(;x<N;x+=8)U=h[l++],T[u++]=U&128?w:M,T[u++]=U&64?w:M,T[u++]=U&32?w:M,T[u++]=U&16?w:M,T[u++]=U&8?w:M,T[u++]=U&4?w:M,T[u++]=U&2?w:M,T[u++]=U&1?w:M;for(;x<D;x++)P===0&&(U=h[l++],P=128),T[u++]=U&P?w:M,P>>=1}for(;u<E;)T[u++]=0;n.putImageData(a,0,g*cn)}}else if(t.kind===dm.RGBA_32BPP){for(m=0,A=i*cn*4,g=0;g<o;g++)p.set(h.subarray(l,l+A)),l+=A,n.putImageData(a,0,m),m+=cn;g<r&&(A=i*s*4,p.set(h.subarray(l,l+A)),n.putImageData(a,0,m))}else if(t.kind===dm.RGB_24BPP)for(v=cn,A=i*v,g=0;g<r;g++){for(g>=o&&(v=s,A=i*v),u=0,m=A;m--;)p[u++]=h[l++],p[u++]=h[l++],p[u++]=h[l++],p[u++]=255;n.putImageData(a,0,g*cn)}else throw new Error(`bad image kind: ${t.kind}`)}function $b(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,i=t.width,s=e%cn,o=(e-s)/cn,r=s===0?o:o+1,a=n.createImageData(i,cn);let l=0;const u=t.data,h=a.data;for(let p=0;p<r;p++){const g=p<o?cn:s;({srcPos:l}=kk({src:u,srcPos:l,dest:h,width:i,height:g,nonBlackColor:0})),n.putImageData(a,0,p*cn)}}function Df(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of e)n[i]!==void 0&&(t[i]=n[i]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function Jg(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function Yb(n,t){if(t)return!0;q.singularValueDecompose2dScale(n,kn);const e=Math.fround(ns.pixelRatio*_r.PDF_TO_CSS_UNITS);return kn[0]<=e&&kn[1]<=e}const Bk=["butt","round","square"],Hk=["miter","round","bevel"],Vk={},Xb={};var Mh,bS,xh,wS,Rh,MS;const e_=class e_{constructor(t,e,i,s,o,{optionalContentConfig:r,markedContentStack:a=null},l,u){y(this,Mh);y(this,xh);y(this,Rh);this.ctx=t,this.current=new qb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=s,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=r,this.cachedCanvases=new Ok(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:i=!1,background:s=null}){const o=this.ctx.canvas.width,r=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,o,r),this.ctx.fillStyle=a,i){const l=this.cachedCanvases.getCanvas("transparent",o,r);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...Ot(this.compositeCtx))}this.ctx.save(),Jg(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ot(this.ctx)}executeOperatorList(t,e,i,s){const o=t.argsArray,r=t.fnArray;let a=e||0;const l=o.length;if(l===a)return a;const u=l-a>Gb&&typeof i=="function",h=u?Date.now()+Uk:0;let p=0;const g=this.commonObjs,m=this.objs;let v;for(;;){if(s!==void 0&&a===s.nextBreakPoint)return s.breakIt(a,i),a;if(v=r[a],v!==_y.dependency)this[v].apply(this,o[a]);else for(const A of o[a]){const _=A.startsWith("g_")?g:m;if(!_.has(A))return _.get(A,i),a}if(a++,a===l)return a;if(u&&++p>Gb){if(Date.now()>h)return i(),a;p=0}}}endDrawing(){b(this,Mh,bS).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),b(this,xh,wS).call(this)}_scaleImage(t,e){const i=t.width??t.displayWidth,s=t.height??t.displayHeight;let o=Math.max(Math.hypot(e[0],e[1]),1),r=Math.max(Math.hypot(e[2],e[3]),1),a=i,l=s,u="prescale1",h,p;for(;o>2&&a>1||r>2&&l>1;){let g=a,m=l;o>2&&a>1&&(g=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),o/=a/g),r>2&&l>1&&(m=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,r/=l/m),h=this.cachedCanvases.getCanvas(u,g,m),p=h.context,p.clearRect(0,0,g,m),p.drawImage(t,0,0,a,l,0,0,g,m),t=h.canvas,a=g,l=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:l}}_createMaskCanvas(t){const e=this.ctx,{width:i,height:s}=t,o=this.current.fillColor,r=this.current.patternFill,a=Ot(e);let l,u,h,p;if((t.bitmap||t.data)&&t.count>1){const N=t.bitmap||t.data.buffer;u=JSON.stringify(r?a:[a.slice(0,4),o]),l=this._cachedBitmapsMap.get(N),l||(l=new Map,this._cachedBitmapsMap.set(N,l));const P=l.get(u);if(P&&!r){const U=Math.round(Math.min(a[0],a[2])+a[4]),Y=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:P,offsetX:U,offsetY:Y}}h=P}h||(p=this.cachedCanvases.getCanvas("maskCanvas",i,s),$b(p.context,t));let g=q.transform(a,[1/i,0,0,-1/s,0,0]);g=q.transform(g,[1,0,0,1,0,-s]);const m=nu.slice();q.axialAlignedBoundingBox([0,0,i,s],g,m);const[v,A,_,T]=m,E=Math.round(_-v)||1,C=Math.round(T-A)||1,w=this.cachedCanvases.getCanvas("fillCanvas",E,C),M=w.context,R=v,x=A;M.translate(-R,-x),M.transform(...g),h||(h=this._scaleImage(p.canvas,xi(M)),h=h.img,l&&r&&l.set(u,h)),M.imageSmoothingEnabled=Yb(Ot(M),t.interpolate),Xg(M,h,0,0,h.width,h.height,0,0,i,s),M.globalCompositeOperation="source-in";const D=q.transform(xi(M),[1,0,0,1,-R,-x]);return M.fillStyle=r?o.getPattern(e,this,D,Re.FILL):o,M.fillRect(0,0,i,s),l&&!r&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,w.canvas)),{canvas:w.canvas,offsetX:Math.round(R),offsetY:Math.round(x)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=Bk[t]}setLineJoin(t){this.ctx.lineJoin=Hk[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,s=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx;const o=this.ctx=s.context;o.setTransform(this.suspendedCtx.getTransform()),Df(this.suspendedCtx,o),Fk(o,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Df(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,i,s){const o=s[0],r=s[1],a=s[2]-o,l=s[3]-r;a===0||l===0||(this.genericComposeSMask(e.context,i,a,l,e.subtype,e.backdrop,e.transferMap,o,r,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}genericComposeSMask(t,e,i,s,o,r,a,l,u,h,p){let g=t.canvas,m=l-h,v=u-p;if(r)if(m<0||v<0||m+i>g.width||v+s>g.height){const _=this.cachedCanvases.getCanvas("maskExtension",i,s),T=_.context;T.drawImage(g,-m,-v),T.globalCompositeOperation="destination-atop",T.fillStyle=r,T.fillRect(0,0,i,s),T.globalCompositeOperation="source-over",g=_.canvas,m=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const _=new Path2D;_.rect(m,v,i,s),t.clip(_),t.globalCompositeOperation="destination-atop",t.fillStyle=r,t.fillRect(m,v,i,s),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),o==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):o==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const A=new Path2D;A.rect(l,u,i,s),e.clip(A),e.globalCompositeOperation="destination-in",e.drawImage(g,m,v,i,s,l,u,i,s),e.restore()}save(){this.inSMaskMode&&Df(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Df(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,i,s,o,r){this.ctx.transform(t,e,i,s,o,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let[s]=e;if(!i){s||(s=e[0]=new Path2D),this[t](s);return}if(!(s instanceof Path2D)){const o=e[0]=new Path2D;for(let r=0,a=s.length;r<a;)switch(s[r++]){case zg.moveTo:o.moveTo(s[r++],s[r++]);break;case zg.lineTo:o.lineTo(s[r++],s[r++]);break;case zg.curveTo:o.bezierCurveTo(s[r++],s[r++],s[r++],s[r++],s[r++],s[r++]);break;case zg.closePath:o.closePath();break;default:K(`Unrecognized drawing path operator: ${s[r-1]}`);break}s=o}q.axialAlignedBoundingBox(i,Ot(this.ctx),this.current.minMax),this[t](s)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof s=="object"&&(s!=null&&s.getPattern)){const o=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,xi(i),Re.STROKE),o){const r=new Path2D;r.addPath(t,i.getTransform().invertSelf().multiplySelf(o)),t=r}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(Re.STROKE,Ot(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const i=this.ctx,s=this.current.fillColor,o=this.current.patternFill;let r=!1;if(o){const l=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.fillStyle=s.getPattern(i,this,xi(i),Re.FILL),l){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(l)),t=u}r=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),r&&i.restore(),e&&this.consumePath(t,a)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=Vk}eoClip(){this.pendingClip=Xb}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const i=new Path2D,s=e.getTransform().invertSelf();for(const{transform:o,x:r,y:a,fontSize:l,path:u}of t)i.addPath(u,new DOMMatrix(o).preMultiplySelf(s).translate(r,a).scale(l,-l));e.clip(i),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var h;const i=this.commonObjs.get(t),s=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(s.fontMatrix=i.fontMatrix||jT,(s.fontMatrix[0]===0||s.fontMatrix[3]===0)&&K("Invalid font matrix for font "+t),e<0?(e=-e,s.fontDirection=-1):s.fontDirection=1,this.current.font=i,this.current.fontSize=e,i.isType3Font)return;const o=i.loadedName||"sans-serif",r=((h=i.systemFontInfo)==null?void 0:h.css)||`"${o}", ${i.fallbackName}`;let a="normal";i.black?a="900":i.bold&&(a="bold");const l=i.italic?"italic":"normal";let u=e;e<Hb?u=Hb:e>Vb&&(u=Vb),this.current.fontSizeScale=e/u,this.ctx.font=`${l} ${a} ${u}px ${r}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,s,o){const r=this.ctx,a=this.current,l=a.font,u=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,p=u&Le.FILL_STROKE_MASK,g=!!(u&Le.ADD_TO_PATH_FLAG),m=a.patternFill&&!l.missingFile,v=a.patternStroke&&!l.missingFile;let A;if((l.disableFontFace||g||m||v)&&(A=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||m||v){r.save(),r.translate(e,i),r.scale(h,-h);let _;if((p===Le.FILL||p===Le.FILL_STROKE)&&(s?(_=r.getTransform(),r.setTransform(...s),r.fill(b(this,Rh,MS).call(this,A,_,s))):r.fill(A)),p===Le.STROKE||p===Le.FILL_STROKE)if(o){_||(_=r.getTransform()),r.setTransform(...o);const{a:T,b:E,c:C,d:w}=_,M=q.inverseTransform(o),R=q.transform([T,E,C,w,0,0],M);q.singularValueDecompose2dScale(R,kn),r.lineWidth*=Math.max(kn[0],kn[1])/h,r.stroke(b(this,Rh,MS).call(this,A,_,o))}else r.lineWidth/=h,r.stroke(A);r.restore()}else(p===Le.FILL||p===Le.FILL_STROKE)&&r.fillText(t,e,i),(p===Le.STROKE||p===Le.FILL_STROKE)&&r.strokeText(t,e,i);g&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ot(r),x:e,y:i,fontSize:h,path:A})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<e.length;s+=4)if(e[s]>0&&e[s]<255){i=!0;break}return st(this,"isFontSubpixelAAEnabled",i)}showText(t){const e=this.current,i=e.font;if(i.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(s===0)return;const o=this.ctx,r=e.fontSizeScale,a=e.charSpacing,l=e.wordSpacing,u=e.fontDirection,h=e.textHScale*u,p=t.length,g=i.vertical,m=g?1:-1,v=i.defaultVMetrics,A=s*e.fontMatrix[0],_=e.textRenderingMode===Le.FILL&&!i.disableFontFace&&!e.patternFill;o.save(),e.textMatrix&&o.transform(...e.textMatrix),o.translate(e.x,e.y+e.textRise),u>0?o.scale(h,-1):o.scale(h,1);let T,E;if(e.patternFill){o.save();const x=e.fillColor.getPattern(o,this,xi(o),Re.FILL);T=Ot(o),o.restore(),o.fillStyle=x}if(e.patternStroke){o.save();const x=e.strokeColor.getPattern(o,this,xi(o),Re.STROKE);E=Ot(o),o.restore(),o.strokeStyle=x}let C=e.lineWidth;const w=e.textMatrixScale;if(w===0||C===0){const x=e.textRenderingMode&Le.FILL_STROKE_MASK;(x===Le.STROKE||x===Le.FILL_STROKE)&&(C=this.getSinglePixelWidth())}else C/=w;if(r!==1&&(o.scale(r,r),C/=r),o.lineWidth=C,i.isInvalidPDFjsFont){const x=[];let D=0;for(const N of t)x.push(N.unicode),D+=N.width;o.fillText(x.join(""),0,0),e.x+=D*A*h,o.restore(),this.compose();return}let M=0,R;for(R=0;R<p;++R){const x=t[R];if(typeof x=="number"){M+=m*x*s/1e3;continue}let D=!1;const N=(x.isSpace?l:0)+a,P=x.fontChar,U=x.accent;let Y,rt,W=x.width;if(g){const L=x.vmetric||v,F=-(x.vmetric?L[1]:W*.5)*A,z=L[2]*A;W=L?-L[0]:W,Y=F/r,rt=(M+z)/r}else Y=M/r,rt=0;if(i.remeasure&&W>0){const L=o.measureText(P).width*1e3/s*r;if(W<L&&this.isFontSubpixelAAEnabled){const F=W/L;D=!0,o.save(),o.scale(F,1),Y/=F}else W!==L&&(Y+=(W-L)/2e3*s/r)}if(this.contentVisible&&(x.isInFont||i.missingFile)){if(_&&!U)o.fillText(P,Y,rt);else if(this.paintChar(P,Y,rt,T,E),U){const L=Y+s*U.offset.x/r,F=rt-s*U.offset.y/r;this.paintChar(U.fontChar,L,F,T,E)}}const dt=g?W*A-N*u:W*A+N*u;M+=dt,D&&o.restore()}g?e.y-=M:e.x+=M*h,o.restore(),this.compose()}showType3Text(t){const e=this.ctx,i=this.current,s=i.font,o=i.fontSize,r=i.fontDirection,a=s.vertical?1:-1,l=i.charSpacing,u=i.wordSpacing,h=i.textHScale*r,p=i.fontMatrix||jT,g=t.length,m=i.textRenderingMode===Le.INVISIBLE;let v,A,_,T;if(!(m||o===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),i.textMatrix&&e.transform(...i.textMatrix),e.translate(i.x,i.y+i.textRise),e.scale(h,r),v=0;v<g;++v){if(A=t[v],typeof A=="number"){T=a*A*o/1e3,this.ctx.translate(T,0),i.x+=T*h;continue}const E=(A.isSpace?u:0)+l,C=s.charProcOperatorList[A.operatorListId];C?this.contentVisible&&(this.save(),e.scale(o,o),e.transform(...p),this.executeOperatorList(C),this.restore()):K(`Type3 character "${A.operatorListId}" is not available.`);const w=[A.width,0];q.applyTransform(w,p),_=w[0]*o+E,e.translate(_,0),i.x+=_*h}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,s,o,r){const a=new Path2D;a.rect(i,s,o-i,r-s),this.ctx.clip(a),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const i=this.baseTransform||Ot(this.ctx),s={createCanvasGraphics:o=>new e_(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new _S(t,this.ctx,s,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=Pk(this.getObject(t)),this.cachedPatterns.set(t,i)),e&&(i.matrix=e),i}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const i=this._getPattern(t);e.fillStyle=i.getPattern(e,this,xi(e),Re.SHADING);const s=xi(e);if(s){const{width:o,height:r}=e.canvas,a=nu.slice();q.axialAlignedBoundingBox([0,0,o,r],s,a);const[l,u,h,p]=a;this.ctx.fillRect(l,u,h-l,p-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Tt("Should not call beginInlineImage")}beginImageData(){Tt("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ot(this.ctx),e)){q.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[i,s,o,r]=e,a=new Path2D;a.rect(i,s,o-i,r-s),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||KA("TODO: Support non-isolated groups."),t.knockout&&K("Knockout groups not supported.");const i=Ot(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=nu.slice();q.axialAlignedBoundingBox(t.bbox,Ot(e),s);const o=[0,0,e.canvas.width,e.canvas.height];s=q.intersect(s,o)||[0,0,0,0];const r=Math.floor(s[0]),a=Math.floor(s[1]),l=Math.max(Math.ceil(s[2])-r,1),u=Math.max(Math.ceil(s[3])-a,1);this.current.startNewPathAndClipBox([0,0,l,u]);let h="groupAt"+this.groupLevel;t.smask&&(h+="_smask_"+this.smaskCounter++%2);const p=this.cachedCanvases.getCanvas(h,l,u),g=p.context;g.translate(-r,-a),g.transform(...i);let m=new Path2D;const[v,A,_,T]=t.bbox;if(m.rect(v,A,_-v,T-A),t.matrix){const E=new Path2D;E.addPath(m,new DOMMatrix(t.matrix)),m=E}g.clip(m),t.smask?this.smaskStack.push({canvas:p.canvas,context:g,offsetX:r,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(r,a),e.save()),Df(e,g),this.ctx=g,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const s=Ot(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...s);const o=nu.slice();q.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],s,o),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,e,i,s,o){if(b(this,Mh,bS).call(this),Jg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const r=e[2]-e[0],a=e[3]-e[1];if(o&&this.annotationCanvasMap){i=i.slice(),i[4]-=e[0],i[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=r,e[3]=a,q.singularValueDecompose2dScale(Ot(this.ctx),kn);const{viewportScale:l}=this,u=Math.ceil(r*this.outputScaleX*l),h=Math.ceil(a*this.outputScaleY*l);this.annotationCanvas=this.canvasFactory.create(u,h);const{canvas:p,context:g}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=g,this.ctx.save(),this.ctx.setTransform(kn[0],0,0,-kn[1],0,a*kn[1]),Jg(this.ctx)}else{Jg(this.ctx),this.endPath();const l=new Path2D;l.rect(e[0],e[1],r,a),this.ctx.clip(l)}}this.current=new qb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),b(this,xh,wS).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const i=this.ctx,s=this._createMaskCanvas(t),o=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(o,s.offsetX,s.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,i=0,s=0,o,r){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const l=Ot(a);a.transform(e,i,s,o,0,0);const u=this._createMaskCanvas(t);a.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let h=0,p=r.length;h<p;h+=2){const g=q.transform(l,[e,i,s,o,r[h],r[h+1]]);a.drawImage(u.canvas,g[4],g[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,i=this.current.fillColor,s=this.current.patternFill;for(const o of t){const{data:r,width:a,height:l,transform:u}=o,h=this.cachedCanvases.getCanvas("maskCanvas",a,l),p=h.context;p.save();const g=this.getObject(r,o);$b(p,g),p.globalCompositeOperation="source-in",p.fillStyle=s?i.getPattern(p,this,xi(e),Re.FILL):i,p.fillRect(0,0,a,l),p.restore(),e.save(),e.transform(...u),e.scale(1,-1),Xg(e,h.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){K("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,i,s){if(!this.contentVisible)return;const o=this.getObject(t);if(!o){K("Dependent image isn't ready yet");return}const r=o.width,a=o.height,l=[];for(let u=0,h=s.length;u<h;u+=2)l.push({transform:[e,0,0,i,s[u],s[u+1]],x:0,y:0,w:r,h:a});this.paintInlineImageXObjectGroup(o,l)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:i,height:s}=t,o=this.cachedCanvases.getCanvas("inlineImage",i,s),r=o.context;return r.filter=this.current.transferMaps,r.drawImage(e,0,0),r.filter="none",o.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,i=t.height,s=this.ctx;this.save();const{filter:o}=s;o!=="none"&&o!==""&&(s.filter="none"),s.scale(1/e,-1/i);let r;if(t.bitmap)r=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)r=t;else{const u=this.cachedCanvases.getCanvas("inlineImage",e,i).context;zb(u,t),r=this.applyTransferMapsToCanvas(u)}const a=this._scaleImage(r,xi(s));s.imageSmoothingEnabled=Yb(Ot(s),t.interpolate),Xg(s,a.img,0,0,a.paintWidth,a.paintHeight,0,-i,e,i),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const i=this.ctx;let s;if(t.bitmap)s=t.bitmap;else{const o=t.width,r=t.height,l=this.cachedCanvases.getCanvas("inlineImage",o,r).context;zb(l,t),s=this.applyTransferMapsToCanvas(l)}for(const o of e)i.save(),i.transform(...o.transform),i.scale(1,-1),Xg(i,s,o.x,o.y,o.w,o.h,0,-1,1,1),i.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const s=this.ctx;this.pendingClip&&(i||(this.pendingClip===Xb?s.clip(t,"evenodd"):s.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ot(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),s=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:i,c:s,d:o}=this.ctx.getTransform();let r,a;if(i===0&&s===0){const l=Math.abs(e),u=Math.abs(o);if(l===u)if(t===0)r=a=1/l;else{const h=l*t;r=a=h<1?1/h:1}else if(t===0)r=1/l,a=1/u;else{const h=l*t,p=u*t;r=h<1?1/h:1,a=p<1?1/p:1}}else{const l=Math.abs(e*o-i*s),u=Math.hypot(e,i),h=Math.hypot(s,o);if(t===0)r=h/l,a=u/l;else{const p=t*l;r=h>p?h/p:1,a=u>p?u/p:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:i,current:{lineWidth:s}}=this,[o,r]=this.getScaleForStroking();if(o===r){i.lineWidth=(s||1)*o,i.stroke(t);return}const a=i.getLineDash();e&&i.save(),i.scale(o,r),Q0.a=1/o,Q0.d=1/r;const l=new Path2D;if(l.addPath(t,Q0),a.length>0){const u=Math.max(o,r);i.setLineDash(a.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(l),e&&i.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};Mh=new WeakSet,bS=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},xh=new WeakSet,wS=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},Rh=new WeakSet,MS=function(t,e,i){const s=new Path2D;return s.addPath(t,new DOMMatrix(i).invertSelf().multiplySelf(e)),s};let pu=e_;for(const n in _y)pu.prototype[n]!==void 0&&(pu.prototype[_y[n]]=pu.prototype[n]);var Dh,Nh;class Qi{static get workerPort(){return d(this,Dh)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");S(this,Dh,t)}static get workerSrc(){return d(this,Nh)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");S(this,Nh,t)}}Dh=new WeakMap,Nh=new WeakMap,y(Qi,Dh,null),y(Qi,Nh,"");var $u,Ih;class Gk{constructor({parsedData:t,rawData:e}){y(this,$u,void 0);y(this,Ih,void 0);S(this,$u,t),S(this,Ih,e)}getRaw(){return d(this,Ih)}get(t){return d(this,$u).get(t)??null}[Symbol.iterator](){return d(this,$u).entries()}}$u=new WeakMap,Ih=new WeakMap;const Vl=Symbol("INTERNAL");var Lh,Ph,kh,Yu;class qk{constructor(t,{name:e,intent:i,usage:s,rbGroups:o}){y(this,Lh,!1);y(this,Ph,!1);y(this,kh,!1);y(this,Yu,!0);S(this,Lh,!!(t&Ln.DISPLAY)),S(this,Ph,!!(t&Ln.PRINT)),this.name=e,this.intent=i,this.usage=s,this.rbGroups=o}get visible(){if(d(this,kh))return d(this,Yu);if(!d(this,Yu))return!1;const{print:t,view:e}=this.usage;return d(this,Lh)?(e==null?void 0:e.viewState)!=="OFF":d(this,Ph)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,i=!1){t!==Vl&&Tt("Internal method `_setVisible` called."),S(this,kh,i),S(this,Yu,e)}}Lh=new WeakMap,Ph=new WeakMap,kh=new WeakMap,Yu=new WeakMap;var Fo,yt,Xu,Ju,Uh,xS;class zk{constructor(t,e=Ln.DISPLAY){y(this,Uh);y(this,Fo,null);y(this,yt,new Map);y(this,Xu,null);y(this,Ju,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,S(this,Ju,t.order);for(const i of t.groups)d(this,yt).set(i.id,new qk(e,i));if(t.baseState==="OFF")for(const i of d(this,yt).values())i._setVisible(Vl,!1);for(const i of t.on)d(this,yt).get(i)._setVisible(Vl,!0);for(const i of t.off)d(this,yt).get(i)._setVisible(Vl,!1);S(this,Xu,this.getHash())}}isVisible(t){if(d(this,yt).size===0)return!0;if(!t)return KA("Optional content group not defined."),!0;if(t.type==="OCG")return d(this,yt).has(t.id)?d(this,yt).get(t.id).visible:(K(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return b(this,Uh,xS).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!d(this,yt).has(e))return K(`Optional content group not found: ${e}`),!0;if(d(this,yt).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!d(this,yt).has(e))return K(`Optional content group not found: ${e}`),!0;if(!d(this,yt).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!d(this,yt).has(e))return K(`Optional content group not found: ${e}`),!0;if(!d(this,yt).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!d(this,yt).has(e))return K(`Optional content group not found: ${e}`),!0;if(d(this,yt).get(e).visible)return!1}return!0}return K(`Unknown optional content policy ${t.policy}.`),!0}return K(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,i=!0){var o;const s=d(this,yt).get(t);if(!s){K(`Optional content group not found: ${t}`);return}if(i&&e&&s.rbGroups.length)for(const r of s.rbGroups)for(const a of r)a!==t&&((o=d(this,yt).get(a))==null||o._setVisible(Vl,!1,!0));s._setVisible(Vl,!!e,!0),S(this,Fo,null)}setOCGState({state:t,preserveRB:e}){let i;for(const s of t){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const o=d(this,yt).get(s);if(o)switch(i){case"ON":this.setVisibility(s,!0,e);break;case"OFF":this.setVisibility(s,!1,e);break;case"Toggle":this.setVisibility(s,!o.visible,e);break}}S(this,Fo,null)}get hasInitialVisibility(){return d(this,Xu)===null||this.getHash()===d(this,Xu)}getOrder(){return d(this,yt).size?d(this,Ju)?d(this,Ju).slice():[...d(this,yt).keys()]:null}getGroup(t){return d(this,yt).get(t)||null}getHash(){if(d(this,Fo)!==null)return d(this,Fo);const t=new uD;for(const[e,i]of d(this,yt))t.update(`${e}:${i.visible}`);return S(this,Fo,t.hexdigest())}[Symbol.iterator](){return d(this,yt).entries()}}Fo=new WeakMap,yt=new WeakMap,Xu=new WeakMap,Ju=new WeakMap,Uh=new WeakSet,xS=function(t){const e=t.length;if(e<2)return!0;const i=t[0];for(let s=1;s<e;s++){const o=t[s];let r;if(Array.isArray(o))r=b(this,Uh,xS).call(this,o);else if(d(this,yt).has(o))r=d(this,yt).get(o).visible;else return K(`Optional content group not found: ${o}`),!0;switch(i){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return i==="And"};class $k{constructor(t,{disableRange:e=!1,disableStream:i=!1}){ee(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:o,progressiveDone:r,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=a,(o==null?void 0:o.length)>0){const l=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!i,this._isRangeSupported=!e,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),t.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),t.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const i=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(o){return o._begin!==t?!1:(o._enqueue(i),!0)});ee(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,i,s,o;t.total===void 0?(i=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||i.call(e,{loaded:t.loaded}):(o=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||o.call(s,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ee(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Yk(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Xk(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Yk{constructor(t,e,i=!1,s=null){this._stream=t,this._done=i||!1,this._filename=UC(s)?s:null,this._queuedChunks=e||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Xk{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Jk(n){let t=!0,e=i("filename\\*","i").exec(n);if(e){e=e[1];let h=a(e);return h=unescape(h),h=l(h),h=u(h),o(h)}if(e=r(n),e){const h=u(e);return o(h)}if(e=i("filename","i").exec(n),e){e=e[1];let h=a(e);return h=u(h),o(h)}function i(h,p){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',p)}function s(h,p){if(h){if(!/^[\x00-\xFF]+$/.test(p))return p;try{const g=new TextDecoder(h,{fatal:!0}),m=vg(p);p=g.decode(m),t=!1}catch{}}return p}function o(h){return t&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),t&&(h=s("iso-8859-1",h))),h}function r(h){const p=[];let g;const m=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(g=m.exec(h))!==null;){let[,A,_,T]=g;if(A=parseInt(A,10),A in p){if(A===0)break;continue}p[A]=[_,T]}const v=[];for(let A=0;A<p.length&&A in p;++A){let[_,T]=p[A];T=a(T),_&&(T=unescape(T),A===0&&(T=l(T))),v.push(T)}return v.join("")}function a(h){if(h.startsWith('"')){const p=h.slice(1).split('\\"');for(let g=0;g<p.length;++g){const m=p[g].indexOf('"');m!==-1&&(p[g]=p[g].slice(0,m),p.length=g+1),p[g]=p[g].replaceAll(/\\(.)/g,"$1")}h=p.join('"')}return h}function l(h){const p=h.indexOf("'");if(p===-1)return h;const g=h.slice(0,p),v=h.slice(p+1).replace(/^[^']*'/,"");return s(g,v)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(p,g,m,v){if(m==="q"||m==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(A,_){return String.fromCharCode(parseInt(_,16))}),s(g,v);try{v=atob(v)}catch{}return s(g,v)})}return""}function SD(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const i in t){const s=t[i];s!==void 0&&e.append(i,s)}return e}function QA(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function ED({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(n.get("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*e)||i||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function CD(n){const t=n.get("Content-Disposition");if(t){let e=Jk(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(UC(e))return e}return null}function Eg(n,t){return new by(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function _D(n){return n===200||n===206}function bD(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function wD(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(K(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Kk{constructor(t){O(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=SD(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ee(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Wk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new Qk(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Wk{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const i=new Headers(t.headers),s=e.url;fetch(s,bD(i,this._withCredentials,this._abortController)).then(o=>{if(t._responseOrigin=QA(o.url),!_D(o.status))throw Eg(o.status,s);this._reader=o.body.getReader(),this._headersCapability.resolve();const r=o.headers,{allowRangeRequests:a,suggestedLength:l}=ED({responseHeaders:r,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=l||this._contentLength,this._filename=CD(r),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Cr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:wD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Qk{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;const s=t.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const o=new Headers(t.headers);o.append("Range",`bytes=${e}-${i-1}`);const r=s.url;fetch(r,bD(o,this._withCredentials,this._abortController)).then(a=>{const l=QA(a.url);if(l!==t._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${t._responseOrigin}".`);if(!_D(a.status))throw Eg(a.status,r);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:wD(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Z0=200,j0=206;function Zk(n){const t=n.response;return typeof t!="string"?t:vg(t).buffer}class jk{constructor({url:t,httpHeaders:e,withCredentials:i}){O(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=SD(this.isHttp,e),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[o,r]of this.headers)e.setRequestHeader(o,r);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),s.expectedStatus=j0):s.expectedStatus=Z0,e.responseType="arraybuffer",ee(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=t.onHeadersReceived,s.onDone=t.onDone,s.onError=t.onError,s.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var s;const i=this.pendingRequests[t];i&&((s=i.onProgress)==null||s.call(i,e))}onStateChange(t,e){const i=this.pendingRequests[t];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],s.status===0&&this.isHttp){i.onError(s.status);return}const o=s.status||Z0;if(!(o===Z0&&i.expectedStatus===j0)&&o!==i.expectedStatus){i.onError(s.status);return}const a=Zk(s);if(o===j0){const l=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?i.onDone({begin:parseInt(u[1],10),chunk:a}):(K('Missing or invalid "Content-Range" header.'),i.onError(0))}else a?i.onDone({begin:0,chunk:a}):i.onError(s.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class tU{constructor(t){this._source=t,this._manager=new jk(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ee(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eU(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const i=new nU(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class eU{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=QA(e.responseURL);const i=e.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[l,...u]=a.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:r}=ED({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=CD(s),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Eg(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class nU{constructor(t,e,i){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=QA((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Eg(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const iU=/^[a-z][a-z0-9\-+.]+:/i;function sU(n){if(iU.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class oU{constructor(t){this.source=t,this.url=sU(t.url),ee(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ee(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new rU(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const i=new aU(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class rU{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=Eg(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Cr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class aU{constructor(t,e,i){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=t.source;this._isStreamingSupported=!s.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:e,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Nf=Symbol("INITIAL_DATA");var En,Fh,RS;class MD{constructor(){y(this,Fh);y(this,En,Object.create(null))}get(t,e=null){if(e){const s=b(this,Fh,RS).call(this,t);return s.promise.then(()=>e(s.data)),null}const i=d(this,En)[t];if(!i||i.data===Nf)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){const e=d(this,En)[t];return!!e&&e.data!==Nf}delete(t){const e=d(this,En)[t];return!e||e.data===Nf?!1:(delete d(this,En)[t],!0)}resolve(t,e=null){const i=b(this,Fh,RS).call(this,t);i.data=e,i.resolve()}clear(){var t;for(const e in d(this,En)){const{data:i}=d(this,En)[e];(t=i==null?void 0:i.bitmap)==null||t.close()}S(this,En,Object.create(null))}*[Symbol.iterator](){for(const t in d(this,En)){const{data:e}=d(this,En)[t];e!==Nf&&(yield[t,e])}}}En=new WeakMap,Fh=new WeakSet,RS=function(t){var e;return(e=d(this,En))[t]||(e[t]={...Promise.withResolvers(),data:Nf})};const lU=1e5,Jb=30;var DM,Oo,on,Oh,Bh,pa,bs,Hh,Vh,ga,Ku,Wu,Bo,Qu,Gh,Zu,ma,qh,zh,ju,ya,$h,Ho,tc,_v,xD,bv,RD,Yh,DS,ec,Cm,Xh,NS,wv,DD,Mv,ND;const Ht=class Ht{constructor({textContentSource:t,container:e,viewport:i}){y(this,_v);y(this,bv);y(this,Yh);y(this,Oo,Promise.withResolvers());y(this,on,null);y(this,Oh,!1);y(this,Bh,!!((DM=globalThis.FontInspector)!=null&&DM.enabled));y(this,pa,null);y(this,bs,null);y(this,Hh,0);y(this,Vh,0);y(this,ga,null);y(this,Ku,null);y(this,Wu,0);y(this,Bo,0);y(this,Qu,Object.create(null));y(this,Gh,[]);y(this,Zu,null);y(this,ma,[]);y(this,qh,new WeakMap);y(this,zh,null);var l;if(t instanceof ReadableStream)S(this,Zu,t);else if(typeof t=="object")S(this,Zu,new ReadableStream({start(u){u.enqueue(t),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');S(this,on,S(this,Ku,e)),S(this,Bo,i.scale*ns.pixelRatio),S(this,Wu,i.rotation),S(this,bs,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:o,pageX:r,pageY:a}=i.rawDims;S(this,zh,[1,0,0,-1,-r,a+o]),S(this,Vh,s),S(this,Hh,o),b(l=Ht,wv,DD).call(l),vl(e,i),d(this,Oo).promise.finally(()=>{d(Ht,tc).delete(this),S(this,bs,null),S(this,Qu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Ie.platform;return st(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{d(this,ga).read().then(({value:e,done:i})=>{if(i){d(this,Oo).resolve();return}d(this,pa)??S(this,pa,e.lang),Object.assign(d(this,Qu),e.styles),b(this,_v,xD).call(this,e.items),t()},d(this,Oo).reject)};return S(this,ga,d(this,Zu).getReader()),d(Ht,tc).add(this),t(),d(this,Oo).promise}update({viewport:t,onBefore:e=null}){var o;const i=t.scale*ns.pixelRatio,s=t.rotation;if(s!==d(this,Wu)&&(e==null||e(),S(this,Wu,s),vl(d(this,Ku),{rotation:s})),i!==d(this,Bo)){e==null||e(),S(this,Bo,i);const r={div:null,properties:null,ctx:b(o=Ht,ec,Cm).call(o,d(this,pa))};for(const a of d(this,ma))r.properties=d(this,qh).get(a),r.div=a,b(this,Yh,DS).call(this,r)}}cancel(){var e;const t=new Cr("TextLayer task cancelled.");(e=d(this,ga))==null||e.cancel(t).catch(()=>{}),S(this,ga,null),d(this,Oo).reject(t)}get textDivs(){return d(this,ma)}get textContentItemsStr(){return d(this,Gh)}static cleanup(){if(!(d(this,tc).size>0)){d(this,ju).clear();for(const{canvas:t}of d(this,ya).values())t.remove();d(this,ya).clear()}}};Oo=new WeakMap,on=new WeakMap,Oh=new WeakMap,Bh=new WeakMap,pa=new WeakMap,bs=new WeakMap,Hh=new WeakMap,Vh=new WeakMap,ga=new WeakMap,Ku=new WeakMap,Wu=new WeakMap,Bo=new WeakMap,Qu=new WeakMap,Gh=new WeakMap,Zu=new WeakMap,ma=new WeakMap,qh=new WeakMap,zh=new WeakMap,ju=new WeakMap,ya=new WeakMap,$h=new WeakMap,Ho=new WeakMap,tc=new WeakMap,_v=new WeakSet,xD=function(t){var s,o;if(d(this,Oh))return;(o=d(this,bs)).ctx??(o.ctx=b(s=Ht,ec,Cm).call(s,d(this,pa)));const e=d(this,ma),i=d(this,Gh);for(const r of t){if(e.length>lU){K("Ignoring additional textDivs for performance reasons."),S(this,Oh,!0);return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const a=d(this,on);S(this,on,document.createElement("span")),d(this,on).classList.add("markedContent"),r.id!==null&&d(this,on).setAttribute("id",`${r.id}`),a.append(d(this,on))}else r.type==="endMarkedContent"&&S(this,on,d(this,on).parentNode);continue}i.push(r.str),b(this,bv,RD).call(this,r)}},bv=new WeakSet,RD=function(t){var A;const e=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};d(this,ma).push(e);const s=q.transform(d(this,zh),t.transform);let o=Math.atan2(s[1],s[0]);const r=d(this,Qu)[t.fontName];r.vertical&&(o+=Math.PI/2);let a=d(this,Bh)&&r.fontSubstitution||r.fontFamily;a=Ht.fontFamilyMap.get(a)||a;const l=Math.hypot(s[2],s[3]),u=l*b(A=Ht,Mv,ND).call(A,a,r,d(this,pa));let h,p;o===0?(h=s[4],p=s[5]-u):(h=s[4]+u*Math.sin(o),p=s[5]-u*Math.cos(o));const g="calc(var(--total-scale-factor) *",m=e.style;d(this,on)===d(this,Ku)?(m.left=`${(100*h/d(this,Vh)).toFixed(2)}%`,m.top=`${(100*p/d(this,Hh)).toFixed(2)}%`):(m.left=`${g}${h.toFixed(2)}px)`,m.top=`${g}${p.toFixed(2)}px)`),m.fontSize=`${g}${(d(Ht,Ho)*l).toFixed(2)}px)`,m.fontFamily=a,i.fontSize=l,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,d(this,Bh)&&(e.dataset.fontName=r.fontSubstitutionLoadedName||t.fontName),o!==0&&(i.angle=o*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const _=Math.abs(t.transform[0]),T=Math.abs(t.transform[3]);_!==T&&Math.max(_,T)/Math.min(_,T)>1.5&&(v=!0)}if(v&&(i.canvasWidth=r.vertical?t.height:t.width),d(this,qh).set(e,i),d(this,bs).div=e,d(this,bs).properties=i,b(this,Yh,DS).call(this,d(this,bs)),i.hasText&&d(this,on).append(e),i.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),d(this,on).append(_)}},Yh=new WeakSet,DS=function(t){var a;const{div:e,properties:i,ctx:s}=t,{style:o}=e;let r="";if(d(Ht,Ho)>1&&(r=`scale(${1/d(Ht,Ho)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:l}=o,{canvasWidth:u,fontSize:h}=i;b(a=Ht,Xh,NS).call(a,s,h*d(this,Bo),l);const{width:p}=s.measureText(e.textContent);p>0&&(r=`scaleX(${u*d(this,Bo)/p}) ${r}`)}i.angle!==0&&(r=`rotate(${i.angle}deg) ${r}`),r.length>0&&(o.transform=r)},ec=new WeakSet,Cm=function(t=null){let e=d(this,ya).get(t||(t=""));if(!e){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=t,document.body.append(i),e=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),d(this,ya).set(t,e),d(this,$h).set(e,{size:0,family:""})}return e},Xh=new WeakSet,NS=function(t,e,i){const s=d(this,$h).get(t);e===s.size&&i===s.family||(t.font=`${e}px ${i}`,s.size=e,s.family=i)},wv=new WeakSet,DD=function(){if(d(this,Ho)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),S(this,Ho,t.getBoundingClientRect().height),t.remove()},Mv=new WeakSet,ND=function(t,e,i){const s=d(this,ju).get(t);if(s)return s;const o=b(this,ec,Cm).call(this,i);o.canvas.width=o.canvas.height=Jb,b(this,Xh,NS).call(this,o,Jb,t);const r=o.measureText(""),a=r.fontBoundingBoxAscent,l=Math.abs(r.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let u=.8;return a?u=a/(a+l):(Ie.platform.isFirefox&&K("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?u=e.ascent:e.descent&&(u=1+e.descent)),d(this,ju).set(t,u),u},y(Ht,ec),y(Ht,Xh),y(Ht,wv),y(Ht,Mv),y(Ht,ju,new Map),y(Ht,ya,new Map),y(Ht,$h,new WeakMap),y(Ht,Ho,null),y(Ht,tc,new Set);let kd=Ht;class Ud{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};function s(o){var l;if(!o)return;let r=null;const a=o.name;if(a==="#text")r=o.value;else if(Ud.shouldBuildText(a))(l=o==null?void 0:o.attributes)!=null&&l.textContent?r=o.attributes.textContent:o.value&&(r=o.value);else return;if(r!==null&&e.push({str:r}),!!o.children)for(const u of o.children)s(u)}return s(t),i}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const uU=100;function ID(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new IS,{docId:e}=t,i=n.url?vk(n.url):null,s=n.data?Ak(n.data):null,o=n.httpHeaders||null,r=n.withCredentials===!0,a=n.password??null,l=n.range instanceof LD?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof Fd?n.worker:null;const p=n.verbosity,g=typeof n.docBaseUrl=="string"&&!WA(n.docBaseUrl)?n.docBaseUrl:null,m=$g(n.cMapUrl),v=n.cMapPacked!==!1,A=n.CMapReaderFactory||(Je?Mk:Ub),_=$g(n.iccUrl),T=$g(n.standardFontDataUrl),E=n.StandardFontDataFactory||(Je?xk:Fb),C=$g(n.wasmUrl),w=n.WasmFactory||(Je?Rk:Ob),M=n.stopAtErrors!==!0,R=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,x=n.isEvalSupported!==!1,D=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Je,N=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Je&&(Ie.platform.isFirefox||!globalThis.chrome),P=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,U=typeof n.disableFontFace=="boolean"?n.disableFontFace:Je,Y=n.fontExtraProperties===!0,rt=n.enableXfa===!0,W=n.ownerDocument||globalThis.document,dt=n.disableRange===!0,L=n.disableStream===!0,F=n.disableAutoFetch===!0,z=n.pdfBug===!0,ut=n.CanvasFactory||(Je?wk:Ck),Ct=n.FilterFactory||(Je?bk:_k),je=n.enableHWA===!0,kt=n.useWasm!==!1,wt=l?l.length:n.length??NaN,tn=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Je&&!U,gn=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(A===Ub&&E===Fb&&w===Ob&&m&&T&&C&&Hf(m,document.baseURI)&&Hf(T,document.baseURI)&&Hf(C,document.baseURI)),ro=null;W2(p);const Bt={canvasFactory:new ut({ownerDocument:W,enableHWA:je}),filterFactory:new Ct({docId:e,ownerDocument:W}),cMapReaderFactory:gn?null:new A({baseUrl:m,isCompressed:v}),standardFontDataFactory:gn?null:new E({baseUrl:T}),wasmFactory:gn?null:new w({baseUrl:C})};h||(h=Fd.create({verbosity:p,port:Qi.workerPort}),t._worker=h);const Sf={docId:e,apiVersion:"5.3.93",data:s,password:a,disableAutoFetch:F,rangeChunkSize:u,length:wt,docBaseUrl:g,enableXfa:rt,evaluatorOptions:{maxImageSize:R,disableFontFace:U,ignoreErrors:M,isEvalSupported:x,isOffscreenCanvasSupported:D,isImageDecoderSupported:N,canvasMaxAreaInBytes:P,fontExtraProperties:Y,useSystemFonts:tn,useWasm:kt,useWorkerFetch:gn,cMapUrl:m,iccUrl:_,standardFontDataUrl:T,wasmUrl:C}},BI={ownerDocument:W,pdfBug:z,styleElement:ro,loadingParams:{disableAutoFetch:F,enableXfa:rt}};return h.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const HI=h.messageHandler.sendWithPromise("GetDocRequest",Sf,s?[s.buffer]:null);let l0;if(l)l0=new $k(l,{disableRange:dt,disableStream:L});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const u0=Hf(i)?Kk:Je?oU:tU;l0=new u0({url:i,length:wt,httpHeaders:o,withCredentials:r,rangeChunkSize:u,disableRange:dt,disableStream:L})}return HI.then(u0=>{if(t.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const s_=new $f(e,u0,h.port),VI=new dU(s_,t,l0,BI,Bt);t._transport=VI,s_.send("Ready",null)})}).catch(t._capability.reject),t}var xv;const Rv=class Rv{constructor(){O(this,"_capability",Promise.withResolvers());O(this,"_transport",null);O(this,"_worker",null);O(this,"docId",`d${Ge(Rv,xv)._++}`);O(this,"destroyed",!1);O(this,"onPassword",null);O(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,i,s;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(o){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,o}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};xv=new WeakMap,y(Rv,xv,0);let IS=Rv;var va,Jh,Kh,Wh,Qh;class LD{constructor(t,e,i=!1,s=null){y(this,va,Promise.withResolvers());y(this,Jh,[]);y(this,Kh,[]);y(this,Wh,[]);y(this,Qh,[]);this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(t){d(this,Qh).push(t)}addProgressListener(t){d(this,Wh).push(t)}addProgressiveReadListener(t){d(this,Kh).push(t)}addProgressiveDoneListener(t){d(this,Jh).push(t)}onDataRange(t,e){for(const i of d(this,Qh))i(t,e)}onDataProgress(t,e){d(this,va).promise.then(()=>{for(const i of d(this,Wh))i(t,e)})}onDataProgressiveRead(t){d(this,va).promise.then(()=>{for(const e of d(this,Kh))e(t)})}onDataProgressiveDone(){d(this,va).promise.then(()=>{for(const t of d(this,Jh))t()})}transportReady(){d(this,va).resolve()}requestDataRange(t,e){Tt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}va=new WeakMap,Jh=new WeakMap,Kh=new WeakMap,Wh=new WeakMap,Qh=new WeakMap;class cU{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ws,Aa,Wf;class fU{constructor(t,e,i,s=!1){y(this,Aa);y(this,ws,!1);this._pageIndex=t,this._pageInfo=e,this._transport=i,this._stats=s?new Lb:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new MD,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:o=!1}={}){return new Tg({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:i,offsetY:s,dontFlip:o})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return st(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:i="display",annotationMode:s=vo.ENABLE,transform:o=null,background:r=null,optionalContentConfigPromise:a=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:h=null,isEditing:p=!1}){var w,M;(w=this._stats)==null||w.time("Overall");const g=this._transport.getRenderingIntent(i,s,h,p),{renderingIntent:m,cacheKey:v}=g;S(this,ws,!1),a||(a=this._transport.getOptionalContentConfig(m));let A=this._intentStates.get(v);A||(A=Object.create(null),this._intentStates.set(v,A)),A.streamReaderCancelTimeout&&(clearTimeout(A.streamReaderCancelTimeout),A.streamReaderCancelTimeout=null);const _=!!(m&Ln.PRINT);A.displayReadyCapability||(A.displayReadyCapability=Promise.withResolvers(),A.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(M=this._stats)==null||M.time("Page Request"),this._pumpOperatorList(g));const T=R=>{var x;A.renderTasks.delete(E),_&&S(this,ws,!0),b(this,Aa,Wf).call(this),R?(E.capability.reject(R),this._abortOperatorList({intentState:A,reason:R instanceof Error?R:new Error(R)})):E.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(x=globalThis.Stats)!=null&&x.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},E=new LS({callback:T,params:{canvasContext:t,viewport:e,transform:o,background:r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:A.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!_,pdfBug:this._pdfBug,pageColors:u});(A.renderTasks||(A.renderTasks=new Set)).add(E);const C=E.task;return Promise.all([A.displayReadyCapability.promise,a]).then(([R,x])=>{var D;if(this.destroyed){T();return}if((D=this._stats)==null||D.time("Rendering"),!(x.renderingIntent&m))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");E.initializeGraphics({transparency:R,optionalContentConfig:x}),E.operatorListChanged()}).catch(T),C}getOperatorList({intent:t="display",annotationMode:e=vo.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function o(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(l))}const r=this._transport.getRenderingIntent(t,e,i,s,!0);let a=this._intentStates.get(r.cacheKey);a||(a=Object.create(null),this._intentStates.set(r.cacheKey,a));let l;return a.opListReadCapability||(l=Object.create(null),l.operatorListChanged=o,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(l),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(r)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Ud.textContent(i));const e=this.streamTextContent(t);return new Promise(function(i,s){function o(){r.read().then(function({value:l,done:u}){if(u){i(a);return}a.lang??(a.lang=l.lang),Object.assign(a.styles,l.styles),a.items.push(...l.items),o()},s)}const r=e.getReader(),a={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const i of e.renderTasks)t.push(i.completed),i.cancel();return this.objs.clear(),S(this,ws,!1),Promise.all(t)}cleanup(t=!1){S(this,ws,!0);const e=b(this,Aa,Wf).call(this);return t&&e&&this._stats&&(this._stats=new Lb),e}_startRenderPage(t,e){var s,o;const i=this._intentStates.get(e);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(o=i.displayReadyCapability)==null||o.resolve(t))}_renderPageChunk(t,e){for(let i=0,s=t.length;i<s;i++)e.operatorList.fnArray.push(t.fnArray[i]),e.operatorList.argsArray.push(t.argsArray[i]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const i of e.renderTasks)i.operatorListChanged();t.lastChunk&&b(this,Aa,Wf).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:i,modifiedIds:s}){const{map:o,transfer:r}=i,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:o,modifiedIds:s},r).getReader(),u=this._intentStates.get(e);u.streamReader=l;const h=()=>{l.read().then(({value:p,done:g})=>{if(g){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(p,u),h())},p=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const g of u.renderTasks)g.operatorListChanged();b(this,Aa,Wf).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(p);else if(u.opListReadCapability)u.opListReadCapability.reject(p);else throw p}})};h()}_abortOperatorList({intentState:t,reason:e,force:i=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!i){if(t.renderTasks.size>0)return;if(e instanceof kC){let s=uU;e.extraDelay>0&&e.extraDelay<1e3&&(s+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},s);return}}if(t.streamReader.cancel(new Cr(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[s,o]of this._intentStates)if(o===t){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}ws=new WeakMap,Aa=new WeakSet,Wf=function(){if(!d(this,ws)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),S(this,ws,!1),!0};var Vo,di,Ms,Ta,Dv,Sa,Ea,nc,_m,Nv,PD,Iv,kD,Ca,Qf,ic,bm;const Rt=class Rt{constructor({name:t=null,port:e=null,verbosity:i=Q2()}={}){y(this,nc);y(this,Nv);y(this,Iv);y(this,Ca);y(this,Vo,Promise.withResolvers());y(this,di,null);y(this,Ms,null);y(this,Ta,null);if(this.name=t,this.destroyed=!1,this.verbosity=i,e){if(d(Rt,Ea).has(e))throw new Error("Cannot use more than one PDFWorker per port.");d(Rt,Ea).set(e,this),b(this,Nv,PD).call(this,e)}else b(this,Iv,kD).call(this)}get promise(){return d(this,Vo).promise}get port(){return d(this,Ms)}get messageHandler(){return d(this,di)}destroy(){var t,e;this.destroyed=!0,(t=d(this,Ta))==null||t.terminate(),S(this,Ta,null),d(Rt,Ea).delete(d(this,Ms)),S(this,Ms,null),(e=d(this,di))==null||e.destroy(),S(this,di,null)}static create(t){const e=d(this,Ea).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Rt(t)}static get workerSrc(){if(Qi.workerSrc)return Qi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return st(this,"_setupFakeWorkerGlobal",(async()=>d(this,ic,bm)?d(this,ic,bm):(await X2(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};Vo=new WeakMap,di=new WeakMap,Ms=new WeakMap,Ta=new WeakMap,Dv=new WeakMap,Sa=new WeakMap,Ea=new WeakMap,nc=new WeakSet,_m=function(){d(this,Vo).resolve(),d(this,di).send("configure",{verbosity:this.verbosity})},Nv=new WeakSet,PD=function(t){S(this,Ms,t),S(this,di,new $f("main","worker",t)),d(this,di).on("ready",()=>{}),b(this,nc,_m).call(this)},Iv=new WeakSet,kD=function(){if(d(Rt,Sa)||d(Rt,ic,bm)){b(this,Ca,Qf).call(this);return}let{workerSrc:t}=Rt;try{Rt._isSameOrigin(window.location,t)||(t=Rt._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),i=new $f("main","worker",e),s=()=>{o.abort(),i.destroy(),e.terminate(),this.destroyed?d(this,Vo).reject(new Error("Worker was destroyed")):b(this,Ca,Qf).call(this)},o=new AbortController;e.addEventListener("error",()=>{d(this,Ta)||s()},{signal:o.signal}),i.on("test",a=>{if(o.abort(),this.destroyed||!a){s();return}S(this,di,i),S(this,Ms,e),S(this,Ta,e),b(this,nc,_m).call(this)}),i.on("ready",a=>{if(o.abort(),this.destroyed){s();return}try{r()}catch{b(this,Ca,Qf).call(this)}});const r=()=>{const a=new Uint8Array;i.send("test",a,[a.buffer])};r();return}catch{KA("The worker has been disabled.")}b(this,Ca,Qf).call(this)},Ca=new WeakSet,Qf=function(){d(Rt,Sa)||(K("Setting up fake worker."),S(Rt,Sa,!0)),Rt._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){d(this,Vo).reject(new Error("Worker was destroyed"));return}const e=new Ek;S(this,Ms,e);const i=`fake${Ge(Rt,Dv)._++}`,s=new $f(i+"_worker",i,e);t.setup(s,e),S(this,di,new $f(i,i+"_worker",e)),b(this,nc,_m).call(this)}).catch(t=>{d(this,Vo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ic=new WeakSet,bm=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},y(Rt,ic),y(Rt,Dv,0),y(Rt,Sa,!1),y(Rt,Ea,new WeakMap),Je&&(S(Rt,Sa,!0),Qi.workerSrc||(Qi.workerSrc="./pdf.worker.mjs")),Rt._isSameOrigin=(t,e)=>{const i=URL.parse(t);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(e,i);return i.origin===s.origin},Rt._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Rt.fromPort=t=>{if(uk("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Rt.create(t)};let Fd=Rt;var xs,Vi,sc,oc,Rs,_a,Zf;class dU{constructor(t,e,i,s,o){y(this,_a);y(this,xs,new Map);y(this,Vi,new Map);y(this,sc,new Map);y(this,oc,new Map);y(this,Rs,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new MD,this.fontLoader=new mk({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return st(this,"annotationStorage",new BC)}getRenderingIntent(t,e=vo.ENABLE,i=null,s=!1,o=!1){let r=Ln.DISPLAY,a=AS;switch(t){case"any":r=Ln.ANY;break;case"display":break;case"print":r=Ln.PRINT;break;default:K(`getRenderingIntent - invalid intent: ${t}`)}const l=r&Ln.PRINT&&i instanceof fD?i:this.annotationStorage;switch(e){case vo.DISABLE:r+=Ln.ANNOTATIONS_DISABLE;break;case vo.ENABLE:break;case vo.ENABLE_FORMS:r+=Ln.ANNOTATIONS_FORMS;break;case vo.ENABLE_STORAGE:r+=Ln.ANNOTATIONS_STORAGE,a=l.serializable;break;default:K(`getRenderingIntent - invalid annotationMode: ${e}`)}s&&(r+=Ln.IS_EDITING),o&&(r+=Ln.OPLIST);const{ids:u,hash:h}=l.modifiedIds,p=[r,a.hash,h];return{renderingIntent:r,cacheKey:p.join("_"),annotationStorageSerializable:a,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=d(this,Rs))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of d(this,Vi).values())t.push(s._destroy());d(this,Vi).clear(),d(this,sc).clear(),d(this,oc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var s,o;this.commonObjs.clear(),this.fontLoader.clear(),d(this,xs).clear(),this.filterFactory.destroy(),kd.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Cr("Worker was terminated.")),(o=this.messageHandler)==null||o.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(i,s)=>{ee(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},s.onPull=()=>{this._fullReader.read().then(function({value:o,done:r}){if(r){s.close();return}ee(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{this._fullReader.cancel(o),s.ready.catch(r=>{if(!this.destroyed)throw r})}}),t.on("ReaderHeadersReady",async i=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:o,contentLength:r}=this._fullReader;return(!s||!o)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=e.onProgress)==null||u.call(e,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:s,isRangeSupported:o,contentLength:r}}),t.on("GetRangeReader",(i,s)=>{ee(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(i.begin,i.end);if(!o){s.close();return}s.onPull=()=>{o.read().then(function({value:r,done:a}){if(a){s.close();return}ee(r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{o.cancel(r),s.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new cU(i,this))}),t.on("DocException",i=>{e._capability.reject(en(i))}),t.on("PasswordRequest",i=>{S(this,Rs,Promise.withResolvers());try{if(!e.onPassword)throw en(i);const s=o=>{o instanceof Error?d(this,Rs).reject(o):d(this,Rs).resolve({password:o})};e.onPassword(s,i.code)}catch(s){d(this,Rs).reject(s)}return d(this,Rs).promise}),t.on("DataLoaded",i=>{var s;(s=e.onProgress)==null||s.call(e,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),t.on("StartRenderPage",i=>{if(this.destroyed)return;d(this,Vi).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),t.on("commonobj",([i,s,o])=>{var r;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in o){const h=o.error;K(`Error during font loading: ${h}`),this.commonObjs.resolve(i,h);break}const a=this._params.pdfBug&&((r=globalThis.FontInspector)!=null&&r.enabled)?(h,p)=>globalThis.FontInspector.fontAdded(h,p):null,l=new yk(o,a);this.fontLoader.bind(l).catch(()=>t.sendWithPromise("FontFallback",{id:i})).finally(()=>{!l.fontExtraProperties&&l.data&&(l.data=null),this.commonObjs.resolve(i,l)});break;case"CopyLocalImage":const{imageRef:u}=o;ee(u,"The imageRef must be defined.");for(const h of d(this,Vi).values())for(const[,p]of h.objs)if((p==null?void 0:p.ref)===u)return p.dataLen?(this.commonObjs.resolve(i,structuredClone(p)),p.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,o);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),t.on("obj",([i,s,o,r])=>{var l;if(this.destroyed)return;const a=d(this,Vi).get(s);if(!a.objs.has(i)){if(a._intentStates.size===0){(l=r==null?void 0:r.bitmap)==null||l.close();return}switch(o){case"Image":case"Pattern":a.objs.resolve(i,r);break;default:throw new Error(`Got unknown object type ${o}`)}}}),t.on("DocProgress",i=>{var s;this.destroyed||(s=e.onProgress)==null||s.call(e,{loaded:i.loaded,total:i.total})}),t.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&K("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((i=this._fullReader)==null?void 0:i.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,i=d(this,sc).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&d(this,oc).set(o.refStr,t);const r=new fU(e,o,this,this._params.pdfBug);return d(this,Vi).set(e,r),r});return d(this,sc).set(e,s),s}getPageIndex(t){return TS(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return b(this,_a,Zf).call(this,"GetFieldObjects")}hasJSActions(){return b(this,_a,Zf).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return b(this,_a,Zf).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return b(this,_a,Zf).call(this,"GetOptionalContentConfig").then(e=>new zk(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=d(this,xs).get(t);if(e)return e;const i=this.messageHandler.sendWithPromise(t,null).then(s=>{var o,r;return{info:s[0],metadata:s[1]?new Gk(s[1]):null,contentDispositionFilename:((o=this._fullReader)==null?void 0:o.filename)??null,contentLength:((r=this._fullReader)==null?void 0:r.contentLength)??null}});return d(this,xs).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of d(this,Vi).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),d(this,xs).clear(),this.filterFactory.destroy(!0),kd.cleanup()}}cachedPageNumber(t){if(!TS(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return d(this,oc).get(e)??null}}xs=new WeakMap,Vi=new WeakMap,sc=new WeakMap,oc=new WeakMap,Rs=new WeakMap,_a=new WeakSet,Zf=function(t,e=null){const i=d(this,xs).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,e);return d(this,xs).set(t,s),s};var Go;class hU{constructor(t){y(this,Go,null);O(this,"onContinue",null);O(this,"onError",null);S(this,Go,t)}get promise(){return d(this,Go).capability.promise}cancel(t=0){d(this,Go).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=d(this,Go).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=d(this,Go);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}Go=new WeakMap;var qo,ba;const kr=class kr{constructor({callback:t,params:e,objs:i,commonObjs:s,annotationCanvasMap:o,operatorList:r,pageIndex:a,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:p=!1,pageColors:g=null}){y(this,qo,null);this.callback=t,this.params=e,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=r,this._pageIndex=a,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=p,this.pageColors=g,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new hU(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,l;if(this.cancelled)return;if(this._canvas){if(d(kr,ba).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");d(kr,ba).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:i,viewport:s,transform:o,background:r}=this.params;this.gfx=new pu(i,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:o,viewport:s,transparency:t,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(t=null,e=0){var i,s,o;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),d(this,qo)&&(window.cancelAnimationFrame(d(this,qo)),S(this,qo,null)),d(kr,ba).delete(this._canvas),t||(t=new kC(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(o=(s=this.task).onError)==null||o.call(s,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?S(this,qo,window.requestAnimationFrame(()=>{S(this,qo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),d(kr,ba).delete(this._canvas),this.callback())))}};qo=new WeakMap,ba=new WeakMap,y(kr,ba,new WeakSet);let LS=kr;const pU="5.3.93",gU="cbeef3233";function Kb(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function If(n){return Math.max(0,Math.min(255,255*n))}class Wb{static CMYK_G([t,e,i,s]){return["G",1-Math.min(1,.3*t+.59*i+.11*e+s)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=If(t),[t,t,t]}static G_HTML([t]){const e=Kb(t);return`#${e}${e}${e}`}static RGB_G([t,e,i]){return["G",.3*t+.59*e+.11*i]}static RGB_rgb(t){return t.map(If)}static RGB_HTML(t){return`#${t.map(Kb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,i,s]){return["RGB",1-Math.min(1,t+s),1-Math.min(1,i+s),1-Math.min(1,e+s)]}static CMYK_rgb([t,e,i,s]){return[If(1-Math.min(1,t+s)),If(1-Math.min(1,i+s)),If(1-Math.min(1,e+s))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,i]){const s=1-t,o=1-e,r=1-i,a=Math.min(s,o,r);return["CMYK",s,o,r,a]}}class mU{create(t,e,i=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${t}px`),s.setAttribute("height",`${e}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${t} ${e}`),s}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Tt("Abstract method `_createSVG` called.")}}class xy extends mU{_createSVG(t){return document.createElementNS(ls,t)}}class UD{static setupStorage(t,e,i,s,o){const r=s.getValue(e,{value:null});switch(i.name){case"textarea":if(r.value!==null&&(t.textContent=r.value),o==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(r.value===i.attributes.xfaOn?t.setAttribute("checked",!0):r.value===i.attributes.xfaOff&&t.removeAttribute("checked"),o==="print")break;t.addEventListener("change",a=>{s.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(r.value!==null&&t.setAttribute("value",r.value),o==="print")break;t.addEventListener("input",a=>{s.setValue(e,{value:a.target.value})})}break;case"select":if(r.value!==null){t.setAttribute("value",r.value);for(const a of i.children)a.attributes.value===r.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const l=a.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;s.setValue(e,{value:u})});break}}static setAttributes({html:t,element:e,storage:i=null,intent:s,linkService:o}){const{attributes:r}=e,a=t instanceof HTMLAnchorElement;r.type==="radio"&&(r.name=`${r.name}-${s}`);for(const[l,u]of Object.entries(r))if(u!=null)switch(l){case"class":u.length&&t.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",u);break;case"style":Object.assign(t.style,u);break;case"textContent":t.textContent=u;break;default:(!a||l!=="href"&&l!=="newWindow")&&t.setAttribute(l,u)}a&&o.addLinkAttributes(t,r.href,r.newWindow),i&&r.dataId&&this.setupStorage(t,r.dataId,e,i)}static render(t){var p,g;const e=t.annotationStorage,i=t.linkService,s=t.xfaHtml,o=t.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:o,linkService:i});const a=o!=="richText",l=t.div;if(l.append(r),t.viewport){const m=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=m}a&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);r.append(m),a&&Ud.shouldBuildText(s.name)&&u.push(m)}return{textDivs:u}}const h=[[s,-1,r]];for(;h.length>0;){const[m,v,A]=h.at(-1);if(v+1===m.children.length){h.pop();continue}const _=m.children[++h.at(-1)[1]];if(_===null)continue;const{name:T}=_;if(T==="#text"){const C=document.createTextNode(_.value);u.push(C),A.append(C);continue}const E=(p=_==null?void 0:_.attributes)!=null&&p.xmlns?document.createElementNS(_.attributes.xmlns,T):document.createElement(T);if(A.append(E),_.attributes&&this.setAttributes({html:E,element:_,storage:e,intent:o,linkService:i}),((g=_.children)==null?void 0:g.length)>0)h.push([_,-1,E]);else if(_.value){const C=document.createTextNode(_.value);a&&Ud.shouldBuildText(T)&&u.push(C),E.append(C)}}for(const m of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const yU=9,Tl=new WeakSet;class Qb{static create(t){switch(t.data.annotationType){case Qt.LINK:return new FD(t);case Qt.TEXT:return new vU(t);case Qt.WIDGET:switch(t.data.fieldType){case"Tx":return new AU(t);case"Btn":return t.data.radioButton?new HD(t):t.data.checkBox?new SU(t):new EU(t);case"Ch":return new CU(t);case"Sig":return new TU(t)}return new xl(t);case Qt.POPUP:return new kS(t);case Qt.FREETEXT:return new $D(t);case Qt.LINE:return new bU(t);case Qt.SQUARE:return new wU(t);case Qt.CIRCLE:return new MU(t);case Qt.POLYLINE:return new YD(t);case Qt.CARET:return new RU(t);case Qt.INK:return new GC(t);case Qt.POLYGON:return new xU(t);case Qt.HIGHLIGHT:return new XD(t);case Qt.UNDERLINE:return new DU(t);case Qt.SQUIGGLY:return new NU(t);case Qt.STRIKEOUT:return new IU(t);case Qt.STAMP:return new JD(t);case Qt.FILEATTACHMENT:return new LU(t);default:return new Jt(t)}}}var wa,rc,ac,Zh,PS;const n_=class n_{constructor(t,{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){y(this,Zh);y(this,wa,null);y(this,rc,!1);y(this,ac,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:e}){return!!(t!=null&&t.str||e!=null&&e.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return n_._hasPopupData(this.data)}updateEdited(t){var i;if(!this.container)return;d(this,wa)||S(this,wa,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&b(this,Zh,PS).call(this,e),(i=d(this,ac))==null||i.popup.updateEdited(t)}resetEdited(){var t;d(this,wa)&&(b(this,Zh,PS).call(this,d(this,wa).rect),(t=d(this,ac))==null||t.popup.resetEdited(),S(this,wa,null))}_createContainer(t){const{data:e,parent:{page:i,viewport:s}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof xl||(o.tabIndex=0);const{style:r}=o;if(r.zIndex=this.parent.zIndex++,e.alternativeText&&(o.title=e.alternativeText),e.noRotate&&o.classList.add("norotate"),!e.rect||this instanceof kS){const{rotation:A}=e;return!e.hasOwnCanvas&&A!==0&&this.setRotation(A,o),o}const{width:a,height:l}=this;if(!t&&e.borderStyle.width>0){r.borderWidth=`${e.borderStyle.width}px`;const A=e.borderStyle.horizontalCornerRadius,_=e.borderStyle.verticalCornerRadius;if(A>0||_>0){const E=`calc(${A}px * var(--total-scale-factor)) / calc(${_}px * var(--total-scale-factor))`;r.borderRadius=E}else if(this instanceof HD){const E=`calc(${a}px * var(--total-scale-factor)) / calc(${l}px * var(--total-scale-factor))`;r.borderRadius=E}switch(e.borderStyle.style){case Fl.SOLID:r.borderStyle="solid";break;case Fl.DASHED:r.borderStyle="dashed";break;case Fl.BEVELED:K("Unimplemented border style: beveled");break;case Fl.INSET:K("Unimplemented border style: inset");break;case Fl.UNDERLINE:r.borderBottomStyle="solid";break}const T=e.borderColor||null;T?(S(this,rc,!0),r.borderColor=q.makeHexColor(T[0]|0,T[1]|0,T[2]|0)):r.borderWidth=0}const u=q.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:p,pageX:g,pageY:m}=s.rawDims;r.left=`${100*(u[0]-g)/h}%`,r.top=`${100*(u[1]-m)/p}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(r.width=`${100*a/h}%`,r.height=`${100*l/p}%`):this.setRotation(v,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:o,height:r}=this;t%180!==0&&([o,r]=[r,o]),e.style.width=`${100*o/i}%`,e.style.height=`${100*r/s}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,i,s)=>{const o=s.detail[e],r=o[0],a=o.slice(1);s.target.style[i]=Wb[`${r}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[i]:Wb[`${r}_rgb`](a)})};return st(this,"_commonActions",{display:e=>{const{display:i}=e.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:i}=e.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const i=e.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(t,e){const i=this._commonActions;for(const s of Object.keys(e.detail)){const o=t[s]||i[s];o==null||o(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const i=this._commonActions;for(const[s,o]of Object.entries(e)){const r=i[s];if(r){const a={detail:{[s]:o},target:t};r(a),delete e[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,i,s,o]=this.data.rect.map(A=>Math.fround(A));if(t.length===8){const[A,_,T,E]=t.subarray(2,6);if(s===A&&o===_&&e===T&&i===E)return}const{style:r}=this.container;let a;if(d(this,rc)){const{borderColor:A,borderWidth:_}=r;r.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${A}" stroke-width="${_}">`],this.container.classList.add("hasBorder")}const l=s-e,u=o-i,{svgFactory:h}=this,p=h.createElement("svg");p.classList.add("quadrilateralsContainer"),p.setAttribute("width",0),p.setAttribute("height",0),p.role="none";const g=h.createElement("defs");p.append(g);const m=h.createElement("clipPath"),v=`clippath_${this.data.id}`;m.setAttribute("id",v),m.setAttribute("clipPathUnits","objectBoundingBox"),g.append(m);for(let A=2,_=t.length;A<_;A+=8){const T=t[A],E=t[A+1],C=t[A+2],w=t[A+3],M=h.createElement("rect"),R=(C-e)/l,x=(o-E)/u,D=(T-C)/l,N=(E-w)/u;M.setAttribute("x",R),M.setAttribute("y",x),M.setAttribute("width",D),M.setAttribute("height",N),m.append(M),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${R}" y="${x}" width="${D}" height="${N}"/>`)}d(this,rc)&&(a.push("</g></svg>')"),r.backgroundImage=a.join("")),this.container.append(p),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:t}=this,e=S(this,ac,new kS({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){Tt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[t];if(s)for(const{page:o,id:r,exportValues:a}of s){if(o===-1||r===e)continue;const l=typeof a=="string"?a:null,u=document.querySelector(`[data-element-id="${r}"]`);if(u&&!Tl.has(u)){K(`_getElementsByName - element not allowed: ${r}`);continue}i.push({id:r,exportValue:l,domElement:u})}return i}for(const s of document.getElementsByName(t)){const{exportValue:o}=s,r=s.getAttribute("data-element-id");r!==e&&Tl.has(s)&&i.push({id:r,exportValue:o,domElement:s})}return i}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};wa=new WeakMap,rc=new WeakMap,ac=new WeakMap,Zh=new WeakSet,PS=function(t){const{container:{style:e},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:r,pageX:a,pageY:l}}}}=this;i==null||i.splice(0,4,...t),e.left=`${100*(t[0]-a)/o}%`,e.top=`${100*(r-t[3]+l)/r}%`,s===0?(e.width=`${100*(t[2]-t[0])/o}%`,e.height=`${100*(t[3]-t[1])/r}%`):this.setRotation(s)};let Jt=n_;var Ds,Nr,Lv,OD,Pv,BD;class FD extends Jt{constructor(e,i=null){super(e,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});y(this,Ds);y(this,Lv);y(this,Pv);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let o=!1;return e.url?(i.addLinkAttributes(s,e.url,e.newWindow),o=!0):e.action?(this._bindNamedAction(s,e.action),o=!0):e.attachment?(b(this,Lv,OD).call(this,s,e.attachment,e.attachmentDest),o=!0):e.setOCGState?(b(this,Pv,BD).call(this,s,e.setOCGState),o=!0):e.dest?(this._bindLink(s,e.dest),o=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),o=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),o=!0):this.isTooltipOnly&&!o&&(this._bindLink(s,""),o=!0)),this.container.classList.add("linkAnnotation"),o&&this.container.append(s),this.container}_bindLink(e,i){e.href=this.linkService.getDestinationHash(i),e.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&b(this,Ds,Nr).call(this)}_bindNamedAction(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(i),!1),b(this,Ds,Nr).call(this)}_bindJSAction(e,i){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const o of Object.keys(i.actions)){const r=s.get(o);r&&(e[r]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:o}}),!1})}e.onclick||(e.onclick=()=>!1),b(this,Ds,Nr).call(this)}_bindResetFormAction(e,i){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),b(this,Ds,Nr).call(this),!this._fieldObjects){K('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{var p;s==null||s();const{fields:o,refs:r,include:a}=i,l=[];if(o.length!==0||r.length!==0){const g=new Set(r);for(const m of o){const v=this._fieldObjects[m]||[];for(const{id:A}of v)g.add(A)}for(const m of Object.values(this._fieldObjects))for(const v of m)g.has(v.id)===a&&l.push(v)}else for(const g of Object.values(this._fieldObjects))l.push(...g);const u=this.annotationStorage,h=[];for(const g of l){const{id:m}=g;switch(h.push(m),g.type){case"text":{const A=g.defaultValue||"";u.setValue(m,{value:A});break}case"checkbox":case"radiobutton":{const A=g.defaultValue===g.exportValues;u.setValue(m,{value:A});break}case"combobox":case"listbox":{const A=g.defaultValue||"";u.setValue(m,{value:A});break}default:continue}const v=document.querySelector(`[data-element-id="${m}"]`);if(v){if(!Tl.has(v)){K(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((p=this.linkService.eventBus)==null||p.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}Ds=new WeakSet,Nr=function(){this.container.setAttribute("data-internal-link","")},Lv=new WeakSet,OD=function(e,i,s=null){e.href=this.linkService.getAnchorUrl(""),i.description&&(e.title=i.description),e.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,s),!1},b(this,Ds,Nr).call(this)},Pv=new WeakSet,BD=function(e,i){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(i),!1),b(this,Ds,Nr).call(this)};class vU extends Jt{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class xl extends Jt{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Ie.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,i,s,o){i.includes("mouse")?t.addEventListener(i,r=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(r),shift:r.shiftKey,modifier:this._getKeyModifier(r)}})}):t.addEventListener(i,r=>{var a;if(i==="blur"){if(!e.focused||!r.relatedTarget)return;e.focused=!1}else if(i==="focus"){if(e.focused)return;e.focused=!0}o&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:o(r)}}))})}_setEventListeners(t,e,i,s){var o,r,a;for(const[l,u]of i)(u==="Action"||(o=this.data.actions)!=null&&o[u])&&((u==="Focus"||u==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,l,u,s),u==="Focus"&&!((r=this.data.actions)!=null&&r.Blur)?this._setEventListener(t,e,"blur","Blur",null):u==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":q.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||yU,o=t.style;let r;const a=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a),h=Math.round(u/(Y0*s))||1,p=u/h;r=Math.min(s,l(p/Y0))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-a);r=Math.min(s,l(u/Y0))}o.fontSize=`calc(${r}px * var(--total-scale-factor))`,o.color=q.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class AU extends xl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,i,s){const o=this.annotationStorage;for(const r of this._getElementsByName(t.name,t.id))r.domElement&&(r.domElement[e]=i),o.setValue(r.id,{[s]:i})}render(){var s,o;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const r=t.getValue(e,{value:this.data.fieldValue});let a=r.value||"";const l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&a.length>l&&(a=a.slice(0,l));let u=r.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:a,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??a,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??a),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),Tl.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const p=this.data.dateFormat||this.data.timeFormat;p&&(i.title=p),this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",m=>{t.setValue(e,{value:m.target.value}),this.setPropertyOnSiblings(i,"value",m.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",m=>{const v=this.data.defaultFieldValue??"";i.value=h.userValue=v,h.formattedValue=null});let g=m=>{const{formattedValue:v}=h;v!=null&&(m.target.value=v),m.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",v=>{var _;if(h.focused)return;const{target:A}=v;h.userValue&&(A.value=h.userValue),h.lastCommittedValue=A.value,h.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const A={value(_){h.userValue=_.detail.value??"",t.setValue(e,{value:h.userValue.toString()}),_.target.value=h.userValue},formattedValue(_){const{formattedValue:T}=_.detail;h.formattedValue=T,T!=null&&_.target!==document.activeElement&&(_.target.value=T),t.setValue(e,{formattedValue:T})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var w;const{charLimit:T}=_.detail,{target:E}=_;if(T===0){E.removeAttribute("maxLength");return}E.setAttribute("maxLength",T);let C=h.userValue;!C||C.length<=T||(C=C.slice(0,T),E.value=h.userValue=C,t.setValue(e,{value:C}),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:E.selectionStart,selEnd:E.selectionEnd}}))}};this._dispatchEventFromSandbox(A,v)}),i.addEventListener("keydown",v=>{var T;h.commitKey=1;let A=-1;if(v.key==="Escape"?A=0:v.key==="Enter"&&!this.data.multiLine?A=2:v.key==="Tab"&&(h.commitKey=3),A===-1)return;const{value:_}=v.target;h.lastCommittedValue!==_&&(h.lastCommittedValue=_,h.userValue=_,(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:A,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const m=g;g=null,i.addEventListener("blur",v=>{var _,T;if(!h.focused||!v.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(h.focused=!1);const{value:A}=v.target;h.userValue=A,h.lastCommittedValue!==A&&((T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),m(v)}),(o=this.data.actions)!=null&&o.Keystroke&&i.addEventListener("beforeinput",v=>{var R;h.lastCommittedValue=null;const{data:A,target:_}=v,{value:T,selectionStart:E,selectionEnd:C}=_;let w=E,M=C;switch(v.inputType){case"deleteWordBackward":{const x=T.substring(0,E).match(/\w*[^\w]*$/);x&&(w-=x[0].length);break}case"deleteWordForward":{const x=T.substring(E).match(/^[^\w]*\w*/);x&&(M+=x[0].length);break}case"deleteContentBackward":E===C&&(w-=1);break;case"deleteContentForward":E===C&&(M+=1);break}v.preventDefault(),(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:T,change:A||"",willCommit:!1,selStart:w,selEnd:M}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(g&&i.addEventListener("blur",g),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class TU extends xl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class SU extends xl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",t.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return Tl.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.setAttribute("exportValue",e.exportValue),o.tabIndex=0,o.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const u of this._getElementsByName(a,i)){const h=l&&u.exportValue===e.exportValue;u.domElement&&(u.domElement.checked=h),t.setValue(u.id,{value:h})}t.setValue(i,{value:l})}),o.addEventListener("resetform",r=>{const a=e.defaultFieldValue||"Off";r.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",r=>{const a={value(l){l.target.checked=l.detail.value!=="Off",t.setValue(i,{value:l.target.checked})}};this._dispatchEventFromSandbox(a,r)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],r=>r.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class HD extends xl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,i=e.id;let s=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;if(typeof s=="string"&&(s=s!==e.buttonValue,t.setValue(i,{value:s})),s)for(const r of this._getElementsByName(e.fieldName,i))t.setValue(r.id,{value:!1});const o=document.createElement("input");if(Tl.add(o),o.setAttribute("data-element-id",i),o.disabled=e.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=e.fieldName,s&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",r=>{const{name:a,checked:l}=r.target;for(const u of this._getElementsByName(a,i))t.setValue(u.id,{value:!1});t.setValue(i,{value:l})}),o.addEventListener("resetform",r=>{const a=e.defaultFieldValue;r.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const r=e.buttonValue;o.addEventListener("updatefromsandbox",a=>{const l={value:u=>{const h=r===u.detail.value;for(const p of this._getElementsByName(u.target.name)){const g=h&&p.id===i;p.domElement&&(p.domElement.checked=g),t.setValue(p.id,{value:g})}}};this._dispatchEventFromSandbox(l,a)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class EU extends FD{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),t}}class CU extends xl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),s=document.createElement("select");Tl.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const p=this.data.defaultFieldValue;for(const g of s.options)g.selected=g.value===p});for(const h of this.data.options){const p=document.createElement("option");p.textContent=h.displayValue,p.value=h.exportValue,i.value.includes(h.exportValue)&&(p.setAttribute("selected",!0),o=!1),s.append(p)}let r=null;if(o){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),r=()=>{h.remove(),s.removeEventListener("input",r),r=null},s.addEventListener("input",r)}const a=h=>{const p=h?"value":"textContent",{options:g,multiple:m}=s;return m?Array.prototype.filter.call(g,v=>v.selected).map(v=>v[p]):g.selectedIndex===-1?null:g[g.selectedIndex][p]};let l=a(!1);const u=h=>{const p=h.target.options;return Array.prototype.map.call(p,g=>({displayValue:g.textContent,exportValue:g.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const p={value(g){r==null||r();const m=g.detail.value,v=new Set(Array.isArray(m)?m:[m]);for(const A of s.options)A.selected=v.has(A.value);t.setValue(e,{value:a(!0)}),l=a(!1)},multipleSelection(g){s.multiple=!0},remove(g){const m=s.options,v=g.detail.remove;m[v].selected=!1,s.remove(v),m.length>0&&Array.prototype.findIndex.call(m,_=>_.selected)===-1&&(m[0].selected=!0),t.setValue(e,{value:a(!0),items:u(g)}),l=a(!1)},clear(g){for(;s.length!==0;)s.remove(0);t.setValue(e,{value:null,items:[]}),l=a(!1)},insert(g){const{index:m,displayValue:v,exportValue:A}=g.detail.insert,_=s.children[m],T=document.createElement("option");T.textContent=v,T.value=A,_?_.before(T):s.append(T),t.setValue(e,{value:a(!0),items:u(g)}),l=a(!1)},items(g){const{items:m}=g.detail;for(;s.length!==0;)s.remove(0);for(const v of m){const{displayValue:A,exportValue:_}=v,T=document.createElement("option");T.textContent=A,T.value=_,s.append(T)}s.options.length>0&&(s.options[0].selected=!0),t.setValue(e,{value:a(!0),items:u(g)}),l=a(!1)},indices(g){const m=new Set(g.detail.indices);for(const v of g.target.options)v.selected=m.has(v.index);t.setValue(e,{value:a(!0)}),l=a(!1)},editable(g){g.target.disabled=!g.detail.editable}};this._dispatchEventFromSandbox(p,h)}),s.addEventListener("input",h=>{var m;const p=a(!0),g=a(!1);t.setValue(e,{value:p}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,change:g,changeEx:p,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class kS extends Jt{constructor(t){const{data:e,elements:i}=t;super(t,{isRenderable:Jt._hasPopupData(e)}),this.elements=i,this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const e=this.popup=new _U({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),i=[];for(const s of this.elements)s.popup=e,s.container.ariaHasPopup="dialog",i.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",i.map(s=>`${PC}${s}`).join(",")),this.container}}var lc,kv,Uv,uc,cc,Vt,Ns,Ma,jh,tp,fc,Is,hi,Ls,ep,Ps,np,xa,Ra,dc,wm,ip,US,Fv,VD,Ov,GD,Bv,qD,Hv,zD,hc,Mm,pc,xm,sp,FS;class _U{constructor({container:t,color:e,elements:i,titleObj:s,modificationDate:o,contentsObj:r,richText:a,parent:l,rect:u,parentRect:h,open:p}){y(this,dc);y(this,ip);y(this,Fv);y(this,Ov);y(this,Bv);y(this,Hv);y(this,hc);y(this,pc);y(this,sp);y(this,lc,b(this,Bv,qD).bind(this));y(this,kv,b(this,sp,FS).bind(this));y(this,Uv,b(this,pc,xm).bind(this));y(this,uc,b(this,hc,Mm).bind(this));y(this,cc,null);y(this,Vt,null);y(this,Ns,null);y(this,Ma,null);y(this,jh,null);y(this,tp,null);y(this,fc,null);y(this,Is,!1);y(this,hi,null);y(this,Ls,null);y(this,ep,null);y(this,Ps,null);y(this,np,null);y(this,xa,null);y(this,Ra,!1);var g;S(this,Vt,t),S(this,np,s),S(this,Ns,r),S(this,Ps,a),S(this,tp,l),S(this,cc,e),S(this,ep,u),S(this,fc,h),S(this,jh,i),S(this,Ma,FC.toDateObject(o)),this.trigger=i.flatMap(m=>m.getElementsToTriggerPopup());for(const m of this.trigger)m.addEventListener("click",d(this,uc)),m.addEventListener("mouseenter",d(this,Uv)),m.addEventListener("mouseleave",d(this,kv)),m.classList.add("popupTriggerArea");for(const m of i)(g=m.container)==null||g.addEventListener("keydown",d(this,lc));d(this,Vt).hidden=!0,p&&b(this,hc,Mm).call(this)}render(){if(d(this,hi))return;const t=S(this,hi,document.createElement("div"));if(t.className="popup",d(this,cc)){const o=t.style.outlineColor=q.makeHexColor(...d(this,cc));t.style.backgroundColor=`color-mix(in srgb, ${o} 30%, white)`}const e=document.createElement("span");e.className="header";const i=document.createElement("h1");if(e.append(i),{dir:i.dir,str:i.textContent}=d(this,np),t.append(e),d(this,Ma)){const o=document.createElement("time");o.classList.add("popupDate"),o.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),o.setAttribute("data-l10n-args",JSON.stringify({dateObj:d(this,Ma).valueOf()})),o.dateTime=d(this,Ma).toISOString(),e.append(o)}const s=d(this,dc,wm);if(s)UD.render({xfaHtml:s,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const o=this._formatContents(d(this,Ns));t.append(o)}d(this,Vt).append(t)}_formatContents({str:t,dir:e}){const i=document.createElement("p");i.classList.add("popupContent"),i.dir=e;const s=t.split(/(?:\r\n?|\n)/);for(let o=0,r=s.length;o<r;++o){const a=s[o];i.append(document.createTextNode(a)),o<r-1&&i.append(document.createElement("br"))}return i}updateEdited({rect:t,popupContent:e}){var i;d(this,xa)||S(this,xa,{contentsObj:d(this,Ns),richText:d(this,Ps)}),t&&S(this,Ls,null),e&&(S(this,Ps,b(this,Ov,GD).call(this,e)),S(this,Ns,null)),(i=d(this,hi))==null||i.remove(),S(this,hi,null)}resetEdited(){var t;d(this,xa)&&({contentsObj:Ge(this,Ns)._,richText:Ge(this,Ps)._}=d(this,xa),S(this,xa,null),(t=d(this,hi))==null||t.remove(),S(this,hi,null),S(this,Ls,null))}forceHide(){S(this,Ra,this.isVisible),d(this,Ra)&&(d(this,Vt).hidden=!0)}maybeShow(){d(this,Ra)&&(d(this,hi)||b(this,pc,xm).call(this),S(this,Ra,!1),d(this,Vt).hidden=!1)}get isVisible(){return d(this,Vt).hidden===!1}}lc=new WeakMap,kv=new WeakMap,Uv=new WeakMap,uc=new WeakMap,cc=new WeakMap,Vt=new WeakMap,Ns=new WeakMap,Ma=new WeakMap,jh=new WeakMap,tp=new WeakMap,fc=new WeakMap,Is=new WeakMap,hi=new WeakMap,Ls=new WeakMap,ep=new WeakMap,Ps=new WeakMap,np=new WeakMap,xa=new WeakMap,Ra=new WeakMap,dc=new WeakSet,wm=function(){const t=d(this,Ps),e=d(this,Ns);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&d(this,Ps).html||null},ip=new WeakSet,US=function(){var t,e,i;return((i=(e=(t=d(this,dc,wm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.fontSize)||0},Fv=new WeakSet,VD=function(){var t,e,i;return((i=(e=(t=d(this,dc,wm))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:i.color)||null},Ov=new WeakSet,GD=function(t){const e=[],i={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},s={style:{color:d(this,Fv,VD),fontSize:d(this,ip,US)?`calc(${d(this,ip,US)}px * var(--total-scale-factor))`:""}};for(const o of t.split(`
`))e.push({name:"span",value:o,attributes:s});return i},Bv=new WeakSet,qD=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&d(this,Is))&&b(this,hc,Mm).call(this)},Hv=new WeakSet,zD=function(){if(d(this,Ls)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:i,pageX:s,pageY:o}}}=d(this,tp);let r=!!d(this,fc),a=r?d(this,fc):d(this,ep);for(const v of d(this,jh))if(!a||q.intersect(v.data.rect,a)!==null){a=v.data.rect,r=!0;break}const l=q.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),h=r?a[2]-a[0]+5:0,p=l[0]+h,g=l[1];S(this,Ls,[100*(p-s)/e,100*(g-o)/i]);const{style:m}=d(this,Vt);m.left=`${d(this,Ls)[0]}%`,m.top=`${d(this,Ls)[1]}%`},hc=new WeakSet,Mm=function(){S(this,Is,!d(this,Is)),d(this,Is)?(b(this,pc,xm).call(this),d(this,Vt).addEventListener("click",d(this,uc)),d(this,Vt).addEventListener("keydown",d(this,lc))):(b(this,sp,FS).call(this),d(this,Vt).removeEventListener("click",d(this,uc)),d(this,Vt).removeEventListener("keydown",d(this,lc)))},pc=new WeakSet,xm=function(){d(this,hi)||this.render(),this.isVisible?d(this,Is)&&d(this,Vt).classList.add("focused"):(b(this,Hv,zD).call(this),d(this,Vt).hidden=!1,d(this,Vt).style.zIndex=parseInt(d(this,Vt).style.zIndex)+1e3)},sp=new WeakSet,FS=function(){d(this,Vt).classList.remove("focused"),!(d(this,Is)||!this.isVisible)&&(d(this,Vt).hidden=!0,d(this,Vt).style.zIndex=parseInt(d(this,Vt).style.zIndex)-1e3)};class $D extends Jt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=J.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var op;class bU extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,op,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:i,height:s}=this,o=this.svgFactory.create(i,s,!0),r=S(this,op,this.svgFactory.createElement("svg:line"));return r.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),r.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),r.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),r.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),o.append(r),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,op)}addHighlightArea(){this.container.classList.add("highlightArea")}}op=new WeakMap;var rp;class wU extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,rp,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:i,height:s}=this,o=this.svgFactory.create(i,s,!0),r=e.borderStyle.width,a=S(this,rp,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",r/2),a.setAttribute("y",r/2),a.setAttribute("width",i-r),a.setAttribute("height",s-r),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,rp)}addHighlightArea(){this.container.classList.add("highlightArea")}}rp=new WeakMap;var ap;class MU extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,ap,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:i,height:s}=this,o=this.svgFactory.create(i,s,!0),r=e.borderStyle.width,a=S(this,ap,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",i/2),a.setAttribute("cy",s/2),a.setAttribute("rx",i/2-r/2),a.setAttribute("ry",s/2-r/2),a.setAttribute("stroke-width",r||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),o.append(a),this.container.append(o),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,ap)}addHighlightArea(){this.container.classList.add("highlightArea")}}ap=new WeakMap;var lp;class YD extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,lp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:i,borderStyle:s,popupRef:o},width:r,height:a}=this;if(!i)return this.container;const l=this.svgFactory.create(r,a,!0);let u=[];for(let p=0,g=i.length;p<g;p+=2){const m=i[p]-e[0],v=e[3]-i[p+1];u.push(`${m},${v}`)}u=u.join(" ");const h=S(this,lp,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),l.append(h),this.container.append(l),!o&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return d(this,lp)}addHighlightArea(){this.container.classList.add("highlightArea")}}lp=new WeakMap;class xU extends YD{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class RU extends Jt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var up,Da,cp,OS;class GC extends Jt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});y(this,cp);y(this,up,null);y(this,Da,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?J.HIGHLIGHT:J.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:i,inkLists:s,borderStyle:o,popupRef:r}}=this,{transform:a,width:l,height:u}=b(this,cp,OS).call(this,i,e),h=this.svgFactory.create(l,u,!0),p=S(this,up,this.svgFactory.createElement("svg:g"));h.append(p),p.setAttribute("stroke-width",o.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",a);for(let g=0,m=s.length;g<m;g++){const v=this.svgFactory.createElement(this.svgElementName);d(this,Da).push(v),v.setAttribute("points",s[g].join(",")),p.append(v)}return!r&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:i,points:s,rect:o}=e,r=d(this,up);if(i>=0&&r.setAttribute("stroke-width",i||1),s)for(let a=0,l=d(this,Da).length;a<l;a++)d(this,Da)[a].setAttribute("points",s[a].join(","));if(o){const{transform:a,width:l,height:u}=b(this,cp,OS).call(this,this.data.rotation,o);r.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),r.setAttribute("transform",a)}}getElementsToTriggerPopup(){return d(this,Da)}addHighlightArea(){this.container.classList.add("highlightArea")}}up=new WeakMap,Da=new WeakMap,cp=new WeakSet,OS=function(e,i){switch(e){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class XD extends Jt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=J.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class DU extends Jt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class NU extends Jt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class IU extends Jt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:e}}=this;if(!e&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=t,this.container.append(i)}return this.container}}class JD extends Jt{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=J.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fp,dp,BS;class LU extends Jt{constructor(e){var s;super(e,{isRenderable:!0});y(this,dp);y(this,fp,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",b(this,dp,BS).bind(this)),S(this,fp,s);const{isMac:o}=Ie.platform;return e.addEventListener("keydown",r=>{r.key==="Enter"&&(o?r.metaKey:r.ctrlKey)&&b(this,dp,BS).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return d(this,fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}fp=new WeakMap,dp=new WeakSet,BS=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var hp,Na,zo,pp,gp,VS,mp,GS;const i_=class i_{constructor({div:t,accessibilityManager:e,annotationCanvasMap:i,annotationEditorUIManager:s,page:o,viewport:r,structTreeLayer:a}){y(this,gp);y(this,mp);y(this,hp,null);y(this,Na,null);y(this,zo,new Map);y(this,pp,null);this.div=t,S(this,hp,e),S(this,Na,i),S(this,pp,a||null),this.page=o,this.viewport=r,this.zIndex=0,this._annotationEditorUIManager=s}hasEditableAnnotations(){return d(this,zo).size>0}async render(t){var r;const{annotations:e}=t,i=this.div;vl(i,this.viewport);const s=new Map,o={data:null,layer:i,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new xy,annotationStorage:t.annotationStorage||new BC,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const l=a.annotationType===Qt.POPUP;if(l){const p=s.get(a.id);if(!p)continue;o.elements=p}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;o.data=a;const u=Qb.create(o);if(!u.isRenderable)continue;if(!l&&a.popupRef){const p=s.get(a.popupRef);p?p.push(u):s.set(a.popupRef,[u])}const h=u.render();a.hidden&&(h.style.visibility="hidden"),await b(this,gp,VS).call(this,h,a.id,o.elements),u._isEditable&&(d(this,zo).set(u.data.id,u),(r=this._annotationEditorUIManager)==null||r.renderAnnotationElement(u))}b(this,mp,GS).call(this)}async addLinkAnnotations(t,e){const i={data:null,layer:this.div,linkService:e,svgFactory:new xy,parent:this};for(const s of t){s.borderStyle||(s.borderStyle=i_._defaultBorderStyle),i.data=s;const o=Qb.create(i);if(!o.isRenderable)continue;const r=o.render();await b(this,gp,VS).call(this,r,s.id,null)}}update({viewport:t}){const e=this.div;this.viewport=t,vl(e,{rotation:t.rotation}),b(this,mp,GS).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(d(this,zo).values())}getEditableAnnotation(t){return d(this,zo).get(t)}static get _defaultBorderStyle(){return st(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Fl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};hp=new WeakMap,Na=new WeakMap,zo=new WeakMap,pp=new WeakMap,gp=new WeakSet,VS=async function(t,e,i){var a,l;const s=t.firstChild||t,o=s.id=`${PC}${e}`,r=await((a=d(this,pp))==null?void 0:a.getAriaAttributes(o));if(r)for(const[u,h]of r)s.setAttribute(u,h);i?i.at(-1).container.after(t):(this.div.append(t),(l=d(this,hp))==null||l.moveElementInDOM(this.div,t,s,!1))},mp=new WeakSet,GS=function(){var e;if(!d(this,Na))return;const t=this.div;for(const[i,s]of d(this,Na)){const o=t.querySelector(`[data-annotation-id="${i}"]`);if(!o)continue;s.className="annotationContent";const{firstChild:r}=o;r?r.nodeName==="CANVAS"?r.replaceWith(s):r.classList.contains("annotationContent")?r.after(s):r.before(s):o.append(s);const a=d(this,zo).get(i);a&&(a._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(i,o.id,s),a._hasNoCanvas=!1):a.canvas=s)}d(this,Na).clear()};let HS=i_;const Kg=/\r\n?|\n/g;var pi,Cn,yp,Ia,_n,Vv,KD,Gv,WD,qv,QD,gc,Rm,mc,Dm,yc,Nm,zv,ZD,vp,zS,$v,jD;const St=class St extends _t{constructor(e){super({...e,name:"freeTextEditor"});y(this,Vv);y(this,Gv);y(this,qv);y(this,gc);y(this,yc);y(this,zv);y(this,$v);y(this,pi,void 0);y(this,Cn,"");y(this,yp,`${this.id}-editor`);y(this,Ia,null);y(this,_n,void 0);S(this,pi,e.color||St._defaultColor||_t._defaultLineColor),S(this,_n,e.fontSize||St._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const e=St.prototype,i=r=>r.isEmpty(),s=Al.TRANSLATE_SMALL,o=Al.TRANSLATE_BIG;return st(this,"_keyboardManager",new Sg([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-o,0],checker:i}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[o,0],checker:i}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-o],checker:i}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,o],checker:i}]]))}static initialize(e,i){_t.initialize(e,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,i){switch(e){case ot.FREETEXT_SIZE:St._defaultFontSize=i;break;case ot.FREETEXT_COLOR:St._defaultColor=i;break}}updateParams(e,i){switch(e){case ot.FREETEXT_SIZE:b(this,Vv,KD).call(this,i);break;case ot.FREETEXT_COLOR:b(this,Gv,WD).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ot.FREETEXT_SIZE,St._defaultFontSize],[ot.FREETEXT_COLOR,St._defaultColor||_t._defaultLineColor]]}get propertiesToUpdate(){return[[ot.FREETEXT_SIZE,d(this,_n)],[ot.FREETEXT_COLOR,d(this,pi)]]}_translateEmpty(e,i){this._uiManager.translateSelectedEditors(e,i,!0)}getInitialTranslation(){const e=this.parentScale;return[-St._internalPadding*e,-(St._internalPadding+d(this,_n))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),S(this,Ia,new AbortController);const e=this._uiManager.combinedSignal(d(this,Ia));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",d(this,yp)),this._isDraggable=!0,(e=d(this,Ia))==null||e.abort(),S(this,Ia,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var i;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=d(this,Cn),i=S(this,Cn,b(this,qv,QD).call(this).trimEnd());if(e===i)return;const s=o=>{if(S(this,Cn,o),!o){this.remove();return}b(this,yc,Nm).call(this),this._uiManager.rebuild(this),b(this,gc,Rm).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(e)},mustExec:!1}),b(this,gc,Rm).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){St._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,i;(this._isCopy||this.annotationElementId)&&(e=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",d(this,yp)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${d(this,_n)}px * var(--total-scale-factor))`,s.color=d(this,pi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[o,r]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[h,p]=this.pageDimensions,[g,m]=this.pageTranslation;let v,A;switch(this.rotation){case 0:v=e+(a[0]-g)/h,A=i+this.height-(a[1]-m)/p;break;case 90:v=e+(a[0]-g)/h,A=i-(a[1]-m)/p,[l,u]=[u,-l];break;case 180:v=e-this.width+(a[0]-g)/h,A=i-(a[1]-m)/p,[l,u]=[-l,-u];break;case 270:v=e+(a[0]-g-this.height*p)/h,A=i+(a[1]-m-this.width*h)/p,[l,u]=[-u,l];break}this.setAt(v*o,A*r,l,u)}else this._moveAfterPaste(e,i);b(this,yc,Nm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var v,A,_;const i=e.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const o=b(v=St,vp,zS).call(v,i.getData("text")||"").replaceAll(Kg,`
`);if(!o)return;const r=window.getSelection();if(!r.rangeCount)return;this.editorDiv.normalize(),r.deleteFromDocument();const a=r.getRangeAt(0);if(!o.includes(`
`)){a.insertNode(document.createTextNode(o)),this.editorDiv.normalize(),r.collapseToStart();return}const{startContainer:l,startOffset:u}=a,h=[],p=[];if(l.nodeType===Node.TEXT_NODE){const T=l.parentElement;if(p.push(l.nodeValue.slice(u).replaceAll(Kg,"")),T!==this.editorDiv){let E=h;for(const C of this.editorDiv.childNodes){if(C===T){E=p;continue}E.push(b(A=St,mc,Dm).call(A,C))}}h.push(l.nodeValue.slice(0,u).replaceAll(Kg,""))}else if(l===this.editorDiv){let T=h,E=0;for(const C of this.editorDiv.childNodes)E++===u&&(T=p),T.push(b(_=St,mc,Dm).call(_,C))}S(this,Cn,`${h.join(`
`)}${o}${p.join(`
`)}`),b(this,yc,Nm).call(this);const g=new Range;let m=Math.sumPrecise(h.map(T=>T.length));for(const{firstChild:T}of this.editorDiv.childNodes)if(T.nodeType===Node.TEXT_NODE){const E=T.nodeValue.length;if(m<=E){g.setStart(T,m),g.setEnd(T,m);break}m-=E}r.removeAllRanges(),r.addRange(g)}get contentDiv(){return this.editorDiv}static async deserialize(e,i,s){var a;let o=null;if(e instanceof $D){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:h,rotation:p,id:g,popupRef:m},textContent:v,textPosition:A,parent:{page:{pageNumber:_}}}=e;if(!v||v.length===0)return null;o=e={annotationType:J.FREETEXT,color:Array.from(u),fontSize:l,value:v.join(`
`),position:A,pageIndex:_-1,rect:h.slice(0),rotation:p,annotationElementId:g,id:g,deleted:!1,popupRef:m}}const r=await super.deserialize(e,i,s);return S(r,_n,e.fontSize),S(r,pi,q.makeHexColor(...e.color)),S(r,Cn,b(a=St,vp,zS).call(a,e.value)),r._initialData=o,r}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=St._internalPadding*this.parentScale,s=this.getRect(i,i),o=_t._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:d(this,pi)),r={annotationType:J.FREETEXT,color:o,fontSize:d(this,_n),value:b(this,zv,ZD).call(this),pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(r.isCopy=!0,r):this.annotationElementId&&!b(this,$v,jD).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){const i=super.renderAnnotationElement(e);if(this.deleted)return i;const{style:s}=i;s.fontSize=`calc(${d(this,_n)}px * var(--total-scale-factor))`,s.color=d(this,pi),i.replaceChildren();for(const r of d(this,Cn).split(`
`)){const a=document.createElement("div");a.append(r?document.createTextNode(r):document.createElement("br")),i.append(a)}const o=St._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(o,o),popupContent:d(this,Cn)}),i}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};pi=new WeakMap,Cn=new WeakMap,yp=new WeakMap,Ia=new WeakMap,_n=new WeakMap,Vv=new WeakSet,KD=function(e){const i=o=>{this.editorDiv.style.fontSize=`calc(${o}px * var(--total-scale-factor))`,this.translate(0,-(o-d(this,_n))*this.parentScale),S(this,_n,o),b(this,gc,Rm).call(this)},s=d(this,_n);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Gv=new WeakSet,WD=function(e){const i=o=>{S(this,pi,this.editorDiv.style.color=o)},s=d(this,pi);this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},qv=new WeakSet,QD=function(){var s;const e=[];this.editorDiv.normalize();let i=null;for(const o of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&o.nodeName==="BR"||(e.push(b(s=St,mc,Dm).call(s,o)),i=o);return e.join(`
`)},gc=new WeakSet,Rm=function(){const[e,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:o,div:r}=this,a=r.style.display,l=r.classList.contains("hidden");r.classList.remove("hidden"),r.style.display="hidden",o.div.append(this.div),s=r.getBoundingClientRect(),r.remove(),r.style.display=a,r.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/i):(this.width=s.height/e,this.height=s.width/i),this.fixAndSetPosition()},mc=new WeakSet,Dm=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Kg,"")},yc=new WeakSet,Nm=function(){if(this.editorDiv.replaceChildren(),!!d(this,Cn))for(const e of d(this,Cn).split(`
`)){const i=document.createElement("div");i.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(i)}},zv=new WeakSet,ZD=function(){return d(this,Cn).replaceAll(""," ")},vp=new WeakSet,zS=function(e){return e.replaceAll(" ","")},$v=new WeakSet,jD=function(e){const{value:i,fontSize:s,color:o,pageIndex:r}=this._initialData;return this._hasBeenMoved||e.value!==i||e.fontSize!==s||e.color.some((a,l)=>a!==o[l])||e.pageIndex!==r},y(St,mc),y(St,vp),O(St,"_freeTextDefaultContent",""),O(St,"_internalPadding",0),O(St,"_defaultColor",null),O(St,"_defaultFontSize",10),O(St,"_type","freetext"),O(St,"_editorType",J.FREETEXT);let qS=St;class B{toSVGPath(){Tt("Abstract method `toSVGPath` must be implemented.")}get box(){Tt("Abstract getter `box` must be implemented.")}serialize(t,e){Tt("Abstract method `serialize` must be implemented.")}static _rescale(t,e,i,s,o,r){r||(r=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)r[a]=e+t[a]*s,r[a+1]=i+t[a+1]*o;return r}static _rescaleAndSwap(t,e,i,s,o,r){r||(r=new Float32Array(t.length));for(let a=0,l=t.length;a<l;a+=2)r[a]=e+t[a+1]*s,r[a+1]=i+t[a]*o;return r}static _translate(t,e,i,s){s||(s=new Float32Array(t.length));for(let o=0,r=t.length;o<r;o+=2)s[o]=e+t[o],s[o+1]=i+t[o+1];return s}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,i,s,o){switch(o){case 90:return[1-e/i,t/s];case 180:return[1-t/i,1-e/s];case 270:return[e/i,1-t/s];default:return[t/i,e/s]}}static _normalizePagePoint(t,e,i){switch(i){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,i,s,o,r){return[(t+5*i)/6,(e+5*s)/6,(5*i+o)/6,(5*s+r)/6,(i+o)/2,(s+r)/2]}}O(B,"PRECISION",1e-4);var bn,gi,vc,Ac,Gi,et,La,Pa,Ap,Tp,Tc,Sc,$o,Sp,Yv,Xv,ka,jf,Jv,tN,Kv,eN,Wv,nN,Qv,iN,Zv,sN,jv,oN;const ds=class ds{constructor({x:t,y:e},i,s,o,r,a=0){y(this,ka);y(this,Jv);y(this,Kv);y(this,Wv);y(this,Qv);y(this,Zv);y(this,jv);y(this,bn,void 0);y(this,gi,[]);y(this,vc,void 0);y(this,Ac,void 0);y(this,Gi,[]);y(this,et,new Float32Array(18));y(this,La,void 0);y(this,Pa,void 0);y(this,Ap,void 0);y(this,Tp,void 0);y(this,Tc,void 0);y(this,Sc,void 0);y(this,$o,[]);S(this,bn,i),S(this,Sc,o*s),S(this,Ac,r),d(this,et).set([NaN,NaN,NaN,NaN,t,e],6),S(this,vc,a),S(this,Tp,d(ds,Sp)*s),S(this,Ap,d(ds,Xv)*s),S(this,Tc,s),d(this,$o).push(t,e)}isEmpty(){return isNaN(d(this,et)[8])}add({x:t,y:e}){var N;S(this,La,t),S(this,Pa,e);const[i,s,o,r]=d(this,bn);let[a,l,u,h]=d(this,et).subarray(8,12);const p=t-u,g=e-h,m=Math.hypot(p,g);if(m<d(this,Ap))return!1;const v=m-d(this,Tp),A=v/m,_=A*p,T=A*g;let E=a,C=l;a=u,l=h,u+=_,h+=T,(N=d(this,$o))==null||N.push(t,e);const w=-T/v,M=_/v,R=w*d(this,Sc),x=M*d(this,Sc);return d(this,et).set(d(this,et).subarray(2,8),0),d(this,et).set([u+R,h+x],4),d(this,et).set(d(this,et).subarray(14,18),12),d(this,et).set([u-R,h-x],16),isNaN(d(this,et)[6])?(d(this,Gi).length===0&&(d(this,et).set([a+R,l+x],2),d(this,Gi).push(NaN,NaN,NaN,NaN,(a+R-i)/o,(l+x-s)/r),d(this,et).set([a-R,l-x],14),d(this,gi).push(NaN,NaN,NaN,NaN,(a-R-i)/o,(l-x-s)/r)),d(this,et).set([E,C,a,l,u,h],6),!this.isEmpty()):(d(this,et).set([E,C,a,l,u,h],6),Math.abs(Math.atan2(C-l,E-a)-Math.atan2(T,_))<Math.PI/2?([a,l,u,h]=d(this,et).subarray(2,6),d(this,Gi).push(NaN,NaN,NaN,NaN,((a+u)/2-i)/o,((l+h)/2-s)/r),[a,l,E,C]=d(this,et).subarray(14,18),d(this,gi).push(NaN,NaN,NaN,NaN,((E+a)/2-i)/o,((C+l)/2-s)/r),!0):([E,C,a,l,u,h]=d(this,et).subarray(0,6),d(this,Gi).push(((E+5*a)/6-i)/o,((C+5*l)/6-s)/r,((5*a+u)/6-i)/o,((5*l+h)/6-s)/r,((a+u)/2-i)/o,((l+h)/2-s)/r),[u,h,a,l,E,C]=d(this,et).subarray(12,18),d(this,gi).push(((E+5*a)/6-i)/o,((C+5*l)/6-s)/r,((5*a+u)/6-i)/o,((5*l+h)/6-s)/r,((a+u)/2-i)/o,((l+h)/2-s)/r),!0))}toSVGPath(){if(this.isEmpty())return"";const t=d(this,Gi),e=d(this,gi);if(isNaN(d(this,et)[6])&&!this.isEmpty())return b(this,Jv,tN).call(this);const i=[];i.push(`M${t[4]} ${t[5]}`);for(let s=6;s<t.length;s+=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);b(this,Wv,nN).call(this,i);for(let s=e.length-6;s>=6;s-=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);return b(this,Kv,eN).call(this,i),i.join(" ")}newFreeDrawOutline(t,e,i,s,o,r){return new rN(t,e,i,s,o,r)}getOutlines(){var p;const t=d(this,Gi),e=d(this,gi),i=d(this,et),[s,o,r,a]=d(this,bn),l=new Float32Array((((p=d(this,$o))==null?void 0:p.length)??0)+2);for(let g=0,m=l.length-2;g<m;g+=2)l[g]=(d(this,$o)[g]-s)/r,l[g+1]=(d(this,$o)[g+1]-o)/a;if(l[l.length-2]=(d(this,La)-s)/r,l[l.length-1]=(d(this,Pa)-o)/a,isNaN(i[6])&&!this.isEmpty())return b(this,Qv,iN).call(this,l);const u=new Float32Array(d(this,Gi).length+24+d(this,gi).length);let h=t.length;for(let g=0;g<h;g+=2){if(isNaN(t[g])){u[g]=u[g+1]=NaN;continue}u[g]=t[g],u[g+1]=t[g+1]}h=b(this,jv,oN).call(this,u,h);for(let g=e.length-6;g>=6;g-=6)for(let m=0;m<6;m+=2){if(isNaN(e[g+m])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=e[g+m],u[h+1]=e[g+m+1],h+=2}return b(this,Zv,sN).call(this,u,h),this.newFreeDrawOutline(u,l,d(this,bn),d(this,Tc),d(this,vc),d(this,Ac))}};bn=new WeakMap,gi=new WeakMap,vc=new WeakMap,Ac=new WeakMap,Gi=new WeakMap,et=new WeakMap,La=new WeakMap,Pa=new WeakMap,Ap=new WeakMap,Tp=new WeakMap,Tc=new WeakMap,Sc=new WeakMap,$o=new WeakMap,Sp=new WeakMap,Yv=new WeakMap,Xv=new WeakMap,ka=new WeakSet,jf=function(){const t=d(this,et).subarray(4,6),e=d(this,et).subarray(16,18),[i,s,o,r]=d(this,bn);return[(d(this,La)+(t[0]-e[0])/2-i)/o,(d(this,Pa)+(t[1]-e[1])/2-s)/r,(d(this,La)+(e[0]-t[0])/2-i)/o,(d(this,Pa)+(e[1]-t[1])/2-s)/r]},Jv=new WeakSet,tN=function(){const[t,e,i,s]=d(this,bn),[o,r,a,l]=b(this,ka,jf).call(this);return`M${(d(this,et)[2]-t)/i} ${(d(this,et)[3]-e)/s} L${(d(this,et)[4]-t)/i} ${(d(this,et)[5]-e)/s} L${o} ${r} L${a} ${l} L${(d(this,et)[16]-t)/i} ${(d(this,et)[17]-e)/s} L${(d(this,et)[14]-t)/i} ${(d(this,et)[15]-e)/s} Z`},Kv=new WeakSet,eN=function(t){const e=d(this,gi);t.push(`L${e[4]} ${e[5]} Z`)},Wv=new WeakSet,nN=function(t){const[e,i,s,o]=d(this,bn),r=d(this,et).subarray(4,6),a=d(this,et).subarray(16,18),[l,u,h,p]=b(this,ka,jf).call(this);t.push(`L${(r[0]-e)/s} ${(r[1]-i)/o} L${l} ${u} L${h} ${p} L${(a[0]-e)/s} ${(a[1]-i)/o}`)},Qv=new WeakSet,iN=function(t){const e=d(this,et),[i,s,o,r]=d(this,bn),[a,l,u,h]=b(this,ka,jf).call(this),p=new Float32Array(36);return p.set([NaN,NaN,NaN,NaN,(e[2]-i)/o,(e[3]-s)/r,NaN,NaN,NaN,NaN,(e[4]-i)/o,(e[5]-s)/r,NaN,NaN,NaN,NaN,a,l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(e[16]-i)/o,(e[17]-s)/r,NaN,NaN,NaN,NaN,(e[14]-i)/o,(e[15]-s)/r],0),this.newFreeDrawOutline(p,t,d(this,bn),d(this,Tc),d(this,vc),d(this,Ac))},Zv=new WeakSet,sN=function(t,e){const i=d(this,gi);return t.set([NaN,NaN,NaN,NaN,i[4],i[5]],e),e+=6},jv=new WeakSet,oN=function(t,e){const i=d(this,et).subarray(4,6),s=d(this,et).subarray(16,18),[o,r,a,l]=d(this,bn),[u,h,p,g]=b(this,ka,jf).call(this);return t.set([NaN,NaN,NaN,NaN,(i[0]-o)/a,(i[1]-r)/l,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,p,g,NaN,NaN,NaN,NaN,(s[0]-o)/a,(s[1]-r)/l],e),e+=24},y(ds,Sp,8),y(ds,Yv,2),y(ds,Xv,d(ds,Sp)+d(ds,Yv));let Ry=ds;var Ec,Ua,ks,Ep,wn,Cp,Yt,tA,aN;class rN extends B{constructor(e,i,s,o,r,a){super();y(this,tA);y(this,Ec,void 0);y(this,Ua,new Float32Array(4));y(this,ks,void 0);y(this,Ep,void 0);y(this,wn,void 0);y(this,Cp,void 0);y(this,Yt,void 0);S(this,Yt,e),S(this,wn,i),S(this,Ec,s),S(this,Cp,o),S(this,ks,r),S(this,Ep,a),this.lastPoint=[NaN,NaN],b(this,tA,aN).call(this,a);const[l,u,h,p]=d(this,Ua);for(let g=0,m=e.length;g<m;g+=2)e[g]=(e[g]-l)/h,e[g+1]=(e[g+1]-u)/p;for(let g=0,m=i.length;g<m;g+=2)i[g]=(i[g]-l)/h,i[g+1]=(i[g+1]-u)/p}toSVGPath(){const e=[`M${d(this,Yt)[4]} ${d(this,Yt)[5]}`];for(let i=6,s=d(this,Yt).length;i<s;i+=6){if(isNaN(d(this,Yt)[i])){e.push(`L${d(this,Yt)[i+4]} ${d(this,Yt)[i+5]}`);continue}e.push(`C${d(this,Yt)[i]} ${d(this,Yt)[i+1]} ${d(this,Yt)[i+2]} ${d(this,Yt)[i+3]} ${d(this,Yt)[i+4]} ${d(this,Yt)[i+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,i,s,o],r){const a=s-e,l=o-i;let u,h;switch(r){case 0:u=B._rescale(d(this,Yt),e,o,a,-l),h=B._rescale(d(this,wn),e,o,a,-l);break;case 90:u=B._rescaleAndSwap(d(this,Yt),e,i,a,l),h=B._rescaleAndSwap(d(this,wn),e,i,a,l);break;case 180:u=B._rescale(d(this,Yt),s,i,-a,l),h=B._rescale(d(this,wn),s,i,-a,l);break;case 270:u=B._rescaleAndSwap(d(this,Yt),s,o,-a,-l),h=B._rescaleAndSwap(d(this,wn),s,o,-a,-l);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return d(this,Ua)}newOutliner(e,i,s,o,r,a=0){return new Ry(e,i,s,o,r,a)}getNewOutline(e,i){const[s,o,r,a]=d(this,Ua),[l,u,h,p]=d(this,Ec),g=r*h,m=a*p,v=s*h+l,A=o*p+u,_=this.newOutliner({x:d(this,wn)[0]*g+v,y:d(this,wn)[1]*m+A},d(this,Ec),d(this,Cp),e,d(this,Ep),i??d(this,ks));for(let T=2;T<d(this,wn).length;T+=2)_.add({x:d(this,wn)[T]*g+v,y:d(this,wn)[T+1]*m+A});return _.getOutlines()}}Ec=new WeakMap,Ua=new WeakMap,ks=new WeakMap,Ep=new WeakMap,wn=new WeakMap,Cp=new WeakMap,Yt=new WeakMap,tA=new WeakSet,aN=function(e){const i=d(this,Yt);let s=i[4],o=i[5];const r=[s,o,s,o];let a=s,l=o;const u=e?Math.max:Math.min;for(let p=6,g=i.length;p<g;p+=6){const m=i[p+4],v=i[p+5];if(isNaN(i[p]))q.pointBoundingBox(m,v,r),l<v?(a=m,l=v):l===v&&(a=u(a,m));else{const A=[1/0,1/0,-1/0,-1/0];q.bezierBoundingBox(s,o,...i.slice(p,p+6),A),q.rectBoundingBox(...A,r),l<A[3]?(a=A[2],l=A[3]):l===A[3]&&(a=u(a,A[2]))}s=m,o=v}const h=d(this,Ua);h[0]=r[0]-d(this,ks),h[1]=r[1]-d(this,ks),h[2]=r[2]-r[0]+2*d(this,ks),h[3]=r[3]-r[1]+2*d(this,ks),this.lastPoint=[a,l]};var _p,bp,Yo,mi,eA,lN,Cc,Im,nA,uN,iA,cN,wp,YS;class $S{constructor(t,e=0,i=0,s=!0){y(this,eA);y(this,Cc);y(this,nA);y(this,iA);y(this,wp);y(this,_p,void 0);y(this,bp,void 0);y(this,Yo,[]);y(this,mi,[]);const o=[1/0,1/0,-1/0,-1/0],r=10**-4;for(const{x:m,y:v,width:A,height:_}of t){const T=Math.floor((m-e)/r)*r,E=Math.ceil((m+A+e)/r)*r,C=Math.floor((v-e)/r)*r,w=Math.ceil((v+_+e)/r)*r,M=[T,C,w,!0],R=[E,C,w,!1];d(this,Yo).push(M,R),q.rectBoundingBox(T,C,E,w,o)}const a=o[2]-o[0]+2*i,l=o[3]-o[1]+2*i,u=o[0]-i,h=o[1]-i,p=d(this,Yo).at(s?-1:-2),g=[p[0],p[2]];for(const m of d(this,Yo)){const[v,A,_]=m;m[0]=(v-u)/a,m[1]=(A-h)/l,m[2]=(_-h)/l}S(this,_p,new Float32Array([u,h,a,l])),S(this,bp,g)}getOutlines(){d(this,Yo).sort((e,i)=>e[0]-i[0]||e[1]-i[1]||e[2]-i[2]);const t=[];for(const e of d(this,Yo))e[3]?(t.push(...b(this,wp,YS).call(this,e)),b(this,nA,uN).call(this,e)):(b(this,iA,cN).call(this,e),t.push(...b(this,wp,YS).call(this,e)));return b(this,eA,lN).call(this,t)}}_p=new WeakMap,bp=new WeakMap,Yo=new WeakMap,mi=new WeakMap,eA=new WeakSet,lN=function(t){const e=[],i=new Set;for(const r of t){const[a,l,u]=r;e.push([a,l,r],[a,u,r])}e.sort((r,a)=>r[1]-a[1]||r[0]-a[0]);for(let r=0,a=e.length;r<a;r+=2){const l=e[r][2],u=e[r+1][2];l.push(u),u.push(l),i.add(l),i.add(u)}const s=[];let o;for(;i.size>0;){const r=i.values().next().value;let[a,l,u,h,p]=r;i.delete(r);let g=a,m=l;for(o=[a,u],s.push(o);;){let v;if(i.has(h))v=h;else if(i.has(p))v=p;else break;i.delete(v),[a,l,u,h,p]=v,g!==a&&(o.push(g,m,a,m===l?l:u),g=a),m=m===l?u:l}o.push(g,m)}return new PU(s,d(this,_p),d(this,bp))},Cc=new WeakSet,Im=function(t){const e=d(this,mi);let i=0,s=e.length-1;for(;i<=s;){const o=i+s>>1,r=e[o][0];if(r===t)return o;r<t?i=o+1:s=o-1}return s+1},nA=new WeakSet,uN=function([,t,e]){const i=b(this,Cc,Im).call(this,t);d(this,mi).splice(i,0,[t,e])},iA=new WeakSet,cN=function([,t,e]){const i=b(this,Cc,Im).call(this,t);for(let s=i;s<d(this,mi).length;s++){const[o,r]=d(this,mi)[s];if(o!==t)break;if(o===t&&r===e){d(this,mi).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[o,r]=d(this,mi)[s];if(o!==t)break;if(o===t&&r===e){d(this,mi).splice(s,1);return}}},wp=new WeakSet,YS=function(t){const[e,i,s]=t,o=[[e,i,s]],r=b(this,Cc,Im).call(this,s);for(let a=0;a<r;a++){const[l,u]=d(this,mi)[a];for(let h=0,p=o.length;h<p;h++){const[,g,m]=o[h];if(!(u<=g||m<=l)){if(g>=l){if(m>u)o[h][1]=u;else{if(p===1)return[];o.splice(h,1),h--,p--}continue}o[h][2]=l,m>u&&o.push([e,u,m])}}}return o};var Mp,_c;class PU extends B{constructor(e,i,s){super();y(this,Mp,void 0);y(this,_c,void 0);S(this,_c,e),S(this,Mp,i),this.lastPoint=s}toSVGPath(){const e=[];for(const i of d(this,_c)){let[s,o]=i;e.push(`M${s} ${o}`);for(let r=2;r<i.length;r+=2){const a=i[r],l=i[r+1];a===s?(e.push(`V${l}`),o=l):l===o&&(e.push(`H${a}`),s=a)}e.push("Z")}return e.join(" ")}serialize([e,i,s,o],r){const a=[],l=s-e,u=o-i;for(const h of d(this,_c)){const p=new Array(h.length);for(let g=0;g<h.length;g+=2)p[g]=e+h[g]*l,p[g+1]=o-h[g+1]*u;a.push(p)}return a}get box(){return d(this,Mp)}get classNamesForOutlining(){return["highlightOutline"]}}Mp=new WeakMap,_c=new WeakMap;class XS extends Ry{newFreeDrawOutline(t,e,i,s,o,r){return new kU(t,e,i,s,o,r)}}class kU extends rN{newOutliner(t,e,i,s,o,r=0){return new XS(t,e,i,s,o,r)}}var Mn,Fa,bc,oe,xp,wc,Us,Rp,Xo,yi,Mc,Dp,Np,JS,Ip,KS,Lp,WS,Fs,Ir,sA,fN,qi,co;const nn=class nn{constructor({editor:t=null,uiManager:e=null}){y(this,Np);y(this,Ip);y(this,Lp);y(this,Fs);y(this,sA);y(this,qi);y(this,Mn,null);y(this,Fa,null);y(this,bc,void 0);y(this,oe,null);y(this,xp,!1);y(this,wc,!1);y(this,Us,null);y(this,Rp,void 0);y(this,Xo,null);y(this,yi,null);y(this,Mc,void 0);var i,s;t?(S(this,wc,!1),S(this,Mc,ot.HIGHLIGHT_COLOR),S(this,Us,t)):(S(this,wc,!0),S(this,Mc,ot.HIGHLIGHT_DEFAULT_COLOR)),S(this,yi,(t==null?void 0:t._uiManager)||e),S(this,Rp,d(this,yi)._eventBus),S(this,bc,((i=t==null?void 0:t.color)==null?void 0:i.toUpperCase())||((s=d(this,yi))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),d(nn,Dp)||S(nn,Dp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return st(this,"_keyboardManager",new Sg([[["Escape","mac+Escape"],nn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],nn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],nn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],nn.prototype._moveToPrevious],[["Home","mac+Home"],nn.prototype._moveToBeginning],[["End","mac+End"],nn.prototype._moveToEnd]]))}renderButton(){const t=S(this,Mn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",d(this,Us)&&(t.ariaControls=`${d(this,Us).id}_colorpicker_dropdown`);const e=d(this,yi)._signal;t.addEventListener("click",b(this,Fs,Ir).bind(this),{signal:e}),t.addEventListener("keydown",b(this,Lp,WS).bind(this),{signal:e});const i=S(this,Fa,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=d(this,bc),t.append(i),t}renderMainDropdown(){const t=S(this,oe,b(this,Np,JS).call(this));return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}_colorSelectFromKeyboard(t){if(t.target===d(this,Mn)){b(this,Fs,Ir).call(this,t);return}const e=t.target.getAttribute("data-color");e&&b(this,Ip,KS).call(this,e,t)}_moveToNext(t){var e,i;if(!d(this,qi,co)){b(this,Fs,Ir).call(this,t);return}if(t.target===d(this,Mn)){(e=d(this,oe).firstChild)==null||e.focus();return}(i=t.target.nextSibling)==null||i.focus()}_moveToPrevious(t){var e,i;if(t.target===((e=d(this,oe))==null?void 0:e.firstChild)||t.target===d(this,Mn)){d(this,qi,co)&&this._hideDropdownFromKeyboard();return}d(this,qi,co)||b(this,Fs,Ir).call(this,t),(i=t.target.previousSibling)==null||i.focus()}_moveToBeginning(t){var e;if(!d(this,qi,co)){b(this,Fs,Ir).call(this,t);return}(e=d(this,oe).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!d(this,qi,co)){b(this,Fs,Ir).call(this,t);return}(e=d(this,oe).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=d(this,oe))==null||t.classList.add("hidden"),d(this,Mn).ariaExpanded="false",(e=d(this,Xo))==null||e.abort(),S(this,Xo,null)}_hideDropdownFromKeyboard(){var t;if(!d(this,wc)){if(!d(this,qi,co)){(t=d(this,Us))==null||t.unselect();return}this.hideDropdown(),d(this,Mn).focus({preventScroll:!0,focusVisible:d(this,xp)})}}updateColor(t){if(d(this,Fa)&&(d(this,Fa).style.backgroundColor=t),!d(this,oe))return;const e=d(this,yi).highlightColors.values();for(const i of d(this,oe).children)i.ariaSelected=e.next().value===t.toUpperCase()}destroy(){var t,e;(t=d(this,Mn))==null||t.remove(),S(this,Mn,null),S(this,Fa,null),(e=d(this,oe))==null||e.remove(),S(this,oe,null)}};Mn=new WeakMap,Fa=new WeakMap,bc=new WeakMap,oe=new WeakMap,xp=new WeakMap,wc=new WeakMap,Us=new WeakMap,Rp=new WeakMap,Xo=new WeakMap,yi=new WeakMap,Mc=new WeakMap,Dp=new WeakMap,Np=new WeakSet,JS=function(){const t=document.createElement("div"),e=d(this,yi)._signal;t.addEventListener("contextmenu",_i,{signal:e}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),d(this,Us)&&(t.id=`${d(this,Us).id}_colorpicker_dropdown`);for(const[i,s]of d(this,yi).highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",s),o.title=i,o.setAttribute("data-l10n-id",d(nn,Dp)[i]);const r=document.createElement("span");o.append(r),r.className="swatch",r.style.backgroundColor=s,o.ariaSelected=s===d(this,bc),o.addEventListener("click",b(this,Ip,KS).bind(this,s),{signal:e}),t.append(o)}return t.addEventListener("keydown",b(this,Lp,WS).bind(this),{signal:e}),t},Ip=new WeakSet,KS=function(t,e){e.stopPropagation(),d(this,Rp).dispatch("switchannotationeditorparams",{source:this,type:d(this,Mc),value:t})},Lp=new WeakSet,WS=function(t){nn._keyboardManager.exec(this,t)},Fs=new WeakSet,Ir=function(t){if(d(this,qi,co)){this.hideDropdown();return}if(S(this,xp,t.detail===0),d(this,Xo)||(S(this,Xo,new AbortController),window.addEventListener("pointerdown",b(this,sA,fN).bind(this),{signal:d(this,yi).combinedSignal(d(this,Xo))})),d(this,Mn).ariaExpanded="true",d(this,oe)){d(this,oe).classList.remove("hidden");return}const e=S(this,oe,b(this,Np,JS).call(this));d(this,Mn).append(e)},sA=new WeakSet,fN=function(t){var e;(e=d(this,oe))!=null&&e.contains(t.target)||this.hideDropdown()},qi=new WeakSet,co=function(){return d(this,oe)&&!d(this,oe).classList.contains("hidden")},y(nn,Dp,null);let Dy=nn;var xc,Pp,Os,Oa,kp,rn,Up,Fp,Ba,Xn,xn,we,Rc,Bs,Fe,Dc,Jn,Op,Bp,QS,Nc,Lm,oA,dN,rA,hN,aA,pN,Hp,ZS,Hs,Lr,Jo,Gl,lA,gN,Ic,Pm,Ha,td,uA,mN,cA,yN,fA,vN,dA,AN,hA,TN;const lt=class lt extends _t{constructor(e){super({...e,name:"highlightEditor"});y(this,Bp);y(this,Nc);y(this,oA);y(this,rA);y(this,aA);y(this,Hp);y(this,Hs);y(this,lA);y(this,Ic);y(this,Ha);y(this,uA);y(this,cA);y(this,hA);y(this,xc,null);y(this,Pp,0);y(this,Os,void 0);y(this,Oa,null);y(this,kp,null);y(this,rn,null);y(this,Up,null);y(this,Fp,0);y(this,Ba,null);y(this,Xn,null);y(this,xn,null);y(this,we,!1);y(this,Rc,null);y(this,Bs,void 0);y(this,Fe,null);y(this,Dc,"");y(this,Jn,void 0);y(this,Op,"");this.color=e.color||lt._defaultColor,S(this,Jn,e.thickness||lt._defaultThickness),S(this,Bs,e.opacity||lt._defaultOpacity),S(this,Os,e.boxes||null),S(this,Op,e.methodOfCreation||""),S(this,Dc,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(S(this,we,!0),b(this,Nc,Lm).call(this,e),b(this,Hs,Lr).call(this)):d(this,Os)&&(S(this,xc,e.anchorNode),S(this,Pp,e.anchorOffset),S(this,Up,e.focusNode),S(this,Fp,e.focusOffset),b(this,Bp,QS).call(this),b(this,Hs,Lr).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const e=lt.prototype;return st(this,"_keyboardManager",new Sg([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:d(this,we)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:d(this,Jn),methodOfCreation:d(this,Op)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,i){var s;_t.initialize(e,i),lt._defaultColor||(lt._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(e,i){switch(e){case ot.HIGHLIGHT_DEFAULT_COLOR:lt._defaultColor=i;break;case ot.HIGHLIGHT_THICKNESS:lt._defaultThickness=i;break}}translateInPage(e,i){}get toolbarPosition(){return d(this,Rc)}updateParams(e,i){switch(e){case ot.HIGHLIGHT_COLOR:b(this,oA,dN).call(this,i);break;case ot.HIGHLIGHT_THICKNESS:b(this,rA,hN).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[ot.HIGHLIGHT_DEFAULT_COLOR,lt._defaultColor],[ot.HIGHLIGHT_THICKNESS,lt._defaultThickness]]}get propertiesToUpdate(){return[[ot.HIGHLIGHT_COLOR,this.color||lt._defaultColor],[ot.HIGHLIGHT_THICKNESS,d(this,Jn)||lt._defaultThickness],[ot.HIGHLIGHT_FREE,d(this,we)]]}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",S(this,kp,new Dy({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(b(this,Ha,td).call(this))}getBaseTranslation(){return[0,0]}getRect(e,i){return super.getRect(e,i,b(this,Ha,td).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){b(this,Hp,ZS).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,Hs,Lr).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?b(this,Hp,ZS).call(this):e&&(b(this,Hs,Lr).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),i&&this.select()}rotate(e){var o,r,a;const{drawLayer:i}=this.parent;let s;d(this,we)?(e=(e-this.rotation+360)%360,s=b(o=lt,Jo,Gl).call(o,d(this,Xn).box,e)):s=b(r=lt,Jo,Gl).call(r,[this.x,this.y,this.width,this.height],e),i.updateProperties(d(this,xn),{bbox:s,root:{"data-main-rotation":e}}),i.updateProperties(d(this,Fe),{bbox:b(a=lt,Jo,Gl).call(a,d(this,rn).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();d(this,Dc)&&(e.setAttribute("aria-label",d(this,Dc)),e.setAttribute("role","mark")),d(this,we)?e.classList.add("free"):this.div.addEventListener("keydown",b(this,lA,gN).bind(this),{signal:this._uiManager._signal});const i=S(this,Ba,document.createElement("div"));e.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=d(this,Oa);const[s,o]=this.parentDimensions;return this.setDims(this.width*s,this.height*o),B1(this,d(this,Ba),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(d(this,Fe),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(d(this,Fe),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:b(this,Ic,Pm).call(this,!0);break;case 1:case 3:b(this,Ic,Pm).call(this,!1);break}}select(){var e;super.select(),d(this,Fe)&&((e=this.parent)==null||e.drawLayer.updateProperties(d(this,Fe),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),d(this,Fe)&&((e=this.parent)==null||e.drawLayer.updateProperties(d(this,Fe),{rootClass:{selected:!1}}),d(this,we)||b(this,Ic,Pm).call(this,!1))}get _mustFixPosition(){return!d(this,we)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(d(this,xn),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(d(this,Fe),{rootClass:{hidden:!e}}))}static startHighlighting(e,i,{target:s,x:o,y:r}){const{x:a,y:l,width:u,height:h}=s.getBoundingClientRect(),p=new AbortController,g=e.combinedSignal(p),m=v=>{p.abort(),b(this,dA,AN).call(this,e,v)};window.addEventListener("blur",m,{signal:g}),window.addEventListener("pointerup",m,{signal:g}),window.addEventListener("pointerdown",jt,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",_i,{signal:g}),s.addEventListener("pointermove",b(this,fA,vN).bind(this,e),{signal:g}),this._freeHighlight=new XS({x:o,y:r},[a,l,u,h],e.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,i,s){var A,_,T,E;let o=null;if(e instanceof XD){const{data:{quadPoints:C,rect:w,rotation:M,id:R,color:x,opacity:D,popupRef:N},parent:{page:{pageNumber:P}}}=e;o=e={annotationType:J.HIGHLIGHT,color:Array.from(x),opacity:D,quadPoints:C,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:M,annotationElementId:R,id:R,deleted:!1,popupRef:N}}else if(e instanceof GC){const{data:{inkLists:C,rect:w,rotation:M,id:R,color:x,borderStyle:{rawWidth:D},popupRef:N},parent:{page:{pageNumber:P}}}=e;o=e={annotationType:J.HIGHLIGHT,color:Array.from(x),thickness:D,inkLists:C,boxes:null,pageIndex:P-1,rect:w.slice(0),rotation:M,annotationElementId:R,id:R,deleted:!1,popupRef:N}}const{color:r,quadPoints:a,inkLists:l,opacity:u}=e,h=await super.deserialize(e,i,s);h.color=q.makeHexColor(...r),S(h,Bs,u||1),l&&S(h,Jn,e.thickness),h._initialData=o;const[p,g]=h.pageDimensions,[m,v]=h.pageTranslation;if(a){const C=S(h,Os,[]);for(let w=0;w<a.length;w+=8)C.push({x:(a[w]-m)/p,y:1-(a[w+1]-v)/g,width:(a[w+2]-a[w])/p,height:(a[w+1]-a[w+5])/g});b(A=h,Bp,QS).call(A),b(_=h,Hs,Lr).call(_),h.rotate(h.rotation)}else if(l){S(h,we,!0);const C=l[0],w={x:C[0]-m,y:g-(C[1]-v)},M=new XS(w,[0,0,p,g],1,d(h,Jn)/2,!0,.001);for(let D=0,N=C.length;D<N;D+=2)w.x=C[D]-m,w.y=g-(C[D+1]-v),M.add(w);const{id:R,clipPathId:x}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:M.toSVGPath()}},!0,!0);b(T=h,Nc,Lm).call(T,{highlightOutlines:M.getOutlines(),highlightId:R,clipPathId:x}),b(E=h,Hs,Lr).call(E),h.rotate(h.parentRotation)}return h}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const i=this.getRect(0,0),s=_t._colorManager.convert(this.color),o={annotationType:J.HIGHLIGHT,color:s,opacity:d(this,Bs),thickness:d(this,Jn),quadPoints:b(this,uA,mN).call(this),outlines:b(this,cA,yN).call(this,i),pageIndex:this.pageIndex,rect:i,rotation:b(this,Ha,td).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!b(this,hA,TN).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};xc=new WeakMap,Pp=new WeakMap,Os=new WeakMap,Oa=new WeakMap,kp=new WeakMap,rn=new WeakMap,Up=new WeakMap,Fp=new WeakMap,Ba=new WeakMap,Xn=new WeakMap,xn=new WeakMap,we=new WeakMap,Rc=new WeakMap,Bs=new WeakMap,Fe=new WeakMap,Dc=new WeakMap,Jn=new WeakMap,Op=new WeakMap,Bp=new WeakSet,QS=function(){const e=new $S(d(this,Os),.001);S(this,Xn,e.getOutlines()),[this.x,this.y,this.width,this.height]=d(this,Xn).box;const i=new $S(d(this,Os),.0025,.001,this._uiManager.direction==="ltr");S(this,rn,i.getOutlines());const{lastPoint:s}=d(this,rn);S(this,Rc,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height])},Nc=new WeakSet,Lm=function({highlightOutlines:e,highlightId:i,clipPathId:s}){var p,g;if(S(this,Xn,e),S(this,rn,e.getNewOutline(d(this,Jn)/2+1.5,.0025)),i>=0)S(this,xn,i),S(this,Oa,s),this.parent.drawLayer.finalizeDraw(i,{bbox:e.box,path:{d:e.toSVGPath()}}),S(this,Fe,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:d(this,rn).box,path:{d:d(this,rn).toSVGPath()}},!0));else if(this.parent){const m=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(d(this,xn),{bbox:b(p=lt,Jo,Gl).call(p,d(this,Xn).box,(m-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(d(this,Fe),{bbox:b(g=lt,Jo,Gl).call(g,d(this,rn).box,m),path:{d:d(this,rn).toSVGPath()}})}const[r,a,l,u]=e.box;switch(this.rotation){case 0:this.x=r,this.y=a,this.width=l,this.height=u;break;case 90:{const[m,v]=this.parentDimensions;this.x=a,this.y=1-r,this.width=l*v/m,this.height=u*m/v;break}case 180:this.x=1-r,this.y=1-a,this.width=l,this.height=u;break;case 270:{const[m,v]=this.parentDimensions;this.x=1-a,this.y=r,this.width=l*v/m,this.height=u*m/v;break}}const{lastPoint:h}=d(this,rn);S(this,Rc,[(h[0]-r)/l,(h[1]-a)/u])},oA=new WeakSet,dN=function(e){const i=(r,a)=>{var l,u;this.color=r,S(this,Bs,a),(l=this.parent)==null||l.drawLayer.updateProperties(d(this,xn),{root:{fill:r,"fill-opacity":a}}),(u=d(this,kp))==null||u.updateColor(r)},s=this.color,o=d(this,Bs);this.addCommands({cmd:i.bind(this,e,lt._defaultOpacity),undo:i.bind(this,s,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},rA=new WeakSet,hN=function(e){const i=d(this,Jn),s=o=>{S(this,Jn,o),b(this,aA,pN).call(this,o)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ot.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},aA=new WeakSet,pN=function(e){if(!d(this,we))return;b(this,Nc,Lm).call(this,{highlightOutlines:d(this,Xn).getNewOutline(e/2)}),this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)},Hp=new WeakSet,ZS=function(){d(this,xn)===null||!this.parent||(this.parent.drawLayer.remove(d(this,xn)),S(this,xn,null),this.parent.drawLayer.remove(d(this,Fe)),S(this,Fe,null))},Hs=new WeakSet,Lr=function(e=this.parent){d(this,xn)===null&&({id:Ge(this,xn)._,clipPathId:Ge(this,Oa)._}=e.drawLayer.draw({bbox:d(this,Xn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":d(this,Bs)},rootClass:{highlight:!0,free:d(this,we)},path:{d:d(this,Xn).toSVGPath()}},!1,!0),S(this,Fe,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:d(this,we)},bbox:d(this,rn).box,path:{d:d(this,rn).toSVGPath()}},d(this,we))),d(this,Ba)&&(d(this,Ba).style.clipPath=d(this,Oa)))},Jo=new WeakSet,Gl=function([e,i,s,o],r){switch(r){case 90:return[1-i-o,e,o,s];case 180:return[1-e-s,1-i-o,s,o];case 270:return[i,1-e-s,o,s]}return[e,i,s,o]},lA=new WeakSet,gN=function(e){lt._keyboardManager.exec(this,e)},Ic=new WeakSet,Pm=function(e){if(!d(this,xc))return;const i=window.getSelection();e?i.setPosition(d(this,xc),d(this,Pp)):i.setPosition(d(this,Up),d(this,Fp))},Ha=new WeakSet,td=function(){return d(this,we)?this.rotation:0},uA=new WeakSet,mN=function(){if(d(this,we))return null;const[e,i]=this.pageDimensions,[s,o]=this.pageTranslation,r=d(this,Os),a=new Float32Array(r.length*8);let l=0;for(const{x:u,y:h,width:p,height:g}of r){const m=u*e+s,v=(1-h)*i+o;a[l]=a[l+4]=m,a[l+1]=a[l+3]=v,a[l+2]=a[l+6]=m+p*e,a[l+5]=a[l+7]=v-g*i,l+=8}return a},cA=new WeakSet,yN=function(e){return d(this,Xn).serialize(e,b(this,Ha,td).call(this))},fA=new WeakSet,vN=function(e,i){this._freeHighlight.add(i)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},dA=new WeakSet,AN=function(e,i){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},hA=new WeakSet,TN=function(e){const{color:i}=this._initialData;return e.color.some((s,o)=>s!==i[o])},y(lt,Jo),y(lt,fA),y(lt,dA),O(lt,"_defaultColor",null),O(lt,"_defaultOpacity",1),O(lt,"_defaultThickness",12),O(lt,"_type","highlight"),O(lt,"_editorType",J.HIGHLIGHT),O(lt,"_freeHighlightId",-1),O(lt,"_freeHighlight",null),O(lt,"_freeHighlightClipId","");let Ny=lt;var Va;class SN{constructor(){y(this,Va,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,i]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,i)}updateSVGProperty(t,e){d(this,Va)[t]=e}toSVGProperties(){const t=d(this,Va);return S(this,Va,Object.create(null)),{root:t}}reset(){S(this,Va,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){Tt("Not implemented")}}Va=new WeakMap;var Rn,Lc,he,Ga,qa,Ko,Wo,Qo,za,Vp,jS,Gp,tE,qp,eE,$a,ed,pA,EN,Pc,km,Ya,nd,Zo,ql;const H=class H extends _t{constructor(e){super(e);y(this,Vp);y(this,Gp);y(this,qp);y(this,$a);y(this,pA);y(this,Pc);y(this,Ya);y(this,Zo);y(this,Rn,null);y(this,Lc,void 0);O(this,"_drawId",null);S(this,Lc,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(b(this,Vp,jS).call(this,e),b(this,$a,ed).call(this))}static _mergeSVGProperties(e,i){const s=new Set(Object.keys(e));for(const[o,r]of Object.entries(i))s.has(o)?Object.assign(e[o],r):e[o]=r;return e}static getDefaultDrawingOptions(e){Tt("Not implemented")}static get typesMap(){Tt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,i){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(d(H,he).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,i){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,i)}static get defaultPropertiesToUpdate(){const e=[],i=this._defaultDrawingOptions;for(const[s,o]of this.typesMap)e.push([s,i[o]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:i}=this;for(const[s,o]of this.constructor.typesMap)e.push([s,i[o]]);return e}_updateProperty(e,i,s){const o=this._drawingOptions,r=o[i],a=l=>{var h;o.updateProperty(i,l);const u=d(this,Rn).updateProperty(i,l);u&&b(this,Ya,nd).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,o.toSVGProperties())};this.addCommands({cmd:a.bind(this,s),undo:a.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(d(this,Rn).getPathResizingSVGProperties(b(this,Pc,km).call(this)),{bbox:b(this,Zo,ql).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(d(this,Rn).getPathResizedSVGProperties(b(this,Pc,km).call(this)),{bbox:b(this,Zo,ql).call(this)}))}_onTranslating(e,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:b(this,Zo,ql).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties(d(this,Rn).getPathTranslatedSVGProperties(b(this,Pc,km).call(this),this.parentDimensions),{bbox:b(this,Zo,ql).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,d(this,Lc)&&(S(this,Lc,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){b(this,qp,eE).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(b(this,$a,ed).call(this),b(this,Ya,nd).call(this,d(this,Rn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var s;let i=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),b(this,qp,eE).call(this)):e&&(this._uiManager.addShouldRescale(this),b(this,$a,ed).call(this,e),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(e),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,H._mergeSVGProperties({bbox:b(this,Zo,ql).call(this)},d(this,Rn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&b(this,Ya,nd).call(this,d(this,Rn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,i;this._isCopy&&(e=this.x,i=this.y);const s=super.render();s.classList.add("draw");const o=document.createElement("div");s.append(o),o.setAttribute("aria-hidden","true"),o.className="internal";const[r,a]=this.parentDimensions;return this.setDims(this.width*r,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,i),s}static createDrawerInstance(e,i,s,o,r){Tt("Not implemented")}static startDrawing(e,i,s,o){var _;const{target:r,offsetX:a,offsetY:l,pointerId:u,pointerType:h}=o;if(d(H,Wo)&&d(H,Wo)!==h)return;const{viewport:{rotation:p}}=e,{width:g,height:m}=r.getBoundingClientRect(),v=S(H,Ga,new AbortController),A=e.combinedSignal(v);if(d(H,Ko)||S(H,Ko,u),d(H,Wo)??S(H,Wo,h),window.addEventListener("pointerup",T=>{var E;d(H,Ko)===T.pointerId?this._endDraw(T):(E=d(H,Qo))==null||E.delete(T.pointerId)},{signal:A}),window.addEventListener("pointercancel",T=>{var E;d(H,Ko)===T.pointerId?this._currentParent.endDrawingSession():(E=d(H,Qo))==null||E.delete(T.pointerId)},{signal:A}),window.addEventListener("pointerdown",T=>{d(H,Wo)===T.pointerType&&((d(H,Qo)||S(H,Qo,new Set)).add(T.pointerId),d(H,he).isCancellable()&&(d(H,he).removeLastElement(),d(H,he).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:A}),window.addEventListener("contextmenu",_i,{signal:A}),r.addEventListener("pointermove",this._drawMove.bind(this),{signal:A}),r.addEventListener("touchmove",T=>{T.timeStamp===d(H,za)&&jt(T)},{signal:A}),e.toggleDrawing(),(_=i._editorUndoBar)==null||_.hide(),d(H,he)){e.drawLayer.updateProperties(this._currentDrawId,d(H,he).startNew(a,l,g,m,p));return}i.updateUIForDefaultProperties(this),S(H,he,this.createDrawerInstance(a,l,g,m,p)),S(H,qa,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(d(H,qa).toSVGProperties(),d(H,he).defaultSVGProperties),!0,!1)}static _drawMove(e){var r;if(S(H,za,-1),!d(H,he))return;const{offsetX:i,offsetY:s,pointerId:o}=e;if(d(H,Ko)===o){if(((r=d(H,Qo))==null?void 0:r.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,d(H,he).add(i,s)),S(H,za,e.timeStamp),jt(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,S(H,he,null),S(H,qa,null),S(H,Wo,null),S(H,za,NaN)),d(H,Ga)&&(d(H,Ga).abort(),S(H,Ga,null),S(H,Ko,NaN),S(H,Qo,null))}static _endDraw(e){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,d(H,he).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=d(H,he),o=this._currentDrawId,r=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(o,s.setLastElement(r))},undo:()=>{i.drawLayer.updateProperties(o,s.removeLastElement())},mustExec:!1,type:ot.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(ot.DRAW_STEP),!d(H,he).isEmpty()){const{pageDimensions:[s,o],scale:r}=i,a=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:d(H,he).getOutlines(s*r,o*r,r,this._INNER_MARGIN),drawingOptions:d(H,qa),mustBeCommitted:!e});return this._cleanup(!0),a}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,i,s,o,r,a){Tt("Not implemented")}static async deserialize(e,i,s){var p,g;const{rawDims:{pageWidth:o,pageHeight:r,pageX:a,pageY:l}}=i.viewport,u=this.deserializeDraw(a,l,o,r,this._INNER_MARGIN,e),h=await super.deserialize(e,i,s);return h.createDrawingOptions(e),b(p=h,Vp,jS).call(p,{drawOutlines:u}),b(g=h,$a,ed).call(g),h.onScaleChanging(),h.rotate(),h}serializeDraw(e){const[i,s]=this.pageTranslation,[o,r]=this.pageDimensions;return d(this,Rn).serialize([i,s,o,r],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Rn=new WeakMap,Lc=new WeakMap,he=new WeakMap,Ga=new WeakMap,qa=new WeakMap,Ko=new WeakMap,Wo=new WeakMap,Qo=new WeakMap,za=new WeakMap,Vp=new WeakSet,jS=function({drawOutlines:e,drawId:i,drawingOptions:s}){S(this,Rn,e),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,e.defaultProperties)):this._drawId=b(this,Gp,tE).call(this,e,this.parent),b(this,Ya,nd).call(this,e.box)},Gp=new WeakSet,tE=function(e,i){const{id:s}=i.drawLayer.draw(H._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s},qp=new WeakSet,eE=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},$a=new WeakSet,ed=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=b(this,Gp,tE).call(this,d(this,Rn),e)}},pA=new WeakSet,EN=function([e,i,s,o]){const{parentDimensions:[r,a],rotation:l}=this;switch(l){case 90:return[i,1-e,s*(a/r),o*(r/a)];case 180:return[1-e,1-i,s,o];case 270:return[1-i,e,s*(a/r),o*(r/a)];default:return[e,i,s,o]}},Pc=new WeakSet,km=function(){const{x:e,y:i,width:s,height:o,parentDimensions:[r,a],rotation:l}=this;switch(l){case 90:return[1-i,e,s*(r/a),o*(a/r)];case 180:return[1-e,1-i,s,o];case 270:return[i,1-e,s*(r/a),o*(a/r)];default:return[e,i,s,o]}},Ya=new WeakSet,nd=function(e){if([this.x,this.y,this.width,this.height]=b(this,pA,EN).call(this,e),this.div){this.fixAndSetPosition();const[i,s]=this.parentDimensions;this.setDims(this.width*i,this.height*s)}this._onResized()},Zo=new WeakSet,ql=function(){const{x:e,y:i,width:s,height:o,rotation:r,parentRotation:a,parentDimensions:[l,u]}=this;switch((r*4+a)/90){case 1:return[1-i-o,e,o,s];case 2:return[1-e-s,1-i-o,s,o];case 3:return[i,1-e-s,o,s];case 4:return[e,i-s*(l/u),o*(u/l),s*(l/u)];case 5:return[1-i,e,s*(l/u),o*(u/l)];case 6:return[1-e-o*(u/l),1-i,o*(u/l),s*(l/u)];case 7:return[i-s*(l/u),1-e-o*(u/l),s*(l/u),o*(u/l)];case 8:return[e-s,i-o,s,o];case 9:return[1-i,e-s,o,s];case 10:return[1-e,1-i,s,o];case 11:return[i-o,1-e,o,s];case 12:return[e-o*(u/l),i,o*(u/l),s*(l/u)];case 13:return[1-i-s*(l/u),e-o*(u/l),s*(l/u),o*(u/l)];case 14:return[1-e,1-i-s*(l/u),o*(u/l),s*(l/u)];case 15:return[i,1-e,s*(l/u),o*(u/l)];default:return[e,i,s,o]}},O(H,"_currentDrawId",-1),O(H,"_currentParent",null),y(H,he,null),y(H,Ga,null),y(H,qa,null),y(H,Ko,NaN),y(H,Wo,null),y(H,Qo,null),y(H,za,NaN),O(H,"_INNER_MARGIN",3);let Iy=H;var zi,pe,ge,Xa,kc,$e,Me,Kn,Ja,Ka,Wa,Uc,Um;class UU{constructor(t,e,i,s,o,r){y(this,Uc);y(this,zi,new Float64Array(6));y(this,pe,void 0);y(this,ge,void 0);y(this,Xa,void 0);y(this,kc,void 0);y(this,$e,void 0);y(this,Me,"");y(this,Kn,0);y(this,Ja,new Cg);y(this,Ka,void 0);y(this,Wa,void 0);S(this,Ka,i),S(this,Wa,s),S(this,Xa,o),S(this,kc,r),[t,e]=b(this,Uc,Um).call(this,t,e);const a=S(this,pe,[NaN,NaN,NaN,NaN,t,e]);S(this,$e,[t,e]),S(this,ge,[{line:a,points:d(this,$e)}]),d(this,zi).set(a,0)}updateProperty(t,e){t==="stroke-width"&&S(this,kc,e)}isEmpty(){return!d(this,ge)||d(this,ge).length===0}isCancellable(){return d(this,$e).length<=10}add(t,e){[t,e]=b(this,Uc,Um).call(this,t,e);const[i,s,o,r]=d(this,zi).subarray(2,6),a=t-o,l=e-r;return Math.hypot(d(this,Ka)*a,d(this,Wa)*l)<=2?null:(d(this,$e).push(t,e),isNaN(i)?(d(this,zi).set([o,r,t,e],2),d(this,pe).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(d(this,zi)[0])&&d(this,pe).splice(6,6),d(this,zi).set([i,s,o,r,t,e],0),d(this,pe).push(...B.createBezierPoints(i,s,o,r,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const i=this.add(t,e);return i||(d(this,$e).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,i,s,o){S(this,Ka,i),S(this,Wa,s),S(this,Xa,o),[t,e]=b(this,Uc,Um).call(this,t,e);const r=S(this,pe,[NaN,NaN,NaN,NaN,t,e]);S(this,$e,[t,e]);const a=d(this,ge).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),d(this,ge).push({line:r,points:d(this,$e)}),d(this,zi).set(r,0),S(this,Kn,0),this.toSVGPath(),null}getLastElement(){return d(this,ge).at(-1)}setLastElement(t){return d(this,ge)?(d(this,ge).push(t),S(this,pe,t.line),S(this,$e,t.points),S(this,Kn,0),{path:{d:this.toSVGPath()}}):d(this,Ja).setLastElement(t)}removeLastElement(){if(!d(this,ge))return d(this,Ja).removeLastElement();d(this,ge).pop(),S(this,Me,"");for(let t=0,e=d(this,ge).length;t<e;t++){const{line:i,points:s}=d(this,ge)[t];S(this,pe,i),S(this,$e,s),S(this,Kn,0),this.toSVGPath()}return{path:{d:d(this,Me)}}}toSVGPath(){const t=B.svgRound(d(this,pe)[4]),e=B.svgRound(d(this,pe)[5]);if(d(this,$e).length===2)return S(this,Me,`${d(this,Me)} M ${t} ${e} Z`),d(this,Me);if(d(this,$e).length<=6){const s=d(this,Me).lastIndexOf("M");S(this,Me,`${d(this,Me).slice(0,s)} M ${t} ${e}`),S(this,Kn,6)}if(d(this,$e).length===4){const s=B.svgRound(d(this,pe)[10]),o=B.svgRound(d(this,pe)[11]);return S(this,Me,`${d(this,Me)} L ${s} ${o}`),S(this,Kn,12),d(this,Me)}const i=[];d(this,Kn)===0&&(i.push(`M ${t} ${e}`),S(this,Kn,6));for(let s=d(this,Kn),o=d(this,pe).length;s<o;s+=6){const[r,a,l,u,h,p]=d(this,pe).slice(s,s+6).map(B.svgRound);i.push(`C${r} ${a} ${l} ${u} ${h} ${p}`)}return S(this,Me,d(this,Me)+i.join(" ")),S(this,Kn,d(this,pe).length),d(this,Me)}getOutlines(t,e,i,s){const o=d(this,ge).at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),d(this,Ja).build(d(this,ge),t,e,i,d(this,Xa),d(this,kc),s),S(this,zi,null),S(this,pe,null),S(this,ge,null),S(this,Me,null),d(this,Ja)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}zi=new WeakMap,pe=new WeakMap,ge=new WeakMap,Xa=new WeakMap,kc=new WeakMap,$e=new WeakMap,Me=new WeakMap,Kn=new WeakMap,Ja=new WeakMap,Ka=new WeakMap,Wa=new WeakMap,Uc=new WeakSet,Um=function(t,e){return B._normalizePoint(t,e,d(this,Ka),d(this,Wa),d(this,Xa))};var Ye,zp,$p,Dn,$i,Yi,Fc,Oc,Qa,vi,cs,gA,CN,mA,_N,yA,bN;class Cg extends B{constructor(){super(...arguments);y(this,vi);y(this,gA);y(this,mA);y(this,yA);y(this,Ye,void 0);y(this,zp,0);y(this,$p,void 0);y(this,Dn,void 0);y(this,$i,void 0);y(this,Yi,void 0);y(this,Fc,void 0);y(this,Oc,void 0);y(this,Qa,void 0)}build(e,i,s,o,r,a,l){S(this,$i,i),S(this,Yi,s),S(this,Fc,o),S(this,Oc,r),S(this,Qa,a),S(this,$p,l??0),S(this,Dn,e),b(this,mA,_N).call(this)}get thickness(){return d(this,Qa)}setLastElement(e){return d(this,Dn).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return d(this,Dn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:i}of d(this,Dn)){if(e.push(`M${B.svgRound(i[4])} ${B.svgRound(i[5])}`),i.length===6){e.push("Z");continue}if(i.length===12&&isNaN(i[6])){e.push(`L${B.svgRound(i[10])} ${B.svgRound(i[11])}`);continue}for(let s=6,o=i.length;s<o;s+=6){const[r,a,l,u,h,p]=i.subarray(s,s+6).map(B.svgRound);e.push(`C${r} ${a} ${l} ${u} ${h} ${p}`)}}return e.join("")}serialize([e,i,s,o],r){const a=[],l=[],[u,h,p,g]=b(this,gA,CN).call(this);let m,v,A,_,T,E,C,w,M;switch(d(this,Oc)){case 0:M=B._rescale,m=e,v=i+o,A=s,_=-o,T=e+u*s,E=i+(1-h-g)*o,C=e+(u+p)*s,w=i+(1-h)*o;break;case 90:M=B._rescaleAndSwap,m=e,v=i,A=s,_=o,T=e+h*s,E=i+u*o,C=e+(h+g)*s,w=i+(u+p)*o;break;case 180:M=B._rescale,m=e+s,v=i,A=-s,_=o,T=e+(1-u-p)*s,E=i+h*o,C=e+(1-u)*s,w=i+(h+g)*o;break;case 270:M=B._rescaleAndSwap,m=e+s,v=i+o,A=-s,_=-o,T=e+(1-h-g)*s,E=i+(1-u-p)*o,C=e+(1-h)*s,w=i+(1-u)*o;break}for(const{line:R,points:x}of d(this,Dn))a.push(M(R,m,v,A,_,r?new Array(R.length):null)),l.push(M(x,m,v,A,_,r?new Array(x.length):null));return{lines:a,points:l,rect:[T,E,C,w]}}static deserialize(e,i,s,o,r,{paths:{lines:a,points:l},rotation:u,thickness:h}){const p=[];let g,m,v,A,_;switch(u){case 0:_=B._rescale,g=-e/s,m=i/o+1,v=1/s,A=-1/o;break;case 90:_=B._rescaleAndSwap,g=-i/o,m=-e/s,v=1/o,A=1/s;break;case 180:_=B._rescale,g=e/s+1,m=-i/o,v=-1/s,A=1/o;break;case 270:_=B._rescaleAndSwap,g=i/o+1,m=e/s+1,v=-1/o,A=-1/s;break}if(!a){a=[];for(const E of l){const C=E.length;if(C===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(C===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const w=new Float32Array(3*(C-2));a.push(w);let[M,R,x,D]=E.subarray(0,4);w.set([NaN,NaN,NaN,NaN,M,R],0);for(let N=4;N<C;N+=2){const P=E[N],U=E[N+1];w.set(B.createBezierPoints(M,R,x,D,P,U),(N-2)*3),[M,R,x,D]=[x,D,P,U]}}}for(let E=0,C=a.length;E<C;E++)p.push({line:_(a[E].map(w=>w??NaN),g,m,v,A),points:_(l[E].map(w=>w??NaN),g,m,v,A)});const T=new this.prototype.constructor;return T.build(p,s,o,1,u,h,r),T}get box(){return d(this,Ye)}updateProperty(e,i){return e==="stroke-width"?b(this,yA,bN).call(this,i):null}updateParentDimensions([e,i],s){const[o,r]=b(this,vi,cs).call(this);S(this,$i,e),S(this,Yi,i),S(this,Fc,s);const[a,l]=b(this,vi,cs).call(this),u=a-o,h=l-r,p=d(this,Ye);return p[0]-=u,p[1]-=h,p[2]+=2*u,p[3]+=2*h,p}updateRotation(e){return S(this,zp,e),{path:{transform:this.rotationTransform}}}get viewBox(){return d(this,Ye).map(B.svgRound).join(" ")}get defaultProperties(){const[e,i]=d(this,Ye);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`}}}get rotationTransform(){const[,,e,i]=d(this,Ye);let s=0,o=0,r=0,a=0,l=0,u=0;switch(d(this,zp)){case 90:o=i/e,r=-e/i,l=e;break;case 180:s=-1,a=-1,l=e,u=i;break;case 270:o=-i/e,r=e/i,u=i;break;default:return""}return`matrix(${s} ${o} ${r} ${a} ${B.svgRound(l)} ${B.svgRound(u)})`}getPathResizingSVGProperties([e,i,s,o]){const[r,a]=b(this,vi,cs).call(this),[l,u,h,p]=d(this,Ye);if(Math.abs(h-r)<=B.PRECISION||Math.abs(p-a)<=B.PRECISION){const _=e+s/2-(l+h/2),T=i+o/2-(u+p/2);return{path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`,transform:`${this.rotationTransform} translate(${_} ${T})`}}}const g=(s-2*r)/(h-2*r),m=(o-2*a)/(p-2*a),v=h/s,A=p/o;return{path:{"transform-origin":`${B.svgRound(l)} ${B.svgRound(u)}`,transform:`${this.rotationTransform} scale(${v} ${A}) translate(${B.svgRound(r)} ${B.svgRound(a)}) scale(${g} ${m}) translate(${B.svgRound(-r)} ${B.svgRound(-a)})`}}}getPathResizedSVGProperties([e,i,s,o]){const[r,a]=b(this,vi,cs).call(this),l=d(this,Ye),[u,h,p,g]=l;if(l[0]=e,l[1]=i,l[2]=s,l[3]=o,Math.abs(p-r)<=B.PRECISION||Math.abs(g-a)<=B.PRECISION){const T=e+s/2-(u+p/2),E=i+o/2-(h+g/2);for(const{line:C,points:w}of d(this,Dn))B._translate(C,T,E,C),B._translate(w,T,E,w);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(s-2*r)/(p-2*r),v=(o-2*a)/(g-2*a),A=-m*(u+r)+e+r,_=-v*(h+a)+i+a;if(m!==1||v!==1||A!==0||_!==0)for(const{line:T,points:E}of d(this,Dn))B._rescale(T,A,_,m,v,T),B._rescale(E,A,_,m,v,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,i],s){const[o,r]=s,a=d(this,Ye),l=e-a[0],u=i-a[1];if(d(this,$i)===o&&d(this,Yi)===r)for(const{line:h,points:p}of d(this,Dn))B._translate(h,l,u,h),B._translate(p,l,u,p);else{const h=d(this,$i)/o,p=d(this,Yi)/r;S(this,$i,o),S(this,Yi,r);for(const{line:g,points:m}of d(this,Dn))B._rescale(g,l,u,h,p,g),B._rescale(m,l,u,h,p,m);a[2]*=h,a[3]*=p}return a[0]=e,a[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(e)} ${B.svgRound(i)}`}}}get defaultSVGProperties(){const e=d(this,Ye);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${B.svgRound(e[0])} ${B.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}Ye=new WeakMap,zp=new WeakMap,$p=new WeakMap,Dn=new WeakMap,$i=new WeakMap,Yi=new WeakMap,Fc=new WeakMap,Oc=new WeakMap,Qa=new WeakMap,vi=new WeakSet,cs=function(e=d(this,Qa)){const i=d(this,$p)+e/2*d(this,Fc);return d(this,Oc)%180===0?[i/d(this,$i),i/d(this,Yi)]:[i/d(this,Yi),i/d(this,$i)]},gA=new WeakSet,CN=function(){const[e,i,s,o]=d(this,Ye),[r,a]=b(this,vi,cs).call(this,0);return[e+r,i+a,s-2*r,o-2*a]},mA=new WeakSet,_N=function(){const e=S(this,Ye,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:o}of d(this,Dn)){if(o.length<=12){for(let l=4,u=o.length;l<u;l+=6)q.pointBoundingBox(o[l],o[l+1],e);continue}let r=o[4],a=o[5];for(let l=6,u=o.length;l<u;l+=6){const[h,p,g,m,v,A]=o.subarray(l,l+6);q.bezierBoundingBox(r,a,h,p,g,m,v,A,e),r=v,a=A}}const[i,s]=b(this,vi,cs).call(this);e[0]=Ke(e[0]-i,0,1),e[1]=Ke(e[1]-s,0,1),e[2]=Ke(e[2]+i,0,1),e[3]=Ke(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]},yA=new WeakSet,bN=function(e){const[i,s]=b(this,vi,cs).call(this);S(this,Qa,e);const[o,r]=b(this,vi,cs).call(this),[a,l]=[o-i,r-s],u=d(this,Ye);return u[0]-=a,u[1]-=l,u[2]+=2*a,u[3]+=2*l,u};class ZA extends SN{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:_t._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new ZA(this._viewParameters);return t.updateAll(this),t}}var vA,wN;const ou=class ou extends Iy{constructor(e){super({...e,name:"inkEditor"});y(this,vA);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,i){_t.initialize(e,i),this._defaultDrawingOptions=new ZA(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return st(this,"typesMap",new Map([[ot.INK_THICKNESS,"stroke-width"],[ot.INK_COLOR,"stroke"],[ot.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,i,s,o,r){return new UU(e,i,s,o,r,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,i,s,o,r,a){return Cg.deserialize(e,i,s,o,r,a)}static async deserialize(e,i,s){let o=null;if(e instanceof GC){const{data:{inkLists:a,rect:l,rotation:u,id:h,color:p,opacity:g,borderStyle:{rawWidth:m},popupRef:v},parent:{page:{pageNumber:A}}}=e;o=e={annotationType:J.INK,color:Array.from(p),thickness:m,opacity:g,paths:{points:a},boxes:null,pageIndex:A-1,rect:l.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:v}}const r=await super.deserialize(e,i,s);return r._initialData=o,r}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:i,opacity:s}){this._drawingOptions=ou.getDefaultDrawingOptions({stroke:q.makeHexColor(...e),"stroke-width":i,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s,rect:o}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":a,"stroke-width":l}}=this,u={annotationType:J.INK,color:_t._colorManager.convert(r),opacity:a,thickness:l,paths:{lines:i,points:s},pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(u.isCopy=!0,u):this.annotationElementId&&!b(this,vA,wN).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(e){const{points:i,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i}),null}};vA=new WeakSet,wN=function(e){const{color:i,thickness:s,opacity:o,pageIndex:r}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,l)=>a!==i[l])||e.thickness!==s||e.opacity!==o||e.pageIndex!==r},O(ou,"_type","ink"),O(ou,"_editorType",J.INK),O(ou,"_defaultDrawingOptions",null);let nE=ou;class iE extends Cg{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Wg=8,Lf=3;var Za,Yp,sE,Ai,AA,MN,TA,xN,Xp,oE,Bc,Fm,SA,RN,EA,DN,CA,NN,Jp,rE,Kp,aE,_A,IN;class re{static extractContoursFromText(t,{fontFamily:e,fontStyle:i,fontWeight:s},o,r,a,l){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const p=200,g=h.font=`${i} ${s} ${p}px ${e}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:v,actualBoundingBoxAscent:A,actualBoundingBoxDescent:_,fontBoundingBoxAscent:T,fontBoundingBoxDescent:E,width:C}=h.measureText(t),w=1.5,M=Math.ceil(Math.max(Math.abs(m)+Math.abs(v)||0,C)*w),R=Math.ceil(Math.max(Math.abs(A)+Math.abs(_)||p,Math.abs(T)+Math.abs(E)||p)*w);u=new OffscreenCanvas(M,R),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=g,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,M,R),h.fillStyle="black",h.fillText(t,M*(w-1)/2,R*(3-w)/2);const x=b(this,Jp,rE).call(this,h.getImageData(0,0,M,R).data),D=b(this,CA,NN).call(this,x),N=b(this,Kp,aE).call(this,D),P=b(this,Xp,oE).call(this,x,M,R,N);return this.processDrawnLines({lines:{curves:P,width:M,height:R},pageWidth:o,pageHeight:r,rotation:a,innerMargin:l,mustSmooth:!0,areContours:!0})}static process(t,e,i,s,o){const[r,a,l]=b(this,_A,IN).call(this,t),[u,h]=b(this,EA,DN).call(this,r,a,l,Math.hypot(a,l)*d(this,Za).sigmaSFactor,d(this,Za).sigmaR,d(this,Za).kernelSize),p=b(this,Kp,aE).call(this,h),g=b(this,Xp,oE).call(this,u,a,l,p);return this.processDrawnLines({lines:{curves:g,width:a,height:l},pageWidth:e,pageHeight:i,rotation:s,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:i,rotation:s,innerMargin:o,mustSmooth:r,areContours:a}){s%180!==0&&([e,i]=[i,e]);const{curves:l,width:u,height:h}=t,p=t.thickness??0,g=[],m=Math.min(e/u,i/h),v=m/e,A=m/i,_=[];for(const{points:E}of l){const C=r?b(this,SA,RN).call(this,E):E;if(!C)continue;_.push(C);const w=C.length,M=new Float32Array(w),R=new Float32Array(3*(w===2?2:w-2));if(g.push({line:R,points:M}),w===2){M[0]=C[0]*v,M[1]=C[1]*A,R.set([NaN,NaN,NaN,NaN,M[0],M[1]],0);continue}let[x,D,N,P]=C;x*=v,D*=A,N*=v,P*=A,M.set([x,D,N,P],0),R.set([NaN,NaN,NaN,NaN,x,D],0);for(let U=4;U<w;U+=2){const Y=M[U]=C[U]*v,rt=M[U+1]=C[U+1]*A;R.set(B.createBezierPoints(x,D,N,P,Y,rt),(U-2)*3),[x,D,N,P]=[N,P,Y,rt]}}if(g.length===0)return null;const T=a?new iE:new Cg;return T.build(g,e,i,1,s,a?0:p,o),{outline:T,newCurves:_,areContours:a,thickness:p,width:u,height:h}}static async compressSignature({outlines:t,areContours:e,thickness:i,width:s,height:o}){let r=1/0,a=-1/0,l=0;for(const C of t){l+=C.length;for(let w=2,M=C.length;w<M;w++){const R=C[w]-C[w-2];r=Math.min(r,R),a=Math.max(a,R)}}let u;r>=-128&&a<=127?u=Int8Array:r>=-32768&&a<=32767?u=Int16Array:u=Int32Array;const h=t.length,p=Wg+Lf*h,g=new Uint32Array(p);let m=0;g[m++]=p*Uint32Array.BYTES_PER_ELEMENT+(l-2*h)*u.BYTES_PER_ELEMENT,g[m++]=0,g[m++]=s,g[m++]=o,g[m++]=e?0:1,g[m++]=Math.max(0,Math.floor(i??0)),g[m++]=h,g[m++]=u.BYTES_PER_ELEMENT;for(const C of t)g[m++]=C.length-2,g[m++]=C[0],g[m++]=C[1];const v=new CompressionStream("deflate-raw"),A=v.writable.getWriter();await A.ready,A.write(g);const _=u.prototype.constructor;for(const C of t){const w=new _(C.length-2);for(let M=2,R=C.length;M<R;M++)w[M-2]=C[M]-C[M-2];A.write(w)}A.close();const T=await new Response(v.readable).arrayBuffer(),E=new Uint8Array(T);return I1(E)}static async decompressSignature(t){try{const e=rk(t),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),o=s.getWriter();await o.ready,o.write(e).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let r=null,a=0;for await(const C of i)r||(r=new Uint8Array(new Uint32Array(C.buffer,0,4)[0])),r.set(C,a),a+=C.length;const l=new Uint32Array(r.buffer,0,r.length>>2),u=l[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=l[2],p=l[3],g=l[4]===0,m=l[5],v=l[6],A=l[7],_=[],T=(Wg+Lf*v)*Uint32Array.BYTES_PER_ELEMENT;let E;switch(A){case Int8Array.BYTES_PER_ELEMENT:E=new Int8Array(r.buffer,T);break;case Int16Array.BYTES_PER_ELEMENT:E=new Int16Array(r.buffer,T);break;case Int32Array.BYTES_PER_ELEMENT:E=new Int32Array(r.buffer,T);break}a=0;for(let C=0;C<v;C++){const w=l[Lf*C+Wg],M=new Float32Array(w+2);_.push(M);for(let R=0;R<Lf-1;R++)M[R]=l[Lf*C+Wg+R+1];for(let R=0;R<w;R++)M[R+2]=M[R]+E[a++]}return{areContours:g,thickness:m,outlines:_,width:h,height:p}}catch(e){return K(`decompressSignature: ${e}`),null}}}Za=new WeakMap,Yp=new WeakSet,sE=function(t,e,i,s){return i-=t,s-=e,i===0?s>0?0:4:i===1?s+6:2-s},Ai=new WeakMap,AA=new WeakSet,MN=function(t,e,i,s,o,r,a){const l=b(this,Yp,sE).call(this,i,s,o,r);for(let u=0;u<8;u++){const h=(-u+l-a+16)%8,p=d(this,Ai)[2*h],g=d(this,Ai)[2*h+1];if(t[(i+p)*e+(s+g)]!==0)return h}return-1},TA=new WeakSet,xN=function(t,e,i,s,o,r,a){const l=b(this,Yp,sE).call(this,i,s,o,r);for(let u=0;u<8;u++){const h=(u+l+a+16)%8,p=d(this,Ai)[2*h],g=d(this,Ai)[2*h+1];if(t[(i+p)*e+(s+g)]!==0)return h}return-1},Xp=new WeakSet,oE=function(t,e,i,s){const o=t.length,r=new Int32Array(o);for(let h=0;h<o;h++)r[h]=t[h]<=s?1:0;for(let h=1;h<i-1;h++)r[h*e]=r[h*e+e-1]=0;for(let h=0;h<e;h++)r[h]=r[e*i-1-h]=0;let a=1,l;const u=[];for(let h=1;h<i-1;h++){l=1;for(let p=1;p<e-1;p++){const g=h*e+p,m=r[g];if(m===0)continue;let v=h,A=p;if(m===1&&r[g-1]===0)a+=1,A-=1;else if(m>=1&&r[g+1]===0)a+=1,A+=1,m>1&&(l=m);else{m!==1&&(l=Math.abs(m));continue}const _=[p,h],T=A===p+1,E={isHole:T,points:_,id:a,parent:0};u.push(E);let C;for(const U of u)if(U.id===l){C=U;break}C?C.isHole?E.parent=T?C.parent:l:E.parent=T?l:C.parent:E.parent=T?l:0;const w=b(this,AA,MN).call(this,r,e,h,p,v,A,0);if(w===-1){r[g]=-a,r[g]!==1&&(l=Math.abs(r[g]));continue}let M=d(this,Ai)[2*w],R=d(this,Ai)[2*w+1];const x=h+M,D=p+R;v=x,A=D;let N=h,P=p;for(;;){const U=b(this,TA,xN).call(this,r,e,N,P,v,A,1);M=d(this,Ai)[2*U],R=d(this,Ai)[2*U+1];const Y=N+M,rt=P+R;_.push(rt,Y);const W=N*e+P;if(r[W+1]===0?r[W]=-a:r[W]===1&&(r[W]=a),Y===h&&rt===p&&N===x&&P===D){r[g]!==1&&(l=Math.abs(r[g]));break}else v=N,A=P,N=Y,P=rt}}}return u},Bc=new WeakSet,Fm=function(t,e,i,s){if(i-e<=4){for(let x=e;x<i-2;x+=2)s.push(t[x],t[x+1]);return}const o=t[e],r=t[e+1],a=t[i-4]-o,l=t[i-3]-r,u=Math.hypot(a,l),h=a/u,p=l/u,g=h*r-p*o,m=l/a,v=1/u,A=Math.atan(m),_=Math.cos(A),T=Math.sin(A),E=v*(Math.abs(_)+Math.abs(T)),C=v*(1-E+E**2),w=Math.max(Math.atan(Math.abs(T+_)*C),Math.atan(Math.abs(T-_)*C));let M=0,R=e;for(let x=e+2;x<i-2;x+=2){const D=Math.abs(g-h*t[x+1]+p*t[x]);D>M&&(R=x,M=D)}M>(u*w)**2?(b(this,Bc,Fm).call(this,t,e,R+2,s),b(this,Bc,Fm).call(this,t,R,i,s)):s.push(o,r)},SA=new WeakSet,RN=function(t){const e=[],i=t.length;return b(this,Bc,Fm).call(this,t,0,i,e),e.push(t[i-2],t[i-1]),e.length<=4?null:e},EA=new WeakSet,DN=function(t,e,i,s,o,r){const a=new Float32Array(r**2),l=-2*s**2,u=r>>1;for(let A=0;A<r;A++){const _=(A-u)**2;for(let T=0;T<r;T++)a[A*r+T]=Math.exp((_+(T-u)**2)/l)}const h=new Float32Array(256),p=-2*o**2;for(let A=0;A<256;A++)h[A]=Math.exp(A**2/p);const g=t.length,m=new Uint8Array(g),v=new Uint32Array(256);for(let A=0;A<i;A++)for(let _=0;_<e;_++){const T=A*e+_,E=t[T];let C=0,w=0;for(let R=0;R<r;R++){const x=A+R-u;if(!(x<0||x>=i))for(let D=0;D<r;D++){const N=_+D-u;if(N<0||N>=e)continue;const P=t[x*e+N],U=a[R*r+D]*h[Math.abs(P-E)];C+=P*U,w+=U}}const M=m[T]=Math.round(C/w);v[M]++}return[m,v]},CA=new WeakSet,NN=function(t){const e=new Uint32Array(256);for(const i of t)e[i]++;return e},Jp=new WeakSet,rE=function(t){const e=t.length,i=new Uint8ClampedArray(e>>2);let s=-1/0,o=1/0;for(let a=0,l=i.length;a<l;a++){if(t[(a<<2)+3]===0){s=i[a]=255;continue}const h=i[a]=t[a<<2];h>s&&(s=h),h<o&&(o=h)}const r=255/(s-o);for(let a=0;a<e;a++)i[a]=(i[a]-o)*r;return i},Kp=new WeakSet,aE=function(t){let e,i=-1/0,s=-1/0;const o=t.findIndex(l=>l!==0);let r=o,a=o;for(e=o;e<256;e++){const l=t[e];l>i&&(e-r>s&&(s=e-r,a=e-1),i=l,r=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},_A=new WeakSet,IN=function(t){const e=t,{width:i,height:s}=t,{maxDim:o}=d(this,Za);let r=i,a=s;if(i>o||s>o){let g=i,m=s,v=Math.log2(Math.max(i,s)/o);const A=Math.floor(v);v=v===A?A-1:A;for(let T=0;T<v;T++){r=Math.ceil(g/2),a=Math.ceil(m/2);const E=new OffscreenCanvas(r,a);E.getContext("2d").drawImage(t,0,0,g,m,0,0,r,a),g=r,m=a,t!==e&&t.close(),t=E.transferToImageBitmap()}const _=Math.min(o/r,o/a);r=Math.round(r*_),a=Math.round(a*_)}const u=new OffscreenCanvas(r,a).getContext("2d",{willReadFrequently:!0});u.filter="grayscale(1)",u.drawImage(t,0,0,t.width,t.height,0,0,r,a);const h=u.getImageData(0,0,r,a).data;return[b(this,Jp,rE).call(this,h),r,a]},y(re,Yp),y(re,AA),y(re,TA),y(re,Xp),y(re,Bc),y(re,SA),y(re,EA),y(re,CA),y(re,Jp),y(re,Kp),y(re,_A),y(re,Za,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),y(re,Ai,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class qC extends SN{constructor(){super(),super.updateProperties({fill:_t._defaultLineColor,"stroke-width":0})}clone(){const t=new qC;return t.updateAll(this),t}}class zC extends ZA{constructor(t){super(t),super.updateProperties({stroke:_t._defaultLineColor,"stroke-width":1})}clone(){const t=new zC(this._viewParameters);return t.updateAll(this),t}}var jo,Xi,tr,ja;const vn=class vn extends Iy{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});y(this,jo,!1);y(this,Xi,null);y(this,tr,null);y(this,ja,null);this._willKeepAspectRatio=!0,S(this,tr,e.signatureData||null),S(this,Xi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,i){_t.initialize(e,i),this._defaultDrawingOptions=new qC,this._defaultDrawnSignatureOptions=new zC(i.viewParameters)}static getDefaultDrawingOptions(e){const i=this._defaultDrawingOptions.clone();return i.updateProperties(e),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return st(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!d(this,Xi)}}static computeTelemetryFinalData(e){const i=e.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,i=this.y),super.render(),this._drawId===null)if(d(this,tr)){const{lines:o,mustSmooth:r,areContours:a,description:l,uuid:u,heightInPage:h}=d(this,tr),{rawDims:{pageWidth:p,pageHeight:g},rotation:m}=this.parent.viewport,v=re.processDrawnLines({lines:o,pageWidth:p,pageHeight:g,rotation:m,innerMargin:vn._INNER_MARGIN,mustSmooth:r,areContours:a});this.addSignature(v,h,l,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return s&&(this._isCopy=!0,this._moveAfterPaste(e,i)),this.div}setUuid(e){S(this,ja,e),this.addEditToolbar()}getUuid(){return d(this,ja)}get description(){return d(this,Xi)}set description(e){S(this,Xi,e),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:i,thickness:s,width:o,height:r}=d(this,tr),a=Math.max(o,r),l=re.processDrawnLines({lines:{curves:e.map(u=>({points:u})),thickness:s,width:o,height:r},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:l.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,i,s,o){const{x:r,y:a}=this,{outline:l}=S(this,tr,e);S(this,jo,l instanceof iE),this.description=s,this.div.setAttribute("data-l10n-args",JSON.stringify({description:s}));let u;d(this,jo)?u=vn.getDefaultDrawingOptions():(u=vn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":l.thickness})),this._addOutlines({drawOutlines:l,drawingOptions:u});const[h,p]=this.parentDimensions,[,g]=this.pageDimensions;let m=i/g;m=m>=1?.5:m,this.width*=m/this.height,this.width>=1&&(m*=.9/this.width,this.width=.9),this.height=m,this.setDims(h*this.width,p*this.height),this.x=r,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(o),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!o,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:o}=this.parent.viewport;return re.process(e,i,s,o,vn._INNER_MARGIN)}getFromText(e,i){const{rawDims:{pageWidth:s,pageHeight:o},rotation:r}=this.parent.viewport;return re.extractContoursFromText(e,i,s,o,r,vn._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:i,pageHeight:s},rotation:o}=this.parent.viewport;return re.processDrawnLines({lines:e,pageWidth:i,pageHeight:s,rotation:o,innerMargin:vn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:i}){e?this._drawingOptions=vn.getDefaultDrawingOptions():(this._drawingOptions=vn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:i,points:s,rect:o}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,a={annotationType:J.SIGNATURE,isSignature:!0,areContours:d(this,jo),color:[0,0,0],thickness:d(this,jo)?0:r,pageIndex:this.pageIndex,rect:o,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.paths={lines:i,points:s},a.uuid=d(this,ja),a.isCopy=!0):a.lines=i,d(this,Xi)&&(a.accessibilityData={type:"Figure",alt:d(this,Xi)}),a}static deserializeDraw(e,i,s,o,r,a){return a.areContours?iE.deserialize(e,i,s,o,r,a):Cg.deserialize(e,i,s,o,r,a)}static async deserialize(e,i,s){var r;const o=await super.deserialize(e,i,s);return S(o,jo,e.areContours),S(o,Xi,((r=e.accessibilityData)==null?void 0:r.alt)||""),S(o,ja,e.uuid),o}};jo=new WeakMap,Xi=new WeakMap,tr=new WeakMap,ja=new WeakMap,O(vn,"_type","signature"),O(vn,"_editorType",J.SIGNATURE),O(vn,"_defaultDrawingOptions",null);let lE=vn;var Nt,me,er,Vs,nr,Hc,Gs,tl,Ji,Nn,Vc,el,id,nl,sd,Gc,Om,qc,Bm,zc,Hm,Wp,cE,$c,Vm,bA,LN;class uE extends _t{constructor(e){super({...e,name:"stampEditor"});y(this,el);y(this,nl);y(this,Gc);y(this,qc);y(this,zc);y(this,Wp);y(this,$c);y(this,bA);y(this,Nt,null);y(this,me,null);y(this,er,null);y(this,Vs,null);y(this,nr,null);y(this,Hc,"");y(this,Gs,null);y(this,tl,!1);y(this,Ji,null);y(this,Nn,!1);y(this,Vc,!1);S(this,Vs,e.bitmapUrl),S(this,nr,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,i){_t.initialize(e,i)}static isHandlingMimeForPasting(e){return nS.includes(e)}static paste(e,i){i.pasteEditor({mode:J.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const i=e.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(e=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:o,width:r,height:a}=e||this.copyCanvas(null,null,!0).imageData,l=await s.guess({name:"altText",request:{data:o,width:r,height:a,channels:o.length/(r*a)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var e;d(this,me)&&(S(this,Nt,null),this._uiManager.imageManager.deleteId(d(this,me)),(e=d(this,Gs))==null||e.remove(),S(this,Gs,null),d(this,Ji)&&(clearTimeout(d(this,Ji)),S(this,Ji,null))),super.remove()}rebuild(){if(!this.parent){d(this,me)&&b(this,Gc,Om).call(this);return}super.rebuild(),this.div!==null&&(d(this,me)&&d(this,Gs)===null&&b(this,Gc,Om).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(d(this,er)||d(this,Nt)||d(this,Vs)||d(this,nr)||d(this,me)||d(this,tl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,i;return this._isCopy&&(e=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),d(this,tl)||(d(this,Nt)?b(this,qc,Bm).call(this):b(this,Gc,Om).call(this)),this._isCopy&&this._moveAfterPaste(e,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,i){const{id:s,bitmap:o}=this._uiManager.imageManager.getFromCanvas(e,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(S(this,me,s),o&&S(this,Nt,o),S(this,tl,!1),b(this,qc,Bm).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;d(this,Ji)!==null&&clearTimeout(d(this,Ji)),S(this,Ji,setTimeout(()=>{S(this,Ji,null),b(this,Wp,cE).call(this)},200))}copyCanvas(e,i,s=!1){var m;e||(e=224);const{width:o,height:r}=d(this,Nt),a=new ns;let l=d(this,Nt),u=o,h=r,p=null;if(i){if(o>i||r>i){const D=Math.min(i/o,i/r);u=Math.floor(o*D),h=Math.floor(r*D)}p=document.createElement("canvas");const v=p.width=Math.ceil(u*a.sx),A=p.height=Math.ceil(h*a.sy);d(this,Nn)||(l=b(this,zc,Hm).call(this,v,A));const _=p.getContext("2d");_.filter=this._uiManager.hcmFilter;let T="white",E="#cfcfd8";this._uiManager.hcmFilter!=="none"?E="black":(m=window.matchMedia)!=null&&m.call(window,"(prefers-color-scheme: dark)").matches&&(T="#8f8f9d",E="#42414d");const C=15,w=C*a.sx,M=C*a.sy,R=new OffscreenCanvas(w*2,M*2),x=R.getContext("2d");x.fillStyle=T,x.fillRect(0,0,w*2,M*2),x.fillStyle=E,x.fillRect(0,0,w,M),x.fillRect(w,M,w,M),_.fillStyle=_.createPattern(R,"repeat"),_.fillRect(0,0,v,A),_.drawImage(l,0,0,l.width,l.height,0,0,v,A)}let g=null;if(s){let v,A;if(a.symmetric&&l.width<e&&l.height<e)v=l.width,A=l.height;else if(l=d(this,Nt),o>e||r>e){const E=Math.min(e/o,e/r);v=Math.floor(o*E),A=Math.floor(r*E),d(this,Nn)||(l=b(this,zc,Hm).call(this,v,A))}const T=new OffscreenCanvas(v,A).getContext("2d",{willReadFrequently:!0});T.drawImage(l,0,0,l.width,l.height,0,0,v,A),g={width:v,height:A,data:T.getImageData(0,0,v,A).data}}return{canvas:p,width:u,height:h,imageData:g}}static async deserialize(e,i,s){var _;let o=null,r=!1;if(e instanceof JD){const{data:{rect:T,rotation:E,id:C,structParent:w,popupRef:M},container:R,parent:{page:{pageNumber:x}},canvas:D}=e;let N,P;D?(delete e.canvas,{id:N,bitmap:P}=s.imageManager.getFromCanvas(R.id,D),D.remove()):(r=!0,e._hasNoCanvas=!0);const U=((_=await i._structTree.getAriaAttributes(`${PC}${C}`))==null?void 0:_.get("aria-label"))||"";o=e={annotationType:J.STAMP,bitmapId:N,bitmap:P,pageIndex:x-1,rect:T.slice(0),rotation:E,annotationElementId:C,id:C,deleted:!1,accessibilityData:{decorative:!1,altText:U},isSvg:!1,structParent:w,popupRef:M}}const a=await super.deserialize(e,i,s),{rect:l,bitmap:u,bitmapUrl:h,bitmapId:p,isSvg:g,accessibilityData:m}=e;r?(s.addMissingCanvas(e.id,a),S(a,tl,!0)):p&&s.imageManager.isValidId(p)?(S(a,me,p),u&&S(a,Nt,u)):S(a,Vs,h),S(a,Nn,g);const[v,A]=a.pageDimensions;return a.width=(l[2]-l[0])/v,a.height=(l[3]-l[1])/A,m&&(a.altTextData=m),a._initialData=o,S(a,Vc,!!o),a}serialize(e=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s={annotationType:J.STAMP,bitmapId:d(this,me),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:d(this,Nn),structTreeParentId:this._structTreeParentId};if(e)return s.bitmapUrl=b(this,$c,Vm).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:o,altText:r}=this.serializeAltText(!1);if(!o&&r&&(s.accessibilityData={type:"Figure",alt:r}),this.annotationElementId){const l=b(this,bA,LN).call(this,s);if(l.isSame)return null;l.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1}if(s.id=this.annotationElementId,i===null)return s;i.stamps||(i.stamps=new Map);const a=d(this,Nn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(d(this,me)))i.stamps.set(d(this,me),{area:a,serialized:s}),s.bitmap=b(this,$c,Vm).call(this,!1);else if(d(this,Nn)){const l=i.stamps.get(d(this,me));a>l.area&&(l.area=a,l.serialized.bitmap.close(),l.serialized.bitmap=b(this,$c,Vm).call(this,!1))}return s}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Nt=new WeakMap,me=new WeakMap,er=new WeakMap,Vs=new WeakMap,nr=new WeakMap,Hc=new WeakMap,Gs=new WeakMap,tl=new WeakMap,Ji=new WeakMap,Nn=new WeakMap,Vc=new WeakMap,el=new WeakSet,id=function(e,i=!1){if(!e){this.remove();return}S(this,Nt,e.bitmap),i||(S(this,me,e.id),S(this,Nn,e.isSvg)),e.file&&S(this,Hc,e.file.name),b(this,qc,Bm).call(this)},nl=new WeakSet,sd=function(){if(S(this,er,null),this._uiManager.enableWaiting(!1),!!d(this,Gs)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Nt)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&d(this,Nt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Gc=new WeakSet,Om=function(){if(d(this,me)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(d(this,me)).then(s=>b(this,el,id).call(this,s,!0)).finally(()=>b(this,nl,sd).call(this));return}if(d(this,Vs)){const s=d(this,Vs);S(this,Vs,null),this._uiManager.enableWaiting(!0),S(this,er,this._uiManager.imageManager.getFromUrl(s).then(o=>b(this,el,id).call(this,o)).finally(()=>b(this,nl,sd).call(this)));return}if(d(this,nr)){const s=d(this,nr);S(this,nr,null),this._uiManager.enableWaiting(!0),S(this,er,this._uiManager.imageManager.getFromFile(s).then(o=>b(this,el,id).call(this,o)).finally(()=>b(this,nl,sd).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=nS.join(",");const i=this._uiManager._signal;S(this,er,new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const o=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),b(this,el,id).call(this,o)}s()},{signal:i}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>b(this,nl,sd).call(this))),e.click()},qc=new WeakSet,Bm=function(){var p;const{div:e}=this;let{width:i,height:s}=d(this,Nt);const[o,r]=this.pageDimensions,a=.75;if(this.width)i=this.width*o,s=this.height*r;else if(i>a*o||s>a*r){const g=Math.min(a*o/i,a*r/s);i*=g,s*=g}const[l,u]=this.parentDimensions;this.setDims(i*l/o,s*u/r),this._uiManager.enableWaiting(!1);const h=S(this,Gs,document.createElement("canvas"));h.setAttribute("role","img"),this.addContainer(h),this.width=i/o,this.height=s/r,(p=this._initialOptions)!=null&&p.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),b(this,Wp,cE).call(this),d(this,Vc)||(this.parent.addUndoableEditor(this),S(this,Vc,!0)),this._reportTelemetry({action:"inserted_image"}),d(this,Hc)&&this.div.setAttribute("aria-description",d(this,Hc)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},zc=new WeakSet,Hm=function(e,i){const{width:s,height:o}=d(this,Nt);let r=s,a=o,l=d(this,Nt);for(;r>2*e||a>2*i;){const u=r,h=a;r>2*e&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),a>2*i&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const p=new OffscreenCanvas(r,a);p.getContext("2d").drawImage(l,0,0,u,h,0,0,r,a),l=p.transferToImageBitmap()}return l},Wp=new WeakSet,cE=function(){const[e,i]=this.parentDimensions,{width:s,height:o}=this,r=new ns,a=Math.ceil(s*e*r.sx),l=Math.ceil(o*i*r.sy),u=d(this,Gs);if(!u||u.width===a&&u.height===l)return;u.width=a,u.height=l;const h=d(this,Nn)?d(this,Nt):b(this,zc,Hm).call(this,a,l),p=u.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(h,0,0,h.width,h.height,0,0,a,l)},$c=new WeakSet,Vm=function(e){if(e){if(d(this,Nn)){const o=this._uiManager.imageManager.getSvgUrl(d(this,me));if(o)return o}const i=document.createElement("canvas");return{width:i.width,height:i.height}=d(this,Nt),i.getContext("2d").drawImage(d(this,Nt),0,0),i.toDataURL()}if(d(this,Nn)){const[i,s]=this.pageDimensions,o=Math.round(this.width*i*_r.PDF_TO_CSS_UNITS),r=Math.round(this.height*s*_r.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(o,r);return a.getContext("2d").drawImage(d(this,Nt),0,0,d(this,Nt).width,d(this,Nt).height,0,0,o,r),a.transferToImageBitmap()}return structuredClone(d(this,Nt))},bA=new WeakSet,LN=function(e){var a;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,o=e.pageIndex===i,r=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===s;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&o&&r,isSameAltText:r}},O(uE,"_type","stamp"),O(uE,"_editorType",J.STAMP);var il,Yc,Ki,ir,qs,In,sr,Xc,sl,Ti,zs,ye,$s,or,Jc,V,rr,wA,PN,Wn,Ni,Qp,dE,Zp,hE,Kc,Gm;const ai=class ai{constructor({uiManager:t,pageIndex:e,div:i,structTreeLayer:s,accessibilityManager:o,annotationLayer:r,drawLayer:a,textLayer:l,viewport:u,l10n:h}){y(this,wA);y(this,Wn);y(this,Qp);y(this,Zp);y(this,Kc);y(this,il,void 0);y(this,Yc,!1);y(this,Ki,null);y(this,ir,null);y(this,qs,null);y(this,In,new Map);y(this,sr,!1);y(this,Xc,!1);y(this,sl,!1);y(this,Ti,null);y(this,zs,null);y(this,ye,null);y(this,$s,null);y(this,or,null);y(this,Jc,-1);y(this,V,void 0);const p=[...d(ai,rr).values()];if(!ai._initialized){ai._initialized=!0;for(const g of p)g.initialize(h,t)}t.registerEditorTypes(p),S(this,V,t),this.pageIndex=e,this.div=i,S(this,il,o),S(this,Ki,r),this.viewport=u,S(this,ye,l),this.drawLayer=a,this._structTree=s,d(this,V).addLayer(this)}get isEmpty(){return d(this,In).size===0}get isInvisible(){return this.isEmpty&&d(this,V).getMode()===J.NONE}updateToolbar(t){d(this,V).updateToolbar(t)}updateMode(t=d(this,V).getMode()){switch(b(this,Kc,Gm).call(this),t){case J.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case J.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case J.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const i of d(ai,rr).values())e.toggle(`${i._type}Editing`,t===i._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=d(this,ye))==null?void 0:e.div)}setEditingState(t){d(this,V).setEditingState(t)}addCommands(t){d(this,V).addCommands(t)}cleanUndoStack(t){d(this,V).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=d(this,Ki))==null||e.div.classList.toggle("disabled",!t)}async enable(){var i;S(this,sl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),(i=d(this,or))==null||i.abort(),S(this,or,null);const t=new Set;for(const s of d(this,In).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(d(this,V).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!d(this,Ki)){S(this,sl,!1);return}const e=d(this,Ki).getEditableAnnotations();for(const s of e){if(s.hide(),d(this,V).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const o=await this.deserialize(s);o&&(this.addOrRebuild(o),o.enableEditing())}S(this,sl,!1)}disable(){var s;if(S(this,Xc,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),d(this,ye)&&!d(this,or)){S(this,or,new AbortController);const o=d(this,V).combinedSignal(d(this,or));d(this,ye).div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:u,timeStamp:h}=r,p=d(this,Jc);if(h-p>500){S(this,Jc,h);return}S(this,Jc,-1);const{classList:g}=this.div;g.toggle("getElements",!0);const m=document.elementsFromPoint(l,u);if(g.toggle("getElements",!1),!this.div.contains(m[0]))return;let v;const A=new RegExp(`^${M1}[0-9]+$`);for(const T of m)if(A.test(T.id)){v=T.id;break}if(!v)return;const _=d(this,In).get(v);(_==null?void 0:_.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),_.dblclick())},{signal:o,capture:!0})}const t=new Map,e=new Map;for(const o of d(this,In).values())if(o.disableEditing(),!!o.annotationElementId){if(o.serialize()!==null){t.set(o.annotationElementId,o);continue}else e.set(o.annotationElementId,o);(s=this.getEditableAnnotation(o.annotationElementId))==null||s.show(),o.remove()}if(d(this,Ki)){const o=d(this,Ki).getEditableAnnotations();for(const r of o){const{id:a}=r.data;if(d(this,V).isDeletedAnnotationElement(a))continue;let l=e.get(a);if(l){l.resetAnnotationElement(r),l.show(!1),r.show();continue}l=t.get(a),l&&(d(this,V).addChangedExistingAnnotation(l),l.renderAnnotationElement(r)&&l.show(!1)),r.show()}}b(this,Kc,Gm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const o of d(ai,rr).values())i.remove(`${o._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),S(this,Xc,!1)}getEditableAnnotation(t){var e;return((e=d(this,Ki))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){d(this,V).getActive()!==t&&d(this,V).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=d(this,ye))!=null&&t.div&&!d(this,$s)){S(this,$s,new AbortController);const e=d(this,V).combinedSignal(d(this,$s));d(this,ye).div.addEventListener("pointerdown",b(this,wA,PN).bind(this),{signal:e}),d(this,ye).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=d(this,ye))!=null&&t.div&&d(this,$s)&&(d(this,$s).abort(),S(this,$s,null),d(this,ye).div.classList.remove("highlighting"))}enableClick(){if(d(this,ir))return;S(this,ir,new AbortController);const t=d(this,V).combinedSignal(d(this,ir));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=d(this,ir))==null||t.abort(),S(this,ir,null)}attach(t){d(this,In).set(t.id,t);const{annotationElementId:e}=t;e&&d(this,V).isDeletedAnnotationElement(e)&&d(this,V).removeDeletedAnnotationElement(t)}detach(t){var e;d(this,In).delete(t.id),(e=d(this,il))==null||e.removePointerInTextLayer(t.contentDiv),!d(this,Xc)&&t.annotationElementId&&d(this,V).addDeletedAnnotationElement(t)}remove(t){this.detach(t),d(this,V).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(d(this,V).addDeletedAnnotationElement(t.annotationElementId),_t.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),d(this,V).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!d(this,sl)),d(this,V).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var i;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!d(this,qs)&&(t._focusEventsAllowed=!1,S(this,qs,setTimeout(()=>{S(this,qs,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:d(this,V)._signal}),e.focus())},0))),t._structTreeParentId=(i=d(this,il))==null?void 0:i.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),i=()=>{t.remove()};this.addCommands({cmd:e,undo:i,mustExec:!1})}getNextId(){return d(this,V).getId()}combinedSignal(t){return d(this,V).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=d(this,Wn,Ni))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await d(this,V).updateMode(t.mode);const{offsetX:i,offsetY:s}=b(this,Zp,hE).call(this),o=this.getNextId(),r=b(this,Qp,dE).call(this,{parent:this,id:o,x:i,y:s,uiManager:d(this,V),isCentered:!0,...e});r&&this.add(r)}async deserialize(t){var e;return await((e=d(ai,rr).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,d(this,V)))||null}createAndAddNewEditor(t,e,i={}){const s=this.getNextId(),o=b(this,Qp,dE).call(this,{parent:this,id:s,x:t.offsetX,y:t.offsetY,uiManager:d(this,V),isCentered:e,...i});return o&&this.add(o),o}addNewEditor(t={}){this.createAndAddNewEditor(b(this,Zp,hE).call(this),!0,t)}setSelected(t){d(this,V).setSelected(t)}toggleSelected(t){d(this,V).toggleSelected(t)}unselect(t){d(this,V).unselect(t)}pointerup(t){var s;const{isMac:e}=Ie.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!d(this,sr)||(S(this,sr,!1),(s=d(this,Wn,Ni))!=null&&s.isDrawer&&d(this,Wn,Ni).supportMultipleDrawings))return;if(!d(this,Yc)){S(this,Yc,!0);return}const i=d(this,V).getMode();if(i===J.STAMP||i===J.SIGNATURE){d(this,V).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var s;if(d(this,V).getMode()===J.HIGHLIGHT&&this.enableTextSelection(),d(this,sr)){S(this,sr,!1);return}const{isMac:e}=Ie.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(S(this,sr,!0),(s=d(this,Wn,Ni))!=null&&s.isDrawer){this.startDrawingSession(t);return}const i=d(this,V).getActive();S(this,Yc,!i||i.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),d(this,Ti)){d(this,Wn,Ni).startDrawing(this,d(this,V),!1,t);return}d(this,V).setCurrentDrawingSession(this),S(this,Ti,new AbortController);const e=d(this,V).combinedSignal(d(this,Ti));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(S(this,zs,null),this.commitOrRemove())},{signal:e}),d(this,Wn,Ni).startDrawing(this,d(this,V),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&S(this,zs,e);return}d(this,zs)&&setTimeout(()=>{var e;(e=d(this,zs))==null||e.focus(),S(this,zs,null)},0)}endDrawingSession(t=!1){return d(this,Ti)?(d(this,V).setCurrentDrawingSession(null),d(this,Ti).abort(),S(this,Ti,null),S(this,zs,null),d(this,Wn,Ni).endDrawing(t)):null}findNewParent(t,e,i){const s=d(this,V).findParent(e,i);return s===null||s===this?!1:(s.changeParent(t),!0)}commitOrRemove(){return d(this,Ti)?(this.endDrawingSession(),!0):!1}onScaleChanging(){d(this,Ti)&&d(this,Wn,Ni).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=d(this,V).getActive())==null?void 0:t.parent)===this&&(d(this,V).commitOrRemove(),d(this,V).setActiveEditor(null)),d(this,qs)&&(clearTimeout(d(this,qs)),S(this,qs,null));for(const i of d(this,In).values())(e=d(this,il))==null||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,d(this,In).clear(),d(this,V).removeLayer(this)}render({viewport:t}){this.viewport=t,vl(this.div,t);for(const e of d(this,V).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){d(this,V).commitOrRemove(),b(this,Kc,Gm).call(this);const e=this.viewport.rotation,i=t.rotation;if(this.viewport=t,vl(this.div,{rotation:i}),e!==i)for(const s of d(this,In).values())s.rotate(i)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return d(this,V).viewParameters.realScale}};il=new WeakMap,Yc=new WeakMap,Ki=new WeakMap,ir=new WeakMap,qs=new WeakMap,In=new WeakMap,sr=new WeakMap,Xc=new WeakMap,sl=new WeakMap,Ti=new WeakMap,zs=new WeakMap,ye=new WeakMap,$s=new WeakMap,or=new WeakMap,Jc=new WeakMap,V=new WeakMap,rr=new WeakMap,wA=new WeakSet,PN=function(t){d(this,V).unselectAll();const{target:e}=t;if(e===d(this,ye).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&d(this,ye).div.contains(e)){const{isMac:i}=Ie.platform;if(t.button!==0||t.ctrlKey&&i)return;d(this,V).showAllEditors("highlight",!0,!0),d(this,ye).div.classList.add("free"),this.toggleDrawing(),Ny.startHighlighting(this,d(this,V).direction==="ltr",{target:d(this,ye).div,x:t.x,y:t.y}),d(this,ye).div.addEventListener("pointerup",()=>{d(this,ye).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:d(this,V)._signal}),t.preventDefault()}},Wn=new WeakSet,Ni=function(){return d(ai,rr).get(d(this,V).getMode())},Qp=new WeakSet,dE=function(t){const e=d(this,Wn,Ni);return e?new e.prototype.constructor(t):null},Zp=new WeakSet,hE=function(){const{x:t,y:e,width:i,height:s}=this.div.getBoundingClientRect(),o=Math.max(0,t),r=Math.max(0,e),a=Math.min(window.innerWidth,t+i),l=Math.min(window.innerHeight,e+s),u=(o+a)/2-t,h=(r+l)/2-e,[p,g]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:p,offsetY:g}},Kc=new WeakSet,Gm=function(){for(const t of d(this,In).values())t.isEmpty()&&t.remove()},O(ai,"_initialized",!1),y(ai,rr,new Map([qS,nE,uE,Ny,lE].map(t=>[t._editorType,t])));let fE=ai;var Si,Xe,ol,jp,MA,kN,tg,gE,xA,UN,eg,mE;const ie=class ie{constructor({pageIndex:t}){y(this,tg);y(this,xA);y(this,eg);y(this,Si,null);y(this,Xe,new Map);y(this,ol,new Map);this.pageIndex=t}setParent(t){if(!d(this,Si)){S(this,Si,t);return}if(d(this,Si)!==t){if(d(this,Xe).size>0)for(const e of d(this,Xe).values())e.remove(),t.append(e);S(this,Si,t)}}static get _svgFactory(){return st(this,"_svgFactory",new xy)}draw(t,e=!1,i=!1){const s=Ge(ie,jp)._++,o=b(this,tg,gE).call(this),r=ie._svgFactory.createElement("defs");o.append(r);const a=ie._svgFactory.createElement("path");r.append(a);const l=`path_p${this.pageIndex}_${s}`;a.setAttribute("id",l),a.setAttribute("vector-effect","non-scaling-stroke"),e&&d(this,ol).set(s,a);const u=i?b(this,xA,UN).call(this,r,l):null,h=ie._svgFactory.createElement("use");return o.append(h),h.setAttribute("href",`#${l}`),this.updateProperties(o,t),d(this,Xe).set(s,o),{id:s,clipPathId:`url(#${u})`}}drawOutline(t,e){const i=Ge(ie,jp)._++,s=b(this,tg,gE).call(this),o=ie._svgFactory.createElement("defs");s.append(o);const r=ie._svgFactory.createElement("path");o.append(r);const a=`path_p${this.pageIndex}_${i}`;r.setAttribute("id",a),r.setAttribute("vector-effect","non-scaling-stroke");let l;if(e){const p=ie._svgFactory.createElement("mask");o.append(p),l=`mask_p${this.pageIndex}_${i}`,p.setAttribute("id",l),p.setAttribute("maskUnits","objectBoundingBox");const g=ie._svgFactory.createElement("rect");p.append(g),g.setAttribute("width","1"),g.setAttribute("height","1"),g.setAttribute("fill","white");const m=ie._svgFactory.createElement("use");p.append(m),m.setAttribute("href",`#${a}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=ie._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${a}`),l&&u.setAttribute("mask",`url(#${l})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,t),d(this,Xe).set(i,s),i}finalizeDraw(t,e){d(this,ol).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var l;if(!e)return;const{root:i,bbox:s,rootClass:o,path:r}=e,a=typeof t=="number"?d(this,Xe).get(t):t;if(a){if(i&&b(this,eg,mE).call(this,a,i),s&&b(l=ie,MA,kN).call(l,a,s),o){const{classList:u}=a;for(const[h,p]of Object.entries(o))u.toggle(h,p)}if(r){const h=a.firstChild.firstChild;b(this,eg,mE).call(this,h,r)}}}updateParent(t,e){if(e===this)return;const i=d(this,Xe).get(t);i&&(d(e,Si).append(i),d(this,Xe).delete(t),d(e,Xe).set(t,i))}remove(t){d(this,ol).delete(t),d(this,Si)!==null&&(d(this,Xe).get(t).remove(),d(this,Xe).delete(t))}destroy(){S(this,Si,null);for(const t of d(this,Xe).values())t.remove();d(this,Xe).clear(),d(this,ol).clear()}};Si=new WeakMap,Xe=new WeakMap,ol=new WeakMap,jp=new WeakMap,MA=new WeakSet,kN=function(t,[e,i,s,o]){const{style:r}=t;r.top=`${100*i}%`,r.left=`${100*e}%`,r.width=`${100*s}%`,r.height=`${100*o}%`},tg=new WeakSet,gE=function(){const t=ie._svgFactory.create(1,1,!0);return d(this,Si).append(t),t.setAttribute("aria-hidden",!0),t},xA=new WeakSet,UN=function(t,e){const i=ie._svgFactory.createElement("clipPath");t.append(i);const s=`clip_${e}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const o=ie._svgFactory.createElement("use");return i.append(o),o.setAttribute("href",`#${e}`),o.classList.add("clip"),s},eg=new WeakSet,mE=function(t,e){for(const[i,s]of Object.entries(e))s===null?t.removeAttribute(i):t.setAttribute(i,s)},y(ie,MA),y(ie,jp,0);let pE=ie;globalThis._pdfjsTestingUtils={HighlightOutliner:$S};globalThis.pdfjsLib={AbortException:Cr,AnnotationEditorLayer:fE,AnnotationEditorParamsType:ot,AnnotationEditorType:J,AnnotationEditorUIManager:Al,AnnotationLayer:HS,AnnotationMode:vo,AnnotationType:Qt,build:gU,ColorPicker:Dy,createValidAbsoluteUrl:x1,DOMSVGFactory:xy,DrawLayer:pE,FeatureTest:Ie,fetchData:Ag,getDocument:ID,getFilenameFromUrl:ak,getPdfFilenameFromUrl:lk,getUuid:N1,getXfaPageViewport:ck,GlobalWorkerOptions:Qi,ImageKind:dm,InvalidPDFException:tS,isDataScheme:WA,isPdfFile:UC,isValidExplicitDest:Sk,MathClamp:Ke,noContextMenu:_i,normalizeUnicode:sk,OPS:_y,OutputScale:ns,PasswordResponses:K2,PDFDataRangeTransport:LD,PDFDateString:FC,PDFWorker:Fd,PermissionFlag:J2,PixelsPerInch:_r,RenderingCancelledException:kC,ResponseException:by,setLayerDimensions:vl,shadow:st,SignatureExtractor:re,stopEvent:jt,SupportedImageMimeTypes:nS,TextLayer:kd,TouchManager:My,updateUrlHash:R1,Util:q,VerbosityLevel:XA,version:pU,XfaLayer:UD};const FU="/Algorank/assets/pdf.worker-B8q3_SH5.mjs";Qi.workerSrc=FU;const OU=async n=>{console.log("Extracting text from PDF...");const t=await n.arrayBuffer(),e=await ID({data:t}).promise;let i="";for(let s=1;s<=e.numPages;s++){const a=(await(await e.getPage(s)).getTextContent()).items.map(l=>l.str).join(" ");i+=`
${a}`}return i},BU=async({e:n,setPdfText:t,setFileName:e})=>{var o;const i=(o=n.target.files)==null?void 0:o[0];if(!i)return;if(i.type!=="application/pdf"){alert("Only PDF files are allowed.");return}const s=5*1024*1024;if(i.size>s){alert("File size must be less than 5MB.");return}try{e(i.name);const r=await OU(i);t(r)}catch(r){console.error("Error extracting PDF text:",r)}};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),VU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,i)=>i?i.toUpperCase():e.toLowerCase()),Zb=n=>{const t=VU(n);return t.charAt(0).toUpperCase()+t.slice(1)},FN=(...n)=>n.filter((t,e,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===e).join(" ").trim(),GU=n=>{for(const t in n)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var qU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=te.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:e=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:r,...a},l)=>te.createElement("svg",{ref:l,...qU,width:t,height:t,stroke:n,strokeWidth:i?Number(e)*24/Number(t):e,className:FN("lucide",s),...!o&&!GU(a)&&{"aria-hidden":"true"},...a},[...r.map(([u,h])=>te.createElement(u,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=(n,t)=>{const e=te.forwardRef(({className:i,...s},o)=>te.createElement(zU,{ref:o,iconNode:t,className:FN(`lucide-${HU(Zb(n))}`,`lucide-${n}`,i),...s}));return e.displayName=Zb(n),e};/**
 * @license lucide-react v0.526.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],XU=$U("upload",YU),JU=({setPdfText:n})=>{const t="Supports PDF files up to 10MB",e=["Upload resume","Replace resume"],[i,s]=te.useState(""),o=te.useRef(null);return $.jsxs("div",{className:" text-center lg:border-r-1 lg:border-r-[#ffffff33] flex flex-col items-center justify-center p-5 gap-5 h-full",children:[$.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Upload Your Resume"}),$.jsx("p",{className:"text-gray-300 text-lg max-w-md",children:"Get instant analysis and insights to improve your resume"}),$.jsx("input",{type:"file",className:"hidden",ref:o,onChange:r=>BU({e:r,setPdfText:n,setFileName:s}),accept:".pdf"}),$.jsxs("button",{className:"cursor-pointer group relative overflow-hidden bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold px-12 py-4 rounded-2xl shadow-lg hover:shadow-purple-500/25 transition-all duration-300 ease-out hover:scale-105 active:scale-95",onClick:()=>{var r;return(r=o.current)==null?void 0:r.click()},children:[$.jsxs("div",{className:"flex items-center gap-3",children:[$.jsx("span",{className:"text-lg",children:i.length>0?e[1]:e[0]}),$.jsx(XU,{size:24,className:"group-hover:rotate-12 transition-transform duration-300"})]}),$.jsx("div",{className:"absolute inset-0 -translate-x-full group-hover:translate-x-full bg-gradient-to-r from-transparent via-white/20 to-transparent transition-transform duration-700 ease-out"})]}),$.jsx("p",{className:"text-gray-400 text-sm",children:i.length>0?i:t})]})},KU=({setUrl:n,url:t})=>$.jsxs("div",{className:"flex gap-5 flex-col items-center justify-center w-[90%]",children:[$.jsx("label",{htmlFor:"job-url",className:"text-center",children:$.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Job Page URL"})}),$.jsx("input",{type:"url",id:"job-url",onChange:e=>n(e.target.value),value:t,placeholder:"https://example.com/job-posting",className:"w-[80%] px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-white/20"})]}),WU=()=>$.jsxs("div",{className:"relative w-[90%] my-4",children:[$.jsx("div",{className:"absolute inset-0 flex items-center",children:$.jsx("div",{className:"w-[45%] border-t border-gray-500"})}),$.jsx("div",{className:"absolute inset-0 flex items-center justify-end",children:$.jsx("div",{className:"w-[45%] border-t border-gray-500"})}),$.jsx("div",{className:"relative flex justify-center text-sm",children:$.jsx("span",{className:"px-2  text-lg text-[#b9adc8] font-bold",children:"or"})})]}),QU=({description:n,setDescription:t})=>$.jsxs($.Fragment,{children:[$.jsx("label",{htmlFor:"job-desc",className:"text-center",children:$.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:"Paste Job Description"})}),$.jsx("textarea",{id:"job-desc",onChange:e=>t(e.target.value),value:n,placeholder:"Paste job description here...",rows:10,className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 placeholder:text-white/20"})]}),ZU=({setUrl:n,url:t,setDescription:e,description:i})=>$.jsxs("div",{className:"relative flex flex-col items-center justify-center p-5 px-10 gap-5 w-full",children:[$.jsx(KU,{url:t,setUrl:n}),$.jsx(WU,{}),$.jsx(QU,{description:i,setDescription:e})]}),jU=({setPdfText:n,url:t,setUrl:e,setDescription:i,description:s})=>$.jsxs("div",{className:"relative bg-white/10 backdrop-blur-lg border border-white/20 rounded-3xl shadow-2xl flex py-5 lg:flex-row flex-col",children:[$.jsx("div",{className:"flex items-center justify-center lg:w-1/2 px-4",children:$.jsx(JU,{setPdfText:n})}),$.jsx("div",{className:"flex items-center justify-center lg:w-1/2 px-4",children:$.jsx(ZU,{setUrl:e,url:t,setDescription:i,description:s})})]});function ON(n,t){return function(){return n.apply(t,arguments)}}const{toString:tF}=Object.prototype,{getPrototypeOf:$C}=Object,{iterator:jA,toStringTag:BN}=Symbol,t0=(n=>t=>{const e=tF.call(t);return n[e]||(n[e]=e.slice(8,-1).toLowerCase())})(Object.create(null)),wi=n=>(n=n.toLowerCase(),t=>t0(t)===n),e0=n=>t=>typeof t===n,{isArray:gf}=Array,Od=e0("undefined");function _g(n){return n!==null&&!Od(n)&&n.constructor!==null&&!Od(n.constructor)&&fn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const HN=wi("ArrayBuffer");function eF(n){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(n):t=n&&n.buffer&&HN(n.buffer),t}const nF=e0("string"),fn=e0("function"),VN=e0("number"),bg=n=>n!==null&&typeof n=="object",iF=n=>n===!0||n===!1,qm=n=>{if(t0(n)!=="object")return!1;const t=$C(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(BN in n)&&!(jA in n)},sF=n=>{if(!bg(n)||_g(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},oF=wi("Date"),rF=wi("File"),aF=wi("Blob"),lF=wi("FileList"),uF=n=>bg(n)&&fn(n.pipe),cF=n=>{let t;return n&&(typeof FormData=="function"&&n instanceof FormData||fn(n.append)&&((t=t0(n))==="formdata"||t==="object"&&fn(n.toString)&&n.toString()==="[object FormData]"))},fF=wi("URLSearchParams"),[dF,hF,pF,gF]=["ReadableStream","Request","Response","Headers"].map(wi),mF=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function wg(n,t,{allOwnKeys:e=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),gf(n))for(i=0,s=n.length;i<s;i++)t.call(null,n[i],i,n);else{if(_g(n))return;const o=e?Object.getOwnPropertyNames(n):Object.keys(n),r=o.length;let a;for(i=0;i<r;i++)a=o[i],t.call(null,n[a],a,n)}}function GN(n,t){if(_g(n))return null;t=t.toLowerCase();const e=Object.keys(n);let i=e.length,s;for(;i-- >0;)if(s=e[i],t===s.toLowerCase())return s;return null}const Ur=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,qN=n=>!Od(n)&&n!==Ur;function yE(){const{caseless:n}=qN(this)&&this||{},t={},e=(i,s)=>{const o=n&&GN(t,s)||s;qm(t[o])&&qm(i)?t[o]=yE(t[o],i):qm(i)?t[o]=yE({},i):gf(i)?t[o]=i.slice():t[o]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&wg(arguments[i],e);return t}const yF=(n,t,e,{allOwnKeys:i}={})=>(wg(t,(s,o)=>{e&&fn(s)?n[o]=ON(s,e):n[o]=s},{allOwnKeys:i}),n),vF=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),AF=(n,t,e,i)=>{n.prototype=Object.create(t.prototype,i),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:t.prototype}),e&&Object.assign(n.prototype,e)},TF=(n,t,e,i)=>{let s,o,r;const a={};if(t=t||{},n==null)return t;do{for(s=Object.getOwnPropertyNames(n),o=s.length;o-- >0;)r=s[o],(!i||i(r,n,t))&&!a[r]&&(t[r]=n[r],a[r]=!0);n=e!==!1&&$C(n)}while(n&&(!e||e(n,t))&&n!==Object.prototype);return t},SF=(n,t,e)=>{n=String(n),(e===void 0||e>n.length)&&(e=n.length),e-=t.length;const i=n.indexOf(t,e);return i!==-1&&i===e},EF=n=>{if(!n)return null;if(gf(n))return n;let t=n.length;if(!VN(t))return null;const e=new Array(t);for(;t-- >0;)e[t]=n[t];return e},CF=(n=>t=>n&&t instanceof n)(typeof Uint8Array<"u"&&$C(Uint8Array)),_F=(n,t)=>{const i=(n&&n[jA]).call(n);let s;for(;(s=i.next())&&!s.done;){const o=s.value;t.call(n,o[0],o[1])}},bF=(n,t)=>{let e;const i=[];for(;(e=n.exec(t))!==null;)i.push(e);return i},wF=wi("HTMLFormElement"),MF=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,i,s){return i.toUpperCase()+s}),jb=(({hasOwnProperty:n})=>(t,e)=>n.call(t,e))(Object.prototype),xF=wi("RegExp"),zN=(n,t)=>{const e=Object.getOwnPropertyDescriptors(n),i={};wg(e,(s,o)=>{let r;(r=t(s,o,n))!==!1&&(i[o]=r||s)}),Object.defineProperties(n,i)},RF=n=>{zN(n,(t,e)=>{if(fn(n)&&["arguments","caller","callee"].indexOf(e)!==-1)return!1;const i=n[e];if(fn(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+e+"'")})}})},DF=(n,t)=>{const e={},i=s=>{s.forEach(o=>{e[o]=!0})};return gf(n)?i(n):i(String(n).split(t)),e},NF=()=>{},IF=(n,t)=>n!=null&&Number.isFinite(n=+n)?n:t;function LF(n){return!!(n&&fn(n.append)&&n[BN]==="FormData"&&n[jA])}const PF=n=>{const t=new Array(10),e=(i,s)=>{if(bg(i)){if(t.indexOf(i)>=0)return;if(_g(i))return i;if(!("toJSON"in i)){t[s]=i;const o=gf(i)?[]:{};return wg(i,(r,a)=>{const l=e(r,s+1);!Od(l)&&(o[a]=l)}),t[s]=void 0,o}}return i};return e(n,0)},kF=wi("AsyncFunction"),UF=n=>n&&(bg(n)||fn(n))&&fn(n.then)&&fn(n.catch),$N=((n,t)=>n?setImmediate:t?((e,i)=>(Ur.addEventListener("message",({source:s,data:o})=>{s===Ur&&o===e&&i.length&&i.shift()()},!1),s=>{i.push(s),Ur.postMessage(e,"*")}))(`axios@${Math.random()}`,[]):e=>setTimeout(e))(typeof setImmediate=="function",fn(Ur.postMessage)),FF=typeof queueMicrotask<"u"?queueMicrotask.bind(Ur):typeof process<"u"&&process.nextTick||$N,OF=n=>n!=null&&fn(n[jA]),I={isArray:gf,isArrayBuffer:HN,isBuffer:_g,isFormData:cF,isArrayBufferView:eF,isString:nF,isNumber:VN,isBoolean:iF,isObject:bg,isPlainObject:qm,isEmptyObject:sF,isReadableStream:dF,isRequest:hF,isResponse:pF,isHeaders:gF,isUndefined:Od,isDate:oF,isFile:rF,isBlob:aF,isRegExp:xF,isFunction:fn,isStream:uF,isURLSearchParams:fF,isTypedArray:CF,isFileList:lF,forEach:wg,merge:yE,extend:yF,trim:mF,stripBOM:vF,inherits:AF,toFlatObject:TF,kindOf:t0,kindOfTest:wi,endsWith:SF,toArray:EF,forEachEntry:_F,matchAll:bF,isHTMLForm:wF,hasOwnProperty:jb,hasOwnProp:jb,reduceDescriptors:zN,freezeMethods:RF,toObjectSet:DF,toCamelCase:MF,noop:NF,toFiniteNumber:IF,findKey:GN,global:Ur,isContextDefined:qN,isSpecCompliantForm:LF,toJSONObject:PF,isAsyncFn:kF,isThenable:UF,setImmediate:$N,asap:FF,isIterable:OF};function Q(n,t,e,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",t&&(this.code=t),e&&(this.config=e),i&&(this.request=i),s&&(this.response=s,this.status=s.status?s.status:null)}I.inherits(Q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const YN=Q.prototype,XN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{XN[n]={value:n}});Object.defineProperties(Q,XN);Object.defineProperty(YN,"isAxiosError",{value:!0});Q.from=(n,t,e,i,s,o)=>{const r=Object.create(YN);return I.toFlatObject(n,r,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Q.call(r,n.message,t,e,i,s),r.cause=n,r.name=n.name,o&&Object.assign(r,o),r};const BF=null;function vE(n){return I.isPlainObject(n)||I.isArray(n)}function JN(n){return I.endsWith(n,"[]")?n.slice(0,-2):n}function tw(n,t,e){return n?n.concat(t).map(function(s,o){return s=JN(s),!e&&o?"["+s+"]":s}).join(e?".":""):t}function HF(n){return I.isArray(n)&&!n.some(vE)}const VF=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function n0(n,t,e){if(!I.isObject(n))throw new TypeError("target must be an object");t=t||new FormData,e=I.toFlatObject(e,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,_){return!I.isUndefined(_[A])});const i=e.metaTokens,s=e.visitor||h,o=e.dots,r=e.indexes,l=(e.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(s))throw new TypeError("visitor must be a function");function u(v){if(v===null)return"";if(I.isDate(v))return v.toISOString();if(I.isBoolean(v))return v.toString();if(!l&&I.isBlob(v))throw new Q("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(v)||I.isTypedArray(v)?l&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function h(v,A,_){let T=v;if(v&&!_&&typeof v=="object"){if(I.endsWith(A,"{}"))A=i?A:A.slice(0,-2),v=JSON.stringify(v);else if(I.isArray(v)&&HF(v)||(I.isFileList(v)||I.endsWith(A,"[]"))&&(T=I.toArray(v)))return A=JN(A),T.forEach(function(C,w){!(I.isUndefined(C)||C===null)&&t.append(r===!0?tw([A],w,o):r===null?A:A+"[]",u(C))}),!1}return vE(v)?!0:(t.append(tw(_,A,o),u(v)),!1)}const p=[],g=Object.assign(VF,{defaultVisitor:h,convertValue:u,isVisitable:vE});function m(v,A){if(!I.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+A.join("."));p.push(v),I.forEach(v,function(T,E){(!(I.isUndefined(T)||T===null)&&s.call(t,T,I.isString(E)?E.trim():E,A,g))===!0&&m(T,A?A.concat(E):[E])}),p.pop()}}if(!I.isObject(n))throw new TypeError("data must be an object");return m(n),t}function ew(n){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function YC(n,t){this._pairs=[],n&&n0(n,this,t)}const KN=YC.prototype;KN.append=function(t,e){this._pairs.push([t,e])};KN.toString=function(t){const e=t?function(i){return t.call(this,i,ew)}:ew;return this._pairs.map(function(s){return e(s[0])+"="+e(s[1])},"").join("&")};function GF(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function WN(n,t,e){if(!t)return n;const i=e&&e.encode||GF;I.isFunction(e)&&(e={serialize:e});const s=e&&e.serialize;let o;if(s?o=s(t,e):o=I.isURLSearchParams(t)?t.toString():new YC(t,e).toString(i),o){const r=n.indexOf("#");r!==-1&&(n=n.slice(0,r)),n+=(n.indexOf("?")===-1?"?":"&")+o}return n}class nw{constructor(){this.handlers=[]}use(t,e,i){return this.handlers.push({fulfilled:t,rejected:e,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(i){i!==null&&t(i)})}}const QN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qF=typeof URLSearchParams<"u"?URLSearchParams:YC,zF=typeof FormData<"u"?FormData:null,$F=typeof Blob<"u"?Blob:null,YF={isBrowser:!0,classes:{URLSearchParams:qF,FormData:zF,Blob:$F},protocols:["http","https","file","blob","url","data"]},XC=typeof window<"u"&&typeof document<"u",AE=typeof navigator=="object"&&navigator||void 0,XF=XC&&(!AE||["ReactNative","NativeScript","NS"].indexOf(AE.product)<0),JF=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",KF=XC&&window.location.href||"http://localhost",WF=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:XC,hasStandardBrowserEnv:XF,hasStandardBrowserWebWorkerEnv:JF,navigator:AE,origin:KF},Symbol.toStringTag,{value:"Module"})),Oe={...WF,...YF};function QF(n,t){return n0(n,new Oe.classes.URLSearchParams,{visitor:function(e,i,s,o){return Oe.isNode&&I.isBuffer(e)?(this.append(i,e.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function ZF(n){return I.matchAll(/\w+|\[(\w*)]/g,n).map(t=>t[0]==="[]"?"":t[1]||t[0])}function jF(n){const t={},e=Object.keys(n);let i;const s=e.length;let o;for(i=0;i<s;i++)o=e[i],t[o]=n[o];return t}function ZN(n){function t(e,i,s,o){let r=e[o++];if(r==="__proto__")return!0;const a=Number.isFinite(+r),l=o>=e.length;return r=!r&&I.isArray(s)?s.length:r,l?(I.hasOwnProp(s,r)?s[r]=[s[r],i]:s[r]=i,!a):((!s[r]||!I.isObject(s[r]))&&(s[r]=[]),t(e,i,s[r],o)&&I.isArray(s[r])&&(s[r]=jF(s[r])),!a)}if(I.isFormData(n)&&I.isFunction(n.entries)){const e={};return I.forEachEntry(n,(i,s)=>{t(ZF(i),s,e,0)}),e}return null}function tO(n,t,e){if(I.isString(n))try{return(t||JSON.parse)(n),I.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(e||JSON.stringify)(n)}const Mg={transitional:QN,adapter:["xhr","http","fetch"],transformRequest:[function(t,e){const i=e.getContentType()||"",s=i.indexOf("application/json")>-1,o=I.isObject(t);if(o&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return s?JSON.stringify(ZN(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)||I.isReadableStream(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return QF(t,this.formSerializer).toString();if((a=I.isFileList(t))||i.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return n0(a?{"files[]":t}:t,l&&new l,this.formSerializer)}}return o||s?(e.setContentType("application/json",!1),tO(t)):t}],transformResponse:[function(t){const e=this.transitional||Mg.transitional,i=e&&e.forcedJSONParsing,s=this.responseType==="json";if(I.isResponse(t)||I.isReadableStream(t))return t;if(t&&I.isString(t)&&(i&&!this.responseType||s)){const r=!(e&&e.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(a){if(r)throw a.name==="SyntaxError"?Q.from(a,Q.ERR_BAD_RESPONSE,this,null,this.response):a}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Oe.classes.FormData,Blob:Oe.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],n=>{Mg.headers[n]={}});const eO=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),nO=n=>{const t={};let e,i,s;return n&&n.split(`
`).forEach(function(r){s=r.indexOf(":"),e=r.substring(0,s).trim().toLowerCase(),i=r.substring(s+1).trim(),!(!e||t[e]&&eO[e])&&(e==="set-cookie"?t[e]?t[e].push(i):t[e]=[i]:t[e]=t[e]?t[e]+", "+i:i)}),t},iw=Symbol("internals");function Pf(n){return n&&String(n).trim().toLowerCase()}function zm(n){return n===!1||n==null?n:I.isArray(n)?n.map(zm):String(n)}function iO(n){const t=Object.create(null),e=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=e.exec(n);)t[i[1]]=i[2];return t}const sO=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function tT(n,t,e,i,s){if(I.isFunction(i))return i.call(this,t,e);if(s&&(t=e),!!I.isString(t)){if(I.isString(i))return t.indexOf(i)!==-1;if(I.isRegExp(i))return i.test(t)}}function oO(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,e,i)=>e.toUpperCase()+i)}function rO(n,t){const e=I.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+e,{value:function(s,o,r){return this[i].call(this,t,s,o,r)},configurable:!0})})}let dn=class{constructor(t){t&&this.set(t)}set(t,e,i){const s=this;function o(a,l,u){const h=Pf(l);if(!h)throw new Error("header name must be a non-empty string");const p=I.findKey(s,h);(!p||s[p]===void 0||u===!0||u===void 0&&s[p]!==!1)&&(s[p||l]=zm(a))}const r=(a,l)=>I.forEach(a,(u,h)=>o(u,h,l));if(I.isPlainObject(t)||t instanceof this.constructor)r(t,e);else if(I.isString(t)&&(t=t.trim())&&!sO(t))r(nO(t),e);else if(I.isObject(t)&&I.isIterable(t)){let a={},l,u;for(const h of t){if(!I.isArray(h))throw TypeError("Object iterator must return a key-value pair");a[u=h[0]]=(l=a[u])?I.isArray(l)?[...l,h[1]]:[l,h[1]]:h[1]}r(a,e)}else t!=null&&o(e,t,i);return this}get(t,e){if(t=Pf(t),t){const i=I.findKey(this,t);if(i){const s=this[i];if(!e)return s;if(e===!0)return iO(s);if(I.isFunction(e))return e.call(this,s,i);if(I.isRegExp(e))return e.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Pf(t),t){const i=I.findKey(this,t);return!!(i&&this[i]!==void 0&&(!e||tT(this,this[i],i,e)))}return!1}delete(t,e){const i=this;let s=!1;function o(r){if(r=Pf(r),r){const a=I.findKey(i,r);a&&(!e||tT(i,i[a],a,e))&&(delete i[a],s=!0)}}return I.isArray(t)?t.forEach(o):o(t),s}clear(t){const e=Object.keys(this);let i=e.length,s=!1;for(;i--;){const o=e[i];(!t||tT(this,this[o],o,t,!0))&&(delete this[o],s=!0)}return s}normalize(t){const e=this,i={};return I.forEach(this,(s,o)=>{const r=I.findKey(i,o);if(r){e[r]=zm(s),delete e[o];return}const a=t?oO(o):String(o).trim();a!==o&&delete e[o],e[a]=zm(s),i[a]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return I.forEach(this,(i,s)=>{i!=null&&i!==!1&&(e[s]=t&&I.isArray(i)?i.join(", "):i)}),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,e])=>t+": "+e).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const i=new this(t);return e.forEach(s=>i.set(s)),i}static accessor(t){const i=(this[iw]=this[iw]={accessors:{}}).accessors,s=this.prototype;function o(r){const a=Pf(r);i[a]||(rO(s,r),i[a]=!0)}return I.isArray(t)?t.forEach(o):o(t),this}};dn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(dn.prototype,({value:n},t)=>{let e=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(i){this[e]=i}}});I.freezeMethods(dn);function eT(n,t){const e=this||Mg,i=t||e,s=dn.from(i.headers);let o=i.data;return I.forEach(n,function(a){o=a.call(e,o,s.normalize(),t?t.status:void 0)}),s.normalize(),o}function jN(n){return!!(n&&n.__CANCEL__)}function mf(n,t,e){Q.call(this,n??"canceled",Q.ERR_CANCELED,t,e),this.name="CanceledError"}I.inherits(mf,Q,{__CANCEL__:!0});function tI(n,t,e){const i=e.config.validateStatus;!e.status||!i||i(e.status)?n(e):t(new Q("Request failed with status code "+e.status,[Q.ERR_BAD_REQUEST,Q.ERR_BAD_RESPONSE][Math.floor(e.status/100)-4],e.config,e.request,e))}function aO(n){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return t&&t[1]||""}function lO(n,t){n=n||10;const e=new Array(n),i=new Array(n);let s=0,o=0,r;return t=t!==void 0?t:1e3,function(l){const u=Date.now(),h=i[o];r||(r=u),e[s]=l,i[s]=u;let p=o,g=0;for(;p!==s;)g+=e[p++],p=p%n;if(s=(s+1)%n,s===o&&(o=(o+1)%n),u-r<t)return;const m=h&&u-h;return m?Math.round(g*1e3/m):void 0}}function uO(n,t){let e=0,i=1e3/t,s,o;const r=(u,h=Date.now())=>{e=h,s=null,o&&(clearTimeout(o),o=null),n(...u)};return[(...u)=>{const h=Date.now(),p=h-e;p>=i?r(u,h):(s=u,o||(o=setTimeout(()=>{o=null,r(s)},i-p)))},()=>s&&r(s)]}const Ly=(n,t,e=3)=>{let i=0;const s=lO(50,250);return uO(o=>{const r=o.loaded,a=o.lengthComputable?o.total:void 0,l=r-i,u=s(l),h=r<=a;i=r;const p={loaded:r,total:a,progress:a?r/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&h?(a-r)/u:void 0,event:o,lengthComputable:a!=null,[t?"download":"upload"]:!0};n(p)},e)},sw=(n,t)=>{const e=n!=null;return[i=>t[0]({lengthComputable:e,total:n,loaded:i}),t[1]]},ow=n=>(...t)=>I.asap(()=>n(...t)),cO=Oe.hasStandardBrowserEnv?((n,t)=>e=>(e=new URL(e,Oe.origin),n.protocol===e.protocol&&n.host===e.host&&(t||n.port===e.port)))(new URL(Oe.origin),Oe.navigator&&/(msie|trident)/i.test(Oe.navigator.userAgent)):()=>!0,fO=Oe.hasStandardBrowserEnv?{write(n,t,e,i,s,o){const r=[n+"="+encodeURIComponent(t)];I.isNumber(e)&&r.push("expires="+new Date(e).toGMTString()),I.isString(i)&&r.push("path="+i),I.isString(s)&&r.push("domain="+s),o===!0&&r.push("secure"),document.cookie=r.join("; ")},read(n){const t=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function dO(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function hO(n,t){return t?n.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):n}function eI(n,t,e){let i=!dO(t);return n&&(i||e==!1)?hO(n,t):t}const rw=n=>n instanceof dn?{...n}:n;function Sl(n,t){t=t||{};const e={};function i(u,h,p,g){return I.isPlainObject(u)&&I.isPlainObject(h)?I.merge.call({caseless:g},u,h):I.isPlainObject(h)?I.merge({},h):I.isArray(h)?h.slice():h}function s(u,h,p,g){if(I.isUndefined(h)){if(!I.isUndefined(u))return i(void 0,u,p,g)}else return i(u,h,p,g)}function o(u,h){if(!I.isUndefined(h))return i(void 0,h)}function r(u,h){if(I.isUndefined(h)){if(!I.isUndefined(u))return i(void 0,u)}else return i(void 0,h)}function a(u,h,p){if(p in t)return i(u,h);if(p in n)return i(void 0,u)}const l={url:o,method:o,data:o,baseURL:r,transformRequest:r,transformResponse:r,paramsSerializer:r,timeout:r,timeoutMessage:r,withCredentials:r,withXSRFToken:r,adapter:r,responseType:r,xsrfCookieName:r,xsrfHeaderName:r,onUploadProgress:r,onDownloadProgress:r,decompress:r,maxContentLength:r,maxBodyLength:r,beforeRedirect:r,transport:r,httpAgent:r,httpsAgent:r,cancelToken:r,socketPath:r,responseEncoding:r,validateStatus:a,headers:(u,h,p)=>s(rw(u),rw(h),p,!0)};return I.forEach(Object.keys({...n,...t}),function(h){const p=l[h]||s,g=p(n[h],t[h],h);I.isUndefined(g)&&p!==a||(e[h]=g)}),e}const nI=n=>{const t=Sl({},n);let{data:e,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:o,headers:r,auth:a}=t;t.headers=r=dn.from(r),t.url=WN(eI(t.baseURL,t.url,t.allowAbsoluteUrls),n.params,n.paramsSerializer),a&&r.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(I.isFormData(e)){if(Oe.hasStandardBrowserEnv||Oe.hasStandardBrowserWebWorkerEnv)r.setContentType(void 0);else if((l=r.getContentType())!==!1){const[u,...h]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];r.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Oe.hasStandardBrowserEnv&&(i&&I.isFunction(i)&&(i=i(t)),i||i!==!1&&cO(t.url))){const u=s&&o&&fO.read(o);u&&r.set(s,u)}return t},pO=typeof XMLHttpRequest<"u",gO=pO&&function(n){return new Promise(function(e,i){const s=nI(n);let o=s.data;const r=dn.from(s.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=s,h,p,g,m,v;function A(){m&&m(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let _=new XMLHttpRequest;_.open(s.method.toUpperCase(),s.url,!0),_.timeout=s.timeout;function T(){if(!_)return;const C=dn.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),M={data:!a||a==="text"||a==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:C,config:n,request:_};tI(function(x){e(x),A()},function(x){i(x),A()},M),_=null}"onloadend"in _?_.onloadend=T:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(T)},_.onabort=function(){_&&(i(new Q("Request aborted",Q.ECONNABORTED,n,_)),_=null)},_.onerror=function(){i(new Q("Network Error",Q.ERR_NETWORK,n,_)),_=null},_.ontimeout=function(){let w=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const M=s.transitional||QN;s.timeoutErrorMessage&&(w=s.timeoutErrorMessage),i(new Q(w,M.clarifyTimeoutError?Q.ETIMEDOUT:Q.ECONNABORTED,n,_)),_=null},o===void 0&&r.setContentType(null),"setRequestHeader"in _&&I.forEach(r.toJSON(),function(w,M){_.setRequestHeader(M,w)}),I.isUndefined(s.withCredentials)||(_.withCredentials=!!s.withCredentials),a&&a!=="json"&&(_.responseType=s.responseType),u&&([g,v]=Ly(u,!0),_.addEventListener("progress",g)),l&&_.upload&&([p,m]=Ly(l),_.upload.addEventListener("progress",p),_.upload.addEventListener("loadend",m)),(s.cancelToken||s.signal)&&(h=C=>{_&&(i(!C||C.type?new mf(null,n,_):C),_.abort(),_=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const E=aO(s.url);if(E&&Oe.protocols.indexOf(E)===-1){i(new Q("Unsupported protocol "+E+":",Q.ERR_BAD_REQUEST,n));return}_.send(o||null)})},mO=(n,t)=>{const{length:e}=n=n?n.filter(Boolean):[];if(t||e){let i=new AbortController,s;const o=function(u){if(!s){s=!0,a();const h=u instanceof Error?u:this.reason;i.abort(h instanceof Q?h:new mf(h instanceof Error?h.message:h))}};let r=t&&setTimeout(()=>{r=null,o(new Q(`timeout ${t} of ms exceeded`,Q.ETIMEDOUT))},t);const a=()=>{n&&(r&&clearTimeout(r),r=null,n.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),n=null)};n.forEach(u=>u.addEventListener("abort",o));const{signal:l}=i;return l.unsubscribe=()=>I.asap(a),l}},yO=function*(n,t){let e=n.byteLength;if(e<t){yield n;return}let i=0,s;for(;i<e;)s=i+t,yield n.slice(i,s),i=s},vO=async function*(n,t){for await(const e of AO(n))yield*yO(e,t)},AO=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const t=n.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}},aw=(n,t,e,i)=>{const s=vO(n,t);let o=0,r,a=l=>{r||(r=!0,i&&i(l))};return new ReadableStream({async pull(l){try{const{done:u,value:h}=await s.next();if(u){a(),l.close();return}let p=h.byteLength;if(e){let g=o+=p;e(g)}l.enqueue(new Uint8Array(h))}catch(u){throw a(u),u}},cancel(l){return a(l),s.return()}},{highWaterMark:2})},i0=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",iI=i0&&typeof ReadableStream=="function",TO=i0&&(typeof TextEncoder=="function"?(n=>t=>n.encode(t))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),sI=(n,...t)=>{try{return!!n(...t)}catch{return!1}},SO=iI&&sI(()=>{let n=!1;const t=new Request(Oe.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!t}),lw=64*1024,TE=iI&&sI(()=>I.isReadableStream(new Response("").body)),Py={stream:TE&&(n=>n.body)};i0&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!Py[t]&&(Py[t]=I.isFunction(n[t])?e=>e[t]():(e,i)=>{throw new Q(`Response type '${t}' is not supported`,Q.ERR_NOT_SUPPORT,i)})})})(new Response);const EO=async n=>{if(n==null)return 0;if(I.isBlob(n))return n.size;if(I.isSpecCompliantForm(n))return(await new Request(Oe.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(I.isArrayBufferView(n)||I.isArrayBuffer(n))return n.byteLength;if(I.isURLSearchParams(n)&&(n=n+""),I.isString(n))return(await TO(n)).byteLength},CO=async(n,t)=>{const e=I.toFiniteNumber(n.getContentLength());return e??EO(t)},_O=i0&&(async n=>{let{url:t,method:e,data:i,signal:s,cancelToken:o,timeout:r,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:h,withCredentials:p="same-origin",fetchOptions:g}=nI(n);u=u?(u+"").toLowerCase():"text";let m=mO([s,o&&o.toAbortSignal()],r),v;const A=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let _;try{if(l&&SO&&e!=="get"&&e!=="head"&&(_=await CO(h,i))!==0){let M=new Request(t,{method:"POST",body:i,duplex:"half"}),R;if(I.isFormData(i)&&(R=M.headers.get("content-type"))&&h.setContentType(R),M.body){const[x,D]=sw(_,Ly(ow(l)));i=aw(M.body,lw,x,D)}}I.isString(p)||(p=p?"include":"omit");const T="credentials"in Request.prototype;v=new Request(t,{...g,signal:m,method:e.toUpperCase(),headers:h.normalize().toJSON(),body:i,duplex:"half",credentials:T?p:void 0});let E=await fetch(v,g);const C=TE&&(u==="stream"||u==="response");if(TE&&(a||C&&A)){const M={};["status","statusText","headers"].forEach(N=>{M[N]=E[N]});const R=I.toFiniteNumber(E.headers.get("content-length")),[x,D]=a&&sw(R,Ly(ow(a),!0))||[];E=new Response(aw(E.body,lw,x,()=>{D&&D(),A&&A()}),M)}u=u||"text";let w=await Py[I.findKey(Py,u)||"text"](E,n);return!C&&A&&A(),await new Promise((M,R)=>{tI(M,R,{data:w,headers:dn.from(E.headers),status:E.status,statusText:E.statusText,config:n,request:v})})}catch(T){throw A&&A(),T&&T.name==="TypeError"&&/Load failed|fetch/i.test(T.message)?Object.assign(new Q("Network Error",Q.ERR_NETWORK,n,v),{cause:T.cause||T}):Q.from(T,T&&T.code,n,v)}}),SE={http:BF,xhr:gO,fetch:_O};I.forEach(SE,(n,t)=>{if(n){try{Object.defineProperty(n,"name",{value:t})}catch{}Object.defineProperty(n,"adapterName",{value:t})}});const uw=n=>`- ${n}`,bO=n=>I.isFunction(n)||n===null||n===!1,oI={getAdapter:n=>{n=I.isArray(n)?n:[n];const{length:t}=n;let e,i;const s={};for(let o=0;o<t;o++){e=n[o];let r;if(i=e,!bO(e)&&(i=SE[(r=String(e)).toLowerCase()],i===void 0))throw new Q(`Unknown adapter '${r}'`);if(i)break;s[r||"#"+o]=i}if(!i){const o=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let r=t?o.length>1?`since :
`+o.map(uw).join(`
`):" "+uw(o[0]):"as no adapter specified";throw new Q("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return i},adapters:SE};function nT(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new mf(null,n)}function cw(n){return nT(n),n.headers=dn.from(n.headers),n.data=eT.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),oI.getAdapter(n.adapter||Mg.adapter)(n).then(function(i){return nT(n),i.data=eT.call(n,n.transformResponse,i),i.headers=dn.from(i.headers),i},function(i){return jN(i)||(nT(n),i&&i.response&&(i.response.data=eT.call(n,n.transformResponse,i.response),i.response.headers=dn.from(i.response.headers))),Promise.reject(i)})}const rI="1.11.0",s0={};["object","boolean","number","function","string","symbol"].forEach((n,t)=>{s0[n]=function(i){return typeof i===n||"a"+(t<1?"n ":" ")+n}});const fw={};s0.transitional=function(t,e,i){function s(o,r){return"[Axios v"+rI+"] Transitional option '"+o+"'"+r+(i?". "+i:"")}return(o,r,a)=>{if(t===!1)throw new Q(s(r," has been removed"+(e?" in "+e:"")),Q.ERR_DEPRECATED);return e&&!fw[r]&&(fw[r]=!0,console.warn(s(r," has been deprecated since v"+e+" and will be removed in the near future"))),t?t(o,r,a):!0}};s0.spelling=function(t){return(e,i)=>(console.warn(`${i} is likely a misspelling of ${t}`),!0)};function wO(n,t,e){if(typeof n!="object")throw new Q("options must be an object",Q.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const o=i[s],r=t[o];if(r){const a=n[o],l=a===void 0||r(a,o,n);if(l!==!0)throw new Q("option "+o+" must be "+l,Q.ERR_BAD_OPTION_VALUE);continue}if(e!==!0)throw new Q("Unknown option "+o,Q.ERR_BAD_OPTION)}}const $m={assertOptions:wO,validators:s0},Di=$m.validators;let hl=class{constructor(t){this.defaults=t||{},this.interceptors={request:new nw,response:new nw}}async request(t,e){try{return await this._request(t,e)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?o&&!String(i.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+o):i.stack=o}catch{}}throw i}}_request(t,e){typeof t=="string"?(e=e||{},e.url=t):e=t||{},e=Sl(this.defaults,e);const{transitional:i,paramsSerializer:s,headers:o}=e;i!==void 0&&$m.assertOptions(i,{silentJSONParsing:Di.transitional(Di.boolean),forcedJSONParsing:Di.transitional(Di.boolean),clarifyTimeoutError:Di.transitional(Di.boolean)},!1),s!=null&&(I.isFunction(s)?e.paramsSerializer={serialize:s}:$m.assertOptions(s,{encode:Di.function,serialize:Di.function},!0)),e.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?e.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:e.allowAbsoluteUrls=!0),$m.assertOptions(e,{baseUrl:Di.spelling("baseURL"),withXsrfToken:Di.spelling("withXSRFToken")},!0),e.method=(e.method||this.defaults.method||"get").toLowerCase();let r=o&&I.merge(o.common,o[e.method]);o&&I.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),e.headers=dn.concat(r,o);const a=[];let l=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(e)===!1||(l=l&&A.synchronous,a.unshift(A.fulfilled,A.rejected))});const u=[];this.interceptors.response.forEach(function(A){u.push(A.fulfilled,A.rejected)});let h,p=0,g;if(!l){const v=[cw.bind(this),void 0];for(v.unshift(...a),v.push(...u),g=v.length,h=Promise.resolve(e);p<g;)h=h.then(v[p++],v[p++]);return h}g=a.length;let m=e;for(p=0;p<g;){const v=a[p++],A=a[p++];try{m=v(m)}catch(_){A.call(this,_);break}}try{h=cw.call(this,m)}catch(v){return Promise.reject(v)}for(p=0,g=u.length;p<g;)h=h.then(u[p++],u[p++]);return h}getUri(t){t=Sl(this.defaults,t);const e=eI(t.baseURL,t.url,t.allowAbsoluteUrls);return WN(e,t.params,t.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(t){hl.prototype[t]=function(e,i){return this.request(Sl(i||{},{method:t,url:e,data:(i||{}).data}))}});I.forEach(["post","put","patch"],function(t){function e(i){return function(o,r,a){return this.request(Sl(a||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:o,data:r}))}}hl.prototype[t]=e(),hl.prototype[t+"Form"]=e(!0)});let MO=class aI{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let e;this.promise=new Promise(function(o){e=o});const i=this;this.promise.then(s=>{if(!i._listeners)return;let o=i._listeners.length;for(;o-- >0;)i._listeners[o](s);i._listeners=null}),this.promise.then=s=>{let o;const r=new Promise(a=>{i.subscribe(a),o=a}).then(s);return r.cancel=function(){i.unsubscribe(o)},r},t(function(o,r,a){i.reason||(i.reason=new mf(o,r,a),e(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);e!==-1&&this._listeners.splice(e,1)}toAbortSignal(){const t=new AbortController,e=i=>{t.abort(i)};return this.subscribe(e),t.signal.unsubscribe=()=>this.unsubscribe(e),t.signal}static source(){let t;return{token:new aI(function(s){t=s}),cancel:t}}};function xO(n){return function(e){return n.apply(null,e)}}function RO(n){return I.isObject(n)&&n.isAxiosError===!0}const EE={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(EE).forEach(([n,t])=>{EE[t]=n});function lI(n){const t=new hl(n),e=ON(hl.prototype.request,t);return I.extend(e,hl.prototype,t,{allOwnKeys:!0}),I.extend(e,t,null,{allOwnKeys:!0}),e.create=function(s){return lI(Sl(n,s))},e}const Kt=lI(Mg);Kt.Axios=hl;Kt.CanceledError=mf;Kt.CancelToken=MO;Kt.isCancel=jN;Kt.VERSION=rI;Kt.toFormData=n0;Kt.AxiosError=Q;Kt.Cancel=Kt.CanceledError;Kt.all=function(t){return Promise.all(t)};Kt.spread=xO;Kt.isAxiosError=RO;Kt.mergeConfig=Sl;Kt.AxiosHeaders=dn;Kt.formToJSON=n=>ZN(I.isHTMLForm(n)?new FormData(n):n);Kt.getAdapter=oI.getAdapter;Kt.HttpStatusCode=EE;Kt.default=Kt;const{Axios:B6,AxiosError:H6,CanceledError:V6,isCancel:G6,CancelToken:q6,VERSION:z6,all:$6,Cancel:Y6,isAxiosError:X6,spread:J6,toFormData:K6,AxiosHeaders:W6,HttpStatusCode:Q6,formToJSON:Z6,getAdapter:j6,mergeConfig:t5}=Kt;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let DO,NO;function IO(){return{geminiUrl:DO,vertexUrl:NO}}function LO(n,t,e,i){var s,o;if(!(n!=null&&n.baseUrl)){const r=IO();return t?(s=r.vertexUrl)!==null&&s!==void 0?s:e:(o=r.geminiUrl)!==null&&o!==void 0?o:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rl{}function G(n,t){const e=/\{([^}]+)\}/g;return n.replace(e,(i,s)=>{if(Object.prototype.hasOwnProperty.call(t,s)){const o=t[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function f(n,t,e){for(let o=0;o<t.length-1;o++){const r=t[o];if(r.endsWith("[]")){const a=r.slice(0,-2);if(!(a in n))if(Array.isArray(e))n[a]=Array.from({length:e.length},()=>({}));else throw new Error(`Value must be a list given an array path ${r}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(e))for(let u=0;u<l.length;u++){const h=l[u];f(h,t.slice(o+1),e[u])}else for(const u of l)f(u,t.slice(o+1),e)}return}else if(r.endsWith("[0]")){const a=r.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];f(l[0],t.slice(o+1),e);return}(!n[r]||typeof n[r]!="object")&&(n[r]={}),n=n[r]}const i=t[t.length-1],s=n[i];if(s!==void 0){if(!e||typeof e=="object"&&Object.keys(e).length===0||e===s)return;if(typeof s=="object"&&typeof e=="object"&&s!==null&&e!==null)Object.assign(s,e);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=e}function c(n,t){try{if(t.length===1&&t[0]==="_self")return n;for(let e=0;e<t.length;e++){if(typeof n!="object"||n===null)return;const i=t[e];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const o=n[s];return Array.isArray(o)?o.map(r=>c(r,t.slice(e+1))):void 0}else return}else n=n[i]}return n}catch(e){if(e instanceof TypeError)return;throw e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CE(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dw;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(dw||(dw={}));var hw;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(hw||(hw={}));var fr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(fr||(fr={}));var pw;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(pw||(pw={}));var gw;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(gw||(gw={}));var mw;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(mw||(mw={}));var yw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(yw||(yw={}));var vw;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(vw||(vw={}));var Aw;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Aw||(Aw={}));var Tw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Tw||(Tw={}));var Sw;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR"})(Sw||(Sw={}));var Ew;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Ew||(Ew={}));var Cw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Cw||(Cw={}));var _w;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(_w||(_w={}));var bw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(bw||(bw={}));var ww;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ww||(ww={}));var ky;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ky||(ky={}));var Mw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Mw||(Mw={}));var _E;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(_E||(_E={}));var xw;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(xw||(xw={}));var Rw;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Rw||(Rw={}));var Dw;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Dw||(Dw={}));var Nw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Nw||(Nw={}));var Iw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Iw||(Iw={}));var Lw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Lw||(Lw={}));var Pw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Pw||(Pw={}));var kw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(kw||(kw={}));var Uw;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Uw||(Uw={}));var Fw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Fw||(Fw={}));var Ow;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ow||(Ow={}));var Bw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Bw||(Bw={}));var Hw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Hw||(Hw={}));var Vw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Vw||(Vw={}));var Gw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Gw||(Gw={}));var qw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(qw||(qw={}));var zw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(zw||(zw={}));var $w;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($w||($w={}));var Yw;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Yw||(Yw={}));var Xw;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Xw||(Xw={}));var Jw;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Jw||(Jw={}));var Kw;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Kw||(Kw={}));var iu;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(iu||(iu={}));class bE{constructor(t){const e={};for(const i of t.headers.entries())e[i[0]]=i[1];this.headers=e,this.responseInternal=t}json(){return this.responseInternal.json()}}class kf{get text(){var t,e,i,s,o,r,a,l;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",h=!1;const p=[];for(const g of(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[m,v]of Object.entries(g))m!=="text"&&m!=="thought"&&(v!==null||v!==void 0)&&p.push(m);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,u+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?u:void 0}get data(){var t,e,i,s,o,r,a,l;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const h=[];for(const p of(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[g,m]of Object.entries(p))g!=="inlineData"&&(m!==null||m!==void 0)&&h.push(g);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var t,e,i,s,o,r,a,l;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var t,e,i,s,o,r,a,l,u;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var t,e,i,s,o,r,a,l,u;if(((s=(i=(e=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||e===void 0?void 0:e.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(l=(a=(r=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((h==null?void 0:h.length)!==0)return(u=h==null?void 0:h[0])===null||u===void 0?void 0:u.output}}class Ww{}class Qw{}class PO{}class kO{}class Zw{}class jw{}class tM{}class UO{}class eM{}class nM{}class iM{}class sM{}class FO{}class OO{}class BO{}class oM{}class HO{get text(){var t,e,i;let s="",o=!1;const r=[];for(const a of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[l,u]of Object.entries(a))l!=="text"&&l!=="thought"&&u!==null&&r.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,s+=a.text}}return r.length>0&&console.warn(`there are non-text parts ${r} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var t,e,i;let s="";const o=[];for(const r of(i=(e=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||e===void 0?void 0:e.parts)!==null&&i!==void 0?i:[]){for(const[a,l]of Object.entries(r))a!=="inlineData"&&l!==null&&o.push(a);r.inlineData&&typeof r.inlineData.data=="string"&&(s+=atob(r.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class Uy{_fromAPIResponse({apiResponse:t,isVertexAI:e}){const i=new Uy;if(i.name=t.name,i.metadata=t.metadata,i.done=t.done,i.error=t.error,e){const s=t.response;if(s){const o=new eM,r=s.videos;o.generatedVideos=r==null?void 0:r.map(a=>({video:{uri:a.gcsUri,videoBytes:a.bytesBase64Encoded?CE(a.bytesBase64Encoded):void 0,mimeType:a.mimeType}})),o.raiMediaFilteredCount=s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s.raiMediaFilteredReasons,i.response=o}}else{const s=t.response;if(s){const o=new eM,r=s.generateVideoResponse,a=r==null?void 0:r.generatedSamples;o.generatedVideos=a==null?void 0:a.map(l=>{const u=l.video;return{video:{uri:u==null?void 0:u.uri,videoBytes:u!=null&&u.encodedVideo?CE(u==null?void 0:u.encodedVideo):void 0,mimeType:l.encoding}}}),o.raiMediaFilteredCount=s.raiMediaFilteredCount,o.raiMediaFilteredReasons=s.raiMediaFilteredReasons,i.response=o}}return i}}class VO{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mt(n,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){const e=t.split("/",2);return`publishers/${e[0]}/models/${e[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function uI(n,t){const e=mt(n,t);return e?e.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:e.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${e}`:e:""}function cI(n){return Array.isArray(n)?n.map(t=>Fy(t)):[Fy(n)]}function Fy(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function fI(n){const t=Fy(n);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function dI(n){const t=Fy(n);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function rM(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function hI(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(t=>rM(t)):[rM(n)]}function wE(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function aM(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function lM(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Ve(n){if(n==null)throw new Error("ContentUnion is required");return wE(n)?n:{role:"user",parts:hI(n)}}function pI(n,t){if(!t)return[];if(n.isVertexAI()&&Array.isArray(t))return t.flatMap(e=>{const i=Ve(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const e=Ve(t);return e.parts&&e.parts.length>0&&e.parts[0].text!==void 0?[e.parts[0].text]:[]}return Array.isArray(t)?t.map(e=>Ve(e)):[Ve(t)]}function si(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(aM(n)||lM(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Ve(n)]}const t=[],e=[],i=wE(n[0]);for(const s of n){const o=wE(s);if(o!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(s);else{if(aM(s)||lM(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");e.push(s)}}return i||t.push({role:"user",parts:hI(e)}),t}function GO(n,t){n.includes("null")&&(t.nullable=!0);const e=n.filter(i=>i!=="null");if(e.length===1)t.type=Object.values(fr).includes(e[0].toUpperCase())?e[0].toUpperCase():fr.TYPE_UNSPECIFIED;else{t.anyOf=[];for(const i of e)t.anyOf.push({type:Object.values(fr).includes(i.toUpperCase())?i.toUpperCase():fr.TYPE_UNSPECIFIED})}}function gu(n){const t={},e=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=n.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(t.nullable=!0,n=o[1]):o[1].type==="null"&&(t.nullable=!0,n=o[0])),n.type instanceof Array&&GO(n.type,t);for(const[r,a]of Object.entries(n))if(a!=null)if(r=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(fr).includes(a.toUpperCase())?a.toUpperCase():fr.TYPE_UNSPECIFIED}else if(e.includes(r))t[r]=gu(a);else if(i.includes(r)){const l=[];for(const u of a){if(u.type=="null"){t.nullable=!0;continue}l.push(gu(u))}t[r]=l}else if(s.includes(r)){const l={};for(const[u,h]of Object.entries(a))l[u]=gu(h);t[r]=l}else{if(r==="additionalProperties")continue;t[r]=a}return t}function JC(n){return gu(n)}function KC(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function WC(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function yf(n){if(n.functionDeclarations)for(const t of n.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=gu(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=gu(t.response));return n}function vf(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const t=[];for(const e of n)t.push(e);return t}function qO(n,t,e,i=1){const s=!t.startsWith(`${e}/`)&&t.split("/").length===i;return n.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${n.getProject()}/${t}`:t.startsWith(`${e}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}/${t}`:t:s?`${e}/${t}`:t}function oo(n,t){if(typeof t!="string")throw new Error("name must be a string");return qO(n,t,"cachedContents")}function gI(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Dl(n){return CE(n)}function zO(n){return n!=null&&typeof n=="object"&&"name"in n}function $O(n){return n!=null&&typeof n=="object"&&"video"in n}function YO(n){return n!=null&&typeof n=="object"&&"uri"in n}function mI(n){var t;let e;if(zO(n)&&(e=n.name),!(YO(n)&&(e=n.uri,e===void 0))&&!($O(n)&&(e=(t=n.video)===null||t===void 0?void 0:t.uri,e===void 0))){if(typeof n=="string"&&(e=n),e===void 0)throw new Error("Could not extract file name from the provided input.");if(e.startsWith("https://")){const s=e.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${e}`);e=s[0]}else e.startsWith("files/")&&(e=e.split("files/")[1]);return e}}function yI(n,t){let e;return n.isVertexAI()?e=t?"publishers/google/models":"models":e=t?"models":"tunedModels",e}function vI(n){for(const t of["models","tunedModels","publisherModels"])if(XO(n,t))return n[t];return[]}function XO(n,t){return n!==null&&typeof n=="object"&&t in n}function JO(n,t={}){const e=n,i={name:e.name,description:e.description,parametersJsonSchema:e.inputSchema};return t.behavior&&(i.behavior=t.behavior),{functionDeclarations:[i]}}function KO(n,t={}){const e=[],i=new Set;for(const s of n){const o=s.name;if(i.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);i.add(o);const r=JO(s,t);r.functionDeclarations&&e.push(...r.functionDeclarations)}return{functionDeclarations:e}}function AI(n,t){if(typeof t!="string"&&!Array.isArray(t)){if(n&&n.isVertexAI()){if(t.gcsUri&&t.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!t.gcsUri&&!t.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(t.inlinedRequests&&t.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!t.inlinedRequests&&!t.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return t}else{if(Array.isArray(t))return{inlinedRequests:t};if(typeof t=="string"){if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:[t]};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};if(t.startsWith("files/"))return{fileName:t}}}throw new Error(`Unsupported source: ${t}`)}function WO(n){if(typeof n!="string")return n;const t=n;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function Af(n,t){const e=t;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(e))return e.split("/").pop();throw new Error(`Invalid batch job name: ${e}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(e))return e.split("/").pop();if(/^\d+$/.test(e))return e;throw new Error(`Invalid batch job name: ${e}.`)}function TI(n){const t=n;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QO(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function ZO(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function jO(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function tB(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],QO(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],ZO(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],jO(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function SI(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>tB(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function eB(n){const t={},e=c(n,["anyOf"]);e!=null&&f(t,["anyOf"],e);const i=c(n,["default"]);i!=null&&f(t,["default"],i);const s=c(n,["description"]);s!=null&&f(t,["description"],s);const o=c(n,["enum"]);o!=null&&f(t,["enum"],o);const r=c(n,["example"]);r!=null&&f(t,["example"],r);const a=c(n,["format"]);a!=null&&f(t,["format"],a);const l=c(n,["items"]);l!=null&&f(t,["items"],l);const u=c(n,["maxItems"]);u!=null&&f(t,["maxItems"],u);const h=c(n,["maxLength"]);h!=null&&f(t,["maxLength"],h);const p=c(n,["maxProperties"]);p!=null&&f(t,["maxProperties"],p);const g=c(n,["maximum"]);g!=null&&f(t,["maximum"],g);const m=c(n,["minItems"]);m!=null&&f(t,["minItems"],m);const v=c(n,["minLength"]);v!=null&&f(t,["minLength"],v);const A=c(n,["minProperties"]);A!=null&&f(t,["minProperties"],A);const _=c(n,["minimum"]);_!=null&&f(t,["minimum"],_);const T=c(n,["nullable"]);T!=null&&f(t,["nullable"],T);const E=c(n,["pattern"]);E!=null&&f(t,["pattern"],E);const C=c(n,["properties"]);C!=null&&f(t,["properties"],C);const w=c(n,["propertyOrdering"]);w!=null&&f(t,["propertyOrdering"],w);const M=c(n,["required"]);M!=null&&f(t,["required"],M);const R=c(n,["title"]);R!=null&&f(t,["title"],R);const x=c(n,["type"]);return x!=null&&f(t,["type"],x),t}function nB(n){const t={};if(c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=c(n,["category"]);e!=null&&f(t,["category"],e);const i=c(n,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function iB(n){const t={},e=c(n,["behavior"]);e!=null&&f(t,["behavior"],e);const i=c(n,["description"]);i!=null&&f(t,["description"],i);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const o=c(n,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(n,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const a=c(n,["response"]);a!=null&&f(t,["response"],a);const l=c(n,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function sB(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function oB(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],sB(e)),t}function rB(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function aB(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],rB(e)),t}function lB(){return{}}function uB(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(u=>iB(u))),f(t,["functionDeclarations"],l)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&f(t,["googleSearch"],oB(i));const s=c(n,["googleSearchRetrieval"]);if(s!=null&&f(t,["googleSearchRetrieval"],aB(s)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&f(t,["urlContext"],lB());const r=c(n,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=c(n,["computerUse"]);return a!=null&&f(t,["computerUse"],a),t}function cB(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function fB(n){const t={},e=c(n,["latitude"]);e!=null&&f(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function dB(n){const t={},e=c(n,["latLng"]);e!=null&&f(t,["latLng"],fB(e));const i=c(n,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function hB(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],cB(e));const i=c(n,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],dB(i)),t}function pB(n){const t={},e=c(n,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function EI(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],pB(e)),t}function gB(n){const t={},e=c(n,["speaker"]);e!=null&&f(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&f(t,["voiceConfig"],EI(i)),t}function mB(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>gB(s))),f(t,["speakerVoiceConfigs"],i)}return t}function yB(n){const t={},e=c(n,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],EI(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&f(t,["multiSpeakerVoiceConfig"],mB(i));const s=c(n,["languageCode"]);return s!=null&&f(t,["languageCode"],s),t}function vB(n){const t={},e=c(n,["includeThoughts"]);e!=null&&f(t,["includeThoughts"],e);const i=c(n,["thinkingBudget"]);return i!=null&&f(t,["thinkingBudget"],i),t}function AB(n,t,e){const i={},s=c(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],SI(Ve(s)));const o=c(t,["temperature"]);o!=null&&f(i,["temperature"],o);const r=c(t,["topP"]);r!=null&&f(i,["topP"],r);const a=c(t,["topK"]);a!=null&&f(i,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const h=c(t,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=c(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const g=c(t,["logprobs"]);g!=null&&f(i,["logprobs"],g);const m=c(t,["presencePenalty"]);m!=null&&f(i,["presencePenalty"],m);const v=c(t,["frequencyPenalty"]);v!=null&&f(i,["frequencyPenalty"],v);const A=c(t,["seed"]);A!=null&&f(i,["seed"],A);const _=c(t,["responseMimeType"]);_!=null&&f(i,["responseMimeType"],_);const T=c(t,["responseSchema"]);T!=null&&f(i,["responseSchema"],eB(JC(T)));const E=c(t,["responseJsonSchema"]);if(E!=null&&f(i,["responseJsonSchema"],E),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(t,["safetySettings"]);if(e!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(Y=>nB(Y))),f(e,["safetySettings"],U)}const w=c(t,["tools"]);if(e!==void 0&&w!=null){let U=vf(w);Array.isArray(U)&&(U=U.map(Y=>uB(yf(Y)))),f(e,["tools"],U)}const M=c(t,["toolConfig"]);if(e!==void 0&&M!=null&&f(e,["toolConfig"],hB(M)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=c(t,["cachedContent"]);e!==void 0&&R!=null&&f(e,["cachedContent"],oo(n,R));const x=c(t,["responseModalities"]);x!=null&&f(i,["responseModalities"],x);const D=c(t,["mediaResolution"]);D!=null&&f(i,["mediaResolution"],D);const N=c(t,["speechConfig"]);if(N!=null&&f(i,["speechConfig"],yB(KC(N))),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=c(t,["thinkingConfig"]);return P!=null&&f(i,["thinkingConfig"],vB(P)),i}function TB(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["request","model"],mt(n,i));const s=c(t,["contents"]);if(s!=null){let r=si(s);Array.isArray(r)&&(r=r.map(a=>SI(a))),f(e,["request","contents"],r)}const o=c(t,["config"]);return o!=null&&f(e,["request","generationConfig"],AB(n,o,e)),e}function SB(n,t){const e={};if(c(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(c(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=c(t,["fileName"]);i!=null&&f(e,["fileName"],i);const s=c(t,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>TB(n,r))),f(e,["requests","requests"],o)}return e}function EB(n,t){const e={},i=c(n,["displayName"]);if(t!==void 0&&i!=null&&f(t,["batch","displayName"],i),c(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return e}function CB(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["src"]);s!=null&&f(e,["batch","inputConfig"],SB(n,AI(n,s)));const o=c(t,["config"]);return o!=null&&f(e,["config"],EB(o,e)),e}function _B(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],Af(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function bB(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],Af(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function wB(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const s=c(n,["pageToken"]);if(t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),c(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return e}function MB(n){const t={},e=c(n,["config"]);return e!=null&&f(t,["config"],wB(e,t)),t}function xB(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],Af(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function RB(n){const t={},e=c(n,["format"]);e!=null&&f(t,["instancesFormat"],e);const i=c(n,["gcsUri"]);i!=null&&f(t,["gcsSource","uris"],i);const s=c(n,["bigqueryUri"]);if(s!=null&&f(t,["bigquerySource","inputUri"],s),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function DB(n){const t={},e=c(n,["format"]);e!=null&&f(t,["predictionsFormat"],e);const i=c(n,["gcsUri"]);i!=null&&f(t,["gcsDestination","outputUriPrefix"],i);const s=c(n,["bigqueryUri"]);if(s!=null&&f(t,["bigqueryDestination","outputUri"],s),c(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(c(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return t}function NB(n,t){const e={},i=c(n,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const s=c(n,["dest"]);return t!==void 0&&s!=null&&f(t,["outputConfig"],DB(WO(s))),e}function IB(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["model"],mt(n,i));const s=c(t,["src"]);s!=null&&f(e,["inputConfig"],RB(AI(n,s)));const o=c(t,["config"]);return o!=null&&f(e,["config"],NB(o,e)),e}function LB(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],Af(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function PB(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],Af(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function kB(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const s=c(n,["pageToken"]);t!==void 0&&s!=null&&f(t,["_query","pageToken"],s);const o=c(n,["filter"]);return t!==void 0&&o!=null&&f(t,["_query","filter"],o),e}function UB(n){const t={},e=c(n,["config"]);return e!=null&&f(t,["config"],kB(e,t)),t}function FB(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],Af(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function OB(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function BB(n){const t={},e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function HB(n){const t={},e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function VB(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],OB(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],BB(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],HB(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function GB(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>VB(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function qB(n){const t={},e=c(n,["citationSources"]);return e!=null&&f(t,["citations"],e),t}function zB(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&f(t,["urlRetrievalStatus"],i),t}function $B(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>zB(s))),f(t,["urlMetadata"],i)}return t}function YB(n){const t={},e=c(n,["content"]);e!=null&&f(t,["content"],GB(e));const i=c(n,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],qB(i));const s=c(n,["tokenCount"]);s!=null&&f(t,["tokenCount"],s);const o=c(n,["finishReason"]);o!=null&&f(t,["finishReason"],o);const r=c(n,["urlContextMetadata"]);r!=null&&f(t,["urlContextMetadata"],$B(r));const a=c(n,["avgLogprobs"]);a!=null&&f(t,["avgLogprobs"],a);const l=c(n,["groundingMetadata"]);l!=null&&f(t,["groundingMetadata"],l);const u=c(n,["index"]);u!=null&&f(t,["index"],u);const h=c(n,["logprobsResult"]);h!=null&&f(t,["logprobsResult"],h);const p=c(n,["safetyRatings"]);return p!=null&&f(t,["safetyRatings"],p),t}function XB(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["candidates"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>YB(l))),f(t,["candidates"],a)}const s=c(n,["modelVersion"]);s!=null&&f(t,["modelVersion"],s);const o=c(n,["promptFeedback"]);o!=null&&f(t,["promptFeedback"],o);const r=c(n,["usageMetadata"]);return r!=null&&f(t,["usageMetadata"],r),t}function CI(n){const t={},e=c(n,["details"]);e!=null&&f(t,["details"],e);const i=c(n,["code"]);i!=null&&f(t,["code"],i);const s=c(n,["message"]);return s!=null&&f(t,["message"],s),t}function JB(n){const t={},e=c(n,["response"]);e!=null&&f(t,["response"],XB(e));const i=c(n,["error"]);return i!=null&&f(t,["error"],CI(i)),t}function KB(n){const t={},e=c(n,["responsesFile"]);e!=null&&f(t,["fileName"],e);const i=c(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>JB(o))),f(t,["inlinedResponses"],s)}return t}function ME(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["metadata","displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["metadata","state"]);s!=null&&f(t,["state"],TI(s));const o=c(n,["metadata","createTime"]);o!=null&&f(t,["createTime"],o);const r=c(n,["metadata","endTime"]);r!=null&&f(t,["endTime"],r);const a=c(n,["metadata","updateTime"]);a!=null&&f(t,["updateTime"],a);const l=c(n,["metadata","model"]);l!=null&&f(t,["model"],l);const u=c(n,["metadata","output"]);return u!=null&&f(t,["dest"],KB(u)),t}function WB(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>ME(r))),f(t,["batchJobs"],o)}return t}function QB(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["done"]);i!=null&&f(t,["done"],i);const s=c(n,["error"]);return s!=null&&f(t,["error"],CI(s)),t}function _I(n){const t={},e=c(n,["details"]);e!=null&&f(t,["details"],e);const i=c(n,["code"]);i!=null&&f(t,["code"],i);const s=c(n,["message"]);return s!=null&&f(t,["message"],s),t}function ZB(n){const t={},e=c(n,["instancesFormat"]);e!=null&&f(t,["format"],e);const i=c(n,["gcsSource","uris"]);i!=null&&f(t,["gcsUri"],i);const s=c(n,["bigquerySource","inputUri"]);return s!=null&&f(t,["bigqueryUri"],s),t}function jB(n){const t={},e=c(n,["predictionsFormat"]);e!=null&&f(t,["format"],e);const i=c(n,["gcsDestination","outputUriPrefix"]);i!=null&&f(t,["gcsUri"],i);const s=c(n,["bigqueryDestination","outputUri"]);return s!=null&&f(t,["bigqueryUri"],s),t}function xE(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["state"]);s!=null&&f(t,["state"],TI(s));const o=c(n,["error"]);o!=null&&f(t,["error"],_I(o));const r=c(n,["createTime"]);r!=null&&f(t,["createTime"],r);const a=c(n,["startTime"]);a!=null&&f(t,["startTime"],a);const l=c(n,["endTime"]);l!=null&&f(t,["endTime"],l);const u=c(n,["updateTime"]);u!=null&&f(t,["updateTime"],u);const h=c(n,["model"]);h!=null&&f(t,["model"],h);const p=c(n,["inputConfig"]);p!=null&&f(t,["src"],ZB(p));const g=c(n,["outputConfig"]);return g!=null&&f(t,["dest"],jB(g)),t}function tH(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>xE(r))),f(t,["batchJobs"],o)}return t}function eH(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["done"]);i!=null&&f(t,["done"],i);const s=c(n,["error"]);return s!=null&&f(t,["error"],_I(s)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var El;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(El||(El={}));class xg{constructor(t,e,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=e,this.init(t,i,s)}init(t,e,i){var s,o;this.nameInternal=t,this.pageInternal=e[this.nameInternal]||[],this.sdkHttpResponseInternal=e==null?void 0:e.sdkHttpResponse,this.idxInternal=0;let r={config:{}};!i||Object.keys(i).length===0?r={config:{}}:typeof i=="object"?r=Object.assign({},i):r=i,r.config&&(r.config.pageToken=e.nextPageToken),this.paramsInternal=r,this.pageInternalSize=(o=(s=r.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nH extends Rl{constructor(t){super(),this.apiClient=t,this.create=async e=>{if(this.apiClient.isVertexAI()){const s=Date.now().toString();if(Array.isArray(e.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(e.config=e.config||{},e.config.displayName===void 0&&(e.config.displayName="genaiBatchJob_${timestampStr}"),e.config.dest===void 0&&typeof e.src=="string")if(e.src.startsWith("gs://")&&e.src.endsWith(".jsonl"))e.config.dest=`${e.src.slice(0,-6)}/dest`;else if(e.src.startsWith("bq://"))e.config.dest=`${e.src}_dest_${s}`;else throw new Error("Unsupported source:"+e.src)}return await this.createInternal(e)},this.list=async(e={})=>new xg(El.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(e),e)}async createInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=IB(this.apiClient,t);return a=G("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>xE(h))}else{const u=CB(this.apiClient,t);return a=G("{model}:batchGenerateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>ME(h))}}async get(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=LB(this.apiClient,t);return a=G("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>xE(h))}else{const u=_B(this.apiClient,t);return a=G("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>ME(h))}}async cancel(t){var e,i,s,o;let r="",a={};if(this.apiClient.isVertexAI()){const l=PB(this.apiClient,t);r=G("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}else{const l=bB(this.apiClient,t);r=G("batches/{name}:cancel",l._url),a=l._query,delete l.config,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=UB(t);return a=G("batchPredictionJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=tH(h),g=new oM;return Object.assign(g,p),g})}else{const u=MB(t);return a=G("batches",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=WB(h),g=new oM;return Object.assign(g,p),g})}}async delete(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=FB(this.apiClient,t);return a=G("batchPredictionJobs/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>eH(h))}else{const u=xB(this.apiClient,t);return a=G("batches/{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>QB(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function iH(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function sH(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function oH(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function rH(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],iH(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],sH(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],oH(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function uM(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>rH(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function aH(n){const t={},e=c(n,["behavior"]);e!=null&&f(t,["behavior"],e);const i=c(n,["description"]);i!=null&&f(t,["description"],i);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const o=c(n,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(n,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const a=c(n,["response"]);a!=null&&f(t,["response"],a);const l=c(n,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function lH(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function uH(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],lH(e)),t}function cH(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function fH(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],cH(e)),t}function dH(){return{}}function hH(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(u=>aH(u))),f(t,["functionDeclarations"],l)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&f(t,["googleSearch"],uH(i));const s=c(n,["googleSearchRetrieval"]);if(s!=null&&f(t,["googleSearchRetrieval"],fH(s)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&f(t,["urlContext"],dH());const r=c(n,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=c(n,["computerUse"]);return a!=null&&f(t,["computerUse"],a),t}function pH(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function gH(n){const t={},e=c(n,["latitude"]);e!=null&&f(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function mH(n){const t={},e=c(n,["latLng"]);e!=null&&f(t,["latLng"],gH(e));const i=c(n,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function yH(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],pH(e));const i=c(n,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],mH(i)),t}function vH(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const s=c(n,["expireTime"]);t!==void 0&&s!=null&&f(t,["expireTime"],s);const o=c(n,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);const r=c(n,["contents"]);if(t!==void 0&&r!=null){let h=si(r);Array.isArray(h)&&(h=h.map(p=>uM(p))),f(t,["contents"],h)}const a=c(n,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],uM(Ve(a)));const l=c(n,["tools"]);if(t!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>hH(p))),f(t,["tools"],h)}const u=c(n,["toolConfig"]);if(t!==void 0&&u!=null&&f(t,["toolConfig"],yH(u)),c(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return e}function AH(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["model"],uI(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],vH(s,e)),e}function TH(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],oo(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function SH(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],oo(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function EH(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const s=c(n,["expireTime"]);return t!==void 0&&s!=null&&f(t,["expireTime"],s),e}function CH(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],oo(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],EH(s,e)),e}function _H(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const s=c(n,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),e}function bH(n){const t={},e=c(n,["config"]);return e!=null&&f(t,["config"],_H(e,t)),t}function wH(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function MH(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["data"]);i!=null&&f(t,["data"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function xH(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&f(t,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function RH(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],wH(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],MH(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],xH(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function cM(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>RH(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function DH(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=c(n,["description"]);e!=null&&f(t,["description"],e);const i=c(n,["name"]);i!=null&&f(t,["name"],i);const s=c(n,["parameters"]);s!=null&&f(t,["parameters"],s);const o=c(n,["parametersJsonSchema"]);o!=null&&f(t,["parametersJsonSchema"],o);const r=c(n,["response"]);r!=null&&f(t,["response"],r);const a=c(n,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function NH(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function IH(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],NH(e)),t}function LH(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function PH(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],LH(e)),t}function kH(){return{}}function UH(n){const t={},e=c(n,["apiKeyString"]);return e!=null&&f(t,["apiKeyString"],e),t}function FH(n){const t={},e=c(n,["apiKeyConfig"]);e!=null&&f(t,["apiKeyConfig"],UH(e));const i=c(n,["authType"]);i!=null&&f(t,["authType"],i);const s=c(n,["googleServiceAccountConfig"]);s!=null&&f(t,["googleServiceAccountConfig"],s);const o=c(n,["httpBasicAuthConfig"]);o!=null&&f(t,["httpBasicAuthConfig"],o);const r=c(n,["oauthConfig"]);r!=null&&f(t,["oauthConfig"],r);const a=c(n,["oidcConfig"]);return a!=null&&f(t,["oidcConfig"],a),t}function OH(n){const t={},e=c(n,["authConfig"]);return e!=null&&f(t,["authConfig"],FH(e)),t}function BH(){return{}}function HH(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(g=>DH(g))),f(t,["functionDeclarations"],p)}const i=c(n,["retrieval"]);i!=null&&f(t,["retrieval"],i);const s=c(n,["googleSearch"]);s!=null&&f(t,["googleSearch"],IH(s));const o=c(n,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],PH(o)),c(n,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],kH());const a=c(n,["googleMaps"]);a!=null&&f(t,["googleMaps"],OH(a)),c(n,["urlContext"])!=null&&f(t,["urlContext"],BH());const u=c(n,["codeExecution"]);u!=null&&f(t,["codeExecution"],u);const h=c(n,["computerUse"]);return h!=null&&f(t,["computerUse"],h),t}function VH(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function GH(n){const t={},e=c(n,["latitude"]);e!=null&&f(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function qH(n){const t={},e=c(n,["latLng"]);e!=null&&f(t,["latLng"],GH(e));const i=c(n,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function zH(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],VH(e));const i=c(n,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],qH(i)),t}function $H(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const s=c(n,["expireTime"]);t!==void 0&&s!=null&&f(t,["expireTime"],s);const o=c(n,["displayName"]);t!==void 0&&o!=null&&f(t,["displayName"],o);const r=c(n,["contents"]);if(t!==void 0&&r!=null){let p=si(r);Array.isArray(p)&&(p=p.map(g=>cM(g))),f(t,["contents"],p)}const a=c(n,["systemInstruction"]);t!==void 0&&a!=null&&f(t,["systemInstruction"],cM(Ve(a)));const l=c(n,["tools"]);if(t!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(g=>HH(g))),f(t,["tools"],p)}const u=c(n,["toolConfig"]);t!==void 0&&u!=null&&f(t,["toolConfig"],zH(u));const h=c(n,["kmsKeyName"]);return t!==void 0&&h!=null&&f(t,["encryption_spec","kmsKeyName"],h),e}function YH(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["model"],uI(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],$H(s,e)),e}function XH(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],oo(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function JH(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],oo(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function KH(n,t){const e={},i=c(n,["ttl"]);t!==void 0&&i!=null&&f(t,["ttl"],i);const s=c(n,["expireTime"]);return t!==void 0&&s!=null&&f(t,["expireTime"],s),e}function WH(n,t){const e={},i=c(t,["name"]);i!=null&&f(e,["_url","name"],oo(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],KH(s,e)),e}function QH(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const s=c(n,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),e}function ZH(n){const t={},e=c(n,["config"]);return e!=null&&f(t,["config"],QH(e,t)),t}function Ym(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["model"]);s!=null&&f(t,["model"],s);const o=c(n,["createTime"]);o!=null&&f(t,["createTime"],o);const r=c(n,["updateTime"]);r!=null&&f(t,["updateTime"],r);const a=c(n,["expireTime"]);a!=null&&f(t,["expireTime"],a);const l=c(n,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function jH(){return{}}function tV(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>Ym(r))),f(t,["cachedContents"],o)}return t}function Xm(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["model"]);s!=null&&f(t,["model"],s);const o=c(n,["createTime"]);o!=null&&f(t,["createTime"],o);const r=c(n,["updateTime"]);r!=null&&f(t,["updateTime"],r);const a=c(n,["expireTime"]);a!=null&&f(t,["expireTime"],a);const l=c(n,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function eV(){return{}}function nV(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>Xm(r))),f(t,["cachedContents"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iV extends Rl{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new xg(El.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(e),e)}async create(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=YH(this.apiClient,t);return a=G("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Xm(h))}else{const u=AH(this.apiClient,t);return a=G("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Ym(h))}}async get(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=XH(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Xm(h))}else{const u=TH(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Ym(h))}}async delete(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=JH(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(()=>{const h=eV(),p=new iM;return Object.assign(p,h),p})}else{const u=SH(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(()=>{const h=jH(),p=new iM;return Object.assign(p,h),p})}}async update(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=WH(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Xm(h))}else{const u=CH(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>Ym(h))}}async listInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=ZH(t);return a=G("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=nV(h),g=new sM;return Object.assign(g,p),g})}else{const u=bH(t);return a=G("cachedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=tV(h),g=new sM;return Object.assign(g,p),g})}}}function fM(n){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&n[t],i=0;if(e)return e.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mt(n){return this instanceof Mt?(this.v=n,this):new Mt(n)}function mu(n,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=e.apply(n,t||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",r),s[Symbol.asyncIterator]=function(){return this},s;function r(m){return function(v){return Promise.resolve(v).then(m,p)}}function a(m,v){i[m]&&(s[m]=function(A){return new Promise(function(_,T){o.push([m,A,_,T])>1||l(m,A)})},v&&(s[m]=v(s[m])))}function l(m,v){try{u(i[m](v))}catch(A){g(o[0][3],A)}}function u(m){m.value instanceof Mt?Promise.resolve(m.value.v).then(h,p):g(o[0][2],m)}function h(m){l("next",m)}function p(m){l("throw",m)}function g(m,v){m(v),o.shift(),o.length&&l(o[0][0],o[0][1])}}function Td(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],e;return t?t.call(n):(n=typeof fM=="function"?fM(n):n[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(o){e[o]=n[o]&&function(r){return new Promise(function(a,l){r=n[o](r),s(a,l,r.done,r.value)})}}function s(o,r,a,l){Promise.resolve(l).then(function(u){o({value:u,done:a})},r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sV(n){var t;if(n.candidates==null||n.candidates.length===0)return!1;const e=(t=n.candidates[0])===null||t===void 0?void 0:t.content;return e===void 0?!1:bI(e)}function bI(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const t of n.parts)if(t===void 0||Object.keys(t).length===0||!t.thought&&t.text!==void 0&&t.text==="")return!1;return!0}function oV(n){if(n.length!==0){for(const t of n)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function dM(n){if(n===void 0||n.length===0)return[];const t=[],e=n.length;let i=0;for(;i<e;)if(n[i].role==="user")t.push(n[i]),i++;else{const s=[];let o=!0;for(;i<e&&n[i].role==="model";)s.push(n[i]),o&&!bI(n[i])&&(o=!1),i++;o?t.push(...s):t.pop()}return t}class rV{constructor(t,e){this.modelsModule=t,this.apiClient=e}create(t){return new aV(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}}class aV{constructor(t,e,i,s={},o=[]){this.apiClient=t,this.modelsModule=e,this.model=i,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),oV(o)}async sendMessage(t){var e;await this.sendPromise;const i=Ve(t.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});return this.sendPromise=(async()=>{var o,r,a;const l=await s,u=(r=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let g=[];h!=null&&(g=(a=h.slice(p))!==null&&a!==void 0?a:[]);const m=u?[u]:[];this.recordHistory(i,m,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(t){var e;await this.sendPromise;const i=Ve(t.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(e=t.config)!==null&&e!==void 0?e:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,i)}getHistory(t=!1){const e=t?dM(this.history):this.history;return structuredClone(e)}processStreamResponse(t,e){var i,s;return mu(this,arguments,function*(){var r,a,l,u;const h=[];try{for(var p=!0,g=Td(t),m;m=yield Mt(g.next()),r=m.done,!r;p=!0){u=m.value,p=!1;const v=u;if(sV(v)){const A=(s=(i=v.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;A!==void 0&&h.push(A)}yield yield Mt(v)}}catch(v){a={error:v}}finally{try{!p&&!r&&(l=g.return)&&(yield Mt(l.call(g)))}finally{if(a)throw a.error}}this.recordHistory(e,h)})}recordHistory(t,e,i){let s=[];e.length>0&&e.every(o=>o.role!==void 0)?s=e:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...dM(i)):this.history.push(t),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class o0 extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,o0.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function lV(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const s=c(n,["pageToken"]);return t!==void 0&&s!=null&&f(t,["_query","pageToken"],s),e}function uV(n){const t={},e=c(n,["config"]);return e!=null&&f(t,["config"],lV(e,t)),t}function cV(n){const t={},e=c(n,["details"]);e!=null&&f(t,["details"],e);const i=c(n,["message"]);i!=null&&f(t,["message"],i);const s=c(n,["code"]);return s!=null&&f(t,["code"],s),t}function fV(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["mimeType"]);s!=null&&f(t,["mimeType"],s);const o=c(n,["sizeBytes"]);o!=null&&f(t,["sizeBytes"],o);const r=c(n,["createTime"]);r!=null&&f(t,["createTime"],r);const a=c(n,["expirationTime"]);a!=null&&f(t,["expirationTime"],a);const l=c(n,["updateTime"]);l!=null&&f(t,["updateTime"],l);const u=c(n,["sha256Hash"]);u!=null&&f(t,["sha256Hash"],u);const h=c(n,["uri"]);h!=null&&f(t,["uri"],h);const p=c(n,["downloadUri"]);p!=null&&f(t,["downloadUri"],p);const g=c(n,["state"]);g!=null&&f(t,["state"],g);const m=c(n,["source"]);m!=null&&f(t,["source"],m);const v=c(n,["videoMetadata"]);v!=null&&f(t,["videoMetadata"],v);const A=c(n,["error"]);return A!=null&&f(t,["error"],cV(A)),t}function dV(n){const t={},e=c(n,["file"]);e!=null&&f(t,["file"],fV(e));const i=c(n,["config"]);return i!=null&&f(t,["config"],i),t}function hV(n){const t={},e=c(n,["name"]);e!=null&&f(t,["_url","file"],mI(e));const i=c(n,["config"]);return i!=null&&f(t,["config"],i),t}function pV(n){const t={},e=c(n,["name"]);e!=null&&f(t,["_url","file"],mI(e));const i=c(n,["config"]);return i!=null&&f(t,["config"],i),t}function gV(n){const t={},e=c(n,["details"]);e!=null&&f(t,["details"],e);const i=c(n,["message"]);i!=null&&f(t,["message"],i);const s=c(n,["code"]);return s!=null&&f(t,["code"],s),t}function RE(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["mimeType"]);s!=null&&f(t,["mimeType"],s);const o=c(n,["sizeBytes"]);o!=null&&f(t,["sizeBytes"],o);const r=c(n,["createTime"]);r!=null&&f(t,["createTime"],r);const a=c(n,["expirationTime"]);a!=null&&f(t,["expirationTime"],a);const l=c(n,["updateTime"]);l!=null&&f(t,["updateTime"],l);const u=c(n,["sha256Hash"]);u!=null&&f(t,["sha256Hash"],u);const h=c(n,["uri"]);h!=null&&f(t,["uri"],h);const p=c(n,["downloadUri"]);p!=null&&f(t,["downloadUri"],p);const g=c(n,["state"]);g!=null&&f(t,["state"],g);const m=c(n,["source"]);m!=null&&f(t,["source"],m);const v=c(n,["videoMetadata"]);v!=null&&f(t,["videoMetadata"],v);const A=c(n,["error"]);return A!=null&&f(t,["error"],gV(A)),t}function mV(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>RE(r))),f(t,["files"],o)}return t}function yV(n){const t={},e=c(n,["sdkHttpResponse"]);return e!=null&&f(t,["sdkHttpResponse"],e),t}function vV(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AV extends Rl{constructor(t){super(),this.apiClient=t,this.list=async(e={})=>new xg(El.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(e),e)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(e=>RE(e))}async download(t){await this.apiClient.downloadFile(t)}async listInternal(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=uV(t);return o=G("files",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json().then(u=>{const h=u;return h.sdkHttpResponse={headers:l.headers},h})),s.then(l=>{const u=mV(l),h=new FO;return Object.assign(h,u),h})}}async createInternal(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=dV(t);return o=G("upload/v1beta/files",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const u=yV(l),h=new OO;return Object.assign(h,u),h})}}async get(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=hV(t);return o=G("files/{file}",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>RE(l))}}async delete(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=pV(t);return o=G("files/{file}",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(()=>{const l=vV(),u=new BO;return Object.assign(u,l),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TV(n){const t={},e=c(n,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function wI(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],TV(e)),t}function SV(n){const t={},e=c(n,["speaker"]);e!=null&&f(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&f(t,["voiceConfig"],wI(i)),t}function EV(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>SV(s))),f(t,["speakerVoiceConfigs"],i)}return t}function CV(n){const t={},e=c(n,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],wI(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&f(t,["multiSpeakerVoiceConfig"],EV(i));const s=c(n,["languageCode"]);return s!=null&&f(t,["languageCode"],s),t}function _V(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function bV(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function wV(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function MV(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],_V(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],bV(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],wV(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function xV(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>MV(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function RV(n){const t={},e=c(n,["behavior"]);e!=null&&f(t,["behavior"],e);const i=c(n,["description"]);i!=null&&f(t,["description"],i);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const o=c(n,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(n,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const a=c(n,["response"]);a!=null&&f(t,["response"],a);const l=c(n,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function DV(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function NV(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],DV(e)),t}function IV(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function LV(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],IV(e)),t}function PV(){return{}}function kV(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(u=>RV(u))),f(t,["functionDeclarations"],l)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&f(t,["googleSearch"],NV(i));const s=c(n,["googleSearchRetrieval"]);if(s!=null&&f(t,["googleSearchRetrieval"],LV(s)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&f(t,["urlContext"],PV());const r=c(n,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=c(n,["computerUse"]);return a!=null&&f(t,["computerUse"],a),t}function UV(n){const t={},e=c(n,["handle"]);if(e!=null&&f(t,["handle"],e),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function hM(){return{}}function FV(n){const t={},e=c(n,["disabled"]);e!=null&&f(t,["disabled"],e);const i=c(n,["startOfSpeechSensitivity"]);i!=null&&f(t,["startOfSpeechSensitivity"],i);const s=c(n,["endOfSpeechSensitivity"]);s!=null&&f(t,["endOfSpeechSensitivity"],s);const o=c(n,["prefixPaddingMs"]);o!=null&&f(t,["prefixPaddingMs"],o);const r=c(n,["silenceDurationMs"]);return r!=null&&f(t,["silenceDurationMs"],r),t}function OV(n){const t={},e=c(n,["automaticActivityDetection"]);e!=null&&f(t,["automaticActivityDetection"],FV(e));const i=c(n,["activityHandling"]);i!=null&&f(t,["activityHandling"],i);const s=c(n,["turnCoverage"]);return s!=null&&f(t,["turnCoverage"],s),t}function BV(n){const t={},e=c(n,["targetTokens"]);return e!=null&&f(t,["targetTokens"],e),t}function HV(n){const t={},e=c(n,["triggerTokens"]);e!=null&&f(t,["triggerTokens"],e);const i=c(n,["slidingWindow"]);return i!=null&&f(t,["slidingWindow"],BV(i)),t}function VV(n){const t={},e=c(n,["proactiveAudio"]);return e!=null&&f(t,["proactiveAudio"],e),t}function GV(n,t){const e={},i=c(n,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const s=c(n,["responseModalities"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","responseModalities"],s);const o=c(n,["temperature"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","temperature"],o);const r=c(n,["topP"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","topP"],r);const a=c(n,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(n,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(n,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const h=c(n,["seed"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","seed"],h);const p=c(n,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],CV(WC(p)));const g=c(n,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const m=c(n,["systemInstruction"]);t!==void 0&&m!=null&&f(t,["setup","systemInstruction"],xV(Ve(m)));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let M=vf(v);Array.isArray(M)&&(M=M.map(R=>kV(yf(R)))),f(t,["setup","tools"],M)}const A=c(n,["sessionResumption"]);t!==void 0&&A!=null&&f(t,["setup","sessionResumption"],UV(A));const _=c(n,["inputAudioTranscription"]);t!==void 0&&_!=null&&f(t,["setup","inputAudioTranscription"],hM());const T=c(n,["outputAudioTranscription"]);t!==void 0&&T!=null&&f(t,["setup","outputAudioTranscription"],hM());const E=c(n,["realtimeInputConfig"]);t!==void 0&&E!=null&&f(t,["setup","realtimeInputConfig"],OV(E));const C=c(n,["contextWindowCompression"]);t!==void 0&&C!=null&&f(t,["setup","contextWindowCompression"],HV(C));const w=c(n,["proactivity"]);return t!==void 0&&w!=null&&f(t,["setup","proactivity"],VV(w)),e}function qV(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["setup","model"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],GV(s,e)),e}function zV(){return{}}function $V(){return{}}function YV(n){const t={},e=c(n,["media"]);e!=null&&f(t,["mediaChunks"],cI(e));const i=c(n,["audio"]);i!=null&&f(t,["audio"],dI(i));const s=c(n,["audioStreamEnd"]);s!=null&&f(t,["audioStreamEnd"],s);const o=c(n,["video"]);o!=null&&f(t,["video"],fI(o));const r=c(n,["text"]);return r!=null&&f(t,["text"],r),c(n,["activityStart"])!=null&&f(t,["activityStart"],zV()),c(n,["activityEnd"])!=null&&f(t,["activityEnd"],$V()),t}function MI(n){const t={},e=c(n,["text"]);e!=null&&f(t,["text"],e);const i=c(n,["weight"]);return i!=null&&f(t,["weight"],i),t}function XV(n){const t={},e=c(n,["weightedPrompts"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>MI(s))),f(t,["weightedPrompts"],i)}return t}function xI(n){const t={},e=c(n,["temperature"]);e!=null&&f(t,["temperature"],e);const i=c(n,["topK"]);i!=null&&f(t,["topK"],i);const s=c(n,["seed"]);s!=null&&f(t,["seed"],s);const o=c(n,["guidance"]);o!=null&&f(t,["guidance"],o);const r=c(n,["bpm"]);r!=null&&f(t,["bpm"],r);const a=c(n,["density"]);a!=null&&f(t,["density"],a);const l=c(n,["brightness"]);l!=null&&f(t,["brightness"],l);const u=c(n,["scale"]);u!=null&&f(t,["scale"],u);const h=c(n,["muteBass"]);h!=null&&f(t,["muteBass"],h);const p=c(n,["muteDrums"]);p!=null&&f(t,["muteDrums"],p);const g=c(n,["onlyBassAndDrums"]);return g!=null&&f(t,["onlyBassAndDrums"],g),t}function JV(n){const t={},e=c(n,["musicGenerationConfig"]);return e!=null&&f(t,["musicGenerationConfig"],xI(e)),t}function RI(n){const t={},e=c(n,["model"]);return e!=null&&f(t,["model"],e),t}function DI(n){const t={},e=c(n,["weightedPrompts"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>MI(s))),f(t,["weightedPrompts"],i)}return t}function DE(n){const t={},e=c(n,["setup"]);e!=null&&f(t,["setup"],RI(e));const i=c(n,["clientContent"]);i!=null&&f(t,["clientContent"],DI(i));const s=c(n,["musicGenerationConfig"]);s!=null&&f(t,["musicGenerationConfig"],xI(s));const o=c(n,["playbackControl"]);return o!=null&&f(t,["playbackControl"],o),t}function KV(n){const t={},e=c(n,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function WV(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],KV(e)),t}function QV(n){const t={},e=c(n,["voiceConfig"]);if(e!=null&&f(t,["voiceConfig"],WV(e)),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(n,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function ZV(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function jV(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["data"]);i!=null&&f(t,["data"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function t3(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&f(t,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function e3(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],ZV(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],jV(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],t3(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function n3(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>e3(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function i3(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=c(n,["description"]);e!=null&&f(t,["description"],e);const i=c(n,["name"]);i!=null&&f(t,["name"],i);const s=c(n,["parameters"]);s!=null&&f(t,["parameters"],s);const o=c(n,["parametersJsonSchema"]);o!=null&&f(t,["parametersJsonSchema"],o);const r=c(n,["response"]);r!=null&&f(t,["response"],r);const a=c(n,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function s3(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function o3(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],s3(e)),t}function r3(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function a3(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],r3(e)),t}function l3(){return{}}function u3(n){const t={},e=c(n,["apiKeyString"]);return e!=null&&f(t,["apiKeyString"],e),t}function c3(n){const t={},e=c(n,["apiKeyConfig"]);e!=null&&f(t,["apiKeyConfig"],u3(e));const i=c(n,["authType"]);i!=null&&f(t,["authType"],i);const s=c(n,["googleServiceAccountConfig"]);s!=null&&f(t,["googleServiceAccountConfig"],s);const o=c(n,["httpBasicAuthConfig"]);o!=null&&f(t,["httpBasicAuthConfig"],o);const r=c(n,["oauthConfig"]);r!=null&&f(t,["oauthConfig"],r);const a=c(n,["oidcConfig"]);return a!=null&&f(t,["oidcConfig"],a),t}function f3(n){const t={},e=c(n,["authConfig"]);return e!=null&&f(t,["authConfig"],c3(e)),t}function d3(){return{}}function h3(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(g=>i3(g))),f(t,["functionDeclarations"],p)}const i=c(n,["retrieval"]);i!=null&&f(t,["retrieval"],i);const s=c(n,["googleSearch"]);s!=null&&f(t,["googleSearch"],o3(s));const o=c(n,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],a3(o)),c(n,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],l3());const a=c(n,["googleMaps"]);a!=null&&f(t,["googleMaps"],f3(a)),c(n,["urlContext"])!=null&&f(t,["urlContext"],d3());const u=c(n,["codeExecution"]);u!=null&&f(t,["codeExecution"],u);const h=c(n,["computerUse"]);return h!=null&&f(t,["computerUse"],h),t}function p3(n){const t={},e=c(n,["handle"]);e!=null&&f(t,["handle"],e);const i=c(n,["transparent"]);return i!=null&&f(t,["transparent"],i),t}function pM(){return{}}function g3(n){const t={},e=c(n,["disabled"]);e!=null&&f(t,["disabled"],e);const i=c(n,["startOfSpeechSensitivity"]);i!=null&&f(t,["startOfSpeechSensitivity"],i);const s=c(n,["endOfSpeechSensitivity"]);s!=null&&f(t,["endOfSpeechSensitivity"],s);const o=c(n,["prefixPaddingMs"]);o!=null&&f(t,["prefixPaddingMs"],o);const r=c(n,["silenceDurationMs"]);return r!=null&&f(t,["silenceDurationMs"],r),t}function m3(n){const t={},e=c(n,["automaticActivityDetection"]);e!=null&&f(t,["automaticActivityDetection"],g3(e));const i=c(n,["activityHandling"]);i!=null&&f(t,["activityHandling"],i);const s=c(n,["turnCoverage"]);return s!=null&&f(t,["turnCoverage"],s),t}function y3(n){const t={},e=c(n,["targetTokens"]);return e!=null&&f(t,["targetTokens"],e),t}function v3(n){const t={},e=c(n,["triggerTokens"]);e!=null&&f(t,["triggerTokens"],e);const i=c(n,["slidingWindow"]);return i!=null&&f(t,["slidingWindow"],y3(i)),t}function A3(n){const t={},e=c(n,["proactiveAudio"]);return e!=null&&f(t,["proactiveAudio"],e),t}function T3(n,t){const e={},i=c(n,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const s=c(n,["responseModalities"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","responseModalities"],s);const o=c(n,["temperature"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","temperature"],o);const r=c(n,["topP"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","topP"],r);const a=c(n,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(n,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(n,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const h=c(n,["seed"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","seed"],h);const p=c(n,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],QV(WC(p)));const g=c(n,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const m=c(n,["systemInstruction"]);t!==void 0&&m!=null&&f(t,["setup","systemInstruction"],n3(Ve(m)));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let M=vf(v);Array.isArray(M)&&(M=M.map(R=>h3(yf(R)))),f(t,["setup","tools"],M)}const A=c(n,["sessionResumption"]);t!==void 0&&A!=null&&f(t,["setup","sessionResumption"],p3(A));const _=c(n,["inputAudioTranscription"]);t!==void 0&&_!=null&&f(t,["setup","inputAudioTranscription"],pM());const T=c(n,["outputAudioTranscription"]);t!==void 0&&T!=null&&f(t,["setup","outputAudioTranscription"],pM());const E=c(n,["realtimeInputConfig"]);t!==void 0&&E!=null&&f(t,["setup","realtimeInputConfig"],m3(E));const C=c(n,["contextWindowCompression"]);t!==void 0&&C!=null&&f(t,["setup","contextWindowCompression"],v3(C));const w=c(n,["proactivity"]);return t!==void 0&&w!=null&&f(t,["setup","proactivity"],A3(w)),e}function S3(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["setup","model"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],T3(s,e)),e}function E3(){return{}}function C3(){return{}}function _3(n){const t={},e=c(n,["media"]);e!=null&&f(t,["mediaChunks"],cI(e));const i=c(n,["audio"]);i!=null&&f(t,["audio"],dI(i));const s=c(n,["audioStreamEnd"]);s!=null&&f(t,["audioStreamEnd"],s);const o=c(n,["video"]);o!=null&&f(t,["video"],fI(o));const r=c(n,["text"]);return r!=null&&f(t,["text"],r),c(n,["activityStart"])!=null&&f(t,["activityStart"],E3()),c(n,["activityEnd"])!=null&&f(t,["activityEnd"],C3()),t}function b3(){return{}}function w3(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function M3(n){const t={},e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function x3(n){const t={},e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function R3(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],w3(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],M3(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],x3(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function D3(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>R3(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function gM(n){const t={},e=c(n,["text"]);e!=null&&f(t,["text"],e);const i=c(n,["finished"]);return i!=null&&f(t,["finished"],i),t}function N3(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&f(t,["urlRetrievalStatus"],i),t}function I3(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>N3(s))),f(t,["urlMetadata"],i)}return t}function L3(n){const t={},e=c(n,["modelTurn"]);e!=null&&f(t,["modelTurn"],D3(e));const i=c(n,["turnComplete"]);i!=null&&f(t,["turnComplete"],i);const s=c(n,["interrupted"]);s!=null&&f(t,["interrupted"],s);const o=c(n,["groundingMetadata"]);o!=null&&f(t,["groundingMetadata"],o);const r=c(n,["generationComplete"]);r!=null&&f(t,["generationComplete"],r);const a=c(n,["inputTranscription"]);a!=null&&f(t,["inputTranscription"],gM(a));const l=c(n,["outputTranscription"]);l!=null&&f(t,["outputTranscription"],gM(l));const u=c(n,["urlContextMetadata"]);return u!=null&&f(t,["urlContextMetadata"],I3(u)),t}function P3(n){const t={},e=c(n,["id"]);e!=null&&f(t,["id"],e);const i=c(n,["args"]);i!=null&&f(t,["args"],i);const s=c(n,["name"]);return s!=null&&f(t,["name"],s),t}function k3(n){const t={},e=c(n,["functionCalls"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>P3(s))),f(t,["functionCalls"],i)}return t}function U3(n){const t={},e=c(n,["ids"]);return e!=null&&f(t,["ids"],e),t}function Qg(n){const t={},e=c(n,["modality"]);e!=null&&f(t,["modality"],e);const i=c(n,["tokenCount"]);return i!=null&&f(t,["tokenCount"],i),t}function F3(n){const t={},e=c(n,["promptTokenCount"]);e!=null&&f(t,["promptTokenCount"],e);const i=c(n,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);const s=c(n,["responseTokenCount"]);s!=null&&f(t,["responseTokenCount"],s);const o=c(n,["toolUsePromptTokenCount"]);o!=null&&f(t,["toolUsePromptTokenCount"],o);const r=c(n,["thoughtsTokenCount"]);r!=null&&f(t,["thoughtsTokenCount"],r);const a=c(n,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);const l=c(n,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(m=>Qg(m))),f(t,["promptTokensDetails"],g)}const u=c(n,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(m=>Qg(m))),f(t,["cacheTokensDetails"],g)}const h=c(n,["responseTokensDetails"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(m=>Qg(m))),f(t,["responseTokensDetails"],g)}const p=c(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>Qg(m))),f(t,["toolUsePromptTokensDetails"],g)}return t}function O3(n){const t={},e=c(n,["timeLeft"]);return e!=null&&f(t,["timeLeft"],e),t}function B3(n){const t={},e=c(n,["newHandle"]);e!=null&&f(t,["newHandle"],e);const i=c(n,["resumable"]);i!=null&&f(t,["resumable"],i);const s=c(n,["lastConsumedClientMessageIndex"]);return s!=null&&f(t,["lastConsumedClientMessageIndex"],s),t}function H3(n){const t={};c(n,["setupComplete"])!=null&&f(t,["setupComplete"],b3());const i=c(n,["serverContent"]);i!=null&&f(t,["serverContent"],L3(i));const s=c(n,["toolCall"]);s!=null&&f(t,["toolCall"],k3(s));const o=c(n,["toolCallCancellation"]);o!=null&&f(t,["toolCallCancellation"],U3(o));const r=c(n,["usageMetadata"]);r!=null&&f(t,["usageMetadata"],F3(r));const a=c(n,["goAway"]);a!=null&&f(t,["goAway"],O3(a));const l=c(n,["sessionResumptionUpdate"]);return l!=null&&f(t,["sessionResumptionUpdate"],B3(l)),t}function V3(){return{}}function G3(n){const t={},e=c(n,["text"]);e!=null&&f(t,["text"],e);const i=c(n,["weight"]);return i!=null&&f(t,["weight"],i),t}function q3(n){const t={},e=c(n,["weightedPrompts"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>G3(s))),f(t,["weightedPrompts"],i)}return t}function z3(n){const t={},e=c(n,["temperature"]);e!=null&&f(t,["temperature"],e);const i=c(n,["topK"]);i!=null&&f(t,["topK"],i);const s=c(n,["seed"]);s!=null&&f(t,["seed"],s);const o=c(n,["guidance"]);o!=null&&f(t,["guidance"],o);const r=c(n,["bpm"]);r!=null&&f(t,["bpm"],r);const a=c(n,["density"]);a!=null&&f(t,["density"],a);const l=c(n,["brightness"]);l!=null&&f(t,["brightness"],l);const u=c(n,["scale"]);u!=null&&f(t,["scale"],u);const h=c(n,["muteBass"]);h!=null&&f(t,["muteBass"],h);const p=c(n,["muteDrums"]);p!=null&&f(t,["muteDrums"],p);const g=c(n,["onlyBassAndDrums"]);return g!=null&&f(t,["onlyBassAndDrums"],g),t}function $3(n){const t={},e=c(n,["clientContent"]);e!=null&&f(t,["clientContent"],q3(e));const i=c(n,["musicGenerationConfig"]);return i!=null&&f(t,["musicGenerationConfig"],z3(i)),t}function Y3(n){const t={},e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);i!=null&&f(t,["mimeType"],i);const s=c(n,["sourceMetadata"]);return s!=null&&f(t,["sourceMetadata"],$3(s)),t}function X3(n){const t={},e=c(n,["audioChunks"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>Y3(s))),f(t,["audioChunks"],i)}return t}function J3(n){const t={},e=c(n,["text"]);e!=null&&f(t,["text"],e);const i=c(n,["filteredReason"]);return i!=null&&f(t,["filteredReason"],i),t}function K3(n){const t={};c(n,["setupComplete"])!=null&&f(t,["setupComplete"],V3());const i=c(n,["serverContent"]);i!=null&&f(t,["serverContent"],X3(i));const s=c(n,["filteredPrompt"]);return s!=null&&f(t,["filteredPrompt"],J3(s)),t}function W3(n){const t={},e=c(n,["sessionId"]);return e!=null&&f(t,["sessionId"],e),t}function Q3(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function Z3(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["data"]);i!=null&&f(t,["data"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function j3(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&f(t,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function tG(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],Q3(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],Z3(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],j3(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function eG(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>tG(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function mM(n){const t={},e=c(n,["text"]);e!=null&&f(t,["text"],e);const i=c(n,["finished"]);return i!=null&&f(t,["finished"],i),t}function nG(n){const t={},e=c(n,["modelTurn"]);e!=null&&f(t,["modelTurn"],eG(e));const i=c(n,["turnComplete"]);i!=null&&f(t,["turnComplete"],i);const s=c(n,["interrupted"]);s!=null&&f(t,["interrupted"],s);const o=c(n,["groundingMetadata"]);o!=null&&f(t,["groundingMetadata"],o);const r=c(n,["generationComplete"]);r!=null&&f(t,["generationComplete"],r);const a=c(n,["inputTranscription"]);a!=null&&f(t,["inputTranscription"],mM(a));const l=c(n,["outputTranscription"]);return l!=null&&f(t,["outputTranscription"],mM(l)),t}function iG(n){const t={},e=c(n,["args"]);e!=null&&f(t,["args"],e);const i=c(n,["name"]);return i!=null&&f(t,["name"],i),t}function sG(n){const t={},e=c(n,["functionCalls"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>iG(s))),f(t,["functionCalls"],i)}return t}function oG(n){const t={},e=c(n,["ids"]);return e!=null&&f(t,["ids"],e),t}function Zg(n){const t={},e=c(n,["modality"]);e!=null&&f(t,["modality"],e);const i=c(n,["tokenCount"]);return i!=null&&f(t,["tokenCount"],i),t}function rG(n){const t={},e=c(n,["promptTokenCount"]);e!=null&&f(t,["promptTokenCount"],e);const i=c(n,["cachedContentTokenCount"]);i!=null&&f(t,["cachedContentTokenCount"],i);const s=c(n,["candidatesTokenCount"]);s!=null&&f(t,["responseTokenCount"],s);const o=c(n,["toolUsePromptTokenCount"]);o!=null&&f(t,["toolUsePromptTokenCount"],o);const r=c(n,["thoughtsTokenCount"]);r!=null&&f(t,["thoughtsTokenCount"],r);const a=c(n,["totalTokenCount"]);a!=null&&f(t,["totalTokenCount"],a);const l=c(n,["promptTokensDetails"]);if(l!=null){let m=l;Array.isArray(m)&&(m=m.map(v=>Zg(v))),f(t,["promptTokensDetails"],m)}const u=c(n,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(v=>Zg(v))),f(t,["cacheTokensDetails"],m)}const h=c(n,["candidatesTokensDetails"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>Zg(v))),f(t,["responseTokensDetails"],m)}const p=c(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>Zg(v))),f(t,["toolUsePromptTokensDetails"],m)}const g=c(n,["trafficType"]);return g!=null&&f(t,["trafficType"],g),t}function aG(n){const t={},e=c(n,["timeLeft"]);return e!=null&&f(t,["timeLeft"],e),t}function lG(n){const t={},e=c(n,["newHandle"]);e!=null&&f(t,["newHandle"],e);const i=c(n,["resumable"]);i!=null&&f(t,["resumable"],i);const s=c(n,["lastConsumedClientMessageIndex"]);return s!=null&&f(t,["lastConsumedClientMessageIndex"],s),t}function uG(n){const t={},e=c(n,["setupComplete"]);e!=null&&f(t,["setupComplete"],W3(e));const i=c(n,["serverContent"]);i!=null&&f(t,["serverContent"],nG(i));const s=c(n,["toolCall"]);s!=null&&f(t,["toolCall"],sG(s));const o=c(n,["toolCallCancellation"]);o!=null&&f(t,["toolCallCancellation"],oG(o));const r=c(n,["usageMetadata"]);r!=null&&f(t,["usageMetadata"],rG(r));const a=c(n,["goAway"]);a!=null&&f(t,["goAway"],aG(a));const l=c(n,["sessionResumptionUpdate"]);return l!=null&&f(t,["sessionResumptionUpdate"],lG(l)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cG(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function fG(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function dG(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function hG(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],cG(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],fG(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],dG(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function r0(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>hG(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function pG(n){const t={},e=c(n,["anyOf"]);e!=null&&f(t,["anyOf"],e);const i=c(n,["default"]);i!=null&&f(t,["default"],i);const s=c(n,["description"]);s!=null&&f(t,["description"],s);const o=c(n,["enum"]);o!=null&&f(t,["enum"],o);const r=c(n,["example"]);r!=null&&f(t,["example"],r);const a=c(n,["format"]);a!=null&&f(t,["format"],a);const l=c(n,["items"]);l!=null&&f(t,["items"],l);const u=c(n,["maxItems"]);u!=null&&f(t,["maxItems"],u);const h=c(n,["maxLength"]);h!=null&&f(t,["maxLength"],h);const p=c(n,["maxProperties"]);p!=null&&f(t,["maxProperties"],p);const g=c(n,["maximum"]);g!=null&&f(t,["maximum"],g);const m=c(n,["minItems"]);m!=null&&f(t,["minItems"],m);const v=c(n,["minLength"]);v!=null&&f(t,["minLength"],v);const A=c(n,["minProperties"]);A!=null&&f(t,["minProperties"],A);const _=c(n,["minimum"]);_!=null&&f(t,["minimum"],_);const T=c(n,["nullable"]);T!=null&&f(t,["nullable"],T);const E=c(n,["pattern"]);E!=null&&f(t,["pattern"],E);const C=c(n,["properties"]);C!=null&&f(t,["properties"],C);const w=c(n,["propertyOrdering"]);w!=null&&f(t,["propertyOrdering"],w);const M=c(n,["required"]);M!=null&&f(t,["required"],M);const R=c(n,["title"]);R!=null&&f(t,["title"],R);const x=c(n,["type"]);return x!=null&&f(t,["type"],x),t}function gG(n){const t={};if(c(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const e=c(n,["category"]);e!=null&&f(t,["category"],e);const i=c(n,["threshold"]);return i!=null&&f(t,["threshold"],i),t}function mG(n){const t={},e=c(n,["behavior"]);e!=null&&f(t,["behavior"],e);const i=c(n,["description"]);i!=null&&f(t,["description"],i);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const o=c(n,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(n,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const a=c(n,["response"]);a!=null&&f(t,["response"],a);const l=c(n,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function yG(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function vG(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],yG(e)),t}function AG(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function TG(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],AG(e)),t}function SG(){return{}}function EG(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(u=>mG(u))),f(t,["functionDeclarations"],l)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&f(t,["googleSearch"],vG(i));const s=c(n,["googleSearchRetrieval"]);if(s!=null&&f(t,["googleSearchRetrieval"],TG(s)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&f(t,["urlContext"],SG());const r=c(n,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=c(n,["computerUse"]);return a!=null&&f(t,["computerUse"],a),t}function CG(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function _G(n){const t={},e=c(n,["latitude"]);e!=null&&f(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function bG(n){const t={},e=c(n,["latLng"]);e!=null&&f(t,["latLng"],_G(e));const i=c(n,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function wG(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],CG(e));const i=c(n,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],bG(i)),t}function MG(n){const t={},e=c(n,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function NI(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],MG(e)),t}function xG(n){const t={},e=c(n,["speaker"]);e!=null&&f(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&f(t,["voiceConfig"],NI(i)),t}function RG(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>xG(s))),f(t,["speakerVoiceConfigs"],i)}return t}function DG(n){const t={},e=c(n,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],NI(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&f(t,["multiSpeakerVoiceConfig"],RG(i));const s=c(n,["languageCode"]);return s!=null&&f(t,["languageCode"],s),t}function NG(n){const t={},e=c(n,["includeThoughts"]);e!=null&&f(t,["includeThoughts"],e);const i=c(n,["thinkingBudget"]);return i!=null&&f(t,["thinkingBudget"],i),t}function IG(n,t,e){const i={},s=c(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],r0(Ve(s)));const o=c(t,["temperature"]);o!=null&&f(i,["temperature"],o);const r=c(t,["topP"]);r!=null&&f(i,["topP"],r);const a=c(t,["topK"]);a!=null&&f(i,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const h=c(t,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=c(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const g=c(t,["logprobs"]);g!=null&&f(i,["logprobs"],g);const m=c(t,["presencePenalty"]);m!=null&&f(i,["presencePenalty"],m);const v=c(t,["frequencyPenalty"]);v!=null&&f(i,["frequencyPenalty"],v);const A=c(t,["seed"]);A!=null&&f(i,["seed"],A);const _=c(t,["responseMimeType"]);_!=null&&f(i,["responseMimeType"],_);const T=c(t,["responseSchema"]);T!=null&&f(i,["responseSchema"],pG(JC(T)));const E=c(t,["responseJsonSchema"]);if(E!=null&&f(i,["responseJsonSchema"],E),c(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(c(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const C=c(t,["safetySettings"]);if(e!==void 0&&C!=null){let U=C;Array.isArray(U)&&(U=U.map(Y=>gG(Y))),f(e,["safetySettings"],U)}const w=c(t,["tools"]);if(e!==void 0&&w!=null){let U=vf(w);Array.isArray(U)&&(U=U.map(Y=>EG(yf(Y)))),f(e,["tools"],U)}const M=c(t,["toolConfig"]);if(e!==void 0&&M!=null&&f(e,["toolConfig"],wG(M)),c(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=c(t,["cachedContent"]);e!==void 0&&R!=null&&f(e,["cachedContent"],oo(n,R));const x=c(t,["responseModalities"]);x!=null&&f(i,["responseModalities"],x);const D=c(t,["mediaResolution"]);D!=null&&f(i,["mediaResolution"],D);const N=c(t,["speechConfig"]);if(N!=null&&f(i,["speechConfig"],DG(KC(N))),c(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=c(t,["thinkingConfig"]);return P!=null&&f(i,["thinkingConfig"],NG(P)),i}function yM(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["contents"]);if(s!=null){let r=si(s);Array.isArray(r)&&(r=r.map(a=>r0(a))),f(e,["contents"],r)}const o=c(t,["config"]);return o!=null&&f(e,["generationConfig"],IG(n,o,e)),e}function LG(n,t){const e={},i=c(n,["taskType"]);t!==void 0&&i!=null&&f(t,["requests[]","taskType"],i);const s=c(n,["title"]);t!==void 0&&s!=null&&f(t,["requests[]","title"],s);const o=c(n,["outputDimensionality"]);if(t!==void 0&&o!=null&&f(t,["requests[]","outputDimensionality"],o),c(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(c(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return e}function PG(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["contents"]);s!=null&&f(e,["requests[]","content"],pI(n,s));const o=c(t,["config"]);o!=null&&f(e,["config"],LG(o,e));const r=c(t,["model"]);return r!==void 0&&f(e,["requests[]","model"],mt(n,r)),e}function kG(n,t){const e={};if(c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=c(n,["numberOfImages"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const s=c(n,["aspectRatio"]);t!==void 0&&s!=null&&f(t,["parameters","aspectRatio"],s);const o=c(n,["guidanceScale"]);if(t!==void 0&&o!=null&&f(t,["parameters","guidanceScale"],o),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const r=c(n,["safetyFilterLevel"]);t!==void 0&&r!=null&&f(t,["parameters","safetySetting"],r);const a=c(n,["personGeneration"]);t!==void 0&&a!=null&&f(t,["parameters","personGeneration"],a);const l=c(n,["includeSafetyAttributes"]);t!==void 0&&l!=null&&f(t,["parameters","includeSafetyAttributes"],l);const u=c(n,["includeRaiReason"]);t!==void 0&&u!=null&&f(t,["parameters","includeRaiReason"],u);const h=c(n,["language"]);t!==void 0&&h!=null&&f(t,["parameters","language"],h);const p=c(n,["outputMimeType"]);t!==void 0&&p!=null&&f(t,["parameters","outputOptions","mimeType"],p);const g=c(n,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&f(t,["parameters","outputOptions","compressionQuality"],g),c(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(c(n,["imageSize"])!==void 0)throw new Error("imageSize parameter is not supported in Gemini API.");if(c(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return e}function UG(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["prompt"]);s!=null&&f(e,["instances[0]","prompt"],s);const o=c(t,["config"]);return o!=null&&f(e,["config"],kG(o,e)),e}function FG(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","name"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function OG(n,t,e){const i={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const r=c(t,["filter"]);e!==void 0&&r!=null&&f(e,["_query","filter"],r);const a=c(t,["queryBase"]);return e!==void 0&&a!=null&&f(e,["_url","models_url"],yI(n,a)),i}function BG(n,t){const e={},i=c(t,["config"]);return i!=null&&f(e,["config"],OG(n,i,e)),e}function HG(n,t){const e={},i=c(n,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const s=c(n,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);const o=c(n,["defaultCheckpointId"]);return t!==void 0&&o!=null&&f(t,["defaultCheckpointId"],o),e}function VG(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","name"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],HG(s,e)),e}function GG(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","name"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function qG(n){const t={};if(c(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(c(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(c(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function zG(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["contents"]);if(s!=null){let r=si(s);Array.isArray(r)&&(r=r.map(a=>r0(a))),f(e,["contents"],r)}const o=c(t,["config"]);return o!=null&&f(e,["config"],qG(o)),e}function $G(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const e=c(n,["imageBytes"]);e!=null&&f(t,["bytesBase64Encoded"],Dl(e));const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function YG(n,t){const e={},i=c(n,["numberOfVideos"]);if(t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i),c(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(c(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=c(n,["durationSeconds"]);if(t!==void 0&&s!=null&&f(t,["parameters","durationSeconds"],s),c(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=c(n,["aspectRatio"]);if(t!==void 0&&o!=null&&f(t,["parameters","aspectRatio"],o),c(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const r=c(n,["personGeneration"]);if(t!==void 0&&r!=null&&f(t,["parameters","personGeneration"],r),c(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const a=c(n,["negativePrompt"]);t!==void 0&&a!=null&&f(t,["parameters","negativePrompt"],a);const l=c(n,["enhancePrompt"]);if(t!==void 0&&l!=null&&f(t,["parameters","enhancePrompt"],l),c(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(c(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(c(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return e}function XG(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["prompt"]);s!=null&&f(e,["instances[0]","prompt"],s);const o=c(t,["image"]);if(o!=null&&f(e,["instances[0]","image"],$G(o)),c(t,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const r=c(t,["config"]);return r!=null&&f(e,["config"],YG(r,e)),e}function JG(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function KG(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["data"]);i!=null&&f(t,["data"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function WG(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&f(t,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function QG(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],JG(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],KG(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],WG(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function Tf(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>QG(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function ZG(n){const t={},e=c(n,["anyOf"]);e!=null&&f(t,["anyOf"],e);const i=c(n,["default"]);i!=null&&f(t,["default"],i);const s=c(n,["description"]);s!=null&&f(t,["description"],s);const o=c(n,["enum"]);o!=null&&f(t,["enum"],o);const r=c(n,["example"]);r!=null&&f(t,["example"],r);const a=c(n,["format"]);a!=null&&f(t,["format"],a);const l=c(n,["items"]);l!=null&&f(t,["items"],l);const u=c(n,["maxItems"]);u!=null&&f(t,["maxItems"],u);const h=c(n,["maxLength"]);h!=null&&f(t,["maxLength"],h);const p=c(n,["maxProperties"]);p!=null&&f(t,["maxProperties"],p);const g=c(n,["maximum"]);g!=null&&f(t,["maximum"],g);const m=c(n,["minItems"]);m!=null&&f(t,["minItems"],m);const v=c(n,["minLength"]);v!=null&&f(t,["minLength"],v);const A=c(n,["minProperties"]);A!=null&&f(t,["minProperties"],A);const _=c(n,["minimum"]);_!=null&&f(t,["minimum"],_);const T=c(n,["nullable"]);T!=null&&f(t,["nullable"],T);const E=c(n,["pattern"]);E!=null&&f(t,["pattern"],E);const C=c(n,["properties"]);C!=null&&f(t,["properties"],C);const w=c(n,["propertyOrdering"]);w!=null&&f(t,["propertyOrdering"],w);const M=c(n,["required"]);M!=null&&f(t,["required"],M);const R=c(n,["title"]);R!=null&&f(t,["title"],R);const x=c(n,["type"]);return x!=null&&f(t,["type"],x),t}function jG(n){const t={},e=c(n,["featureSelectionPreference"]);return e!=null&&f(t,["featureSelectionPreference"],e),t}function tq(n){const t={},e=c(n,["method"]);e!=null&&f(t,["method"],e);const i=c(n,["category"]);i!=null&&f(t,["category"],i);const s=c(n,["threshold"]);return s!=null&&f(t,["threshold"],s),t}function eq(n){const t={};if(c(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const e=c(n,["description"]);e!=null&&f(t,["description"],e);const i=c(n,["name"]);i!=null&&f(t,["name"],i);const s=c(n,["parameters"]);s!=null&&f(t,["parameters"],s);const o=c(n,["parametersJsonSchema"]);o!=null&&f(t,["parametersJsonSchema"],o);const r=c(n,["response"]);r!=null&&f(t,["response"],r);const a=c(n,["responseJsonSchema"]);return a!=null&&f(t,["responseJsonSchema"],a),t}function nq(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function iq(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],nq(e)),t}function sq(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function oq(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],sq(e)),t}function rq(){return{}}function aq(n){const t={},e=c(n,["apiKeyString"]);return e!=null&&f(t,["apiKeyString"],e),t}function lq(n){const t={},e=c(n,["apiKeyConfig"]);e!=null&&f(t,["apiKeyConfig"],aq(e));const i=c(n,["authType"]);i!=null&&f(t,["authType"],i);const s=c(n,["googleServiceAccountConfig"]);s!=null&&f(t,["googleServiceAccountConfig"],s);const o=c(n,["httpBasicAuthConfig"]);o!=null&&f(t,["httpBasicAuthConfig"],o);const r=c(n,["oauthConfig"]);r!=null&&f(t,["oauthConfig"],r);const a=c(n,["oidcConfig"]);return a!=null&&f(t,["oidcConfig"],a),t}function uq(n){const t={},e=c(n,["authConfig"]);return e!=null&&f(t,["authConfig"],lq(e)),t}function cq(){return{}}function II(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let p=e;Array.isArray(p)&&(p=p.map(g=>eq(g))),f(t,["functionDeclarations"],p)}const i=c(n,["retrieval"]);i!=null&&f(t,["retrieval"],i);const s=c(n,["googleSearch"]);s!=null&&f(t,["googleSearch"],iq(s));const o=c(n,["googleSearchRetrieval"]);o!=null&&f(t,["googleSearchRetrieval"],oq(o)),c(n,["enterpriseWebSearch"])!=null&&f(t,["enterpriseWebSearch"],rq());const a=c(n,["googleMaps"]);a!=null&&f(t,["googleMaps"],uq(a)),c(n,["urlContext"])!=null&&f(t,["urlContext"],cq());const u=c(n,["codeExecution"]);u!=null&&f(t,["codeExecution"],u);const h=c(n,["computerUse"]);return h!=null&&f(t,["computerUse"],h),t}function fq(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["allowedFunctionNames"]);return i!=null&&f(t,["allowedFunctionNames"],i),t}function dq(n){const t={},e=c(n,["latitude"]);e!=null&&f(t,["latitude"],e);const i=c(n,["longitude"]);return i!=null&&f(t,["longitude"],i),t}function hq(n){const t={},e=c(n,["latLng"]);e!=null&&f(t,["latLng"],dq(e));const i=c(n,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function pq(n){const t={},e=c(n,["functionCallingConfig"]);e!=null&&f(t,["functionCallingConfig"],fq(e));const i=c(n,["retrievalConfig"]);return i!=null&&f(t,["retrievalConfig"],hq(i)),t}function gq(n){const t={},e=c(n,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function mq(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],gq(e)),t}function yq(n){const t={},e=c(n,["voiceConfig"]);if(e!=null&&f(t,["voiceConfig"],mq(e)),c(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=c(n,["languageCode"]);return i!=null&&f(t,["languageCode"],i),t}function vq(n){const t={},e=c(n,["includeThoughts"]);e!=null&&f(t,["includeThoughts"],e);const i=c(n,["thinkingBudget"]);return i!=null&&f(t,["thinkingBudget"],i),t}function Aq(n,t,e){const i={},s=c(t,["systemInstruction"]);e!==void 0&&s!=null&&f(e,["systemInstruction"],Tf(Ve(s)));const o=c(t,["temperature"]);o!=null&&f(i,["temperature"],o);const r=c(t,["topP"]);r!=null&&f(i,["topP"],r);const a=c(t,["topK"]);a!=null&&f(i,["topK"],a);const l=c(t,["candidateCount"]);l!=null&&f(i,["candidateCount"],l);const u=c(t,["maxOutputTokens"]);u!=null&&f(i,["maxOutputTokens"],u);const h=c(t,["stopSequences"]);h!=null&&f(i,["stopSequences"],h);const p=c(t,["responseLogprobs"]);p!=null&&f(i,["responseLogprobs"],p);const g=c(t,["logprobs"]);g!=null&&f(i,["logprobs"],g);const m=c(t,["presencePenalty"]);m!=null&&f(i,["presencePenalty"],m);const v=c(t,["frequencyPenalty"]);v!=null&&f(i,["frequencyPenalty"],v);const A=c(t,["seed"]);A!=null&&f(i,["seed"],A);const _=c(t,["responseMimeType"]);_!=null&&f(i,["responseMimeType"],_);const T=c(t,["responseSchema"]);T!=null&&f(i,["responseSchema"],ZG(JC(T)));const E=c(t,["responseJsonSchema"]);E!=null&&f(i,["responseJsonSchema"],E);const C=c(t,["routingConfig"]);C!=null&&f(i,["routingConfig"],C);const w=c(t,["modelSelectionConfig"]);w!=null&&f(i,["modelConfig"],jG(w));const M=c(t,["safetySettings"]);if(e!==void 0&&M!=null){let dt=M;Array.isArray(dt)&&(dt=dt.map(L=>tq(L))),f(e,["safetySettings"],dt)}const R=c(t,["tools"]);if(e!==void 0&&R!=null){let dt=vf(R);Array.isArray(dt)&&(dt=dt.map(L=>II(yf(L)))),f(e,["tools"],dt)}const x=c(t,["toolConfig"]);e!==void 0&&x!=null&&f(e,["toolConfig"],pq(x));const D=c(t,["labels"]);e!==void 0&&D!=null&&f(e,["labels"],D);const N=c(t,["cachedContent"]);e!==void 0&&N!=null&&f(e,["cachedContent"],oo(n,N));const P=c(t,["responseModalities"]);P!=null&&f(i,["responseModalities"],P);const U=c(t,["mediaResolution"]);U!=null&&f(i,["mediaResolution"],U);const Y=c(t,["speechConfig"]);Y!=null&&f(i,["speechConfig"],yq(KC(Y)));const rt=c(t,["audioTimestamp"]);rt!=null&&f(i,["audioTimestamp"],rt);const W=c(t,["thinkingConfig"]);return W!=null&&f(i,["thinkingConfig"],vq(W)),i}function vM(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["contents"]);if(s!=null){let r=si(s);Array.isArray(r)&&(r=r.map(a=>Tf(a))),f(e,["contents"],r)}const o=c(t,["config"]);return o!=null&&f(e,["generationConfig"],Aq(n,o,e)),e}function Tq(n,t){const e={},i=c(n,["taskType"]);t!==void 0&&i!=null&&f(t,["instances[]","task_type"],i);const s=c(n,["title"]);t!==void 0&&s!=null&&f(t,["instances[]","title"],s);const o=c(n,["outputDimensionality"]);t!==void 0&&o!=null&&f(t,["parameters","outputDimensionality"],o);const r=c(n,["mimeType"]);t!==void 0&&r!=null&&f(t,["instances[]","mimeType"],r);const a=c(n,["autoTruncate"]);return t!==void 0&&a!=null&&f(t,["parameters","autoTruncate"],a),e}function Sq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["contents"]);s!=null&&f(e,["instances[]","content"],pI(n,s));const o=c(t,["config"]);return o!=null&&f(e,["config"],Tq(o,e)),e}function Eq(n,t){const e={},i=c(n,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const s=c(n,["negativePrompt"]);t!==void 0&&s!=null&&f(t,["parameters","negativePrompt"],s);const o=c(n,["numberOfImages"]);t!==void 0&&o!=null&&f(t,["parameters","sampleCount"],o);const r=c(n,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const a=c(n,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const l=c(n,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const u=c(n,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const h=c(n,["personGeneration"]);t!==void 0&&h!=null&&f(t,["parameters","personGeneration"],h);const p=c(n,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);const g=c(n,["includeRaiReason"]);t!==void 0&&g!=null&&f(t,["parameters","includeRaiReason"],g);const m=c(n,["language"]);t!==void 0&&m!=null&&f(t,["parameters","language"],m);const v=c(n,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const A=c(n,["outputCompressionQuality"]);t!==void 0&&A!=null&&f(t,["parameters","outputOptions","compressionQuality"],A);const _=c(n,["addWatermark"]);t!==void 0&&_!=null&&f(t,["parameters","addWatermark"],_);const T=c(n,["imageSize"]);t!==void 0&&T!=null&&f(t,["parameters","sampleImageSize"],T);const E=c(n,["enhancePrompt"]);return t!==void 0&&E!=null&&f(t,["parameters","enhancePrompt"],E),e}function Cq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["prompt"]);s!=null&&f(e,["instances[0]","prompt"],s);const o=c(t,["config"]);return o!=null&&f(e,["config"],Eq(o,e)),e}function a0(n){const t={},e=c(n,["gcsUri"]);e!=null&&f(t,["gcsUri"],e);const i=c(n,["imageBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Dl(i));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function _q(n){const t={},e=c(n,["maskMode"]);e!=null&&f(t,["maskMode"],e);const i=c(n,["segmentationClasses"]);i!=null&&f(t,["maskClasses"],i);const s=c(n,["maskDilation"]);return s!=null&&f(t,["dilation"],s),t}function bq(n){const t={},e=c(n,["controlType"]);e!=null&&f(t,["controlType"],e);const i=c(n,["enableControlImageComputation"]);return i!=null&&f(t,["computeControl"],i),t}function wq(n){const t={},e=c(n,["styleDescription"]);return e!=null&&f(t,["styleDescription"],e),t}function Mq(n){const t={},e=c(n,["subjectType"]);e!=null&&f(t,["subjectType"],e);const i=c(n,["subjectDescription"]);return i!=null&&f(t,["subjectDescription"],i),t}function xq(n){const t={},e=c(n,["referenceImage"]);e!=null&&f(t,["referenceImage"],a0(e));const i=c(n,["referenceId"]);i!=null&&f(t,["referenceId"],i);const s=c(n,["referenceType"]);s!=null&&f(t,["referenceType"],s);const o=c(n,["maskImageConfig"]);o!=null&&f(t,["maskImageConfig"],_q(o));const r=c(n,["controlImageConfig"]);r!=null&&f(t,["controlImageConfig"],bq(r));const a=c(n,["styleImageConfig"]);a!=null&&f(t,["styleImageConfig"],wq(a));const l=c(n,["subjectImageConfig"]);return l!=null&&f(t,["subjectImageConfig"],Mq(l)),t}function Rq(n,t){const e={},i=c(n,["outputGcsUri"]);t!==void 0&&i!=null&&f(t,["parameters","storageUri"],i);const s=c(n,["negativePrompt"]);t!==void 0&&s!=null&&f(t,["parameters","negativePrompt"],s);const o=c(n,["numberOfImages"]);t!==void 0&&o!=null&&f(t,["parameters","sampleCount"],o);const r=c(n,["aspectRatio"]);t!==void 0&&r!=null&&f(t,["parameters","aspectRatio"],r);const a=c(n,["guidanceScale"]);t!==void 0&&a!=null&&f(t,["parameters","guidanceScale"],a);const l=c(n,["seed"]);t!==void 0&&l!=null&&f(t,["parameters","seed"],l);const u=c(n,["safetyFilterLevel"]);t!==void 0&&u!=null&&f(t,["parameters","safetySetting"],u);const h=c(n,["personGeneration"]);t!==void 0&&h!=null&&f(t,["parameters","personGeneration"],h);const p=c(n,["includeSafetyAttributes"]);t!==void 0&&p!=null&&f(t,["parameters","includeSafetyAttributes"],p);const g=c(n,["includeRaiReason"]);t!==void 0&&g!=null&&f(t,["parameters","includeRaiReason"],g);const m=c(n,["language"]);t!==void 0&&m!=null&&f(t,["parameters","language"],m);const v=c(n,["outputMimeType"]);t!==void 0&&v!=null&&f(t,["parameters","outputOptions","mimeType"],v);const A=c(n,["outputCompressionQuality"]);t!==void 0&&A!=null&&f(t,["parameters","outputOptions","compressionQuality"],A);const _=c(n,["addWatermark"]);t!==void 0&&_!=null&&f(t,["parameters","addWatermark"],_);const T=c(n,["editMode"]);t!==void 0&&T!=null&&f(t,["parameters","editMode"],T);const E=c(n,["baseSteps"]);return t!==void 0&&E!=null&&f(t,["parameters","editConfig","baseSteps"],E),e}function Dq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["prompt"]);s!=null&&f(e,["instances[0]","prompt"],s);const o=c(t,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>xq(l))),f(e,["instances[0]","referenceImages"],a)}const r=c(t,["config"]);return r!=null&&f(e,["config"],Rq(r,e)),e}function Nq(n,t){const e={},i=c(n,["includeRaiReason"]);t!==void 0&&i!=null&&f(t,["parameters","includeRaiReason"],i);const s=c(n,["outputMimeType"]);t!==void 0&&s!=null&&f(t,["parameters","outputOptions","mimeType"],s);const o=c(n,["outputCompressionQuality"]);t!==void 0&&o!=null&&f(t,["parameters","outputOptions","compressionQuality"],o);const r=c(n,["enhanceInputImage"]);t!==void 0&&r!=null&&f(t,["parameters","upscaleConfig","enhanceInputImage"],r);const a=c(n,["imagePreservationFactor"]);t!==void 0&&a!=null&&f(t,["parameters","upscaleConfig","imagePreservationFactor"],a);const l=c(n,["numberOfImages"]);t!==void 0&&l!=null&&f(t,["parameters","sampleCount"],l);const u=c(n,["mode"]);return t!==void 0&&u!=null&&f(t,["parameters","mode"],u),e}function Iq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["image"]);s!=null&&f(e,["instances[0]","image"],a0(s));const o=c(t,["upscaleFactor"]);o!=null&&f(e,["parameters","upscaleConfig","upscaleFactor"],o);const r=c(t,["config"]);return r!=null&&f(e,["config"],Nq(r,e)),e}function Lq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","name"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function Pq(n,t,e){const i={},s=c(t,["pageSize"]);e!==void 0&&s!=null&&f(e,["_query","pageSize"],s);const o=c(t,["pageToken"]);e!==void 0&&o!=null&&f(e,["_query","pageToken"],o);const r=c(t,["filter"]);e!==void 0&&r!=null&&f(e,["_query","filter"],r);const a=c(t,["queryBase"]);return e!==void 0&&a!=null&&f(e,["_url","models_url"],yI(n,a)),i}function kq(n,t){const e={},i=c(t,["config"]);return i!=null&&f(e,["config"],Pq(n,i,e)),e}function Uq(n,t){const e={},i=c(n,["displayName"]);t!==void 0&&i!=null&&f(t,["displayName"],i);const s=c(n,["description"]);t!==void 0&&s!=null&&f(t,["description"],s);const o=c(n,["defaultCheckpointId"]);return t!==void 0&&o!=null&&f(t,["defaultCheckpointId"],o),e}function Fq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],Uq(s,e)),e}function Oq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","name"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],s),e}function Bq(n,t){const e={},i=c(n,["systemInstruction"]);t!==void 0&&i!=null&&f(t,["systemInstruction"],Tf(Ve(i)));const s=c(n,["tools"]);if(t!==void 0&&s!=null){let r=s;Array.isArray(r)&&(r=r.map(a=>II(a))),f(t,["tools"],r)}const o=c(n,["generationConfig"]);return t!==void 0&&o!=null&&f(t,["generationConfig"],o),e}function Hq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["contents"]);if(s!=null){let r=si(s);Array.isArray(r)&&(r=r.map(a=>Tf(a))),f(e,["contents"],r)}const o=c(t,["config"]);return o!=null&&f(e,["config"],Bq(o,e)),e}function Vq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["contents"]);if(s!=null){let r=si(s);Array.isArray(r)&&(r=r.map(a=>Tf(a))),f(e,["contents"],r)}const o=c(t,["config"]);return o!=null&&f(e,["config"],o),e}function Gq(n){const t={},e=c(n,["uri"]);e!=null&&f(t,["gcsUri"],e);const i=c(n,["videoBytes"]);i!=null&&f(t,["bytesBase64Encoded"],Dl(i));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function qq(n,t){const e={},i=c(n,["numberOfVideos"]);t!==void 0&&i!=null&&f(t,["parameters","sampleCount"],i);const s=c(n,["outputGcsUri"]);t!==void 0&&s!=null&&f(t,["parameters","storageUri"],s);const o=c(n,["fps"]);t!==void 0&&o!=null&&f(t,["parameters","fps"],o);const r=c(n,["durationSeconds"]);t!==void 0&&r!=null&&f(t,["parameters","durationSeconds"],r);const a=c(n,["seed"]);t!==void 0&&a!=null&&f(t,["parameters","seed"],a);const l=c(n,["aspectRatio"]);t!==void 0&&l!=null&&f(t,["parameters","aspectRatio"],l);const u=c(n,["resolution"]);t!==void 0&&u!=null&&f(t,["parameters","resolution"],u);const h=c(n,["personGeneration"]);t!==void 0&&h!=null&&f(t,["parameters","personGeneration"],h);const p=c(n,["pubsubTopic"]);t!==void 0&&p!=null&&f(t,["parameters","pubsubTopic"],p);const g=c(n,["negativePrompt"]);t!==void 0&&g!=null&&f(t,["parameters","negativePrompt"],g);const m=c(n,["enhancePrompt"]);t!==void 0&&m!=null&&f(t,["parameters","enhancePrompt"],m);const v=c(n,["generateAudio"]);t!==void 0&&v!=null&&f(t,["parameters","generateAudio"],v);const A=c(n,["lastFrame"]);t!==void 0&&A!=null&&f(t,["instances[0]","lastFrame"],a0(A));const _=c(n,["compressionQuality"]);return t!==void 0&&_!=null&&f(t,["parameters","compressionQuality"],_),e}function zq(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["_url","model"],mt(n,i));const s=c(t,["prompt"]);s!=null&&f(e,["instances[0]","prompt"],s);const o=c(t,["image"]);o!=null&&f(e,["instances[0]","image"],a0(o));const r=c(t,["video"]);r!=null&&f(e,["instances[0]","video"],Gq(r));const a=c(t,["config"]);return a!=null&&f(e,["config"],qq(a,e)),e}function $q(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function Yq(n){const t={},e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Xq(n){const t={},e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function Jq(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],$q(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],Yq(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],Xq(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function Kq(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>Jq(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function Wq(n){const t={},e=c(n,["citationSources"]);return e!=null&&f(t,["citations"],e),t}function Qq(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&f(t,["urlRetrievalStatus"],i),t}function Zq(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>Qq(s))),f(t,["urlMetadata"],i)}return t}function jq(n){const t={},e=c(n,["content"]);e!=null&&f(t,["content"],Kq(e));const i=c(n,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],Wq(i));const s=c(n,["tokenCount"]);s!=null&&f(t,["tokenCount"],s);const o=c(n,["finishReason"]);o!=null&&f(t,["finishReason"],o);const r=c(n,["urlContextMetadata"]);r!=null&&f(t,["urlContextMetadata"],Zq(r));const a=c(n,["avgLogprobs"]);a!=null&&f(t,["avgLogprobs"],a);const l=c(n,["groundingMetadata"]);l!=null&&f(t,["groundingMetadata"],l);const u=c(n,["index"]);u!=null&&f(t,["index"],u);const h=c(n,["logprobsResult"]);h!=null&&f(t,["logprobsResult"],h);const p=c(n,["safetyRatings"]);return p!=null&&f(t,["safetyRatings"],p),t}function AM(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["candidates"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>jq(l))),f(t,["candidates"],a)}const s=c(n,["modelVersion"]);s!=null&&f(t,["modelVersion"],s);const o=c(n,["promptFeedback"]);o!=null&&f(t,["promptFeedback"],o);const r=c(n,["usageMetadata"]);return r!=null&&f(t,["usageMetadata"],r),t}function tz(n){const t={},e=c(n,["values"]);return e!=null&&f(t,["values"],e),t}function ez(){return{}}function nz(n){const t={},e=c(n,["embeddings"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>tz(o))),f(t,["embeddings"],s)}return c(n,["metadata"])!=null&&f(t,["metadata"],ez()),t}function iz(n){const t={},e=c(n,["bytesBase64Encoded"]);e!=null&&f(t,["imageBytes"],Dl(e));const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function LI(n){const t={},e=c(n,["safetyAttributes","categories"]);e!=null&&f(t,["categories"],e);const i=c(n,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const s=c(n,["contentType"]);return s!=null&&f(t,["contentType"],s),t}function sz(n){const t={},e=c(n,["_self"]);e!=null&&f(t,["image"],iz(e));const i=c(n,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const s=c(n,["_self"]);return s!=null&&f(t,["safetyAttributes"],LI(s)),t}function oz(n){const t={},e=c(n,["predictions"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>sz(o))),f(t,["generatedImages"],s)}const i=c(n,["positivePromptSafetyAttributes"]);return i!=null&&f(t,["positivePromptSafetyAttributes"],LI(i)),t}function rz(n){const t={},e=c(n,["baseModel"]);e!=null&&f(t,["baseModel"],e);const i=c(n,["createTime"]);i!=null&&f(t,["createTime"],i);const s=c(n,["updateTime"]);return s!=null&&f(t,["updateTime"],s),t}function NE(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["description"]);s!=null&&f(t,["description"],s);const o=c(n,["version"]);o!=null&&f(t,["version"],o);const r=c(n,["_self"]);r!=null&&f(t,["tunedModelInfo"],rz(r));const a=c(n,["inputTokenLimit"]);a!=null&&f(t,["inputTokenLimit"],a);const l=c(n,["outputTokenLimit"]);l!=null&&f(t,["outputTokenLimit"],l);const u=c(n,["supportedGenerationMethods"]);return u!=null&&f(t,["supportedActions"],u),t}function az(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["_self"]);if(s!=null){let o=vI(s);Array.isArray(o)&&(o=o.map(r=>NE(r))),f(t,["models"],o)}return t}function lz(){return{}}function uz(n){const t={},e=c(n,["totalTokens"]);e!=null&&f(t,["totalTokens"],e);const i=c(n,["cachedContentTokenCount"]);return i!=null&&f(t,["cachedContentTokenCount"],i),t}function cz(n){const t={},e=c(n,["video","uri"]);e!=null&&f(t,["uri"],e);const i=c(n,["video","encodedVideo"]);i!=null&&f(t,["videoBytes"],Dl(i));const s=c(n,["encoding"]);return s!=null&&f(t,["mimeType"],s),t}function fz(n){const t={},e=c(n,["_self"]);return e!=null&&f(t,["video"],cz(e)),t}function dz(n){const t={},e=c(n,["generatedSamples"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>fz(r))),f(t,["generatedVideos"],o)}const i=c(n,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const s=c(n,["raiMediaFilteredReasons"]);return s!=null&&f(t,["raiMediaFilteredReasons"],s),t}function hz(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["metadata"]);i!=null&&f(t,["metadata"],i);const s=c(n,["done"]);s!=null&&f(t,["done"],s);const o=c(n,["error"]);o!=null&&f(t,["error"],o);const r=c(n,["response","generateVideoResponse"]);return r!=null&&f(t,["response"],dz(r)),t}function pz(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function gz(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["data"]);i!=null&&f(t,["data"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function mz(n){const t={},e=c(n,["displayName"]);e!=null&&f(t,["displayName"],e);const i=c(n,["fileUri"]);i!=null&&f(t,["fileUri"],i);const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function yz(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],pz(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],gz(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],mz(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function vz(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>yz(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function Az(n){const t={},e=c(n,["citations"]);return e!=null&&f(t,["citations"],e),t}function Tz(n){const t={},e=c(n,["retrievedUrl"]);e!=null&&f(t,["retrievedUrl"],e);const i=c(n,["urlRetrievalStatus"]);return i!=null&&f(t,["urlRetrievalStatus"],i),t}function Sz(n){const t={},e=c(n,["urlMetadata"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>Tz(s))),f(t,["urlMetadata"],i)}return t}function Ez(n){const t={},e=c(n,["content"]);e!=null&&f(t,["content"],vz(e));const i=c(n,["citationMetadata"]);i!=null&&f(t,["citationMetadata"],Az(i));const s=c(n,["finishMessage"]);s!=null&&f(t,["finishMessage"],s);const o=c(n,["finishReason"]);o!=null&&f(t,["finishReason"],o);const r=c(n,["urlContextMetadata"]);r!=null&&f(t,["urlContextMetadata"],Sz(r));const a=c(n,["avgLogprobs"]);a!=null&&f(t,["avgLogprobs"],a);const l=c(n,["groundingMetadata"]);l!=null&&f(t,["groundingMetadata"],l);const u=c(n,["index"]);u!=null&&f(t,["index"],u);const h=c(n,["logprobsResult"]);h!=null&&f(t,["logprobsResult"],h);const p=c(n,["safetyRatings"]);return p!=null&&f(t,["safetyRatings"],p),t}function TM(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(h=>Ez(h))),f(t,["candidates"],u)}const s=c(n,["createTime"]);s!=null&&f(t,["createTime"],s);const o=c(n,["responseId"]);o!=null&&f(t,["responseId"],o);const r=c(n,["modelVersion"]);r!=null&&f(t,["modelVersion"],r);const a=c(n,["promptFeedback"]);a!=null&&f(t,["promptFeedback"],a);const l=c(n,["usageMetadata"]);return l!=null&&f(t,["usageMetadata"],l),t}function Cz(n){const t={},e=c(n,["truncated"]);e!=null&&f(t,["truncated"],e);const i=c(n,["token_count"]);return i!=null&&f(t,["tokenCount"],i),t}function _z(n){const t={},e=c(n,["values"]);e!=null&&f(t,["values"],e);const i=c(n,["statistics"]);return i!=null&&f(t,["statistics"],Cz(i)),t}function bz(n){const t={},e=c(n,["billableCharacterCount"]);return e!=null&&f(t,["billableCharacterCount"],e),t}function wz(n){const t={},e=c(n,["predictions[]","embeddings"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>_z(o))),f(t,["embeddings"],s)}const i=c(n,["metadata"]);return i!=null&&f(t,["metadata"],bz(i)),t}function Mz(n){const t={},e=c(n,["gcsUri"]);e!=null&&f(t,["gcsUri"],e);const i=c(n,["bytesBase64Encoded"]);i!=null&&f(t,["imageBytes"],Dl(i));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function PI(n){const t={},e=c(n,["safetyAttributes","categories"]);e!=null&&f(t,["categories"],e);const i=c(n,["safetyAttributes","scores"]);i!=null&&f(t,["scores"],i);const s=c(n,["contentType"]);return s!=null&&f(t,["contentType"],s),t}function QC(n){const t={},e=c(n,["_self"]);e!=null&&f(t,["image"],Mz(e));const i=c(n,["raiFilteredReason"]);i!=null&&f(t,["raiFilteredReason"],i);const s=c(n,["_self"]);s!=null&&f(t,["safetyAttributes"],PI(s));const o=c(n,["prompt"]);return o!=null&&f(t,["enhancedPrompt"],o),t}function xz(n){const t={},e=c(n,["predictions"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>QC(o))),f(t,["generatedImages"],s)}const i=c(n,["positivePromptSafetyAttributes"]);return i!=null&&f(t,["positivePromptSafetyAttributes"],PI(i)),t}function Rz(n){const t={},e=c(n,["predictions"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>QC(s))),f(t,["generatedImages"],i)}return t}function Dz(n){const t={},e=c(n,["predictions"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>QC(s))),f(t,["generatedImages"],i)}return t}function Nz(n){const t={},e=c(n,["endpoint"]);e!=null&&f(t,["name"],e);const i=c(n,["deployedModelId"]);return i!=null&&f(t,["deployedModelId"],i),t}function Iz(n){const t={},e=c(n,["labels","google-vertex-llm-tuning-base-model-id"]);e!=null&&f(t,["baseModel"],e);const i=c(n,["createTime"]);i!=null&&f(t,["createTime"],i);const s=c(n,["updateTime"]);return s!=null&&f(t,["updateTime"],s),t}function Lz(n){const t={},e=c(n,["checkpointId"]);e!=null&&f(t,["checkpointId"],e);const i=c(n,["epoch"]);i!=null&&f(t,["epoch"],i);const s=c(n,["step"]);return s!=null&&f(t,["step"],s),t}function IE(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["displayName"]);i!=null&&f(t,["displayName"],i);const s=c(n,["description"]);s!=null&&f(t,["description"],s);const o=c(n,["versionId"]);o!=null&&f(t,["version"],o);const r=c(n,["deployedModels"]);if(r!=null){let p=r;Array.isArray(p)&&(p=p.map(g=>Nz(g))),f(t,["endpoints"],p)}const a=c(n,["labels"]);a!=null&&f(t,["labels"],a);const l=c(n,["_self"]);l!=null&&f(t,["tunedModelInfo"],Iz(l));const u=c(n,["defaultCheckpointId"]);u!=null&&f(t,["defaultCheckpointId"],u);const h=c(n,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(g=>Lz(g))),f(t,["checkpoints"],p)}return t}function Pz(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["_self"]);if(s!=null){let o=vI(s);Array.isArray(o)&&(o=o.map(r=>IE(r))),f(t,["models"],o)}return t}function kz(){return{}}function Uz(n){const t={},e=c(n,["totalTokens"]);return e!=null&&f(t,["totalTokens"],e),t}function Fz(n){const t={},e=c(n,["tokensInfo"]);return e!=null&&f(t,["tokensInfo"],e),t}function Oz(n){const t={},e=c(n,["gcsUri"]);e!=null&&f(t,["uri"],e);const i=c(n,["bytesBase64Encoded"]);i!=null&&f(t,["videoBytes"],Dl(i));const s=c(n,["mimeType"]);return s!=null&&f(t,["mimeType"],s),t}function Bz(n){const t={},e=c(n,["_self"]);return e!=null&&f(t,["video"],Oz(e)),t}function Hz(n){const t={},e=c(n,["videos"]);if(e!=null){let o=e;Array.isArray(o)&&(o=o.map(r=>Bz(r))),f(t,["generatedVideos"],o)}const i=c(n,["raiMediaFilteredCount"]);i!=null&&f(t,["raiMediaFilteredCount"],i);const s=c(n,["raiMediaFilteredReasons"]);return s!=null&&f(t,["raiMediaFilteredReasons"],s),t}function Vz(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["metadata"]);i!=null&&f(t,["metadata"],i);const s=c(n,["done"]);s!=null&&f(t,["done"],s);const o=c(n,["error"]);o!=null&&f(t,["error"],o);const r=c(n,["response"]);return r!=null&&f(t,["response"],Hz(r)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Gz="Content-Type",qz="X-Server-Timeout",zz="User-Agent",LE="x-goog-api-client",$z="1.11.0",Yz=`google-genai-sdk/${$z}`,Xz="v1beta1",Jz="v1beta",SM=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Kz{constructor(t){var e,i;this.clientOptions=Object.assign(Object.assign({},t),{project:t.project,location:t.location,apiKey:t.apiKey,vertexai:t.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(e=this.clientOptions.apiVersion)!==null&&e!==void 0?e:Xz,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Jz,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,t.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&i.push(t.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const t=this.getBaseUrl(),e=new URL(t);return e.protocol=e.protocol=="http:"?"ws":"wss",e.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,e,i){const s=[this.getRequestUrlInternal(e)];return i&&s.push(this.getBaseResourcePath()),t!==""&&s.push(t),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(t){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,i);if(t.queryParams)for(const[r,a]of Object.entries(t.queryParams))s.searchParams.append(r,String(a));let o={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=t.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,e,t.abortSignal),this.unaryApiCall(s,o,t.httpMethod)}patchHttpOptions(t,e){const i=JSON.parse(JSON.stringify(t));for(const[s,o]of Object.entries(e))typeof o=="object"?i[s]=Object.assign(Object.assign({},i[s]),o):o!==void 0&&(i[s]=o);return i}async requestStream(t){let e=this.clientOptions.httpOptions;t.httpOptions&&(e=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));const i=this.shouldPrependVertexProjectPath(t),s=this.constructUrl(t.path,e,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=t.body,o=await this.includeExtraHttpOptionsToRequestInit(o,e,t.abortSignal),this.streamApiCall(s,o,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,e,i){if(e&&e.timeout||i){const s=new AbortController,o=s.signal;if(e.timeout&&(e==null?void 0:e.timeout)>0){const r=setTimeout(()=>s.abort(),e.timeout);r&&typeof r.unref=="function"&&r.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),t.signal=o}return e&&e.extraBody!==null&&Wz(t,e.extraBody),t.headers=await this.getHeadersInternal(e),t}async unaryApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async s=>(await EM(s),new bE(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(t,e,i){return this.apiCall(t.toString(),Object.assign(Object.assign({},e),{method:i})).then(async s=>(await EM(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(t){var e;return mu(this,arguments,function*(){const s=(e=t==null?void 0:t.body)===null||e===void 0?void 0:e.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let r="";for(;;){const{done:a,value:l}=yield Mt(s.read());if(a){if(r.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=o.decode(l,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const g=JSON.parse(JSON.stringify(p.error)),m=g.status,v=g.code,A=`got status: ${m}. ${JSON.stringify(p)}`;if(v>=400&&v<600)throw new o0({message:A,status:v})}}catch(p){if(p.name==="ApiError")throw p}r+=u;let h=r.match(SM);for(;h;){const p=h[1];try{const g=new Response(p,{headers:t==null?void 0:t.headers,status:t==null?void 0:t.status,statusText:t==null?void 0:t.statusText});yield yield Mt(new bE(g)),r=r.slice(h[0].length),h=r.match(SM)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{s.releaseLock()}})}async apiCall(t,e){return fetch(t,e).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const t={},e=Yz+" "+this.clientOptions.userAgentExtra;return t[zz]=e,t[LE]=e,t[Gz]="application/json",t}async getHeadersInternal(t){const e=new Headers;if(t&&t.headers){for(const[i,s]of Object.entries(t.headers))e.append(i,s);t.timeout&&t.timeout>0&&e.append(qz,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(e),e}async uploadFile(t,e){var i;const s={};e!=null&&(s.mimeType=e.mimeType,s.name=e.name,s.displayName=e.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,r=await o.stat(t);s.sizeBytes=String(r.size);const a=(i=e==null?void 0:e.mimeType)!==null&&i!==void 0?i:r.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,e);return o.upload(t,l,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,e){var i;let s={};e!=null&&e.httpOptions?s=e.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${t.mimeType}`}};const o={file:t},r=await this.request({path:G("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:s});if(!r||!(r!=null&&r.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=r==null?void 0:r.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function EM(n){var t;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const e=n.status;let i;!((t=n.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw e>=400&&e<600?new o0({message:s,status:e}):new Error(s)}}function Wz(n,t){if(!t||Object.keys(t).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let e={};if(typeof n.body=="string"&&n.body.length>0)try{const o=JSON.parse(n.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))e=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(o,r){const a=Object.assign({},o);for(const l in r)if(Object.prototype.hasOwnProperty.call(r,l)){const u=r[l],h=a[l];u&&typeof u=="object"&&!Array.isArray(u)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=i(h,u):(h&&u&&typeof h!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof u}. Overwriting.`),a[l]=u)}return a}const s=i(e,t);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qz="mcp_used/unknown";let Zz=!1;function kI(n){for(const t of n)if(jz(t)||typeof t=="object"&&"inputSchema"in t)return!0;return Zz}function UI(n){var t;const e=(t=n[LE])!==null&&t!==void 0?t:"";n[LE]=(e+` ${Qz}`).trimStart()}function jz(n){return n!==null&&typeof n=="object"&&n instanceof ZC}function t4(n,t=100){return mu(this,arguments,function*(){let i,s=0;for(;s<t;){const o=yield Mt(n.listTools({cursor:i}));for(const r of o.tools)yield yield Mt(r),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class ZC{constructor(t=[],e){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=e}static create(t,e){return new ZC(t,e)}async initialize(){var t,e,i,s;if(this.mcpTools.length>0)return;const o={},r=[];for(const h of this.mcpClients)try{for(var a=!0,l=(e=void 0,Td(t4(h))),u;u=await l.next(),t=u.done,!t;a=!0){s=u.value,a=!1;const p=s;r.push(p);const g=p.name;if(o[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);o[g]=h}}catch(p){e={error:p}}finally{try{!a&&!t&&(i=l.return)&&await i.call(l)}finally{if(e)throw e.error}}this.mcpTools=r,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),KO(this.mcpTools,this.config)}async callTool(t){await this.initialize();const e=[];for(const i of t)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const r=await s.callTool({name:i.name,arguments:i.args},void 0,o);e.push({functionResponse:{name:i.name,response:r.isError?{error:r}:r}})}return e}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function e4(n,t,e){const i=new VO;let s;e.data instanceof Blob?s=JSON.parse(await e.data.text()):s=JSON.parse(e.data);const o=K3(s);Object.assign(i,o),t(i)}class n4{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i}async connect(t){var e,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),r=o4(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`;let u=()=>{};const h=new Promise(C=>{u=C}),p=t.callbacks,g=function(){u({})},m=this.apiClient,v={onopen:g,onmessage:C=>{e4(m,p.onmessage,C)},onerror:(e=p==null?void 0:p.onerror)!==null&&e!==void 0?e:function(C){},onclose:(i=p==null?void 0:p.onclose)!==null&&i!==void 0?i:function(C){}},A=this.webSocketFactory.create(l,s4(r),v);A.connect(),await h;const _=mt(this.apiClient,t.model),T=RI({model:_}),E=DE({setup:T});return A.send(JSON.stringify(E)),new i4(A,this.apiClient)}}class i4{constructor(t,e){this.conn=t,this.apiClient=e}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const e=XV(t),i=DI(e);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});const e=JV(t),i=DE(e);this.conn.send(JSON.stringify(i))}sendPlaybackControl(t){const e=DE({playbackControl:t});this.conn.send(JSON.stringify(e))}play(){this.sendPlaybackControl(iu.PLAY)}pause(){this.sendPlaybackControl(iu.PAUSE)}stop(){this.sendPlaybackControl(iu.STOP)}resetContext(){this.sendPlaybackControl(iu.RESET_CONTEXT)}close(){this.conn.close()}}function s4(n){const t={};return n.forEach((e,i)=>{t[i]=e}),t}function o4(n){const t=new Headers;for(const[e,i]of Object.entries(n))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const r4="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function a4(n,t,e){const i=new HO;let s;e.data instanceof Blob?s=await e.data.text():e.data instanceof ArrayBuffer?s=new TextDecoder().decode(e.data):s=e.data;const o=JSON.parse(s);if(n.isVertexAI()){const r=uG(o);Object.assign(i,r)}else{const r=H3(o);Object.assign(i,r)}t(i)}class l4{constructor(t,e,i){this.apiClient=t,this.auth=e,this.webSocketFactory=i,this.music=new n4(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var e,i,s,o,r,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const l=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let h;const p=this.apiClient.getDefaultHeaders();t.config&&t.config.tools&&kI(t.config.tools)&&UI(p);const g=d4(p);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g);else{const N=this.apiClient.getApiKey();let P="BidiGenerateContent",U="key";N!=null&&N.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",U="access_token"),h=`${l}/ws/google.ai.generativelanguage.${u}.GenerativeService.${P}?${U}=${N}`}let m=()=>{};const v=new Promise(N=>{m=N}),A=t.callbacks,_=function(){var N;(N=A==null?void 0:A.onopen)===null||N===void 0||N.call(A),m({})},T=this.apiClient,E={onopen:_,onmessage:N=>{a4(T,A.onmessage,N)},onerror:(e=A==null?void 0:A.onerror)!==null&&e!==void 0?e:function(N){},onclose:(i=A==null?void 0:A.onclose)!==null&&i!==void 0?i:function(N){}},C=this.webSocketFactory.create(h,f4(g),E);C.connect(),await v;let w=mt(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&w.startsWith("publishers/")){const N=this.apiClient.getProject(),P=this.apiClient.getLocation();w=`projects/${N}/locations/${P}/`+w}let M={};this.apiClient.isVertexAI()&&((s=t.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[ky.AUDIO]}:t.config.responseModalities=[ky.AUDIO]),!((o=t.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(a=(r=t.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[],x=[];for(const N of R)if(this.isCallableTool(N)){const P=N;x.push(await P.tool())}else x.push(N);x.length>0&&(t.config.tools=x);const D={model:w,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?M=S3(this.apiClient,D):M=qV(this.apiClient,D),delete M.config,C.send(JSON.stringify(M)),new c4(C,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}}const u4={turnComplete:!0};class c4{constructor(t,e){this.conn=t,this.apiClient=e}tLiveClientContent(t,e){if(e.turns!==null&&e.turns!==void 0){let i=[];try{i=si(e.turns),t.isVertexAI()?i=i.map(s=>Tf(s)):i=i.map(s=>r0(s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof e.turns}'`)}return{clientContent:{turns:i,turnComplete:e.turnComplete}}}return{clientContent:{turnComplete:e.turnComplete}}}tLiveClienttToolResponse(t,e){let i=[];if(e.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(e.functionResponses)?i=e.functionResponses:i=[e.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!t.isVertexAI()&&!("id"in o))throw new Error(r4)}return{toolResponse:{functionResponses:i}}}sendClientContent(t){t=Object.assign(Object.assign({},u4),t);const e=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(e))}sendRealtimeInput(t){let e={};this.apiClient.isVertexAI()?e={realtimeInput:_3(t)}:e={realtimeInput:YV(t)},this.conn.send(JSON.stringify(e))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");const e=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(e))}close(){this.conn.close()}}function f4(n){const t={};return n.forEach((e,i)=>{t[i]=e}),t}function d4(n){const t=new Headers;for(const[e,i]of Object.entries(n))t.append(e,i);return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CM=10;function _M(n){var t,e,i;if(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let s=!1;for(const r of(e=n==null?void 0:n.tools)!==null&&e!==void 0?e:[])if(yu(r)){s=!0;break}if(!s)return!0;const o=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function yu(n){return"callTool"in n&&typeof n.callTool=="function"}function h4(n){var t,e,i;return(i=(e=(t=n.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>yu(s)))!==null&&i!==void 0?i:!1}function p4(n){var t,e,i;return(i=(e=(t=n.config)===null||t===void 0?void 0:t.tools)===null||e===void 0?void 0:e.some(s=>!yu(s)))!==null&&i!==void 0?i:!1}function bM(n){var t;return!(!((t=n==null?void 0:n.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class g4 extends Rl{constructor(t){super(),this.apiClient=t,this.generateContent=async e=>{var i,s,o,r,a;const l=await this.processParamsMaybeAddMcpUsage(e);if(this.maybeMoveToResponseJsonSchem(e),!h4(e)||_M(e.config))return await this.generateContentInternal(l);if(p4(e))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,h;const p=si(l.contents),g=(o=(s=(i=l.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:CM;let m=0;for(;m<g&&(u=await this.generateContentInternal(l),!(!u.functionCalls||u.functionCalls.length===0));){const v=u.candidates[0].content,A=[];for(const _ of(a=(r=e.config)===null||r===void 0?void 0:r.tools)!==null&&a!==void 0?a:[])if(yu(_)){const E=await _.callTool(u.functionCalls);A.push(...E)}m++,h={role:"user",parts:A},l.contents=si(l.contents),l.contents.push(v),l.contents.push(h),bM(l.config)&&(p.push(v),p.push(h))}return bM(l.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async e=>{if(this.maybeMoveToResponseJsonSchem(e),_M(e.config)){const i=await this.processParamsMaybeAddMcpUsage(e);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(e)},this.generateImages=async e=>await this.generateImagesInternal(e).then(i=>{var s;let o;const r=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=l==null?void 0:l.safetyAttributes:r.push(l);let a;return o?a={generatedImages:r,positivePromptSafetyAttributes:o}:a={generatedImages:r},a}),this.list=async e=>{var i;const r={config:Object.assign(Object.assign({},{queryBase:!0}),e==null?void 0:e.config)};if(this.apiClient.isVertexAI()&&!r.config.queryBase){if(!((i=r.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");r.config.filter="labels.tune-type:*"}return new xg(El.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(r),r)},this.editImage=async e=>{const i={model:e.model,prompt:e.prompt,referenceImages:[],config:e.config};return e.referenceImages&&e.referenceImages&&(i.referenceImages=e.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async e=>{let i={numberOfImages:1,mode:"upscale"};e.config&&(i=Object.assign(Object.assign({},i),e.config));const s={model:e.model,image:e.image,upscaleFactor:e.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async e=>await this.generateVideosInternal(e)}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var e,i,s;const o=(e=t.config)===null||e===void 0?void 0:e.tools;if(!o)return t;const r=await Promise.all(o.map(async l=>yu(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:r})};if(a.config.tools=r,t.config&&t.config.tools&&kI(t.config.tools)){const l=(s=(i=t.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let u=Object.assign({},l);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),UI(u),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:u})}return a}async initAfcToolsMap(t){var e,i,s;const o=new Map;for(const r of(i=(e=t.config)===null||e===void 0?void 0:e.tools)!==null&&i!==void 0?i:[])if(yu(r)){const a=r,l=await a.tool();for(const u of(s=l.functionDeclarations)!==null&&s!==void 0?s:[]){if(!u.name)throw new Error("Function declaration name is required.");if(o.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);o.set(u.name,a)}}return o}async processAfcStream(t){var e,i,s;const o=(s=(i=(e=t.config)===null||e===void 0?void 0:e.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:CM;let r=!1,a=0;const l=await this.initAfcToolsMap(t);return function(u,h,p){var g,m;return mu(this,arguments,function*(){for(var v,A,_,T;a<o;){r&&(a++,r=!1);const M=yield Mt(u.processParamsMaybeAddMcpUsage(p)),R=yield Mt(u.generateContentStreamInternal(M)),x=[],D=[];try{for(var E=!0,C=(A=void 0,Td(R)),w;w=yield Mt(C.next()),v=w.done,!v;E=!0){T=w.value,E=!1;const N=T;if(yield yield Mt(N),N.candidates&&(!((g=N.candidates[0])===null||g===void 0)&&g.content)){D.push(N.candidates[0].content);for(const P of(m=N.candidates[0].content.parts)!==null&&m!==void 0?m:[])if(a<o&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(P.functionCall.name)){const U=yield Mt(h.get(P.functionCall.name).callTool([P.functionCall]));x.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(N){A={error:N}}finally{try{!E&&!v&&(_=C.return)&&(yield Mt(_.call(C)))}finally{if(A)throw A.error}}if(x.length>0){r=!0;const N=new kf;N.candidates=[{content:{role:"user",parts:x}}],yield yield Mt(N);const P=[];P.push(...D),P.push({role:"user",parts:x});const U=si(p.contents).concat(P);p.contents=U}else break}})}(this,l,t)}async generateContentInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=vM(this.apiClient,t);return a=G("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=TM(h),g=new kf;return Object.assign(g,p),g})}else{const u=yM(this.apiClient,t);return a=G("{model}:generateContent",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=AM(h),g=new kf;return Object.assign(g,p),g})}}async generateContentStreamInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=vM(this.apiClient,t);return a=G("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),r.then(function(p){return mu(this,arguments,function*(){var g,m,v,A;try{for(var _=!0,T=Td(p),E;E=yield Mt(T.next()),g=E.done,!g;_=!0){A=E.value,_=!1;const C=A,w=TM(yield Mt(C.json()));w.sdkHttpResponse={headers:C.headers};const M=new kf;Object.assign(M,w),yield yield Mt(M)}}catch(C){m={error:C}}finally{try{!_&&!g&&(v=T.return)&&(yield Mt(v.call(T)))}finally{if(m)throw m.error}}})})}else{const u=yM(this.apiClient,t);return a=G("{model}:streamGenerateContent?alt=sse",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}),r.then(function(p){return mu(this,arguments,function*(){var g,m,v,A;try{for(var _=!0,T=Td(p),E;E=yield Mt(T.next()),g=E.done,!g;_=!0){A=E.value,_=!1;const C=A,w=AM(yield Mt(C.json()));w.sdkHttpResponse={headers:C.headers};const M=new kf;Object.assign(M,w),yield yield Mt(M)}}catch(C){m={error:C}}finally{try{!_&&!g&&(v=T.return)&&(yield Mt(v.call(T)))}finally{if(m)throw m.error}}})})}}async embedContent(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Sq(this.apiClient,t);return a=G("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const p=wz(h),g=new Ww;return Object.assign(g,p),g})}else{const u=PG(this.apiClient,t);return a=G("{model}:batchEmbedContents",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const p=nz(h),g=new Ww;return Object.assign(g,p),g})}}async generateImagesInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Cq(this.apiClient,t);return a=G("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const p=xz(h),g=new Qw;return Object.assign(g,p),g})}else{const u=UG(this.apiClient,t);return a=G("{model}:predict",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const p=oz(h),g=new Qw;return Object.assign(g,p),g})}}async editImageInternal(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=Dq(this.apiClient,t);return o=G("{model}:predict",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const u=Rz(l),h=new PO;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=Iq(this.apiClient,t);return o=G("{model}:predict",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const u=Dz(l),h=new kO;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Lq(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>IE(h))}else{const u=FG(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>NE(h))}}async listInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=kq(this.apiClient,t);return a=G("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=Pz(h),g=new Zw;return Object.assign(g,p),g})}else{const u=BG(this.apiClient,t);return a=G("{models_url}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=az(h),g=new Zw;return Object.assign(g,p),g})}}async update(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Fq(this.apiClient,t);return a=G("{model}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>IE(h))}else{const u=VG(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>NE(h))}}async delete(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Oq(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(()=>{const h=kz(),p=new jw;return Object.assign(p,h),p})}else{const u=GG(this.apiClient,t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(()=>{const h=lz(),p=new jw;return Object.assign(p,h),p})}}async countTokens(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=Hq(this.apiClient,t);return a=G("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const p=Uz(h),g=new tM;return Object.assign(g,p),g})}else{const u=zG(this.apiClient,t);return a=G("{model}:countTokens",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const p=uz(h),g=new tM;return Object.assign(g,p),g})}}async computeTokens(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=Vq(this.apiClient,t);return o=G("{model}:computeTokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>{const u=Fz(l),h=new UO;return Object.assign(h,u),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=zq(this.apiClient,t);return a=G("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const p=Vz(h),g=new Uy;return Object.assign(g,p),g})}else{const u=XG(this.apiClient,t);return a=G("{model}:predictLongRunning",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>{const p=hz(h),g=new Uy;return Object.assign(g,p),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function m4(n){const t={},e=c(n,["operationName"]);e!=null&&f(t,["_url","operationName"],e);const i=c(n,["config"]);return i!=null&&f(t,["config"],i),t}function y4(n){const t={},e=c(n,["operationName"]);e!=null&&f(t,["_url","operationName"],e);const i=c(n,["config"]);return i!=null&&f(t,["config"],i),t}function v4(n){const t={},e=c(n,["operationName"]);e!=null&&f(t,["operationName"],e);const i=c(n,["resourceName"]);i!=null&&f(t,["_url","resourceName"],i);const s=c(n,["config"]);return s!=null&&f(t,["config"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class A4 extends Rl{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){const e=t.operation,i=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:o}});return e._fromAPIResponse({apiResponse:r,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:i});return e._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async get(t){const e=t.operation,i=t.config;if(e.name===void 0||e.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=e.name.split("/operations/")[0];let o;i&&"httpOptions"in i&&(o=i.httpOptions);const r=await this.fetchPredictVideosOperationInternal({operationName:e.name,resourceName:s,config:{httpOptions:o}});return e._fromAPIResponse({apiResponse:r,isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:e.name,config:i});return e._fromAPIResponse({apiResponse:s,isVertexAI:!1})}}async getVideosOperationInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=y4(t);return a=G("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else{const u=m4(t);return a=G("{operationName}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r}}async fetchPredictVideosOperationInternal(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=v4(t);return o=G("{resourceName}:fetchPredictOperation",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function T4(n){const t={},e=c(n,["voiceName"]);return e!=null&&f(t,["voiceName"],e),t}function FI(n){const t={},e=c(n,["prebuiltVoiceConfig"]);return e!=null&&f(t,["prebuiltVoiceConfig"],T4(e)),t}function S4(n){const t={},e=c(n,["speaker"]);e!=null&&f(t,["speaker"],e);const i=c(n,["voiceConfig"]);return i!=null&&f(t,["voiceConfig"],FI(i)),t}function E4(n){const t={},e=c(n,["speakerVoiceConfigs"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>S4(s))),f(t,["speakerVoiceConfigs"],i)}return t}function C4(n){const t={},e=c(n,["voiceConfig"]);e!=null&&f(t,["voiceConfig"],FI(e));const i=c(n,["multiSpeakerVoiceConfig"]);i!=null&&f(t,["multiSpeakerVoiceConfig"],E4(i));const s=c(n,["languageCode"]);return s!=null&&f(t,["languageCode"],s),t}function _4(n){const t={},e=c(n,["fps"]);e!=null&&f(t,["fps"],e);const i=c(n,["endOffset"]);i!=null&&f(t,["endOffset"],i);const s=c(n,["startOffset"]);return s!=null&&f(t,["startOffset"],s),t}function b4(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["data"]);e!=null&&f(t,["data"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function w4(n){const t={};if(c(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const e=c(n,["fileUri"]);e!=null&&f(t,["fileUri"],e);const i=c(n,["mimeType"]);return i!=null&&f(t,["mimeType"],i),t}function M4(n){const t={},e=c(n,["videoMetadata"]);e!=null&&f(t,["videoMetadata"],_4(e));const i=c(n,["thought"]);i!=null&&f(t,["thought"],i);const s=c(n,["inlineData"]);s!=null&&f(t,["inlineData"],b4(s));const o=c(n,["fileData"]);o!=null&&f(t,["fileData"],w4(o));const r=c(n,["thoughtSignature"]);r!=null&&f(t,["thoughtSignature"],r);const a=c(n,["codeExecutionResult"]);a!=null&&f(t,["codeExecutionResult"],a);const l=c(n,["executableCode"]);l!=null&&f(t,["executableCode"],l);const u=c(n,["functionCall"]);u!=null&&f(t,["functionCall"],u);const h=c(n,["functionResponse"]);h!=null&&f(t,["functionResponse"],h);const p=c(n,["text"]);return p!=null&&f(t,["text"],p),t}function x4(n){const t={},e=c(n,["parts"]);if(e!=null){let s=e;Array.isArray(s)&&(s=s.map(o=>M4(o))),f(t,["parts"],s)}const i=c(n,["role"]);return i!=null&&f(t,["role"],i),t}function R4(n){const t={},e=c(n,["behavior"]);e!=null&&f(t,["behavior"],e);const i=c(n,["description"]);i!=null&&f(t,["description"],i);const s=c(n,["name"]);s!=null&&f(t,["name"],s);const o=c(n,["parameters"]);o!=null&&f(t,["parameters"],o);const r=c(n,["parametersJsonSchema"]);r!=null&&f(t,["parametersJsonSchema"],r);const a=c(n,["response"]);a!=null&&f(t,["response"],a);const l=c(n,["responseJsonSchema"]);return l!=null&&f(t,["responseJsonSchema"],l),t}function D4(n){const t={},e=c(n,["startTime"]);e!=null&&f(t,["startTime"],e);const i=c(n,["endTime"]);return i!=null&&f(t,["endTime"],i),t}function N4(n){const t={},e=c(n,["timeRangeFilter"]);return e!=null&&f(t,["timeRangeFilter"],D4(e)),t}function I4(n){const t={},e=c(n,["mode"]);e!=null&&f(t,["mode"],e);const i=c(n,["dynamicThreshold"]);return i!=null&&f(t,["dynamicThreshold"],i),t}function L4(n){const t={},e=c(n,["dynamicRetrievalConfig"]);return e!=null&&f(t,["dynamicRetrievalConfig"],I4(e)),t}function P4(){return{}}function k4(n){const t={},e=c(n,["functionDeclarations"]);if(e!=null){let l=e;Array.isArray(l)&&(l=l.map(u=>R4(u))),f(t,["functionDeclarations"],l)}if(c(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=c(n,["googleSearch"]);i!=null&&f(t,["googleSearch"],N4(i));const s=c(n,["googleSearchRetrieval"]);if(s!=null&&f(t,["googleSearchRetrieval"],L4(s)),c(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(c(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");c(n,["urlContext"])!=null&&f(t,["urlContext"],P4());const r=c(n,["codeExecution"]);r!=null&&f(t,["codeExecution"],r);const a=c(n,["computerUse"]);return a!=null&&f(t,["computerUse"],a),t}function U4(n){const t={},e=c(n,["handle"]);if(e!=null&&f(t,["handle"],e),c(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function wM(){return{}}function F4(n){const t={},e=c(n,["disabled"]);e!=null&&f(t,["disabled"],e);const i=c(n,["startOfSpeechSensitivity"]);i!=null&&f(t,["startOfSpeechSensitivity"],i);const s=c(n,["endOfSpeechSensitivity"]);s!=null&&f(t,["endOfSpeechSensitivity"],s);const o=c(n,["prefixPaddingMs"]);o!=null&&f(t,["prefixPaddingMs"],o);const r=c(n,["silenceDurationMs"]);return r!=null&&f(t,["silenceDurationMs"],r),t}function O4(n){const t={},e=c(n,["automaticActivityDetection"]);e!=null&&f(t,["automaticActivityDetection"],F4(e));const i=c(n,["activityHandling"]);i!=null&&f(t,["activityHandling"],i);const s=c(n,["turnCoverage"]);return s!=null&&f(t,["turnCoverage"],s),t}function B4(n){const t={},e=c(n,["targetTokens"]);return e!=null&&f(t,["targetTokens"],e),t}function H4(n){const t={},e=c(n,["triggerTokens"]);e!=null&&f(t,["triggerTokens"],e);const i=c(n,["slidingWindow"]);return i!=null&&f(t,["slidingWindow"],B4(i)),t}function V4(n){const t={},e=c(n,["proactiveAudio"]);return e!=null&&f(t,["proactiveAudio"],e),t}function G4(n,t){const e={},i=c(n,["generationConfig"]);t!==void 0&&i!=null&&f(t,["setup","generationConfig"],i);const s=c(n,["responseModalities"]);t!==void 0&&s!=null&&f(t,["setup","generationConfig","responseModalities"],s);const o=c(n,["temperature"]);t!==void 0&&o!=null&&f(t,["setup","generationConfig","temperature"],o);const r=c(n,["topP"]);t!==void 0&&r!=null&&f(t,["setup","generationConfig","topP"],r);const a=c(n,["topK"]);t!==void 0&&a!=null&&f(t,["setup","generationConfig","topK"],a);const l=c(n,["maxOutputTokens"]);t!==void 0&&l!=null&&f(t,["setup","generationConfig","maxOutputTokens"],l);const u=c(n,["mediaResolution"]);t!==void 0&&u!=null&&f(t,["setup","generationConfig","mediaResolution"],u);const h=c(n,["seed"]);t!==void 0&&h!=null&&f(t,["setup","generationConfig","seed"],h);const p=c(n,["speechConfig"]);t!==void 0&&p!=null&&f(t,["setup","generationConfig","speechConfig"],C4(WC(p)));const g=c(n,["enableAffectiveDialog"]);t!==void 0&&g!=null&&f(t,["setup","generationConfig","enableAffectiveDialog"],g);const m=c(n,["systemInstruction"]);t!==void 0&&m!=null&&f(t,["setup","systemInstruction"],x4(Ve(m)));const v=c(n,["tools"]);if(t!==void 0&&v!=null){let M=vf(v);Array.isArray(M)&&(M=M.map(R=>k4(yf(R)))),f(t,["setup","tools"],M)}const A=c(n,["sessionResumption"]);t!==void 0&&A!=null&&f(t,["setup","sessionResumption"],U4(A));const _=c(n,["inputAudioTranscription"]);t!==void 0&&_!=null&&f(t,["setup","inputAudioTranscription"],wM());const T=c(n,["outputAudioTranscription"]);t!==void 0&&T!=null&&f(t,["setup","outputAudioTranscription"],wM());const E=c(n,["realtimeInputConfig"]);t!==void 0&&E!=null&&f(t,["setup","realtimeInputConfig"],O4(E));const C=c(n,["contextWindowCompression"]);t!==void 0&&C!=null&&f(t,["setup","contextWindowCompression"],H4(C));const w=c(n,["proactivity"]);return t!==void 0&&w!=null&&f(t,["setup","proactivity"],V4(w)),e}function q4(n,t){const e={},i=c(t,["model"]);i!=null&&f(e,["setup","model"],mt(n,i));const s=c(t,["config"]);return s!=null&&f(e,["config"],G4(s,e)),e}function z4(n,t,e){const i={},s=c(t,["expireTime"]);e!==void 0&&s!=null&&f(e,["expireTime"],s);const o=c(t,["newSessionExpireTime"]);e!==void 0&&o!=null&&f(e,["newSessionExpireTime"],o);const r=c(t,["uses"]);e!==void 0&&r!=null&&f(e,["uses"],r);const a=c(t,["liveConnectConstraints"]);e!==void 0&&a!=null&&f(e,["bidiGenerateContentSetup"],q4(n,a));const l=c(t,["lockAdditionalFields"]);return e!==void 0&&l!=null&&f(e,["fieldMask"],l),i}function $4(n,t){const e={},i=c(t,["config"]);return i!=null&&f(e,["config"],z4(n,i,e)),e}function Y4(n){const t={},e=c(n,["name"]);return e!=null&&f(t,["name"],e),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X4(n){const t=[];for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e)){const i=n[e];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(o=>`${e}.${o}`);t.push(...s)}else t.push(e)}return t.join(",")}function J4(n,t){let e=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const o=i.setup;typeof o=="object"&&o!==null?(n.bidiGenerateContentSetup=o,e=o):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(e){const o=X4(e);if(Array.isArray(t==null?void 0:t.lockAdditionalFields)&&(t==null?void 0:t.lockAdditionalFields.length)===0)o?n.fieldMask=o:delete n.fieldMask;else if(t!=null&&t.lockAdditionalFields&&t.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const r=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let a=[];s.length>0&&(a=s.map(u=>r.includes(u)?`generationConfig.${u}`:u));const l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?n.fieldMask=l.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class K4 extends Rl{constructor(t){super(),this.apiClient=t}async create(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const a=$4(this.apiClient,t);o=G("auth_tokens",a._url),r=a._query,delete a.config,delete a._url,delete a._query;const l=J4(a,t.config);return s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),s.then(u=>Y4(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function W4(n){const t={},e=c(n,["name"]);e!=null&&f(t,["_url","name"],e);const i=c(n,["config"]);return i!=null&&f(t,["config"],i),t}function Q4(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const s=c(n,["pageToken"]);t!==void 0&&s!=null&&f(t,["_query","pageToken"],s);const o=c(n,["filter"]);return t!==void 0&&o!=null&&f(t,["_query","filter"],o),e}function Z4(n){const t={},e=c(n,["config"]);return e!=null&&f(t,["config"],Q4(e,t)),t}function j4(n){const t={},e=c(n,["textInput"]);e!=null&&f(t,["textInput"],e);const i=c(n,["output"]);return i!=null&&f(t,["output"],i),t}function t6(n){const t={};if(c(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(c(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const e=c(n,["examples"]);if(e!=null){let i=e;Array.isArray(i)&&(i=i.map(s=>j4(s))),f(t,["examples","examples"],i)}return t}function e6(n,t){const e={};if(c(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=c(n,["tunedModelDisplayName"]);if(t!==void 0&&i!=null&&f(t,["displayName"],i),c(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=c(n,["epochCount"]);t!==void 0&&s!=null&&f(t,["tuningTask","hyperparameters","epochCount"],s);const o=c(n,["learningRateMultiplier"]);if(o!=null&&f(e,["tuningTask","hyperparameters","learningRateMultiplier"],o),c(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(c(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const r=c(n,["batchSize"]);t!==void 0&&r!=null&&f(t,["tuningTask","hyperparameters","batchSize"],r);const a=c(n,["learningRate"]);return t!==void 0&&a!=null&&f(t,["tuningTask","hyperparameters","learningRate"],a),e}function n6(n){const t={},e=c(n,["baseModel"]);e!=null&&f(t,["baseModel"],e);const i=c(n,["trainingDataset"]);i!=null&&f(t,["tuningTask","trainingData"],t6(i));const s=c(n,["config"]);return s!=null&&f(t,["config"],e6(s,t)),t}function i6(n){const t={},e=c(n,["name"]);e!=null&&f(t,["_url","name"],e);const i=c(n,["config"]);return i!=null&&f(t,["config"],i),t}function s6(n,t){const e={},i=c(n,["pageSize"]);t!==void 0&&i!=null&&f(t,["_query","pageSize"],i);const s=c(n,["pageToken"]);t!==void 0&&s!=null&&f(t,["_query","pageToken"],s);const o=c(n,["filter"]);return t!==void 0&&o!=null&&f(t,["_query","filter"],o),e}function o6(n){const t={},e=c(n,["config"]);return e!=null&&f(t,["config"],s6(e,t)),t}function r6(n,t){const e={},i=c(n,["gcsUri"]);t!==void 0&&i!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],i);const s=c(n,["vertexDatasetResource"]);if(t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s),c(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return e}function a6(n,t){const e={},i=c(n,["gcsUri"]);i!=null&&f(e,["validationDatasetUri"],i);const s=c(n,["vertexDatasetResource"]);return t!==void 0&&s!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],s),e}function l6(n,t){const e={},i=c(n,["validationDataset"]);t!==void 0&&i!=null&&f(t,["supervisedTuningSpec"],a6(i,e));const s=c(n,["tunedModelDisplayName"]);t!==void 0&&s!=null&&f(t,["tunedModelDisplayName"],s);const o=c(n,["description"]);t!==void 0&&o!=null&&f(t,["description"],o);const r=c(n,["epochCount"]);t!==void 0&&r!=null&&f(t,["supervisedTuningSpec","hyperParameters","epochCount"],r);const a=c(n,["learningRateMultiplier"]);t!==void 0&&a!=null&&f(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],a);const l=c(n,["exportLastCheckpointOnly"]);t!==void 0&&l!=null&&f(t,["supervisedTuningSpec","exportLastCheckpointOnly"],l);const u=c(n,["adapterSize"]);if(t!==void 0&&u!=null&&f(t,["supervisedTuningSpec","hyperParameters","adapterSize"],u),c(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(c(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return e}function u6(n){const t={},e=c(n,["baseModel"]);e!=null&&f(t,["baseModel"],e);const i=c(n,["trainingDataset"]);i!=null&&f(t,["supervisedTuningSpec","trainingDatasetUri"],r6(i,t));const s=c(n,["config"]);return s!=null&&f(t,["config"],l6(s,t)),t}function c6(n){const t={},e=c(n,["name"]);e!=null&&f(t,["model"],e);const i=c(n,["name"]);return i!=null&&f(t,["endpoint"],i),t}function OI(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["state"]);i!=null&&f(t,["state"],gI(i));const s=c(n,["createTime"]);s!=null&&f(t,["createTime"],s);const o=c(n,["tuningTask","startTime"]);o!=null&&f(t,["startTime"],o);const r=c(n,["tuningTask","completeTime"]);r!=null&&f(t,["endTime"],r);const a=c(n,["updateTime"]);a!=null&&f(t,["updateTime"],a);const l=c(n,["description"]);l!=null&&f(t,["description"],l);const u=c(n,["baseModel"]);u!=null&&f(t,["baseModel"],u);const h=c(n,["_self"]);h!=null&&f(t,["tunedModel"],c6(h));const p=c(n,["distillationSpec"]);p!=null&&f(t,["distillationSpec"],p);const g=c(n,["experiment"]);g!=null&&f(t,["experiment"],g);const m=c(n,["labels"]);m!=null&&f(t,["labels"],m);const v=c(n,["pipelineJob"]);v!=null&&f(t,["pipelineJob"],v);const A=c(n,["satisfiesPzi"]);A!=null&&f(t,["satisfiesPzi"],A);const _=c(n,["satisfiesPzs"]);_!=null&&f(t,["satisfiesPzs"],_);const T=c(n,["serviceAccount"]);T!=null&&f(t,["serviceAccount"],T);const E=c(n,["tunedModelDisplayName"]);return E!=null&&f(t,["tunedModelDisplayName"],E),t}function f6(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>OI(r))),f(t,["tuningJobs"],o)}return t}function d6(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["metadata"]);i!=null&&f(t,["metadata"],i);const s=c(n,["done"]);s!=null&&f(t,["done"],s);const o=c(n,["error"]);return o!=null&&f(t,["error"],o),t}function h6(n){const t={},e=c(n,["checkpointId"]);e!=null&&f(t,["checkpointId"],e);const i=c(n,["epoch"]);i!=null&&f(t,["epoch"],i);const s=c(n,["step"]);s!=null&&f(t,["step"],s);const o=c(n,["endpoint"]);return o!=null&&f(t,["endpoint"],o),t}function p6(n){const t={},e=c(n,["model"]);e!=null&&f(t,["model"],e);const i=c(n,["endpoint"]);i!=null&&f(t,["endpoint"],i);const s=c(n,["checkpoints"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>h6(r))),f(t,["checkpoints"],o)}return t}function PE(n){const t={},e=c(n,["name"]);e!=null&&f(t,["name"],e);const i=c(n,["state"]);i!=null&&f(t,["state"],gI(i));const s=c(n,["createTime"]);s!=null&&f(t,["createTime"],s);const o=c(n,["startTime"]);o!=null&&f(t,["startTime"],o);const r=c(n,["endTime"]);r!=null&&f(t,["endTime"],r);const a=c(n,["updateTime"]);a!=null&&f(t,["updateTime"],a);const l=c(n,["error"]);l!=null&&f(t,["error"],l);const u=c(n,["description"]);u!=null&&f(t,["description"],u);const h=c(n,["baseModel"]);h!=null&&f(t,["baseModel"],h);const p=c(n,["tunedModel"]);p!=null&&f(t,["tunedModel"],p6(p));const g=c(n,["supervisedTuningSpec"]);g!=null&&f(t,["supervisedTuningSpec"],g);const m=c(n,["tuningDataStats"]);m!=null&&f(t,["tuningDataStats"],m);const v=c(n,["encryptionSpec"]);v!=null&&f(t,["encryptionSpec"],v);const A=c(n,["partnerModelTuningSpec"]);A!=null&&f(t,["partnerModelTuningSpec"],A);const _=c(n,["distillationSpec"]);_!=null&&f(t,["distillationSpec"],_);const T=c(n,["experiment"]);T!=null&&f(t,["experiment"],T);const E=c(n,["labels"]);E!=null&&f(t,["labels"],E);const C=c(n,["pipelineJob"]);C!=null&&f(t,["pipelineJob"],C);const w=c(n,["satisfiesPzi"]);w!=null&&f(t,["satisfiesPzi"],w);const M=c(n,["satisfiesPzs"]);M!=null&&f(t,["satisfiesPzs"],M);const R=c(n,["serviceAccount"]);R!=null&&f(t,["serviceAccount"],R);const x=c(n,["tunedModelDisplayName"]);return x!=null&&f(t,["tunedModelDisplayName"],x),t}function g6(n){const t={},e=c(n,["sdkHttpResponse"]);e!=null&&f(t,["sdkHttpResponse"],e);const i=c(n,["nextPageToken"]);i!=null&&f(t,["nextPageToken"],i);const s=c(n,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(r=>PE(r))),f(t,["tuningJobs"],o)}return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class m6 extends Rl{constructor(t){super(),this.apiClient=t,this.get=async e=>await this.getInternal(e),this.list=async(e={})=>new xg(El.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(e),e),this.tune=async e=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(e);{const i=await this.tuneMldevInternal(e);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:_E.JOB_STATE_QUEUED}}}}async getInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=i6(t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>PE(h))}else{const u=W4(t);return a=G("{name}",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),r.then(h=>OI(h))}}async listInternal(t){var e,i,s,o;let r,a="",l={};if(this.apiClient.isVertexAI()){const u=o6(t);return a=G("tuningJobs",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=g6(h),g=new nM;return Object.assign(g,p),g})}else{const u=Z4(t);return a=G("tunedModels",u._url),l=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(s=t.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=t.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{const g=p;return g.sdkHttpResponse={headers:h.headers},g})),r.then(h=>{const p=f6(h),g=new nM;return Object.assign(g,p),g})}}async tuneInternal(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI()){const a=u6(t);return o=G("tuningJobs",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>PE(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var e,i;let s,o="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=n6(t);return o=G("tunedModels",a._url),r=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:o,queryParams:r,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(e=t.config)===null||e===void 0?void 0:e.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(l=>l.json()),s.then(l=>d6(l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y6{async download(t,e){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const v6=1024*1024*8,A6=3,T6=1e3,S6=2,iT="x-goog-upload-status";async function E6(n,t,e){var i,s,o;let r=0,a=0,l=new bE(new Response),u="upload";for(r=n.size;a<r;){const p=Math.min(v6,r-a),g=n.slice(a,a+p);a+p>=r&&(u+=", finalize");let m=0,v=T6;for(;m<A6&&(l=await e.request({path:"",body:g,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(p)}}}),!(!((i=l==null?void 0:l.headers)===null||i===void 0)&&i[iT]));)m++,await _6(v),v=v*S6;if(a+=p,((s=l==null?void 0:l.headers)===null||s===void 0?void 0:s[iT])!=="active")break;if(r<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const h=await(l==null?void 0:l.json());if(((o=l==null?void 0:l.headers)===null||o===void 0?void 0:o[iT])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return h.file}async function C6(n){return{size:n.size,type:n.type}}function _6(n){return new Promise(t=>setTimeout(t,n))}class b6{async upload(t,e,i){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await E6(t,e,i)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await C6(t)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class w6{create(t,e,i){return new M6(t,e,i)}}class M6{constructor(t,e,i){this.url=t,this.headers=e,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MM="x-goog-api-key";class x6{constructor(t){this.apiKey=t}async addAuthHeaders(t){if(t.get(MM)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(MM,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R6="gl-node/";class D6{constructor(t){var e;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(e=t.vertexai)!==null&&e!==void 0?e:!1,this.apiKey=t.apiKey;const i=LO(t.httpOptions,t.vertexai,void 0,void 0);i&&(t.httpOptions?t.httpOptions.baseUrl=i:t.httpOptions={baseUrl:i}),this.apiVersion=t.apiVersion;const s=new x6(this.apiKey);this.apiClient=new Kz({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:t.httpOptions,userAgentExtra:R6+"web",uploader:new b6,downloader:new y6}),this.models=new g4(this.apiClient),this.live=new l4(this.apiClient,s,new w6),this.batches=new nH(this.apiClient),this.chats=new rV(this.models,this.apiClient),this.caches=new iV(this.apiClient),this.files=new AV(this.apiClient),this.operations=new A4(this.apiClient),this.authTokens=new K4(this.apiClient),this.tunings=new m6(this.apiClient)}}const N6="AIzaSyDp99woRzp12H3efsdp-uxdr6AZlyke0Lo",xM=new D6({apiKey:N6}),RM=({pdfText:n,jobText:t})=>`
You are an expert recruiter. Compare the following resume and job description, and provide a compatibility score out of 100 with a one-line justification.
Resume:
${n}
Job Description:
${t}
Respond in this format:
Score: <number>
Reason: <short reason>
    `,I6=async({pdfText:n,url:t,description:e,setLoading:i,setResponseGenerated:s})=>{if(i(!0),console.log("sending request"),!t&&!e){alert("Please enter a valid URL or a job description"),i(!1);return}if(e&&t&&(i(!1),console.log("Either enter one or the other")),t!=null&&t.includes("linkedin.com")){console.log("linkedin"),i(!1);return}if(t)try{const r=(await Kt.post("http://localhost:4000/scrape",{url:t})).data.content,a=RM({pdfText:n,jobText:r}),u=(await xM.models.generateContent({model:"gemini-2.5-flash",contents:a})).text;return s(!0),i(!1),u}catch(o){return console.error("Comparison error:",o),"Error comparing resume and job description."}else if(e){const o=RM({pdfText:n,jobText:e}),a=(await xM.models.generateContent({model:"gemini-2.5-flash",contents:o})).text;return s(!0),i(!1),a}},L6=({url:n,pdfText:t,description:e,setResponseGenerated:i,responseGenerated:s})=>{const[o,r]=te.useState(!1);return $.jsx("button",{className:"cursor-pointer group relative overflow-hidden bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold px-12 py-4 rounded-2xl shadow-lg hover:shadow-purple-500/25 transition-all duration-300 ease-out hover:scale-105 active:scale-95",onClick:()=>I6({url:n,pdfText:t,description:e,setLoading:r,setResponseGenerated:i}),disabled:o,children:"Send Request"})},P6=()=>$.jsx("div",{children:"Output"});function k6(){const[n,t]=te.useState(""),[e,i]=te.useState(""),[s,o]=te.useState(""),[r,a]=te.useState(!1),[l,u]=te.useState("");return $.jsxs("main",{className:"w-screen min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex flex-col items-center justify-start p-0 m-0 overflow-hidden",children:[$.jsx(z2,{}),$.jsxs("div",{className:"content mt-20 px-10 flex flex-col items-center justify-center w-full overflow-x-hidden gap-5 overflow-hidden",children:[$.jsx("div",{className:"heading flex flex-col items-center justify-center w-full p-10 overflow-x-hidden",children:$.jsx("h1",{className:"text-3xl font-bold text-white/80",children:"Track your Applications and Resume Ratings"})}),r?$.jsx(P6,{}):$.jsx("div",{className:"upload-container sm:w-[80%] lg:w-full flex flex-col items-center justify-center overflow-x-hidden ",children:$.jsx(jU,{setPdfText:t,url:e,setUrl:i,setDescription:o,description:s})}),$.jsx(L6,{url:e,pdfText:n,description:s,setResponseGenerated:a,responseGenerated:r})]})]})}B2.createRoot(document.getElementById("root")).render($.jsx(te.StrictMode,{children:$.jsx(k6,{})}));
